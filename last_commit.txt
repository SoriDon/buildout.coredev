Repository: Products.PlonePAS


Branch: refs/heads/master
Date: 2017-10-27T00:27:06+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.PlonePAS/commit/b1b7eb918826d93edc3ccbdba0854ae6016baf15

Implemented hasProperty on MemberData.

Files changed:
M src/Products/PlonePAS/tools/memberdata.py

diff --git a/src/Products/PlonePAS/tools/memberdata.py b/src/Products/PlonePAS/tools/memberdata.py
index 990051a..493e1c4 100644
--- a/src/Products/PlonePAS/tools/memberdata.py
+++ b/src/Products/PlonePAS/tools/memberdata.py
@@ -315,6 +315,17 @@ def getProperty(self, id, default=_marker):
         # delegate back to the base implementation.
         return BaseMemberAdapter.getProperty(self, id, default)
 
+    @security.public
+    def hasProperty(self, propname):
+        """Does the member have the given property?
+        """
+        # Unfortunately, checking for a marker value does not work well:
+        # You get a ValueError when the property does not exist.
+        try:
+            return self.getProperty(propname, _marker) != _marker
+        except ValueError:
+            return 0
+
     def getPassword(self):
         """Returns None. Present to avoid NotImplementedError."""
         return None


