Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-03-06T18:46:11+01:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.restapi/commit/8f2f65e0c381988963e3ad3f1913ff91735ef231

Fix translation of user add exceptions (#1591)

Fix translation of user add exceptions, fixes #4395

Files changed:
A news/4395.bugfix
M src/plone/restapi/services/users/add.py

b'diff --git a/news/4395.bugfix b/news/4395.bugfix\nnew file mode 100644\nindex 000000000..0101d1241\n--- /dev/null\n+++ b/news/4395.bugfix\n@@ -0,0 +1,2 @@\n+Fix translation of the error message for a password that is too short while\n+adding a user. [davisagli]\ndiff --git a/src/plone/restapi/services/users/add.py b/src/plone/restapi/services/users/add.py\nindex ab22dabf1..fc03b4506 100644\n--- a/src/plone/restapi/services/users/add.py\n+++ b/src/plone/restapi/services/users/add.py\n@@ -210,7 +210,7 @@ def reply(self):\n             return dict(\n                 error=dict(\n                     type="MissingParameterError",\n-                    message=self.translate(str(e)),\n+                    message=self.translate(e.args[0]),\n                 )\n             )\n \n'

