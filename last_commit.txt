Repository: mockup


Branch: refs/heads/master
Date: 2016-01-24T20:34:23-05:00
Author: nathan.vangheem () <nathan.vangheem@wildcardcorp.com>
Commit: https://github.com/plone/mockup/commit/f3d294f38b8cc5248eaf4ddfa6c5642ca2246466

be able to use multiple importcss_file_filter files

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index bed7931..9f75a2d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,6 +8,9 @@ New:
 
 Fixes:
 
+- be able to use multiple importcss_file_filter files
+  [vangheem]
+
 - Calculate z-index for modals dynamically to always be on top
   [vangheem]
 
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index 707dee1..14e9dfe 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -398,6 +398,20 @@ define([
           self.$el.hide();
         }
 
+        if(tinyOptions.importcss_file_filter && tinyOptions.importcss_file_filter.indexOf(',') !== -1){
+          // need a custom function to check now
+          var files = tinyOptions.importcss_file_filter.split(',');
+          
+          tinyOptions.importcss_file_filter = function(value) {
+            for(var i=0; i<files.length; i++){
+              if(value.indexOf(files[i]) !== -1){
+                return true;
+              }
+            }
+            return false;
+          };
+        }
+
         tinymce.init(tinyOptions);
         self.tiny = tinymce.get(self.tinyId);
 


