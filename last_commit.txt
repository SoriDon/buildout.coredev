Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2022-07-19T16:43:05-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/e047855914150854238845af5dcc4c6585a0187b

Show footer portlets when managing all portlets from @@manage-portlets. fixes gh-281

Files changed:
A news/281.bugfix
M plonetheme/barceloneta/theme/rules.xml

b'diff --git a/news/281.bugfix b/news/281.bugfix\nnew file mode 100644\nindex 00000000..ac967bd9\n--- /dev/null\n+++ b/news/281.bugfix\n@@ -0,0 +1,2 @@\n+Show footer portlets when managing all portlets from @@manage-portlets\n+[frapell]\ndiff --git a/plonetheme/barceloneta/theme/rules.xml b/plonetheme/barceloneta/theme/rules.xml\nindex 3bc876a4..953a9392 100644\n--- a/plonetheme/barceloneta/theme/rules.xml\n+++ b/plonetheme/barceloneta/theme/rules.xml\n@@ -63,6 +63,8 @@\n   <after css:theme-children="#portal-column-two" css:content-children="#portal-column-two"></after>\n   <drop css:theme="#portal-column-two" css:if-not-content="#portal-column-two" />\n \n+  <!-- manage-portlets Footer portlets -->\n+  <after css:theme-children="#portal-footer-wrapper" css:content-children="#portal-footer-wrapper" css:if-content="#portal-footer-wrapper #portletmanager-plone-footerportlets"></after>\n \n   <!-- Footer -->\n   <xsl:variable name="footer_portlets" select="//footer[@id=\'portal-footer-wrapper\']//div[@class=\'portletWrapper\']/*[not(contains(@id,\'portal-colophon\')) and not(contains(@id,\'portal-footer-signature\')) and not(contains(@class,\'portletActions\'))]"></xsl:variable>\n'

Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2022-07-19T16:44:17-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/a9e31ab03404a9284249afc15294b74da2951f9a

Keep original header (Fixes issue with Static Text portlet in footer)

Files changed:
M plonetheme/barceloneta/theme/rules.xml

b'diff --git a/plonetheme/barceloneta/theme/rules.xml b/plonetheme/barceloneta/theme/rules.xml\nindex 953a9392..1cd14da8 100644\n--- a/plonetheme/barceloneta/theme/rules.xml\n+++ b/plonetheme/barceloneta/theme/rules.xml\n@@ -107,7 +107,7 @@\n             <xsl:when css:test=".card">\n               <xsl:choose>\n                 <xsl:when css:test=".card-header:not(.titleless)">\n-                  <div class="headline"><h2><xsl:value-of css:select=".card-header" /></h2></div>\n+                  <div class="headline"><h2><xsl:apply-templates select="./node()[@class=\'card-header\']/node()" /></h2></div>\n                 </xsl:when>\n               </xsl:choose>\n               <xsl:choose>\n'

Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2022-07-20T07:08:02+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/415bf6d18188ca1b83cc68f0a29af088048c1708

Merge pull request #299 from plone/frapell-footer-portlets

Footer portlet fixes

Files changed:
A news/281.bugfix
M plonetheme/barceloneta/theme/rules.xml

b'diff --git a/news/281.bugfix b/news/281.bugfix\nnew file mode 100644\nindex 00000000..ac967bd9\n--- /dev/null\n+++ b/news/281.bugfix\n@@ -0,0 +1,2 @@\n+Show footer portlets when managing all portlets from @@manage-portlets\n+[frapell]\ndiff --git a/plonetheme/barceloneta/theme/rules.xml b/plonetheme/barceloneta/theme/rules.xml\nindex 3bc876a4..1cd14da8 100644\n--- a/plonetheme/barceloneta/theme/rules.xml\n+++ b/plonetheme/barceloneta/theme/rules.xml\n@@ -63,6 +63,8 @@\n   <after css:theme-children="#portal-column-two" css:content-children="#portal-column-two"></after>\n   <drop css:theme="#portal-column-two" css:if-not-content="#portal-column-two" />\n \n+  <!-- manage-portlets Footer portlets -->\n+  <after css:theme-children="#portal-footer-wrapper" css:content-children="#portal-footer-wrapper" css:if-content="#portal-footer-wrapper #portletmanager-plone-footerportlets"></after>\n \n   <!-- Footer -->\n   <xsl:variable name="footer_portlets" select="//footer[@id=\'portal-footer-wrapper\']//div[@class=\'portletWrapper\']/*[not(contains(@id,\'portal-colophon\')) and not(contains(@id,\'portal-footer-signature\')) and not(contains(@class,\'portletActions\'))]"></xsl:variable>\n@@ -105,7 +107,7 @@\n             <xsl:when css:test=".card">\n               <xsl:choose>\n                 <xsl:when css:test=".card-header:not(.titleless)">\n-                  <div class="headline"><h2><xsl:value-of css:select=".card-header" /></h2></div>\n+                  <div class="headline"><h2><xsl:apply-templates select="./node()[@class=\'card-header\']/node()" /></h2></div>\n                 </xsl:when>\n               </xsl:choose>\n               <xsl:choose>\n'

