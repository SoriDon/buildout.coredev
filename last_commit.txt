Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-02-06T11:32:52+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/dd0445096ee66f6625d92bfd7761961ef47a7ac9

Remove plone-generate-gruntfile (it is all available through plone-compile-resources).

Files changed:
M CHANGES.rst
M setup.py
D Products/CMFPlone/_scripts/generate_gruntfile.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a557d38c6..ae63b8fa9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -25,6 +25,9 @@ Breaking changes:
 - Remove old PlacelessTranslationService.
   [jensens, ksuess]
 
+- Remove ``plone-generate-gruntfile`` (it is all available through ``plone-compile-resources``).
+  [jensens]
+
 New Features:
 
 - Fix imports to work with Python 3.
diff --git a/Products/CMFPlone/_scripts/generate_gruntfile.py b/Products/CMFPlone/_scripts/generate_gruntfile.py
deleted file mode 100644
index a7bde2534..000000000
--- a/Products/CMFPlone/_scripts/generate_gruntfile.py
+++ /dev/null
@@ -1,44 +0,0 @@
-# -*- coding: utf-8 -*-
-# DEPRECATED
-# This is more of a script runner for the _generate_gruntfile.py
-# script. Just a wrapper so that script can be simply called
-# from the bin directory
-from Products.CMFPlone._scripts.compile_resources import generate_gruntfile
-import argparse
-import os
-import sys
-
-parser = argparse.ArgumentParser(
-    description='Generate Gruntfile.js from a Plone site configuration')
-parser.add_argument('--site-id', dest='site_id',
-                    default='Plone', help='ID for the plone site id')
-parser.add_argument('--instance', dest='instance',
-                    help='path to instance executable. If not provided, '
-                         'will look in bin this was executed from for '
-                         'instance or client1')
-parser.add_argument('--compile-dir', dest='compile_dir', default='',
-                    help='Output directory for the compiled bundle files.')
-
-
-def main(argv=sys.argv):
-    print ('-' * 80)
-    print(
-        'DEPRECATED: {0}\n'
-        'Use "bin/plone-compile-resources -IC [other params]" instead.\n'
-        'For more information use "bin/plone-compile-resources --help"'.format(
-            argv[0]
-        )
-    )
-    print ('-' * 80)
-    args, _ = parser.parse_known_args()
-    # XXX is this a good way to do it?
-    base_path = os.path.sep.join(
-        os.path.abspath(sys.argv[0]).split(os.path.sep)[:-2])
-
-    generate_gruntfile(
-        base_path,
-        args.instance,
-        args.site_id,
-        args.compile_dir
-    )
-    print('DONE DEPRECATED {0} (see above)'.format(argv[0]))
diff --git a/setup.py b/setup.py
index 0255bd95b..c148e4f3a 100644
--- a/setup.py
+++ b/setup.py
@@ -150,7 +150,6 @@
     ],
     entry_points="""\
       [console_scripts]
-      plone-generate-gruntfile = Products.CMFPlone._scripts.generate_gruntfile:main
       plone-compile-resources = Products.CMFPlone._scripts.compile_resources:main
       """
 )


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-02-06T14:53:05+01:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/1fe2c68debc9ace484282639d012d2ece9af3ad6

Merge pull request #2292 from plone/remove-plone-generate-gruntfile

Remove plone-generate-gruntfile

Files changed:
M CHANGES.rst
M setup.py
D Products/CMFPlone/_scripts/generate_gruntfile.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a557d38c6..ae63b8fa9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -25,6 +25,9 @@ Breaking changes:
 - Remove old PlacelessTranslationService.
   [jensens, ksuess]
 
+- Remove ``plone-generate-gruntfile`` (it is all available through ``plone-compile-resources``).
+  [jensens]
+
 New Features:
 
 - Fix imports to work with Python 3.
diff --git a/Products/CMFPlone/_scripts/generate_gruntfile.py b/Products/CMFPlone/_scripts/generate_gruntfile.py
deleted file mode 100644
index a7bde2534..000000000
--- a/Products/CMFPlone/_scripts/generate_gruntfile.py
+++ /dev/null
@@ -1,44 +0,0 @@
-# -*- coding: utf-8 -*-
-# DEPRECATED
-# This is more of a script runner for the _generate_gruntfile.py
-# script. Just a wrapper so that script can be simply called
-# from the bin directory
-from Products.CMFPlone._scripts.compile_resources import generate_gruntfile
-import argparse
-import os
-import sys
-
-parser = argparse.ArgumentParser(
-    description='Generate Gruntfile.js from a Plone site configuration')
-parser.add_argument('--site-id', dest='site_id',
-                    default='Plone', help='ID for the plone site id')
-parser.add_argument('--instance', dest='instance',
-                    help='path to instance executable. If not provided, '
-                         'will look in bin this was executed from for '
-                         'instance or client1')
-parser.add_argument('--compile-dir', dest='compile_dir', default='',
-                    help='Output directory for the compiled bundle files.')
-
-
-def main(argv=sys.argv):
-    print ('-' * 80)
-    print(
-        'DEPRECATED: {0}\n'
-        'Use "bin/plone-compile-resources -IC [other params]" instead.\n'
-        'For more information use "bin/plone-compile-resources --help"'.format(
-            argv[0]
-        )
-    )
-    print ('-' * 80)
-    args, _ = parser.parse_known_args()
-    # XXX is this a good way to do it?
-    base_path = os.path.sep.join(
-        os.path.abspath(sys.argv[0]).split(os.path.sep)[:-2])
-
-    generate_gruntfile(
-        base_path,
-        args.instance,
-        args.site_id,
-        args.compile_dir
-    )
-    print('DONE DEPRECATED {0} (see above)'.format(argv[0]))
diff --git a/setup.py b/setup.py
index 0255bd95b..c148e4f3a 100644
--- a/setup.py
+++ b/setup.py
@@ -150,7 +150,6 @@
     ],
     entry_points="""\
       [console_scripts]
-      plone-generate-gruntfile = Products.CMFPlone._scripts.generate_gruntfile:main
       plone-compile-resources = Products.CMFPlone._scripts.compile_resources:main
       """
 )


