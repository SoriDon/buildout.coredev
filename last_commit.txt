Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2016-01-29T16:39:24+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.z3cform/commit/e4674df798bbf5913bf43440a61ffd1f38c026ea

Use doctest instead of zope.testing.doctest and adapt test to changes in Five

Files changed:
M CHANGES.rst
M plone/app/z3cform/inline_validation.rst
M plone/app/z3cform/tests/tests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6d1b30d..58d146f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -12,6 +12,8 @@ Fixes:
 
 - Fix ajax selection for add forms
   [tomgross]
+- Use doctest instead of zope.testing.doctest
+  [pbauer]
 
 
 1.1.8 (2016-01-08)
diff --git a/plone/app/z3cform/inline_validation.rst b/plone/app/z3cform/inline_validation.rst
index e1ab6bf..42d322b 100644
--- a/plone/app/z3cform/inline_validation.rst
+++ b/plone/app/z3cform/inline_validation.rst
@@ -67,7 +67,7 @@ Let's verify that worked:
     >>> context._REQUEST = request # evil test fake
     >>> formWrapper = getMultiAdapter((context, request), name=u"test-form")
     >>> formWrapper
-    <Products.Five.metaclass.MyFormWrapper object ...>
+    <Products.Five.browser.metaconfigure.MyFormWrapper object ...>
     >>> formWrapper.form
     <class 'plone.app.z3cform.tests.example.MyForm'>
 
diff --git a/plone/app/z3cform/tests/tests.py b/plone/app/z3cform/tests/tests.py
index dd25a64..5ffbbc4 100644
--- a/plone/app/z3cform/tests/tests.py
+++ b/plone/app/z3cform/tests/tests.py
@@ -2,9 +2,9 @@
 from plone.browserlayer.layer import mark_layer
 from zope.traversing.interfaces import BeforeTraverseEvent
 
+import doctest
 import unittest
 import zope.component.testing
-import zope.testing.doctest
 
 ROBOT_TEST_LEVEL = 5
 
@@ -36,31 +36,31 @@ def test_content_provider(self):
 
 def test_suite():
 
-    inlineValidationTests = zope.testing.doctest.DocFileSuite(
+    inlineValidationTests = doctest.DocFileSuite(
         'inline_validation.rst',
         package='plone.app.z3cform',
         optionflags=(
-            zope.testing.doctest.ELLIPSIS |
-            zope.testing.doctest.NORMALIZE_WHITESPACE
+            doctest.ELLIPSIS |
+            doctest.NORMALIZE_WHITESPACE
         )
     )
     inlineValidationTests.layer = PAZ3CForm_INTEGRATION_TESTING
 
     suite = unittest.TestSuite([
         unittest.makeSuite(IntegrationTests),
-        zope.testing.doctest.DocFileSuite(
+        doctest.DocFileSuite(
             'wysiwyg/README.rst',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,
             tearDown=zope.component.testing.tearDown,
         ),
-        zope.testing.doctest.DocFileSuite(
+        doctest.DocFileSuite(
             'queryselect/README.rst',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,
             tearDown=zope.component.testing.tearDown,
         ),
-        zope.testing.doctest.DocTestSuite(
+        doctest.DocTestSuite(
             'plone.app.z3cform.wysiwyg.widget',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,


Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2016-01-29T16:40:08+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/549e2e2f10c5eb6d21747f2ba2489a372a8e25a3

make test output work with Zope2 and Zope4

Files changed:
M CHANGES.rst
M plone/app/z3cform/inline_validation.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 58d146f..3b18d90 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -12,6 +12,7 @@ Fixes:
 
 - Fix ajax selection for add forms
   [tomgross]
+
 - Use doctest instead of zope.testing.doctest
   [pbauer]
 
diff --git a/plone/app/z3cform/inline_validation.rst b/plone/app/z3cform/inline_validation.rst
index 42d322b..b1379ce 100644
--- a/plone/app/z3cform/inline_validation.rst
+++ b/plone/app/z3cform/inline_validation.rst
@@ -67,7 +67,7 @@ Let's verify that worked:
     >>> context._REQUEST = request # evil test fake
     >>> formWrapper = getMultiAdapter((context, request), name=u"test-form")
     >>> formWrapper
-    <Products.Five.browser.metaconfigure.MyFormWrapper object ...>
+    <Products.Five...MyFormWrapper object ...>
     >>> formWrapper.form
     <class 'plone.app.z3cform.tests.example.MyForm'>
 


Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2016-01-29T16:40:31+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/5fb4e9a8d1fe279f4e1b1c8f75ef29ab6b3d90be

Merge pull request #38 from plone/thet-zope4

Zope4

Files changed:
M CHANGES.rst
M plone/app/z3cform/inline_validation.rst
M plone/app/z3cform/tests/tests.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6d1b30d..3b18d90 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -13,6 +13,9 @@ Fixes:
 - Fix ajax selection for add forms
   [tomgross]
 
+- Use doctest instead of zope.testing.doctest
+  [pbauer]
+
 
 1.1.8 (2016-01-08)
 ------------------
diff --git a/plone/app/z3cform/inline_validation.rst b/plone/app/z3cform/inline_validation.rst
index e1ab6bf..b1379ce 100644
--- a/plone/app/z3cform/inline_validation.rst
+++ b/plone/app/z3cform/inline_validation.rst
@@ -67,7 +67,7 @@ Let's verify that worked:
     >>> context._REQUEST = request # evil test fake
     >>> formWrapper = getMultiAdapter((context, request), name=u"test-form")
     >>> formWrapper
-    <Products.Five.metaclass.MyFormWrapper object ...>
+    <Products.Five...MyFormWrapper object ...>
     >>> formWrapper.form
     <class 'plone.app.z3cform.tests.example.MyForm'>
 
diff --git a/plone/app/z3cform/tests/tests.py b/plone/app/z3cform/tests/tests.py
index dd25a64..5ffbbc4 100644
--- a/plone/app/z3cform/tests/tests.py
+++ b/plone/app/z3cform/tests/tests.py
@@ -2,9 +2,9 @@
 from plone.browserlayer.layer import mark_layer
 from zope.traversing.interfaces import BeforeTraverseEvent
 
+import doctest
 import unittest
 import zope.component.testing
-import zope.testing.doctest
 
 ROBOT_TEST_LEVEL = 5
 
@@ -36,31 +36,31 @@ def test_content_provider(self):
 
 def test_suite():
 
-    inlineValidationTests = zope.testing.doctest.DocFileSuite(
+    inlineValidationTests = doctest.DocFileSuite(
         'inline_validation.rst',
         package='plone.app.z3cform',
         optionflags=(
-            zope.testing.doctest.ELLIPSIS |
-            zope.testing.doctest.NORMALIZE_WHITESPACE
+            doctest.ELLIPSIS |
+            doctest.NORMALIZE_WHITESPACE
         )
     )
     inlineValidationTests.layer = PAZ3CForm_INTEGRATION_TESTING
 
     suite = unittest.TestSuite([
         unittest.makeSuite(IntegrationTests),
-        zope.testing.doctest.DocFileSuite(
+        doctest.DocFileSuite(
             'wysiwyg/README.rst',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,
             tearDown=zope.component.testing.tearDown,
         ),
-        zope.testing.doctest.DocFileSuite(
+        doctest.DocFileSuite(
             'queryselect/README.rst',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,
             tearDown=zope.component.testing.tearDown,
         ),
-        zope.testing.doctest.DocTestSuite(
+        doctest.DocTestSuite(
             'plone.app.z3cform.wysiwyg.widget',
             package='plone.app.z3cform',
             setUp=zope.component.testing.setUp,


