Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2022-08-11T08:28:30+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/300249aaf4f703e6037a7f54fea0bd5eb90951df

remove the before 1900 dates formatting hack.

This was fixed in Python 3.2.

Files changed:
A news/152.bugfix
M plone/app/z3cform/widget.py

b'diff --git a/news/152.bugfix b/news/152.bugfix\nnew file mode 100644\nindex 0000000..6687a8a\n--- /dev/null\n+++ b/news/152.bugfix\n@@ -0,0 +1,3 @@\n+Removed formatting hack for dates before 1900. \n+This was fixed in Python 3.2. \n+[jensens]\ndiff --git a/plone/app/z3cform/widget.py b/plone/app/z3cform/widget.py\nindex 96e186b..7f809db 100644\n--- a/plone/app/z3cform/widget.py\n+++ b/plone/app/z3cform/widget.py\n@@ -189,12 +189,7 @@ def render(self):\n             self._formater,\n             "short",\n         )\n-        if field_value.year > 1900:\n-            return formatter.format(field_value)\n-\n-        # due to fantastic datetime.strftime we need this hack\n-        # for now ctime is default\n-        return field_value.ctime()\n+        return formatter.format(field_value)\n \n \n @implementer_only(IDatetimeWidget)\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2022-08-11T11:08:55+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/1369b77f0a04bec1726ff6f895ae3a8d7d618afa

Merge pull request #152 from plone/rm-dates-before-1900-hack

Remove the before 1900 dates formatting hack.

Files changed:
A news/152.bugfix
M plone/app/z3cform/widget.py

b'diff --git a/news/152.bugfix b/news/152.bugfix\nnew file mode 100644\nindex 0000000..6687a8a\n--- /dev/null\n+++ b/news/152.bugfix\n@@ -0,0 +1,3 @@\n+Removed formatting hack for dates before 1900. \n+This was fixed in Python 3.2. \n+[jensens]\ndiff --git a/plone/app/z3cform/widget.py b/plone/app/z3cform/widget.py\nindex 96e186b..7f809db 100644\n--- a/plone/app/z3cform/widget.py\n+++ b/plone/app/z3cform/widget.py\n@@ -189,12 +189,7 @@ def render(self):\n             self._formater,\n             "short",\n         )\n-        if field_value.year > 1900:\n-            return formatter.format(field_value)\n-\n-        # due to fantastic datetime.strftime we need this hack\n-        # for now ctime is default\n-        return field_value.ctime()\n+        return formatter.format(field_value)\n \n \n @implementer_only(IDatetimeWidget)\n'

