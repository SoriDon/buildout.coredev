Repository: plone.app.event


Branch: refs/heads/master
Date: 2016-06-06T08:38:14+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/321041ee7173f8a40b41af1e20fabed8d8ed54d8

Fixed possible cross site scripting (XSS) attack in location field.

Files changed:
M CHANGES.rst
M plone/app/event/bbb/portlets/portlet_events.pt
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/portlets/portlet_events.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 345a57d..30f6947 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -31,6 +31,8 @@ New features:
 
 Bug fixes:
 
+- Fixed possible cross site scripting (XSS) attack in location field.  [maurits]
+
 - Remove Archetypes based JavaScript code.
   [thet]
 
diff --git a/plone/app/event/bbb/portlets/portlet_events.pt b/plone/app/event/bbb/portlets/portlet_events.pt
index 52f36eb..835db64 100644
--- a/plone/app/event/bbb/portlets/portlet_events.pt
+++ b/plone/app/event/bbb/portlets/portlet_events.pt
@@ -38,7 +38,7 @@
             </span>
             <span class="location"
                 tal:condition="item/location"> &mdash;
-                <tal:location content="structure item/location">Location</tal:location>
+                <tal:location content="item/location">Location</tal:location>
             </span>
         </span>
     </dd>
diff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt
index a945dc6..f54e74c 100644
--- a/plone/app/event/browser/event_listing.pt
+++ b/plone/app/event/browser/event_listing.pt
@@ -65,7 +65,7 @@
             <tal:date tal:replace="structure python:view.formatted_date(data)"/>
             <div itemprop="location" class="location"
                 tal:condition="data/location"
-                tal:content="structure data/location">location</div>
+                tal:content="data/location">location</div>
           </div>
 
           <p itemprop="description" class="description" tal:condition="data/description" tal:content="data/description" />
diff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt
index 4e010e4..7eb538c 100644
--- a/plone/app/event/browser/event_summary.pt
+++ b/plone/app/event/browser/event_summary.pt
@@ -73,7 +73,7 @@
     <tal:cond condition="data/location">
       <li class="event-location">
         <strong i18n:translate="event_where">Where</strong>
-        <span itemprop="location" tal:content="structure data/location">Location</span>
+        <span itemprop="location" tal:content="data/location">Location</span>
       </li>
     </tal:cond>
     </tal:cond>
diff --git a/plone/app/event/portlets/portlet_events.pt b/plone/app/event/portlets/portlet_events.pt
index cb2775b..647217d 100644
--- a/plone/app/event/portlets/portlet_events.pt
+++ b/plone/app/event/portlets/portlet_events.pt
@@ -44,7 +44,7 @@
           </span>
           <span class="location"
               tal:condition="item_location"> &mdash;
-            <tal:location content="structure item_location">Location</tal:location>
+            <tal:location content="item_location">Location</tal:location>
           </span>
         </span>
       </li>


Repository: plone.app.event


Branch: refs/heads/master
Date: 2016-06-06T11:31:21+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/7ce07d987e3603620b93ffd2868c6e4fabef4512

Merge pull request #233 from plone/maurits-xss-master

Fixed possible XSS attack in location field. [master]

Files changed:
M CHANGES.rst
M plone/app/event/bbb/portlets/portlet_events.pt
M plone/app/event/browser/event_listing.pt
M plone/app/event/browser/event_summary.pt
M plone/app/event/portlets/portlet_events.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 345a57d..30f6947 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -31,6 +31,8 @@ New features:
 
 Bug fixes:
 
+- Fixed possible cross site scripting (XSS) attack in location field.  [maurits]
+
 - Remove Archetypes based JavaScript code.
   [thet]
 
diff --git a/plone/app/event/bbb/portlets/portlet_events.pt b/plone/app/event/bbb/portlets/portlet_events.pt
index 52f36eb..835db64 100644
--- a/plone/app/event/bbb/portlets/portlet_events.pt
+++ b/plone/app/event/bbb/portlets/portlet_events.pt
@@ -38,7 +38,7 @@
             </span>
             <span class="location"
                 tal:condition="item/location"> &mdash;
-                <tal:location content="structure item/location">Location</tal:location>
+                <tal:location content="item/location">Location</tal:location>
             </span>
         </span>
     </dd>
diff --git a/plone/app/event/browser/event_listing.pt b/plone/app/event/browser/event_listing.pt
index a945dc6..f54e74c 100644
--- a/plone/app/event/browser/event_listing.pt
+++ b/plone/app/event/browser/event_listing.pt
@@ -65,7 +65,7 @@
             <tal:date tal:replace="structure python:view.formatted_date(data)"/>
             <div itemprop="location" class="location"
                 tal:condition="data/location"
-                tal:content="structure data/location">location</div>
+                tal:content="data/location">location</div>
           </div>
 
           <p itemprop="description" class="description" tal:condition="data/description" tal:content="data/description" />
diff --git a/plone/app/event/browser/event_summary.pt b/plone/app/event/browser/event_summary.pt
index 4e010e4..7eb538c 100644
--- a/plone/app/event/browser/event_summary.pt
+++ b/plone/app/event/browser/event_summary.pt
@@ -73,7 +73,7 @@
     <tal:cond condition="data/location">
       <li class="event-location">
         <strong i18n:translate="event_where">Where</strong>
-        <span itemprop="location" tal:content="structure data/location">Location</span>
+        <span itemprop="location" tal:content="data/location">Location</span>
       </li>
     </tal:cond>
     </tal:cond>
diff --git a/plone/app/event/portlets/portlet_events.pt b/plone/app/event/portlets/portlet_events.pt
index cb2775b..647217d 100644
--- a/plone/app/event/portlets/portlet_events.pt
+++ b/plone/app/event/portlets/portlet_events.pt
@@ -44,7 +44,7 @@
           </span>
           <span class="location"
               tal:condition="item_location"> &mdash;
-            <tal:location content="structure item_location">Location</tal:location>
+            <tal:location content="item_location">Location</tal:location>
           </span>
         </span>
       </li>


