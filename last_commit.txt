Repository: plone.outputfilters


Branch: refs/heads/master
Date: 2019-01-07T08:06:46+01:00
Author: Andreas Jung√Ç (zopyx) <info@zopyx.com>
Commit: https://github.com/plone/plone.outputfilters/commit/0c614043b0e993ffd6b7402e454258c12e8f6263

anchors like &lt;a name=".."&gt; do not contain a href element

Files changed:
M plone/outputfilters/filters/resolveuid_and_caption.py

b"diff --git a/plone/outputfilters/filters/resolveuid_and_caption.py b/plone/outputfilters/filters/resolveuid_and_caption.py\nindex 096266d..13d5655 100644\n--- a/plone/outputfilters/filters/resolveuid_and_caption.py\n+++ b/plone/outputfilters/filters/resolveuid_and_caption.py\n@@ -114,7 +114,10 @@ def __call__(self, data):\n \n         for elem in soup.find_all(['a', 'area']):\n             attributes = elem.attrs\n-            href = attributes['href']\n+            href = attributes.get('href')\n+            # an 'a' anchor element has no href\n+            if not href:\n+                continue\n             url_parts = urlsplit(href)\n             scheme = url_parts[0]\n             # we are only interested in path and beyond /foo/bar?x=2#abc\n"

