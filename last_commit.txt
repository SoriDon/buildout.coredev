Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-14T23:39:04+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/a7e666a4b3b7623be02d3d11b53124331178fa94

Configuring with plone/meta

Files changed:
A .editorconfig
A .meta.toml
A .pre-commit-config.yaml
A news/243ca9ec.internal
A tox.ini
M pyproject.toml
M setup.cfg

b'diff --git a/.editorconfig b/.editorconfig\nnew file mode 100644\nindex 0000000..b4158b8\n--- /dev/null\n+++ b/.editorconfig\n@@ -0,0 +1,39 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+#\n+# EditorConfig Configuration file, for more details see:\n+# http://EditorConfig.org\n+# EditorConfig is a convention description, that could be interpreted\n+# by multiple editors to enforce common coding conventions for specific\n+# file types\n+\n+# top-most EditorConfig file:\n+# Will ignore other EditorConfig files in Home directory or upper tree level.\n+root = true\n+\n+\n+[*]  # For All Files\n+# Unix-style newlines with a newline ending every file\n+end_of_line = lf\n+insert_final_newline = true\n+trim_trailing_whitespace = true\n+# Set default charset\n+charset = utf-8\n+# Indent style default\n+indent_style = space\n+# Max Line Length - a hard line wrap, should be disabled\n+max_line_length = off\n+\n+[*.{py,cfg,ini}]\n+# 4 space indentation\n+indent_size = 4\n+\n+[*.{yml,zpt,pt,dtml,zcml}]\n+# 2 space indentation\n+indent_size = 2\n+\n+[{Makefile,.gitmodules}]\n+# Tab indentation (no size specified, but view as 4 spaces)\n+indent_style = tab\n+indent_size = unset\n+tab_width = unset\ndiff --git a/.meta.toml b/.meta.toml\nnew file mode 100644\nindex 0000000..17f7b14\n--- /dev/null\n+++ b/.meta.toml\n@@ -0,0 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[meta]\n+template = "default"\n+commit-id = "243ca9ec"\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..582f8ac\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,42 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+ci:\n+    autofix_prs: false\n+    autoupdate_schedule: monthly\n+\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+        args: [--py38-plus]\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/psf/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 3.0.2\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+        additional_dependencies:\n+          - tomli\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.2"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/news/243ca9ec.internal b/news/243ca9ec.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/243ca9ec.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 05b615d..9d0c563 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -1,3 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [tool.towncrier]\n filename = "CHANGES.rst"\n directory = "news/"\n@@ -18,3 +20,43 @@ showcontent = true\n directory = "bugfix"\n name = "Bug fixes:"\n showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "internal"\n+name = "Internal:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "documentation"\n+name = "Documentation:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "tests"\n+name = "Tests"\n+showcontent = true\n+\n+[tool.isort]\n+profile = "plone"\n+\n+[tool.black]\n+target-version = ["py38"]\n+\n+[tool.dependencychecker]\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # Zope dependencies\n+  \'Acquisition\', \'DateTime\', \'transaction\', \'zExceptions\', \'ZODB\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.deferredimport\', \'zope.event\',\n+  \'zope.exceptions\', \'zope.globalrequest\', \'zope.i18n\', \'zope.i18nmessageid\',\n+  \'zope.interface\', \'zope.lifecycleevent\', \'zope.location\', \'zope.publisher\',\n+  \'zope.schema\', \'zope.security\', \'zope.site\', \'zope.traversing\', \'AccessControl\',\n+]\n+\'plone.base\' = [\n+  \'setuptools\', \'AccessControl\', \'Products.BTreeFolder2\', \'Products.CMFCore\',\n+  \'Products.CMFDynamicViewFTI\', \'zope.deprecation\',\n+]\n+python-dateutil = [\'dateutil\']\ndiff --git a/setup.cfg b/setup.cfg\nindex fcaed5e..574f276 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -1,19 +1,28 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[bdist_wheel]\n+universal = 0\n+\n+[flake8]\n+doctests = 1\n+ignore =\n+    # black takes care of line length\n+    E501,\n+    # black takes care of where to break lines\n+    W503,\n+    # black takes care of spaces within slicing (list[:])\n+    E203,\n+    # black takes care of spaces after commas\n+    E231,\n+\n [check-manifest]\n ignore =\n+    .editorconfig\n+    .meta.toml\n+    .pre-commit-config.yaml\n+    tox.ini\n     Makefile\n     constraints.txt\n     instance.yaml\n     requirements.txt\n     sources.ini\n-\n-\n-[bdist_wheel]\n-universal = 1\n-\n-\n-[isort]\n-# black compatible Plone isort rules:\n-profile = black\n-force_alphabetical_sort = True\n-force_single_line = True\n-lines_after_imports = 2\ndiff --git a/tox.ini b/tox.ini\nnew file mode 100644\nindex 0000000..e0fcded\n--- /dev/null\n+++ b/tox.ini\n@@ -0,0 +1,50 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[tox]\n+envlist =\n+    format\n+    lint\n+    test\n+\n+[testenv]\n+allowlist_externals =\n+    sh\n+\n+[testenv:format]\n+description = automatically reformat code\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n+\n+[testenv:lint]\n+description = run linters that will help improve the code style\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a\n+\n+[testenv:dependencies]\n+description = check if the package defines all its dependencies and generate a graph out of them\n+deps =\n+    z3c.dependencychecker==2.11\n+    pipdeptree==2.5.1\n+    graphviz  # optional dependency of pipdeptree\n+commands =\n+    dependencychecker\n+    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+\n+[testenv:test]\n+usedevelop = true\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --test-path={toxinidir} -s plone.formwidget.recurrence\n+extras =\n+    test\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-14T23:41:07+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/6a1a361e09f7cb3b5b079881327a009b912275c1

chore: pyupgrade

Files changed:
M plone/formwidget/recurrence/tests/test_z3cwidget.py
M setup.py

b'diff --git a/plone/formwidget/recurrence/tests/test_z3cwidget.py b/plone/formwidget/recurrence/tests/test_z3cwidget.py\nindex 8ca24d5..39b3695 100644\n--- a/plone/formwidget/recurrence/tests/test_z3cwidget.py\n+++ b/plone/formwidget/recurrence/tests/test_z3cwidget.py\n@@ -23,7 +23,7 @@ class TestForm(SimpleItem):\n     day = FieldProperty(ITestForm["day"])\n \n     def __init__(self, recurrence, day):\n-        super(TestForm, self).__init__(id)\n+        super().__init__(id)\n         self.recurrence = recurrence\n         self.day = day\n \ndiff --git a/setup.py b/setup.py\nindex 2f00c6d..0eee7d5 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -8,7 +8,7 @@\n     name="plone.formwidget.recurrence",\n     version=version,\n     description="Recurrence widget for Plone",\n-    long_description="%s\\n%s" % (open("README.rst").read(), open("CHANGES.rst").read()),\n+    long_description="{}\\n{}".format(open("README.rst").read(), open("CHANGES.rst").read()),\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-14T23:41:30+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/10c168f5f0c33b7928f3c4b8a28e5f6d7e063385

chore: black

Files changed:
M plone/formwidget/recurrence/browser/i18n.py
M setup.py

b'diff --git a/plone/formwidget/recurrence/browser/i18n.py b/plone/formwidget/recurrence/browser/i18n.py\nindex 702fafd..a84383a 100644\n--- a/plone/formwidget/recurrence/browser/i18n.py\n+++ b/plone/formwidget/recurrence/browser/i18n.py\n@@ -164,6 +164,6 @@ def translations(request):\n             yearly=translate(_("template_yearly"), context=request),\n         ),\n         # a bit wonky here, except is a reserved word\n-        **{"except": translate(_("except"), context=request)}\n+        **{"except": translate(_("except"), context=request)},\n     )\n     return translation_table\ndiff --git a/setup.py b/setup.py\nindex 0eee7d5..65dd222 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -8,7 +8,9 @@\n     name="plone.formwidget.recurrence",\n     version=version,\n     description="Recurrence widget for Plone",\n-    long_description="{}\\n{}".format(open("README.rst").read(), open("CHANGES.rst").read()),\n+    long_description="{}\\n{}".format(\n+        open("README.rst").read(), open("CHANGES.rst").read()\n+    ),\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-14T23:47:50+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/1368c4e8584a7d4f817e2a51712f20cd8024e838

chore: zpretty

Files changed:
M plone/formwidget/recurrence/browser/configure.zcml
M plone/formwidget/recurrence/configure.zcml
M plone/formwidget/recurrence/profiles/default/metadata.xml
M plone/formwidget/recurrence/z3cform/configure.zcml
M plone/formwidget/recurrence/z3cform/recurrence_hidden.pt
M plone/formwidget/recurrence/z3cform/recurrence_input.pt

b'diff --git a/plone/formwidget/recurrence/browser/configure.zcml b/plone/formwidget/recurrence/browser/configure.zcml\nindex c565100..4bcf275 100644\n--- a/plone/formwidget/recurrence/browser/configure.zcml\n+++ b/plone/formwidget/recurrence/browser/configure.zcml\n@@ -2,12 +2,13 @@\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:browser="http://namespaces.zope.org/browser"\n     xmlns:z3c="http://namespaces.zope.org/z3c"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n   <!-- JSON recurrence view -->\n   <browser:page\n-      for="*"\n       name="json_recurrence"\n+      for="*"\n       class=".json_recurrence.RecurrenceView"\n       permission="zope2.View"\n       />\ndiff --git a/plone/formwidget/recurrence/configure.zcml b/plone/formwidget/recurrence/configure.zcml\nindex a6bb555..e475f05 100644\n--- a/plone/formwidget/recurrence/configure.zcml\n+++ b/plone/formwidget/recurrence/configure.zcml\n@@ -1,21 +1,25 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:five="http://namespaces.zope.org/five"\n-    xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:i18n="http://namespaces.zope.org/i18n"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="plone">\n+    xmlns:i18n="http://namespaces.zope.org/i18n"\n+    xmlns:zcml="http://namespaces.zope.org/zcml"\n+    i18n_domain="plone"\n+    >\n \n-  <include zcml:condition="installed z3c.form" package=".z3cform" />\n+  <include\n+      package=".z3cform"\n+      zcml:condition="installed z3c.form"\n+      />\n   <include package=".browser" />\n \n   <genericsetup:registerProfile\n       name="default"\n-      directory="profiles/default"\n       title="plone.formwidget.recurrence"\n       description="plone.formwidget.recurrence resource registration."\n-      for="plone.base.interfaces.IPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n+      for="plone.base.interfaces.IPloneSiteRoot"\n+      directory="profiles/default"\n       />\n \n </configure>\ndiff --git a/plone/formwidget/recurrence/profiles/default/metadata.xml b/plone/formwidget/recurrence/profiles/default/metadata.xml\nindex b6bd42a..8c4cdb0 100644\n--- a/plone/formwidget/recurrence/profiles/default/metadata.xml\n+++ b/plone/formwidget/recurrence/profiles/default/metadata.xml\n@@ -1,4 +1,4 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>3000</version>\n </metadata>\ndiff --git a/plone/formwidget/recurrence/z3cform/configure.zcml b/plone/formwidget/recurrence/z3cform/configure.zcml\nindex 4335056..cbac845 100644\n--- a/plone/formwidget/recurrence/z3cform/configure.zcml\n+++ b/plone/formwidget/recurrence/z3cform/configure.zcml\n@@ -1,38 +1,42 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:z3c="http://namespaces.zope.org/z3c"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-  <include package="z3c.form" file="meta.zcml"/>\n+  <include\n+      package="z3c.form"\n+      file="meta.zcml"\n+      />\n   <include package="z3c.form" />\n \n-  <adapter factory=".widget.RecurrenceFieldWidget"/>\n+  <adapter factory=".widget.RecurrenceFieldWidget" />\n   <class class=".widget.RecurrenceWidget">\n-  <require\n-      permission="zope.Public"\n-      interface=".interfaces.IRecurrenceWidget"\n-      />\n+    <require\n+        permission="zope.Public"\n+        interface=".interfaces.IRecurrenceWidget"\n+        />\n   </class>\n \n   <z3c:widgetTemplate\n-      mode="display"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_input.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="display"\n       />\n \n   <z3c:widgetTemplate\n-      mode="input"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_input.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="input"\n       />\n \n   <z3c:widgetTemplate\n-      mode="hidden"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_hidden.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="hidden"\n       />\n \n </configure>\ndiff --git a/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt b/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\nindex 2f0c710..62b3d72 100644\n--- a/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\n+++ b/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\n@@ -1,12 +1,16 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      tal:omit-tag="">\n-<input type="hidden"\n-   tal:attributes="id view/id;\n-                   name view/name;\n-                   class view/klass;\n-                   style view/style;\n-                   title view/title;\n-                   lang view/lang;\n-                   value view/value"/>\n+      tal:omit-tag=""\n+>\n+  <input type="hidden"\n+         tal:attributes="\n+           id view/id;\n+           name view/name;\n+           class view/klass;\n+           style view/style;\n+           title view/title;\n+           lang view/lang;\n+           value view/value;\n+         "\n+  />\n </html>\ndiff --git a/plone/formwidget/recurrence/z3cform/recurrence_input.pt b/plone/formwidget/recurrence/z3cform/recurrence_input.pt\nindex 8100936..5f9a49e 100644\n--- a/plone/formwidget/recurrence/z3cform/recurrence_input.pt\n+++ b/plone/formwidget/recurrence/z3cform/recurrence_input.pt\n@@ -1,14 +1,24 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      tal:omit-tag="">\n-  <textarea\n-    class="pat-recurrence"\n-    tal:attributes="id view/id;\n-                    name view/name;\n-                    style view/style;\n-                    title view/title;\n-                    data-pat-recurrence python: view.get_pattern_options()"\n-    tal:content="view/value"\n-    tal:condition="python:view.read_only != \'true\'"/>\n-  <span tal:condition="python:view.read_only == \'true\'" style="display:none;" tal:attributes="id string:${view/id}-start;name string:${view/name}-start" tal:content="view/get_start_date"/>\n+      tal:omit-tag=""\n+>\n+  <textarea class="pat-recurrence"\n+            tal:condition="python:view.read_only != \'true\'"\n+            tal:content="view/value"\n+            tal:attributes="\n+              id view/id;\n+              name view/name;\n+              style view/style;\n+              title view/title;\n+              data-pat-recurrence python: view.get_pattern_options();\n+            "\n+  ></textarea>\n+  <span style="display:none;"\n+        tal:condition="python:view.read_only == \'true\'"\n+        tal:content="view/get_start_date"\n+        tal:attributes="\n+          id string:${view/id}-start;\n+          name string:${view/name}-start;\n+        "\n+  ></span>\n </html>\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-14T23:50:46+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/249a9bf842299f0ffc8eb14ab2a951a104fba6c4

feat: codespell

Files changed:
M CHANGES.rst
M Makefile
M plone/formwidget/recurrence/browser/json_recurrence.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 024386c..91cf820 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -158,7 +158,7 @@ Fixes:\n - plone.app.widgets support: Let the z3c.form widget\'s get_start_field method\n   prefer \'name\' attribute over the \'id\' attribute. Looks like, with\n   plone.app.widgets the rendered input field doesn\'t have an \'id\' attribute any\n-  more. Also, integrate lates changes from jquery.recurrenceinput.js, which\n+  more. Also, integrate latest changes from jquery.recurrenceinput.js, which\n   also handles \'name\' attributes when trying to get the start field from the\n   surrounding form.\n   [thet]\n@@ -249,7 +249,7 @@ Fixes:\n   widget parameters which is available since plone.autoform 1.4.\n   [thet]\n \n-- For the z3cform widget, remove widget adaptee registration from ZCML code and\n+- For the z3cform widget, remove widget adapter registration from ZCML code and\n   keep it in Python code. More appropriate z3c.form class hierarchy for the\n   widget. Cleanup.\n   [thet]\n@@ -334,14 +334,14 @@ Fixes:\n ------------------\n \n - By default, preselect the BYOCCURRENCES "End recurrence" field, so that\n-  recurrence rules with unlimited occurences are not selected by accident but\n+  recurrence rules with unlimited occurrences are not selected by accident but\n   intentionally (from jquery.recurrenceinput.js).\n   [thet]\n \n - Include z3c.form\'s meta.zcml, so widgetsTemplate directive is registered.\n   [thet]\n \n-- For conditional zcml incudes, use zcml:condition instead of zcml:provides.\n+- For conditional zcml includes, use zcml:condition instead of zcml:provides.\n   [thet]\n \n \ndiff --git a/Makefile b/Makefile\nindex 3810634..b490ce1 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -59,7 +59,7 @@ TEST_PREREQUISITES=${INSTALL_TARGET}\n RUN_PREREQUISITES=${INSTANCE_TARGET}\n \n ##############################################################################\n-# CONVINIENCE\n+# CONVENIENCE\n \n # install and run\n .PHONY: all # full install, test and run\n@@ -73,7 +73,7 @@ help: ## This help message\n \t@echo\n \t@echo "${WARN_COLOR}Additional parameters:${NO_COLOR}"\n \t@echo "${MARK_COLOR}PYTHON${NO_COLOR}:       python interpreter to be used (default: python3)"\n-\t@echo "${MARK_COLOR}VENV${NO_COLOR}:        [on|off] wether to create a Python virtual environment or not (default: on)"\n+\t@echo "${MARK_COLOR}VENV${NO_COLOR}:        [on|off] whether to create a Python virtual environment or not (default: on)"\n \t@echo "${MARK_COLOR}VENV_FOLDER${NO_COLOR}: location of the virtual environment (default: ./venv)"\n \t@echo\n \t@echo "${WARN_COLOR}Targets:${NO_COLOR}"\n@@ -156,7 +156,7 @@ ${MXDEV_SENTINEL}: ${PIP_SENTINEL}\n \t@touch ${MXDEV_SENTINEL}\n \n .PHONY: prepare\n-prepare: ${PREPARE_TARGET} ## prepare soures and dependencies\n+prepare: ${PREPARE_TARGET} ## prepare sources and dependencies\n \n ${PREPARE_PREREQUISITES}:\n \t@touch $@\n@@ -206,7 +206,7 @@ test: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL} ## run tests\n \t@${PYBIN}zope-testrunner --auto-color --auto-progress --test-path=${ADDONFOLDER}\n \n .PHONY: test-ignore-warnings\n-test-ignore-warnings: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL}  ## run tests (hide warnins)\n+test-ignore-warnings: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL}  ## run tests (hide warnings)\n \t@echo "$(OK_COLOR)Run addon tests$(NO_COLOR)"\n \t@PYTHONWARNINGS=ignore ${PYBIN}zope-testrunner --auto-color --auto-progress --test-path=${ADDONFOLDER}\n \ndiff --git a/plone/formwidget/recurrence/browser/json_recurrence.py b/plone/formwidget/recurrence/browser/json_recurrence.py\nindex f8f0bac..7c81271 100644\n--- a/plone/formwidget/recurrence/browser/json_recurrence.py\n+++ b/plone/formwidget/recurrence/browser/json_recurrence.py\n@@ -152,7 +152,7 @@ def json_string(self):\n \n         # Calculate no of occurrences, but only to a max of three times\n         # the batch size. This will support infinite recurrence in a\n-        # useable way, as there will always be more batches.\n+        # usable way, as there will always be more batches.\n         first_batch = max(0, cur_batch - BATCH_DELTA)\n         last_batch = max(BATCH_DELTA * 2, cur_batch + BATCH_DELTA)\n         maxcount = (batch_size * last_batch) - start\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-15T00:37:27+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/5f735f3f9618775004c9c7ef38169d4eed4efd57

feat: configure z3c.dependencychecker

Files changed:
M pyproject.toml

b"diff --git a/pyproject.toml b/pyproject.toml\nindex 9d0c563..5d7047f 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -60,3 +60,4 @@ Zope = [\n   'Products.CMFDynamicViewFTI', 'zope.deprecation',\n ]\n python-dateutil = ['dateutil']\n+ignore-packages = ['z3c.form']\n"

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-15T00:37:57+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/7865e7c79d54e96b5a32c675b5814b7e864c5962

feat: declare dependencies

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 65dd222..e76861a 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -35,7 +35,7 @@\n     install_requires=[\n         "setuptools",\n         "plone.base",\n-        "Products.CMFCore",\n+        "Products.GenericSetup",\n         "python-dateutil",\n         "zope.component",\n         "zope.i18n",\n@@ -50,7 +50,6 @@\n         ],\n         test=[\n             "plone.app.testing",\n-            "plone.testing",\n             "plone.app.z3cform",\n         ],\n     ),\n'

Repository: plone.formwidget.recurrence


Branch: refs/heads/master
Date: 2023-03-16T10:49:36+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.formwidget.recurrence/commit/fd6dc10459194ff23419179b138fd9c05409c97a

Merge pull request #32 from plone/config-with-default-template-1662a7ae

Config with default template

Files changed:
A .editorconfig
A .meta.toml
A .pre-commit-config.yaml
A news/243ca9ec.internal
A tox.ini
M CHANGES.rst
M Makefile
M plone/formwidget/recurrence/browser/configure.zcml
M plone/formwidget/recurrence/browser/i18n.py
M plone/formwidget/recurrence/browser/json_recurrence.py
M plone/formwidget/recurrence/configure.zcml
M plone/formwidget/recurrence/profiles/default/metadata.xml
M plone/formwidget/recurrence/tests/test_z3cwidget.py
M plone/formwidget/recurrence/z3cform/configure.zcml
M plone/formwidget/recurrence/z3cform/recurrence_hidden.pt
M plone/formwidget/recurrence/z3cform/recurrence_input.pt
M pyproject.toml
M setup.cfg
M setup.py

b'diff --git a/.editorconfig b/.editorconfig\nnew file mode 100644\nindex 0000000..b4158b8\n--- /dev/null\n+++ b/.editorconfig\n@@ -0,0 +1,39 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+#\n+# EditorConfig Configuration file, for more details see:\n+# http://EditorConfig.org\n+# EditorConfig is a convention description, that could be interpreted\n+# by multiple editors to enforce common coding conventions for specific\n+# file types\n+\n+# top-most EditorConfig file:\n+# Will ignore other EditorConfig files in Home directory or upper tree level.\n+root = true\n+\n+\n+[*]  # For All Files\n+# Unix-style newlines with a newline ending every file\n+end_of_line = lf\n+insert_final_newline = true\n+trim_trailing_whitespace = true\n+# Set default charset\n+charset = utf-8\n+# Indent style default\n+indent_style = space\n+# Max Line Length - a hard line wrap, should be disabled\n+max_line_length = off\n+\n+[*.{py,cfg,ini}]\n+# 4 space indentation\n+indent_size = 4\n+\n+[*.{yml,zpt,pt,dtml,zcml}]\n+# 2 space indentation\n+indent_size = 2\n+\n+[{Makefile,.gitmodules}]\n+# Tab indentation (no size specified, but view as 4 spaces)\n+indent_style = tab\n+indent_size = unset\n+tab_width = unset\ndiff --git a/.meta.toml b/.meta.toml\nnew file mode 100644\nindex 0000000..17f7b14\n--- /dev/null\n+++ b/.meta.toml\n@@ -0,0 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[meta]\n+template = "default"\n+commit-id = "243ca9ec"\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..582f8ac\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,42 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+ci:\n+    autofix_prs: false\n+    autoupdate_schedule: monthly\n+\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+        args: [--py38-plus]\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/psf/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 3.0.2\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+        additional_dependencies:\n+          - tomli\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.2"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/CHANGES.rst b/CHANGES.rst\nindex 024386c..91cf820 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -158,7 +158,7 @@ Fixes:\n - plone.app.widgets support: Let the z3c.form widget\'s get_start_field method\n   prefer \'name\' attribute over the \'id\' attribute. Looks like, with\n   plone.app.widgets the rendered input field doesn\'t have an \'id\' attribute any\n-  more. Also, integrate lates changes from jquery.recurrenceinput.js, which\n+  more. Also, integrate latest changes from jquery.recurrenceinput.js, which\n   also handles \'name\' attributes when trying to get the start field from the\n   surrounding form.\n   [thet]\n@@ -249,7 +249,7 @@ Fixes:\n   widget parameters which is available since plone.autoform 1.4.\n   [thet]\n \n-- For the z3cform widget, remove widget adaptee registration from ZCML code and\n+- For the z3cform widget, remove widget adapter registration from ZCML code and\n   keep it in Python code. More appropriate z3c.form class hierarchy for the\n   widget. Cleanup.\n   [thet]\n@@ -334,14 +334,14 @@ Fixes:\n ------------------\n \n - By default, preselect the BYOCCURRENCES "End recurrence" field, so that\n-  recurrence rules with unlimited occurences are not selected by accident but\n+  recurrence rules with unlimited occurrences are not selected by accident but\n   intentionally (from jquery.recurrenceinput.js).\n   [thet]\n \n - Include z3c.form\'s meta.zcml, so widgetsTemplate directive is registered.\n   [thet]\n \n-- For conditional zcml incudes, use zcml:condition instead of zcml:provides.\n+- For conditional zcml includes, use zcml:condition instead of zcml:provides.\n   [thet]\n \n \ndiff --git a/Makefile b/Makefile\nindex 3810634..b490ce1 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -59,7 +59,7 @@ TEST_PREREQUISITES=${INSTALL_TARGET}\n RUN_PREREQUISITES=${INSTANCE_TARGET}\n \n ##############################################################################\n-# CONVINIENCE\n+# CONVENIENCE\n \n # install and run\n .PHONY: all # full install, test and run\n@@ -73,7 +73,7 @@ help: ## This help message\n \t@echo\n \t@echo "${WARN_COLOR}Additional parameters:${NO_COLOR}"\n \t@echo "${MARK_COLOR}PYTHON${NO_COLOR}:       python interpreter to be used (default: python3)"\n-\t@echo "${MARK_COLOR}VENV${NO_COLOR}:        [on|off] wether to create a Python virtual environment or not (default: on)"\n+\t@echo "${MARK_COLOR}VENV${NO_COLOR}:        [on|off] whether to create a Python virtual environment or not (default: on)"\n \t@echo "${MARK_COLOR}VENV_FOLDER${NO_COLOR}: location of the virtual environment (default: ./venv)"\n \t@echo\n \t@echo "${WARN_COLOR}Targets:${NO_COLOR}"\n@@ -156,7 +156,7 @@ ${MXDEV_SENTINEL}: ${PIP_SENTINEL}\n \t@touch ${MXDEV_SENTINEL}\n \n .PHONY: prepare\n-prepare: ${PREPARE_TARGET} ## prepare soures and dependencies\n+prepare: ${PREPARE_TARGET} ## prepare sources and dependencies\n \n ${PREPARE_PREREQUISITES}:\n \t@touch $@\n@@ -206,7 +206,7 @@ test: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL} ## run tests\n \t@${PYBIN}zope-testrunner --auto-color --auto-progress --test-path=${ADDONFOLDER}\n \n .PHONY: test-ignore-warnings\n-test-ignore-warnings: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL}  ## run tests (hide warnins)\n+test-ignore-warnings: ${TEST_PREREQUISITES} ${TESTRUNNER_SENTINEL}  ## run tests (hide warnings)\n \t@echo "$(OK_COLOR)Run addon tests$(NO_COLOR)"\n \t@PYTHONWARNINGS=ignore ${PYBIN}zope-testrunner --auto-color --auto-progress --test-path=${ADDONFOLDER}\n \ndiff --git a/news/243ca9ec.internal b/news/243ca9ec.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/243ca9ec.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/plone/formwidget/recurrence/browser/configure.zcml b/plone/formwidget/recurrence/browser/configure.zcml\nindex c565100..4bcf275 100644\n--- a/plone/formwidget/recurrence/browser/configure.zcml\n+++ b/plone/formwidget/recurrence/browser/configure.zcml\n@@ -2,12 +2,13 @@\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:browser="http://namespaces.zope.org/browser"\n     xmlns:z3c="http://namespaces.zope.org/z3c"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n   <!-- JSON recurrence view -->\n   <browser:page\n-      for="*"\n       name="json_recurrence"\n+      for="*"\n       class=".json_recurrence.RecurrenceView"\n       permission="zope2.View"\n       />\ndiff --git a/plone/formwidget/recurrence/browser/i18n.py b/plone/formwidget/recurrence/browser/i18n.py\nindex 702fafd..a84383a 100644\n--- a/plone/formwidget/recurrence/browser/i18n.py\n+++ b/plone/formwidget/recurrence/browser/i18n.py\n@@ -164,6 +164,6 @@ def translations(request):\n             yearly=translate(_("template_yearly"), context=request),\n         ),\n         # a bit wonky here, except is a reserved word\n-        **{"except": translate(_("except"), context=request)}\n+        **{"except": translate(_("except"), context=request)},\n     )\n     return translation_table\ndiff --git a/plone/formwidget/recurrence/browser/json_recurrence.py b/plone/formwidget/recurrence/browser/json_recurrence.py\nindex f8f0bac..7c81271 100644\n--- a/plone/formwidget/recurrence/browser/json_recurrence.py\n+++ b/plone/formwidget/recurrence/browser/json_recurrence.py\n@@ -152,7 +152,7 @@ def json_string(self):\n \n         # Calculate no of occurrences, but only to a max of three times\n         # the batch size. This will support infinite recurrence in a\n-        # useable way, as there will always be more batches.\n+        # usable way, as there will always be more batches.\n         first_batch = max(0, cur_batch - BATCH_DELTA)\n         last_batch = max(BATCH_DELTA * 2, cur_batch + BATCH_DELTA)\n         maxcount = (batch_size * last_batch) - start\ndiff --git a/plone/formwidget/recurrence/configure.zcml b/plone/formwidget/recurrence/configure.zcml\nindex a6bb555..e475f05 100644\n--- a/plone/formwidget/recurrence/configure.zcml\n+++ b/plone/formwidget/recurrence/configure.zcml\n@@ -1,21 +1,25 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:five="http://namespaces.zope.org/five"\n-    xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:i18n="http://namespaces.zope.org/i18n"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="plone">\n+    xmlns:i18n="http://namespaces.zope.org/i18n"\n+    xmlns:zcml="http://namespaces.zope.org/zcml"\n+    i18n_domain="plone"\n+    >\n \n-  <include zcml:condition="installed z3c.form" package=".z3cform" />\n+  <include\n+      package=".z3cform"\n+      zcml:condition="installed z3c.form"\n+      />\n   <include package=".browser" />\n \n   <genericsetup:registerProfile\n       name="default"\n-      directory="profiles/default"\n       title="plone.formwidget.recurrence"\n       description="plone.formwidget.recurrence resource registration."\n-      for="plone.base.interfaces.IPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n+      for="plone.base.interfaces.IPloneSiteRoot"\n+      directory="profiles/default"\n       />\n \n </configure>\ndiff --git a/plone/formwidget/recurrence/profiles/default/metadata.xml b/plone/formwidget/recurrence/profiles/default/metadata.xml\nindex b6bd42a..8c4cdb0 100644\n--- a/plone/formwidget/recurrence/profiles/default/metadata.xml\n+++ b/plone/formwidget/recurrence/profiles/default/metadata.xml\n@@ -1,4 +1,4 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>3000</version>\n </metadata>\ndiff --git a/plone/formwidget/recurrence/tests/test_z3cwidget.py b/plone/formwidget/recurrence/tests/test_z3cwidget.py\nindex 8ca24d5..39b3695 100644\n--- a/plone/formwidget/recurrence/tests/test_z3cwidget.py\n+++ b/plone/formwidget/recurrence/tests/test_z3cwidget.py\n@@ -23,7 +23,7 @@ class TestForm(SimpleItem):\n     day = FieldProperty(ITestForm["day"])\n \n     def __init__(self, recurrence, day):\n-        super(TestForm, self).__init__(id)\n+        super().__init__(id)\n         self.recurrence = recurrence\n         self.day = day\n \ndiff --git a/plone/formwidget/recurrence/z3cform/configure.zcml b/plone/formwidget/recurrence/z3cform/configure.zcml\nindex 4335056..cbac845 100644\n--- a/plone/formwidget/recurrence/z3cform/configure.zcml\n+++ b/plone/formwidget/recurrence/z3cform/configure.zcml\n@@ -1,38 +1,42 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:z3c="http://namespaces.zope.org/z3c"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-  <include package="z3c.form" file="meta.zcml"/>\n+  <include\n+      package="z3c.form"\n+      file="meta.zcml"\n+      />\n   <include package="z3c.form" />\n \n-  <adapter factory=".widget.RecurrenceFieldWidget"/>\n+  <adapter factory=".widget.RecurrenceFieldWidget" />\n   <class class=".widget.RecurrenceWidget">\n-  <require\n-      permission="zope.Public"\n-      interface=".interfaces.IRecurrenceWidget"\n-      />\n+    <require\n+        permission="zope.Public"\n+        interface=".interfaces.IRecurrenceWidget"\n+        />\n   </class>\n \n   <z3c:widgetTemplate\n-      mode="display"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_input.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="display"\n       />\n \n   <z3c:widgetTemplate\n-      mode="input"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_input.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="input"\n       />\n \n   <z3c:widgetTemplate\n-      mode="hidden"\n       widget=".interfaces.IRecurrenceWidget"\n       template="recurrence_hidden.pt"\n       layer="z3c.form.interfaces.IFormLayer"\n+      mode="hidden"\n       />\n \n </configure>\ndiff --git a/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt b/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\nindex 2f0c710..62b3d72 100644\n--- a/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\n+++ b/plone/formwidget/recurrence/z3cform/recurrence_hidden.pt\n@@ -1,12 +1,16 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      tal:omit-tag="">\n-<input type="hidden"\n-   tal:attributes="id view/id;\n-                   name view/name;\n-                   class view/klass;\n-                   style view/style;\n-                   title view/title;\n-                   lang view/lang;\n-                   value view/value"/>\n+      tal:omit-tag=""\n+>\n+  <input type="hidden"\n+         tal:attributes="\n+           id view/id;\n+           name view/name;\n+           class view/klass;\n+           style view/style;\n+           title view/title;\n+           lang view/lang;\n+           value view/value;\n+         "\n+  />\n </html>\ndiff --git a/plone/formwidget/recurrence/z3cform/recurrence_input.pt b/plone/formwidget/recurrence/z3cform/recurrence_input.pt\nindex 8100936..5f9a49e 100644\n--- a/plone/formwidget/recurrence/z3cform/recurrence_input.pt\n+++ b/plone/formwidget/recurrence/z3cform/recurrence_input.pt\n@@ -1,14 +1,24 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      tal:omit-tag="">\n-  <textarea\n-    class="pat-recurrence"\n-    tal:attributes="id view/id;\n-                    name view/name;\n-                    style view/style;\n-                    title view/title;\n-                    data-pat-recurrence python: view.get_pattern_options()"\n-    tal:content="view/value"\n-    tal:condition="python:view.read_only != \'true\'"/>\n-  <span tal:condition="python:view.read_only == \'true\'" style="display:none;" tal:attributes="id string:${view/id}-start;name string:${view/name}-start" tal:content="view/get_start_date"/>\n+      tal:omit-tag=""\n+>\n+  <textarea class="pat-recurrence"\n+            tal:condition="python:view.read_only != \'true\'"\n+            tal:content="view/value"\n+            tal:attributes="\n+              id view/id;\n+              name view/name;\n+              style view/style;\n+              title view/title;\n+              data-pat-recurrence python: view.get_pattern_options();\n+            "\n+  ></textarea>\n+  <span style="display:none;"\n+        tal:condition="python:view.read_only == \'true\'"\n+        tal:content="view/get_start_date"\n+        tal:attributes="\n+          id string:${view/id}-start;\n+          name string:${view/name}-start;\n+        "\n+  ></span>\n </html>\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 05b615d..5d7047f 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -1,3 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [tool.towncrier]\n filename = "CHANGES.rst"\n directory = "news/"\n@@ -18,3 +20,44 @@ showcontent = true\n directory = "bugfix"\n name = "Bug fixes:"\n showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "internal"\n+name = "Internal:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "documentation"\n+name = "Documentation:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "tests"\n+name = "Tests"\n+showcontent = true\n+\n+[tool.isort]\n+profile = "plone"\n+\n+[tool.black]\n+target-version = ["py38"]\n+\n+[tool.dependencychecker]\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # Zope dependencies\n+  \'Acquisition\', \'DateTime\', \'transaction\', \'zExceptions\', \'ZODB\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.deferredimport\', \'zope.event\',\n+  \'zope.exceptions\', \'zope.globalrequest\', \'zope.i18n\', \'zope.i18nmessageid\',\n+  \'zope.interface\', \'zope.lifecycleevent\', \'zope.location\', \'zope.publisher\',\n+  \'zope.schema\', \'zope.security\', \'zope.site\', \'zope.traversing\', \'AccessControl\',\n+]\n+\'plone.base\' = [\n+  \'setuptools\', \'AccessControl\', \'Products.BTreeFolder2\', \'Products.CMFCore\',\n+  \'Products.CMFDynamicViewFTI\', \'zope.deprecation\',\n+]\n+python-dateutil = [\'dateutil\']\n+ignore-packages = [\'z3c.form\']\ndiff --git a/setup.cfg b/setup.cfg\nindex fcaed5e..574f276 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -1,19 +1,28 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[bdist_wheel]\n+universal = 0\n+\n+[flake8]\n+doctests = 1\n+ignore =\n+    # black takes care of line length\n+    E501,\n+    # black takes care of where to break lines\n+    W503,\n+    # black takes care of spaces within slicing (list[:])\n+    E203,\n+    # black takes care of spaces after commas\n+    E231,\n+\n [check-manifest]\n ignore =\n+    .editorconfig\n+    .meta.toml\n+    .pre-commit-config.yaml\n+    tox.ini\n     Makefile\n     constraints.txt\n     instance.yaml\n     requirements.txt\n     sources.ini\n-\n-\n-[bdist_wheel]\n-universal = 1\n-\n-\n-[isort]\n-# black compatible Plone isort rules:\n-profile = black\n-force_alphabetical_sort = True\n-force_single_line = True\n-lines_after_imports = 2\ndiff --git a/setup.py b/setup.py\nindex 2f00c6d..e76861a 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -8,7 +8,9 @@\n     name="plone.formwidget.recurrence",\n     version=version,\n     description="Recurrence widget for Plone",\n-    long_description="%s\\n%s" % (open("README.rst").read(), open("CHANGES.rst").read()),\n+    long_description="{}\\n{}".format(\n+        open("README.rst").read(), open("CHANGES.rst").read()\n+    ),\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n@@ -33,7 +35,7 @@\n     install_requires=[\n         "setuptools",\n         "plone.base",\n-        "Products.CMFCore",\n+        "Products.GenericSetup",\n         "python-dateutil",\n         "zope.component",\n         "zope.i18n",\n@@ -48,7 +50,6 @@\n         ],\n         test=[\n             "plone.app.testing",\n-            "plone.testing",\n             "plone.app.z3cform",\n         ],\n     ),\ndiff --git a/tox.ini b/tox.ini\nnew file mode 100644\nindex 0000000..e0fcded\n--- /dev/null\n+++ b/tox.ini\n@@ -0,0 +1,50 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[tox]\n+envlist =\n+    format\n+    lint\n+    test\n+\n+[testenv]\n+allowlist_externals =\n+    sh\n+\n+[testenv:format]\n+description = automatically reformat code\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n+\n+[testenv:lint]\n+description = run linters that will help improve the code style\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a\n+\n+[testenv:dependencies]\n+description = check if the package defines all its dependencies and generate a graph out of them\n+deps =\n+    z3c.dependencychecker==2.11\n+    pipdeptree==2.5.1\n+    graphviz  # optional dependency of pipdeptree\n+commands =\n+    dependencychecker\n+    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+\n+[testenv:test]\n+usedevelop = true\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --test-path={toxinidir} -s plone.formwidget.recurrence\n+extras =\n+    test\n'

