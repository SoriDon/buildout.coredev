Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2019-02-15T08:14:53+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/8fe391b4364cb1d22c6e16fd0fa80b9ec9de2f67

fix a failing test with zope 4.0b9

Files changed:
M plone/app/contenttypes/tests/test_migration.py

b"diff --git a/plone/app/contenttypes/tests/test_migration.py b/plone/app/contenttypes/tests/test_migration.py\nindex f28cac21..8da6ce76 100644\n--- a/plone/app/contenttypes/tests/test_migration.py\n+++ b/plone/app/contenttypes/tests/test_migration.py\n@@ -2008,8 +2008,11 @@ def setUp(self):\n \n         # Change Document conent type to folderish\n         self.browser.open(self.manage_document_url)\n-        self.browser.getControl(name='klass:string') \\\n-            .value = 'plone.app.contenttypes.content.Collection'\n+        try:\n+            klass_ctlr = self.browser.getControl(name='klass:UTF-8:string')\n+        except LookupError:\n+            klass_ctlr = self.browser.getControl(name='klass:string')\n+        klass_ctlr.value = 'plone.app.contenttypes.content.Collection'\n         self.browser.getControl('Save Changes').click()\n         self.browser.open(\n             '{0}/@@base_class_migrator_form'.format(self.portal_url))\n"

