Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-02-06T12:06:36+01:00
Author: tschorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/f68a86c7d65e6934e681893895948ec5a3ed8171

use -d with wsgi

Files changed:
M src/plone/recipe/zope2instance/ctl.py

b"diff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 6fce5f9..e4ab506 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -810,8 +810,9 @@ def do_foreground(self, arg, debug=True):\n         local_additions = []\n \n         if debug:\n-            if not self.options.wsgi and not program.count('-X'):\n-                local_additions += ['-X']\n+            debug_switch = '-d' if self.options.wsgi else '-X'\n+            if not program.count(debug_switch):\n+                local_additions += [debug_switch]\n             if not program.count('debug-mode=on'):\n                 local_additions += ['debug-mode=on']\n             program.extend(local_additions)\n"

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-02-06T12:18:34+01:00
Author: tschorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/751f1fe86203f7e42795b8ed60970b6f56ff03c8

update changelog

Files changed:
M CHANGES.rst

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex aa19c51..e41d866 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,6 +4,10 @@ Changelog\n 6.1.1 (unreleased)\n ------------------\n \n+- Use correct debug switch for WSGI.\n+  (`Products.CMFPlone #2719 <https://github.com/plone/Products.CMFPlone/issues/2719>`_)\n+  [tschorr]\n+\n - Improve debugging of run scripts by providing the source code for the\n   debugger.\n   [icemac]\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-02-06T13:32:36+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/20b54986f62b61ad9cc0a49a57bb18830aa0283f

Merge pull request #69 from plone/wsgi_debug_switch

Use -d with wsgi

Files changed:
M CHANGES.rst
M src/plone/recipe/zope2instance/ctl.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex aa19c51..e41d866 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,6 +4,10 @@ Changelog\n 6.1.1 (unreleased)\n ------------------\n \n+- Use correct debug switch for WSGI.\n+  (`Products.CMFPlone #2719 <https://github.com/plone/Products.CMFPlone/issues/2719>`_)\n+  [tschorr]\n+\n - Improve debugging of run scripts by providing the source code for the\n   debugger.\n   [icemac]\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 6fce5f9..e4ab506 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -810,8 +810,9 @@ def do_foreground(self, arg, debug=True):\n         local_additions = []\n \n         if debug:\n-            if not self.options.wsgi and not program.count('-X'):\n-                local_additions += ['-X']\n+            debug_switch = '-d' if self.options.wsgi else '-X'\n+            if not program.count(debug_switch):\n+                local_additions += [debug_switch]\n             if not program.count('debug-mode=on'):\n                 local_additions += ['debug-mode=on']\n             program.extend(local_additions)\n"

