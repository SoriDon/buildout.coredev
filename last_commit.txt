Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2023-04-03T23:50:24Z
Author: pre-commit-ci[bot] (pre-commit-ci[bot]) <66853113+pre-commit-ci[bot]@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/32107e841aeea5a0e7d86af6b4a238d1147d3eaf

[pre-commit.ci] pre-commit autoupdate

updates:
- [github.com/psf/black: 23.1.0 → 23.3.0](https://github.com/psf/black/compare/23.1.0...23.3.0)
- [github.com/collective/zpretty: 3.0.2 → 3.0.3](https://github.com/collective/zpretty/compare/3.0.2...3.0.3)
- [github.com/codespell-project/codespell: v2.2.2 → v2.2.4](https://github.com/codespell-project/codespell/compare/v2.2.2...v2.2.4)

Files changed:
M .pre-commit-config.yaml

b'diff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex 582f8ac..fdafec1 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -15,11 +15,11 @@ repos:\n     hooks:\n     -   id: isort\n -   repo: https://github.com/psf/black\n-    rev: 23.1.0\n+    rev: 23.3.0\n     hooks:\n     -   id: black\n -   repo: https://github.com/collective/zpretty\n-    rev: 3.0.2\n+    rev: 3.0.3\n     hooks:\n     -   id: zpretty\n -   repo: https://github.com/PyCQA/flake8\n@@ -27,7 +27,7 @@ repos:\n     hooks:\n     -   id: flake8\n -   repo: https://github.com/codespell-project/codespell\n-    rev: v2.2.2\n+    rev: v2.2.4\n     hooks:\n     -   id: codespell\n         additional_dependencies:\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2023-04-04T23:15:19+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/2013cbeb9a40a068c2dee2679f5696df890c3185

update plone/meta configuration

Files changed:
A news/3b8337e6.internal
M .meta.toml
M tox.ini

b'diff --git a/.meta.toml b/.meta.toml\nindex 4ed1a1d..eb3c765 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -2,4 +2,4 @@\n # https://github.com/plone/meta/tree/master/config/default\n [meta]\n template = "default"\n-commit-id = "789b0936"\n+commit-id = "3b8337e6"\ndiff --git a/news/3b8337e6.internal b/news/3b8337e6.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/3b8337e6.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/tox.ini b/tox.ini\nindex 43e9ac4..b4cbd55 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -44,10 +44,25 @@ commands =\n [testenv:test]\n usedevelop = true\n constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n deps =\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.app.z3cform\n+    zope-testrunner --all --test-path={toxinidir} -s plone.app.z3cform {posargs}\n extras =\n-    tests\n+    test\n+\n+[testenv:coverage]\n+usedevelop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n+deps =\n+    coverage\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    coverage run {envbindir}/zope-testrunner --all --test-path={toxinidir} -s plone.app.z3cform {posargs}\n+    coverage report -m --format markdown\n+extras =\n+    test\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2023-04-04T23:28:21+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/4810906ac406863bf38819d8e11f996a2b740624

chore: add missing dependency declaration

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 7b407c0..a98395e 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -64,6 +64,7 @@ def read(*rnames):\n         "plone.namedfile",\n         "plone.protect",\n         "plone.registry",\n+        "plone.schema",\n         "plone.uuid",\n         "plone.z3cform",\n         "Products.GenericSetup",\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2023-04-06T13:19:35+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.z3cform/commit/036f83e3e0864411df78e7df8c40c87e90f8c9b8

Add `test` extra with the same contents as the `tests` extra.

The `tests` extra will be removed in Plone 7.
`plone.app.testing` was missing because in `tox.ini` we used the not yet existing `test` extra.

Files changed:
A news/164.bugfix
M setup.py

b'diff --git a/news/164.bugfix b/news/164.bugfix\nnew file mode 100644\nindex 0000000..66e9468\n--- /dev/null\n+++ b/news/164.bugfix\n@@ -0,0 +1,3 @@\n+Add ``test`` extra with the same contents as the ``tests`` extra.\n+The ``tests`` extra will be removed in Plone 7.\n+[maurits]\ndiff --git a/setup.py b/setup.py\nindex a98395e..2fb73aa 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -20,6 +20,18 @@ def read(*rnames):\n     + read("CHANGES.rst")\n     + "\\n"\n )\n+test_requirements = [\n+    "plone.app.contenttypes[test]",\n+    "plone.app.layout",\n+    "plone.app.testing",\n+    "plone.autoform",\n+    "plone.browserlayer",\n+    "plone.supermodel",\n+    "plone.testing",\n+    "zope.annotation",\n+    "zope.intid",\n+    "zope.publisher",\n+]\n \n setup(\n     name="plone.app.z3cform",\n@@ -79,17 +91,11 @@ def read(*rnames):\n         "Zope",\n     ],\n     extras_require={\n-        "tests": [\n-            "plone.app.contenttypes[test]",\n-            "plone.app.layout",\n-            "plone.app.testing",\n-            "plone.autoform",\n-            "plone.browserlayer",\n-            "plone.supermodel",\n-            "plone.testing",\n-            "zope.annotation",\n-            "zope.intid",\n-            "zope.publisher",\n-        ]\n+        # Until plone.app.z3cform 4.0.2 we only had the \'tests\' extra.\n+        # In 4.0.3 we introduced the \'test\' extra.\n+        # Keep \'tests\' for backwards compatibility.\n+        # Remove it in Plone 7.\n+        "test": test_requirements,\n+        "tests": test_requirements,\n     },\n )\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2023-04-09T15:32:55+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/cdc47d42c6280784c8ba35d8159e6be38a92f5e8

Merge pull request #164 from plone/pre-commit-ci-update-config

[pre-commit.ci] pre-commit autoupdate

Files changed:
A news/164.bugfix
A news/3b8337e6.internal
M .meta.toml
M .pre-commit-config.yaml
M setup.py
M tox.ini

b'diff --git a/.meta.toml b/.meta.toml\nindex 4ed1a1d..eb3c765 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -2,4 +2,4 @@\n # https://github.com/plone/meta/tree/master/config/default\n [meta]\n template = "default"\n-commit-id = "789b0936"\n+commit-id = "3b8337e6"\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex 582f8ac..fdafec1 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -15,11 +15,11 @@ repos:\n     hooks:\n     -   id: isort\n -   repo: https://github.com/psf/black\n-    rev: 23.1.0\n+    rev: 23.3.0\n     hooks:\n     -   id: black\n -   repo: https://github.com/collective/zpretty\n-    rev: 3.0.2\n+    rev: 3.0.3\n     hooks:\n     -   id: zpretty\n -   repo: https://github.com/PyCQA/flake8\n@@ -27,7 +27,7 @@ repos:\n     hooks:\n     -   id: flake8\n -   repo: https://github.com/codespell-project/codespell\n-    rev: v2.2.2\n+    rev: v2.2.4\n     hooks:\n     -   id: codespell\n         additional_dependencies:\ndiff --git a/news/164.bugfix b/news/164.bugfix\nnew file mode 100644\nindex 0000000..66e9468\n--- /dev/null\n+++ b/news/164.bugfix\n@@ -0,0 +1,3 @@\n+Add ``test`` extra with the same contents as the ``tests`` extra.\n+The ``tests`` extra will be removed in Plone 7.\n+[maurits]\ndiff --git a/news/3b8337e6.internal b/news/3b8337e6.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/3b8337e6.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/setup.py b/setup.py\nindex 7b407c0..2fb73aa 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -20,6 +20,18 @@ def read(*rnames):\n     + read("CHANGES.rst")\n     + "\\n"\n )\n+test_requirements = [\n+    "plone.app.contenttypes[test]",\n+    "plone.app.layout",\n+    "plone.app.testing",\n+    "plone.autoform",\n+    "plone.browserlayer",\n+    "plone.supermodel",\n+    "plone.testing",\n+    "zope.annotation",\n+    "zope.intid",\n+    "zope.publisher",\n+]\n \n setup(\n     name="plone.app.z3cform",\n@@ -64,6 +76,7 @@ def read(*rnames):\n         "plone.namedfile",\n         "plone.protect",\n         "plone.registry",\n+        "plone.schema",\n         "plone.uuid",\n         "plone.z3cform",\n         "Products.GenericSetup",\n@@ -78,17 +91,11 @@ def read(*rnames):\n         "Zope",\n     ],\n     extras_require={\n-        "tests": [\n-            "plone.app.contenttypes[test]",\n-            "plone.app.layout",\n-            "plone.app.testing",\n-            "plone.autoform",\n-            "plone.browserlayer",\n-            "plone.supermodel",\n-            "plone.testing",\n-            "zope.annotation",\n-            "zope.intid",\n-            "zope.publisher",\n-        ]\n+        # Until plone.app.z3cform 4.0.2 we only had the \'tests\' extra.\n+        # In 4.0.3 we introduced the \'test\' extra.\n+        # Keep \'tests\' for backwards compatibility.\n+        # Remove it in Plone 7.\n+        "test": test_requirements,\n+        "tests": test_requirements,\n     },\n )\ndiff --git a/tox.ini b/tox.ini\nindex 43e9ac4..b4cbd55 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -44,10 +44,25 @@ commands =\n [testenv:test]\n usedevelop = true\n constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n deps =\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.app.z3cform\n+    zope-testrunner --all --test-path={toxinidir} -s plone.app.z3cform {posargs}\n extras =\n-    tests\n+    test\n+\n+[testenv:coverage]\n+usedevelop = true\n+constrain_package_deps = true\n+set_env = ROBOT_BROWSER=headlesschrome\n+deps =\n+    coverage\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    coverage run {envbindir}/zope-testrunner --all --test-path={toxinidir} -s plone.app.z3cform {posargs}\n+    coverage report -m --format markdown\n+extras =\n+    test\n'

