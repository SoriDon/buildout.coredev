Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-08-08T10:16:07-03:00
Author: hvelarde (hvelarde) <hector.velarde@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/93056e36413c3814c7ed06d514a09908861a8a3e

Fix registration of robots.txt browser view to avoid AttributeError on Zope's root

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/configure.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex f77da21c6..cf16b316a 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -28,6 +28,9 @@ Breaking changes:\n \n Bug fixes:\n \n+- Fix registration of ``robots.txt`` browser view to avoid ``AttributeError`` on Zope\'s root (fixes `#2052 <https://github.com/plone/Products.CMFPlone/issues/2052>`_).\n+  [hvelarde]\n+\n - Get rid of obsolete ``X-UA-Compatible`` header.\n   [hvelarde]\n \ndiff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex a6bf92793..d66dee577 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -160,7 +160,7 @@\n       />\n \n   <browser:page\n-      for="*"\n+      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n       name="robots.txt"\n       class=".robots.Robots"\n       permission="zope.Public"\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-08-09T13:56:09+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/4f516df0d1716c681e20632d0d62079351bb1922

Merge pull request #2496 from plone/hvelarde-robots

Fix registration of robots.txt browser view to avoid AttributeError on Zope's root

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/configure.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex f77da21c6..cf16b316a 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -28,6 +28,9 @@ Breaking changes:\n \n Bug fixes:\n \n+- Fix registration of ``robots.txt`` browser view to avoid ``AttributeError`` on Zope\'s root (fixes `#2052 <https://github.com/plone/Products.CMFPlone/issues/2052>`_).\n+  [hvelarde]\n+\n - Get rid of obsolete ``X-UA-Compatible`` header.\n   [hvelarde]\n \ndiff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml\nindex a6bf92793..d66dee577 100644\n--- a/Products/CMFPlone/browser/configure.zcml\n+++ b/Products/CMFPlone/browser/configure.zcml\n@@ -160,7 +160,7 @@\n       />\n \n   <browser:page\n-      for="*"\n+      for="plone.app.layout.navigation.interfaces.INavigationRoot"\n       name="robots.txt"\n       class=".robots.Robots"\n       permission="zope.Public"\n'

