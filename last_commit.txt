Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-01-13T09:56:50-05:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/62123405bd248ed8ecaf53b03fed6854a6b2f428

Fix use of icons in search results

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/search.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index affd428..78cd59c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Fix use of icons in search results
+  [vangheem]
+
 
 
 5.0.2 (2016-01-08)
diff --git a/Products/CMFPlone/browser/templates/search.pt b/Products/CMFPlone/browser/templates/search.pt
index d1d9c60..7cb7c22 100644
--- a/Products/CMFPlone/browser/templates/search.pt
+++ b/Products/CMFPlone/browser/templates/search.pt
@@ -226,9 +226,11 @@
                                                  show_about python:not isAnon or allowAnonymousViewAbout;">
                         <ol class="searchResults">
                           <tal:results repeat="item batch">
-                            <li>
-                              <span>
-                                <img tal:replace="structure item/getIcon" />
+                            <li tal:define="hasIcon item/getIcon">
+                              <span class="result-title">
+                                <img class="image-icon"
+                                     tal:condition="hasIcon"
+                                     tal:attributes="src string:${item/getURL}/@@images/image/icon;">
                                 <a href="#"
                                    tal:define="item_url item/getURL;
                                                item_type item/PortalType"


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-01-15T15:29:25+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/f4e5982c95656ca6f6c222765a16dad537547dc2

Merge pull request #1313 from plone/fix-search-icon-use

Fix use of icons in search results

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/search.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index affd428..78cd59c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Fix use of icons in search results
+  [vangheem]
+
 
 
 5.0.2 (2016-01-08)
diff --git a/Products/CMFPlone/browser/templates/search.pt b/Products/CMFPlone/browser/templates/search.pt
index d1d9c60..7cb7c22 100644
--- a/Products/CMFPlone/browser/templates/search.pt
+++ b/Products/CMFPlone/browser/templates/search.pt
@@ -226,9 +226,11 @@
                                                  show_about python:not isAnon or allowAnonymousViewAbout;">
                         <ol class="searchResults">
                           <tal:results repeat="item batch">
-                            <li>
-                              <span>
-                                <img tal:replace="structure item/getIcon" />
+                            <li tal:define="hasIcon item/getIcon">
+                              <span class="result-title">
+                                <img class="image-icon"
+                                     tal:condition="hasIcon"
+                                     tal:attributes="src string:${item/getURL}/@@images/image/icon;">
                                 <a href="#"
                                    tal:define="item_url item/getURL;
                                                item_type item/PortalType"


