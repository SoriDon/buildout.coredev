Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-02-17T09:28:42-08:00
Author: Alec Mitchell (alecpm) <alecpm@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/c7aa528c50ee93c1ffb0570151d5801917c28a2a

Update tinymce options merging to match fix in p.a.widgets and p.a.z3cform

Files changed:
M Products/Archetypes/Widget.py

diff --git a/Products/Archetypes/Widget.py b/Products/Archetypes/Widget.py
index 7c9b196..1dba93f 100644
--- a/Products/Archetypes/Widget.py
+++ b/Products/Archetypes/Widget.py
@@ -1396,10 +1396,10 @@ def _base_args(self, context, field, request):
                          ).decode('utf-8')
 
         args.setdefault('pattern_options', {})
-        merged = base_widgets.dict_merge(
+        options = base_widgets.dict_merge(
             utils.get_tinymce_options(context, field, request),
             args['pattern_options'])
-        args['pattern_options'] = merged['pattern_options']
+        args['pattern_options'] = options
         return args
 
     def edit(self, context, field, request):


