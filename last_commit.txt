Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-04-07T19:23:52+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.layout/commit/0320f9ba0a8d25fe104cf255eb7b491e0a160310

Added support for images in liveSearch results.

Files changed:
M plone/app/layout/viewlets/common.py
M plone/app/layout/viewlets/searchbox.pt

b'diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py\nindex 2c56a5db..79fb687e 100644\n--- a/plone/app/layout/viewlets/common.py\n+++ b/plone/app/layout/viewlets/common.py\n@@ -205,6 +205,7 @@ def update(self):\n         registry = getUtility(IRegistry)\n         search_settings = registry.forInterface(ISearchSchema, prefix="plone")\n         self.livesearch = search_settings.enable_livesearch\n+        self.show_images = search_settings.search_show_images\n \n         folder = context_state.folder()\n         self.folder_path = "/".join(folder.getPhysicalPath())\ndiff --git a/plone/app/layout/viewlets/searchbox.pt b/plone/app/layout/viewlets/searchbox.pt\nindex e23b9835..7dfcf0ec 100644\n--- a/plone/app/layout/viewlets/searchbox.pt\n+++ b/plone/app/layout/viewlets/searchbox.pt\n@@ -5,9 +5,9 @@\n   <form id="searchGadget_form"\n     action="@@search"\n     role="search"\n+    class="d-flex ${python: view.livesearch and \'pat-livesearch\'} ${python: view.show_images and \'show_images\'} "\n     tal:attributes="action string:${navigation_root_url}/@@search;\n-                    data-pat-livesearch string:ajaxUrl:${navigation_root_url}/@@ajax-search;\n-                    class python: view.livesearch and \'pat-livesearch d-flex\' or \'d-flex\'">\n+                    data-pat-livesearch string:ajaxUrl:${navigation_root_url}/@@ajax-search;">\n \n     <label class="hiddenStructure"\n       for="searchGadget"\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-04-07T19:35:20+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.layout/commit/a89e3dde65570f960505f4ff3c1143715c096719

add news

Files changed:
A news/299.feature

b'diff --git a/news/299.feature b/news/299.feature\nnew file mode 100644\nindex 00000000..31a493c7\n--- /dev/null\n+++ b/news/299.feature\n@@ -0,0 +1,2 @@\n+LiveSearch with support for images in search results.\n+[agitator]\n\\ No newline at end of file\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-04-07T23:22:06+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.layout/commit/552261b34a046e4b7ac03f21183a6b5069d688cb

Merge pull request #299 from plone/images-in-search

Added support for images in liveSearch results.

Files changed:
A news/299.feature
M plone/app/layout/viewlets/common.py
M plone/app/layout/viewlets/searchbox.pt

b'diff --git a/news/299.feature b/news/299.feature\nnew file mode 100644\nindex 00000000..31a493c7\n--- /dev/null\n+++ b/news/299.feature\n@@ -0,0 +1,2 @@\n+LiveSearch with support for images in search results.\n+[agitator]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py\nindex 2c56a5db..79fb687e 100644\n--- a/plone/app/layout/viewlets/common.py\n+++ b/plone/app/layout/viewlets/common.py\n@@ -205,6 +205,7 @@ def update(self):\n         registry = getUtility(IRegistry)\n         search_settings = registry.forInterface(ISearchSchema, prefix="plone")\n         self.livesearch = search_settings.enable_livesearch\n+        self.show_images = search_settings.search_show_images\n \n         folder = context_state.folder()\n         self.folder_path = "/".join(folder.getPhysicalPath())\ndiff --git a/plone/app/layout/viewlets/searchbox.pt b/plone/app/layout/viewlets/searchbox.pt\nindex e23b9835..7dfcf0ec 100644\n--- a/plone/app/layout/viewlets/searchbox.pt\n+++ b/plone/app/layout/viewlets/searchbox.pt\n@@ -5,9 +5,9 @@\n   <form id="searchGadget_form"\n     action="@@search"\n     role="search"\n+    class="d-flex ${python: view.livesearch and \'pat-livesearch\'} ${python: view.show_images and \'show_images\'} "\n     tal:attributes="action string:${navigation_root_url}/@@search;\n-                    data-pat-livesearch string:ajaxUrl:${navigation_root_url}/@@ajax-search;\n-                    class python: view.livesearch and \'pat-livesearch d-flex\' or \'d-flex\'">\n+                    data-pat-livesearch string:ajaxUrl:${navigation_root_url}/@@ajax-search;">\n \n     <label class="hiddenStructure"\n       for="searchGadget"\n'

