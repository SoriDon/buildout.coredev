Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-01-27T11:47:14+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/40b0983e9bfd8d8c855cab69c648326674c53f36

Fixed flaky actions controlpanel tests by waiting longer.

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/robot/test_controlpanel_actions.robot

diff --git a/CHANGES.rst b/CHANGES.rst
index 730df4d5f..9f6f121a0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -32,6 +32,8 @@ New Features:
 
 Bug Fixes:
 
+- Fixed flaky actions controlpanel tests by waiting longer.  [maurits]
+
 - Require AccessControl 4.0b1 so ``guarded_getitem`` is used.
   Part of PloneHotfix20171128.  [maurits]
 
diff --git a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
index d6a8157e9..1cd2e5f3f 100644
--- a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
+++ b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
@@ -18,34 +18,40 @@ Scenario: Modify an existing action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I modify an action title
+   Sleep  1
    Then anonymous users can see the new action title
 
 Scenario: Reorder in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I change the actions order
+   Sleep  1
    Then anonymous users can see the actions new ordering
 
 Scenario: Create a new action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I add a new action
+   Sleep  1
    Then logged-in users can see the new action
 
 Scenario: Hide/show an action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I hide an action
+   Sleep  1
    Then anonymous users cannot see the action anymore
   Given a logged-in administrator
     and the actions control panel
    When I unhide the action
+   Sleep  1
    Then anonymous users can see the action again
 
 Scenario: Delete an action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I delete an action
+   Sleep  1
    Then anonymous users cannot see the action anymore
 
 *** Keywords *****************************************************************


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-01-27T12:38:29+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/27f62d17f962aca3105fc6f757a737b26634b8ca

Merge pull request #2272 from plone/actions-controlpanel-robot-tests-sleep-52

Fixed flaky actions controlpanel tests by waiting longer. [5.2]

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/robot/test_controlpanel_actions.robot

diff --git a/CHANGES.rst b/CHANGES.rst
index 730df4d5f..9f6f121a0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -32,6 +32,8 @@ New Features:
 
 Bug Fixes:
 
+- Fixed flaky actions controlpanel tests by waiting longer.  [maurits]
+
 - Require AccessControl 4.0b1 so ``guarded_getitem`` is used.
   Part of PloneHotfix20171128.  [maurits]
 
diff --git a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
index d6a8157e9..1cd2e5f3f 100644
--- a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
+++ b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
@@ -18,34 +18,40 @@ Scenario: Modify an existing action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I modify an action title
+   Sleep  1
    Then anonymous users can see the new action title
 
 Scenario: Reorder in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I change the actions order
+   Sleep  1
    Then anonymous users can see the actions new ordering
 
 Scenario: Create a new action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I add a new action
+   Sleep  1
    Then logged-in users can see the new action
 
 Scenario: Hide/show an action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I hide an action
+   Sleep  1
    Then anonymous users cannot see the action anymore
   Given a logged-in administrator
     and the actions control panel
    When I unhide the action
+   Sleep  1
    Then anonymous users can see the action again
 
 Scenario: Delete an action in Actions Control Panel
   Given a logged-in administrator
     and the actions control panel
    When I delete an action
+   Sleep  1
    Then anonymous users cannot see the action anymore
 
 *** Keywords *****************************************************************


