Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-05-14T14:49:18+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/7fddf5867d5a9b9dcf232c616a285dfad3d8d2dd

After site creation, do not render the add-site template: we redirect anyway.

See also https://github.com/plone/Products.CMFPlone/pull/2410#issuecomment-388774551

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/admin.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1735203a0..2da947799 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -58,6 +58,9 @@ New Features:
 
 Bug Fixes:
 
+- After site creation, do not render the add-site template: we redirect anyway.
+  [maurits]
+
 - Unflakied a unit test.
   [Rotonen]
 
diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py
index f711412ce..30a0fc7ec 100644
--- a/Products/CMFPlone/browser/admin.py
+++ b/Products/CMFPlone/browser/admin.py
@@ -271,6 +271,7 @@ def __call__(self):
                 portal_timezone=form.get('portal_timezone', 'UTC')
             )
             self.request.response.redirect(site.absolute_url())
+            return u''
 
         return self.index()
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-05-14T17:00:10+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/3936c29d76fe1c6ed1d9dbb44fc4e52d5324b18e

Merge pull request #2413 from plone/add-plonesite-no-useless-render-master

After site creation, do not render a template: we redirect anyway [5.2]

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/admin.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 1735203a0..2da947799 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -58,6 +58,9 @@ New Features:
 
 Bug Fixes:
 
+- After site creation, do not render the add-site template: we redirect anyway.
+  [maurits]
+
 - Unflakied a unit test.
   [Rotonen]
 
diff --git a/Products/CMFPlone/browser/admin.py b/Products/CMFPlone/browser/admin.py
index f711412ce..30a0fc7ec 100644
--- a/Products/CMFPlone/browser/admin.py
+++ b/Products/CMFPlone/browser/admin.py
@@ -271,6 +271,7 @@ def __call__(self):
                 portal_timezone=form.get('portal_timezone', 'UTC')
             )
             self.request.response.redirect(site.absolute_url())
+            return u''
 
         return self.index()
 


