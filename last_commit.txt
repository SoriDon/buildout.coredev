Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-05-02T20:34:02+03:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.layout/commit/601808081d460783b41e683b07c16b2a34971ad5

Revert "Allow overiding navigation_depth via request param in GlobalSectionsViewlet"

This reverts commit 2f11ad8d4994507d77fa098204623db4db6daa55.

Files changed:
M plone/app/layout/viewlets/common.py

b'diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py\nindex 280e24c2..79fb687e 100644\n--- a/plone/app/layout/viewlets/common.py\n+++ b/plone/app/layout/viewlets/common.py\n@@ -304,12 +304,11 @@ def navtree(self):\n         settings = self.settings\n         if not settings.generate_tabs:\n             return ret\n-        navigation_depth = int(self.request.get("navigation_depth") or settings.navigation_depth)\n \n         query = {\n             "path": {\n                 "query": self.navtree_path,\n-                "depth": navigation_depth,\n+                "depth": settings.navigation_depth,\n             },\n             "portal_type": {"query": settings.displayed_types},\n             "Language": self.current_language,\n'

