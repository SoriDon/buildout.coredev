Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-01-02T01:54:29+01:00
Author: Gil Forcada (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/fa5182cdc5fb3a5db6c3a7db32384c9ee0c6cc41

fix: silence quite some warnings

Files changed:
A news/2683.bugfix
M Products/CMFPlone/RegistrationTool.py
M Products/CMFPlone/events.py
M Products/CMFPlone/interfaces/events.py
M Products/CMFPlone/utils.py

b'diff --git a/Products/CMFPlone/RegistrationTool.py b/Products/CMFPlone/RegistrationTool.py\nindex d2465d0e9..345afc2f9 100644\n--- a/Products/CMFPlone/RegistrationTool.py\n+++ b/Products/CMFPlone/RegistrationTool.py\n@@ -482,19 +482,19 @@ def editMember(self, member_id, properties=None, password=None,\n InitializeClass(RegistrationTool)\n \n _TESTS = (\n-    (re.compile("^[0-9a-zA-Z\\.\\-\\_\\+\\\']+\\@[0-9a-zA-Z\\.\\-]+$"),\n+    (re.compile(r"^[0-9a-zA-Z\\.\\-\\_\\+\\\']+\\@[0-9a-zA-Z\\.\\-]+$"),\n      True, "Failed a"),\n-    (re.compile("^[^0-9a-zA-Z]|[^0-9a-zA-Z]$"),\n+    (re.compile(r"^[^0-9a-zA-Z]|[^0-9a-zA-Z]$"),\n      False, "Failed b"),\n-    (re.compile("([0-9a-zA-Z_]{1})\\@."),\n+    (re.compile(r"([0-9a-zA-Z_]{1})\\@."),\n      True, "Failed c"),\n-    (re.compile(".\\@([0-9a-zA-Z]{1})"),\n+    (re.compile(r".\\@([0-9a-zA-Z]{1})"),\n      True, "Failed d"),\n-    (re.compile(".\\.\\-.|.\\-\\..|.\\.\\..|.!(xn)\\-\\-."),\n+    (re.compile(r".\\.\\-.|.\\-\\..|.\\.\\..|.!(xn)\\-\\-."),\n      False, "Failed e"),\n-    (re.compile(".\\.\\_.|.\\-\\_.|.\\_\\..|.\\_\\-.|.\\_\\_."),\n+    (re.compile(r".\\.\\_.|.\\-\\_.|.\\_\\..|.\\_\\-.|.\\_\\_."),\n      False, "Failed f"),\n-    (re.compile("(.\\.([a-zA-Z]{2,}))$|(.\\.(xn--[0-9a-z]+))$"),\n+    (re.compile(r"(.\\.([a-zA-Z]{2,}))$|(.\\.(xn--[0-9a-z]+))$"),\n      True, "Failed g"),\n )\n \ndiff --git a/Products/CMFPlone/events.py b/Products/CMFPlone/events.py\nindex f4fde26c1..faad5c73f 100644\n--- a/Products/CMFPlone/events.py\n+++ b/Products/CMFPlone/events.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n from zope.interface import implementer\n-from zope.component.interfaces import ObjectEvent\n+from zope.interface.interfaces import ObjectEvent\n from Products.CMFPlone.utils import get_installer\n \n from .interfaces import ISiteManagerCreatedEvent\ndiff --git a/Products/CMFPlone/interfaces/events.py b/Products/CMFPlone/interfaces/events.py\nindex c68a704f8..e0dceb518 100644\n--- a/Products/CMFPlone/interfaces/events.py\n+++ b/Products/CMFPlone/interfaces/events.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n-from zope.component.interfaces import IObjectEvent\n from zope.interface import Attribute\n from zope.interface import Interface\n+from zope.interface.interfaces import IObjectEvent\n \n \n class ISiteManagerCreatedEvent(IObjectEvent):\ndiff --git a/Products/CMFPlone/utils.py b/Products/CMFPlone/utils.py\nindex 26561dde0..73f7578ee 100644\n--- a/Products/CMFPlone/utils.py\n+++ b/Products/CMFPlone/utils.py\n@@ -402,7 +402,7 @@ def versionTupleFromString(v_str):\n         >>> versionTupleFromString(\'foo\') is None\n         True\n         """\n-    regex_str = "(^\\d+)[.]?(\\d*)[.]?(\\d*)[- ]?(alpha|beta|candidate|final|a|b|rc)?(\\d*)"  # noqa\n+    regex_str = r"(^\\d+)[.]?(\\d*)[.]?(\\d*)[- ]?(alpha|beta|candidate|final|a|b|rc)?(\\d*)"  # noqa\n     v_regex = re.compile(regex_str)\n     match = v_regex.match(v_str)\n     if match is None:\ndiff --git a/news/2683.bugfix b/news/2683.bugfix\nnew file mode 100644\nindex 000000000..0aa5b2ff9\n--- /dev/null\n+++ b/news/2683.bugfix\n@@ -0,0 +1,2 @@\n+Fix several warnings shown when running tests on Python 3+.\n+[gforcada]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-01-04T15:18:34+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/7bf6432bd3cbd34b3106f46dd088efe68dddb36b

Merge pull request #2684 from plone/gforcada-fix-warnings

fix: silence quite some warnings

Files changed:
A news/2683.bugfix
M Products/CMFPlone/RegistrationTool.py
M Products/CMFPlone/events.py
M Products/CMFPlone/interfaces/events.py
M Products/CMFPlone/utils.py

b'diff --git a/Products/CMFPlone/RegistrationTool.py b/Products/CMFPlone/RegistrationTool.py\nindex d2465d0e9..345afc2f9 100644\n--- a/Products/CMFPlone/RegistrationTool.py\n+++ b/Products/CMFPlone/RegistrationTool.py\n@@ -482,19 +482,19 @@ def editMember(self, member_id, properties=None, password=None,\n InitializeClass(RegistrationTool)\n \n _TESTS = (\n-    (re.compile("^[0-9a-zA-Z\\.\\-\\_\\+\\\']+\\@[0-9a-zA-Z\\.\\-]+$"),\n+    (re.compile(r"^[0-9a-zA-Z\\.\\-\\_\\+\\\']+\\@[0-9a-zA-Z\\.\\-]+$"),\n      True, "Failed a"),\n-    (re.compile("^[^0-9a-zA-Z]|[^0-9a-zA-Z]$"),\n+    (re.compile(r"^[^0-9a-zA-Z]|[^0-9a-zA-Z]$"),\n      False, "Failed b"),\n-    (re.compile("([0-9a-zA-Z_]{1})\\@."),\n+    (re.compile(r"([0-9a-zA-Z_]{1})\\@."),\n      True, "Failed c"),\n-    (re.compile(".\\@([0-9a-zA-Z]{1})"),\n+    (re.compile(r".\\@([0-9a-zA-Z]{1})"),\n      True, "Failed d"),\n-    (re.compile(".\\.\\-.|.\\-\\..|.\\.\\..|.!(xn)\\-\\-."),\n+    (re.compile(r".\\.\\-.|.\\-\\..|.\\.\\..|.!(xn)\\-\\-."),\n      False, "Failed e"),\n-    (re.compile(".\\.\\_.|.\\-\\_.|.\\_\\..|.\\_\\-.|.\\_\\_."),\n+    (re.compile(r".\\.\\_.|.\\-\\_.|.\\_\\..|.\\_\\-.|.\\_\\_."),\n      False, "Failed f"),\n-    (re.compile("(.\\.([a-zA-Z]{2,}))$|(.\\.(xn--[0-9a-z]+))$"),\n+    (re.compile(r"(.\\.([a-zA-Z]{2,}))$|(.\\.(xn--[0-9a-z]+))$"),\n      True, "Failed g"),\n )\n \ndiff --git a/Products/CMFPlone/events.py b/Products/CMFPlone/events.py\nindex f4fde26c1..faad5c73f 100644\n--- a/Products/CMFPlone/events.py\n+++ b/Products/CMFPlone/events.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n from zope.interface import implementer\n-from zope.component.interfaces import ObjectEvent\n+from zope.interface.interfaces import ObjectEvent\n from Products.CMFPlone.utils import get_installer\n \n from .interfaces import ISiteManagerCreatedEvent\ndiff --git a/Products/CMFPlone/interfaces/events.py b/Products/CMFPlone/interfaces/events.py\nindex c68a704f8..e0dceb518 100644\n--- a/Products/CMFPlone/interfaces/events.py\n+++ b/Products/CMFPlone/interfaces/events.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n-from zope.component.interfaces import IObjectEvent\n from zope.interface import Attribute\n from zope.interface import Interface\n+from zope.interface.interfaces import IObjectEvent\n \n \n class ISiteManagerCreatedEvent(IObjectEvent):\ndiff --git a/Products/CMFPlone/utils.py b/Products/CMFPlone/utils.py\nindex 26561dde0..73f7578ee 100644\n--- a/Products/CMFPlone/utils.py\n+++ b/Products/CMFPlone/utils.py\n@@ -402,7 +402,7 @@ def versionTupleFromString(v_str):\n         >>> versionTupleFromString(\'foo\') is None\n         True\n         """\n-    regex_str = "(^\\d+)[.]?(\\d*)[.]?(\\d*)[- ]?(alpha|beta|candidate|final|a|b|rc)?(\\d*)"  # noqa\n+    regex_str = r"(^\\d+)[.]?(\\d*)[.]?(\\d*)[- ]?(alpha|beta|candidate|final|a|b|rc)?(\\d*)"  # noqa\n     v_regex = re.compile(regex_str)\n     match = v_regex.match(v_str)\n     if match is None:\ndiff --git a/news/2683.bugfix b/news/2683.bugfix\nnew file mode 100644\nindex 000000000..0aa5b2ff9\n--- /dev/null\n+++ b/news/2683.bugfix\n@@ -0,0 +1,2 @@\n+Fix several warnings shown when running tests on Python 3+.\n+[gforcada]\n'

