Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2017-11-07T08:14:20+01:00
Author: Michael Howitz (icemac) <mh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/4bb0f90c79173910d680ff80ac6a2a34e9d3c934

Make text easier to understand.

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index ce2464a..0285ec9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,9 +8,9 @@ Breaking changes:
 
 - Require at least ZODB 5 and Zope 4.0b1.
 
-- Do not claim compatibility with Plone 4.3 and 5.0 anymore.
 
 - Python 3 compatibility.
+- Drop support for Plone 4.3 and 5.0.
 
 New features:
 


Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2017-11-07T08:20:02+01:00
Author: Michael Howitz (icemac) <mh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/c6b2ab024232433e67f39f4817973387c28eaa01

Add support for Python 3.6.

Additionally:
- add flake8 check (with currently many issues displayed)
- check for coverage (does not work well because subprocesses are used in the test runs)

Files changed:
A .coveragerc
A tox.ini
M .gitignore
M .travis.yml
M CHANGES.rst
M setup.py

diff --git a/.coveragerc b/.coveragerc
new file mode 100644
index 0000000..1f5ebec
--- /dev/null
+++ b/.coveragerc
@@ -0,0 +1,6 @@
+[run]
+branch = True
+source = plone.recipe.zope2instance
+
+[report]
+precision = 2
diff --git a/.gitignore b/.gitignore
index 62fde7b..4dbabab 100644
--- a/.gitignore
+++ b/.gitignore
@@ -11,4 +11,8 @@ include/
 lib/
 parts
 pip-selfcheck.json
+/.coverage
 /.installed.cfg
+/.tox
+/coverage.xml
+/htmlcov
diff --git a/.travis.yml b/.travis.yml
index 1f3db4b..709967c 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -2,6 +2,7 @@ language: python
 python:
   - 2.7
   - 3.5
+  - 3.6
 install:
   - pip install setuptools==33.1.1 zc.buildout==2.5.3
   - buildout bootstrap
diff --git a/CHANGES.rst b/CHANGES.rst
index 0285ec9..1b3745e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,8 +8,6 @@ Breaking changes:
 
 - Require at least ZODB 5 and Zope 4.0b1.
 
-
-- Python 3 compatibility.
 - Drop support for Plone 4.3 and 5.0.
 
 New features:
@@ -17,6 +15,8 @@ New features:
 - Add wsgi support
   [tschorr]
 
+- Add support for Python 3.5 and 3.6.
+
 Bug fixes:
 
 - Python 3 compatibility with sixer
diff --git a/setup.py b/setup.py
index 3dace93..689d7bf 100644
--- a/setup.py
+++ b/setup.py
@@ -22,12 +22,13 @@
         "Framework :: Buildout",
         "Framework :: Plone",
         "Framework :: Plone :: 5.1",
-        "Framework :: Zope2",
+        "Framework :: Zope :: 4",
         "Programming Language :: Python",
         "Programming Language :: Python :: 2",
         "Programming Language :: Python :: 2.7",
         "Programming Language :: Python :: 3",
         "Programming Language :: Python :: 3.5",
+        "Programming Language :: Python :: 3.6",
         "Programming Language :: Python :: Implementation :: CPython",
     ],
     packages=find_packages('src'),
diff --git a/tox.ini b/tox.ini
new file mode 100644
index 0000000..74aa833
--- /dev/null
+++ b/tox.ini
@@ -0,0 +1,39 @@
+[tox]
+envlist =
+    flake8,
+    py27,
+    py35,
+    py36,
+    coverage,
+
+skip_missing_interpreters = False
+
+[testenv]
+commands =
+    {envbindir}/buildout -c {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} bootstrap
+    {envbindir}/buildout -c {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} -n install test
+    coverage run {envbindir}/test --all {posargs:-vc}
+skip_install = true
+deps =
+    setuptools==33.1.1
+    zc.buildout
+    coverage
+setenv =
+    COVERAGE_FILE=.coverage.{envname}
+
+[testenv:coverage]
+basepython = python2.7
+deps = coverage
+setenv =
+    COVERAGE_FILE=.coverage
+commands =
+    coverage erase
+    coverage combine
+    coverage html
+    coverage xml
+    coverage report
+
+[testenv:flake8]
+basepython = python2.7
+deps = flake8
+commands = flake8 --doctests src setup.py


Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2017-11-07T08:25:39+01:00
Author: Michael Howitz (icemac) <mh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/205cf09eef74b2b4022a91782413b5d0c3892c0c

Add caching for faster runs.

Files changed:
M .travis.yml

diff --git a/.travis.yml b/.travis.yml
index 709967c..4a8edc3 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -7,4 +7,9 @@ install:
   - pip install setuptools==33.1.1 zc.buildout==2.5.3
   - buildout bootstrap
   - bin/buildout -t 3
-script: bin/test
+script:
+  - bin/test -vv --auto-color
+cache:
+  pip: true
+  directories:
+    - eggs/


Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2017-11-07T11:19:05+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/7a39254e9783d2aa138e93dac523999bc32996db

Merge pull request #36 from plone/py36-support

Add support for Python 3.6

Files changed:
A .coveragerc
A tox.ini
M .gitignore
M .travis.yml
M CHANGES.rst
M setup.py

diff --git a/.coveragerc b/.coveragerc
new file mode 100644
index 0000000..1f5ebec
--- /dev/null
+++ b/.coveragerc
@@ -0,0 +1,6 @@
+[run]
+branch = True
+source = plone.recipe.zope2instance
+
+[report]
+precision = 2
diff --git a/.gitignore b/.gitignore
index 62fde7b..4dbabab 100644
--- a/.gitignore
+++ b/.gitignore
@@ -11,4 +11,8 @@ include/
 lib/
 parts
 pip-selfcheck.json
+/.coverage
 /.installed.cfg
+/.tox
+/coverage.xml
+/htmlcov
diff --git a/.travis.yml b/.travis.yml
index 1f3db4b..4a8edc3 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -2,8 +2,14 @@ language: python
 python:
   - 2.7
   - 3.5
+  - 3.6
 install:
   - pip install setuptools==33.1.1 zc.buildout==2.5.3
   - buildout bootstrap
   - bin/buildout -t 3
-script: bin/test
+script:
+  - bin/test -vv --auto-color
+cache:
+  pip: true
+  directories:
+    - eggs/
diff --git a/CHANGES.rst b/CHANGES.rst
index ce2464a..1b3745e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,15 +8,15 @@ Breaking changes:
 
 - Require at least ZODB 5 and Zope 4.0b1.
 
-- Do not claim compatibility with Plone 4.3 and 5.0 anymore.
-
-- Python 3 compatibility.
+- Drop support for Plone 4.3 and 5.0.
 
 New features:
 
 - Add wsgi support
   [tschorr]
 
+- Add support for Python 3.5 and 3.6.
+
 Bug fixes:
 
 - Python 3 compatibility with sixer
diff --git a/setup.py b/setup.py
index 3dace93..689d7bf 100644
--- a/setup.py
+++ b/setup.py
@@ -22,12 +22,13 @@
         "Framework :: Buildout",
         "Framework :: Plone",
         "Framework :: Plone :: 5.1",
-        "Framework :: Zope2",
+        "Framework :: Zope :: 4",
         "Programming Language :: Python",
         "Programming Language :: Python :: 2",
         "Programming Language :: Python :: 2.7",
         "Programming Language :: Python :: 3",
         "Programming Language :: Python :: 3.5",
+        "Programming Language :: Python :: 3.6",
         "Programming Language :: Python :: Implementation :: CPython",
     ],
     packages=find_packages('src'),
diff --git a/tox.ini b/tox.ini
new file mode 100644
index 0000000..74aa833
--- /dev/null
+++ b/tox.ini
@@ -0,0 +1,39 @@
+[tox]
+envlist =
+    flake8,
+    py27,
+    py35,
+    py36,
+    coverage,
+
+skip_missing_interpreters = False
+
+[testenv]
+commands =
+    {envbindir}/buildout -c {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} bootstrap
+    {envbindir}/buildout -c {toxinidir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} -n install test
+    coverage run {envbindir}/test --all {posargs:-vc}
+skip_install = true
+deps =
+    setuptools==33.1.1
+    zc.buildout
+    coverage
+setenv =
+    COVERAGE_FILE=.coverage.{envname}
+
+[testenv:coverage]
+basepython = python2.7
+deps = coverage
+setenv =
+    COVERAGE_FILE=.coverage
+commands =
+    coverage erase
+    coverage combine
+    coverage html
+    coverage xml
+    coverage report
+
+[testenv:flake8]
+basepython = python2.7
+deps = flake8
+commands = flake8 --doctests src setup.py


