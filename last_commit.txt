Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-07-30T22:46:54+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/c5da33b889164bb931ee3780798802654e0feec0

fix deprecated import from `plone.app.z3cform`

Files changed:
M Products/CMFPlone/controlpanel/browser/syndication.py

b'diff --git a/Products/CMFPlone/controlpanel/browser/syndication.py b/Products/CMFPlone/controlpanel/browser/syndication.py\nindex a34305772e..7a048f5950 100644\n--- a/Products/CMFPlone/controlpanel/browser/syndication.py\n+++ b/Products/CMFPlone/controlpanel/browser/syndication.py\n@@ -1,5 +1,5 @@\n from plone.app.registry.browser import controlpanel\n-from plone.app.z3cform.widget import SelectFieldWidget\n+from plone.app.z3cform.widgets.select import Select2FieldWidget\n from plone.base.interfaces.syndication import ISiteSyndicationSettings\n from Products.CMFCore.utils import getToolByName\n from Products.statusmessages.interfaces import IStatusMessage\n@@ -17,7 +17,7 @@ class SyndicationControlPanelForm(controlpanel.RegistryEditForm):\n \n     def updateFields(self):\n         super().updateFields()\n-        self.fields["site_rss_items"].widgetFactory = SelectFieldWidget\n+        self.fields["site_rss_items"].widgetFactory = Select2FieldWidget\n \n     def getSyndicationSettingsButtonShown(self):\n         actions = getToolByName(self.context, "portal_actions")\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-07-30T23:03:17+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/3957b0359058cb3fb2732d06b1d9b7bff26295d8

fix deprecated import from `plone.app.layout`

Files changed:
M Products/CMFPlone/patterns/tinymce.py

b'diff --git a/Products/CMFPlone/patterns/tinymce.py b/Products/CMFPlone/patterns/tinymce.py\nindex 9eeef14dab..27d569ef83 100644\n--- a/Products/CMFPlone/patterns/tinymce.py\n+++ b/Products/CMFPlone/patterns/tinymce.py\n@@ -1,8 +1,8 @@\n from lxml import html\n-from plone.app.layout.navigation.root import getNavigationRootObject\n from plone.app.theming.utils import theming_policy\n from plone.base.interfaces import IFilterSchema\n from plone.base.interfaces import ITinyMCESchema\n+from plone.base.navigationroot import get_navigation_root_object\n from plone.base.utils import safe_text\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n@@ -22,7 +22,7 @@ def __init__(self, context, request):\n         self.filter_settings = getUtility(IRegistry).forInterface(\n             IFilterSchema, prefix="plone", check=False\n         )\n-        self.nav_root = getNavigationRootObject(\n+        self.nav_root = get_navigation_root_object(\n             self.context,\n             get_portal(),\n         )\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-07-30T23:03:24+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/51c3be932109c2608b2f172abf5c9f1e86013e2c

changenote

Files changed:
A news/3830.bugfix

b'diff --git a/news/3830.bugfix b/news/3830.bugfix\nnew file mode 100644\nindex 0000000000..5375b8e25f\n--- /dev/null\n+++ b/news/3830.bugfix\n@@ -0,0 +1,2 @@\n+Fix deprecated imports.\n+[petschki]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-10-04T14:57:56+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/9ae85658982c1c97755a2ec1bf65dba712d8f986

Merge pull request #3830 from plone/paz3cform-import-fix

Fix deprecated imports

Files changed:
A news/3830.bugfix
M Products/CMFPlone/controlpanel/browser/syndication.py
M Products/CMFPlone/patterns/tinymce.py

b'diff --git a/Products/CMFPlone/controlpanel/browser/syndication.py b/Products/CMFPlone/controlpanel/browser/syndication.py\nindex a34305772e..7a048f5950 100644\n--- a/Products/CMFPlone/controlpanel/browser/syndication.py\n+++ b/Products/CMFPlone/controlpanel/browser/syndication.py\n@@ -1,5 +1,5 @@\n from plone.app.registry.browser import controlpanel\n-from plone.app.z3cform.widget import SelectFieldWidget\n+from plone.app.z3cform.widgets.select import Select2FieldWidget\n from plone.base.interfaces.syndication import ISiteSyndicationSettings\n from Products.CMFCore.utils import getToolByName\n from Products.statusmessages.interfaces import IStatusMessage\n@@ -17,7 +17,7 @@ class SyndicationControlPanelForm(controlpanel.RegistryEditForm):\n \n     def updateFields(self):\n         super().updateFields()\n-        self.fields["site_rss_items"].widgetFactory = SelectFieldWidget\n+        self.fields["site_rss_items"].widgetFactory = Select2FieldWidget\n \n     def getSyndicationSettingsButtonShown(self):\n         actions = getToolByName(self.context, "portal_actions")\ndiff --git a/Products/CMFPlone/patterns/tinymce.py b/Products/CMFPlone/patterns/tinymce.py\nindex 9eeef14dab..27d569ef83 100644\n--- a/Products/CMFPlone/patterns/tinymce.py\n+++ b/Products/CMFPlone/patterns/tinymce.py\n@@ -1,8 +1,8 @@\n from lxml import html\n-from plone.app.layout.navigation.root import getNavigationRootObject\n from plone.app.theming.utils import theming_policy\n from plone.base.interfaces import IFilterSchema\n from plone.base.interfaces import ITinyMCESchema\n+from plone.base.navigationroot import get_navigation_root_object\n from plone.base.utils import safe_text\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n@@ -22,7 +22,7 @@ def __init__(self, context, request):\n         self.filter_settings = getUtility(IRegistry).forInterface(\n             IFilterSchema, prefix="plone", check=False\n         )\n-        self.nav_root = getNavigationRootObject(\n+        self.nav_root = get_navigation_root_object(\n             self.context,\n             get_portal(),\n         )\ndiff --git a/news/3830.bugfix b/news/3830.bugfix\nnew file mode 100644\nindex 0000000000..5375b8e25f\n--- /dev/null\n+++ b/news/3830.bugfix\n@@ -0,0 +1,2 @@\n+Fix deprecated imports.\n+[petschki]\n'

