Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2019-05-10T18:19:57+02:00
Author: Laurent Lasudry (laulaz) <lasudry@gmail.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/4c5f0ed4548c00c5e68b2ca129c0d30043750f78

Avoid browser to permanently cache first redirection to negotiated lang

This refs #347

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/switcher.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex b0b698ca..cc2bcce1 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -13,6 +13,8 @@ Changelog\n \n Bug fixes:\n \n+- Avoid browser to permanently cache first redirection to negotiated lang (#347)\n+  [laulaz]\n \n - Moved to named behaviors. [iham] (#342)\n \ndiff --git a/src/plone/app/multilingual/browser/switcher.py b/src/plone/app/multilingual/browser/switcher.py\nindex 2d9ddca1..a06477b0 100644\n--- a/src/plone/app/multilingual/browser/switcher.py\n+++ b/src/plone/app/multilingual/browser/switcher.py\n@@ -28,4 +28,4 @@ def __call__(self):\n         if not langCookie or langCookie != target:\n             self.request.response.setCookie('I18N_LANGUAGE', target, path='/')\n \n-        self.request.response.redirect(url, status=301)\n+        self.request.response.redirect(url, status=302)\n"

Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2019-07-12T10:19:27+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/e503b61188325a6d8a00e598dae7b88007f43b96

Merge pull request #348 from affinitic/master

Avoid browser to permanently cache first redirection to negotiated lang

Files changed:
M CHANGES.rst
M src/plone/app/multilingual/browser/switcher.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 3148e399..25023d67 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -22,6 +22,8 @@ Bug fixes:\n \n Bug fixes:\n \n+- Avoid browser to permanently cache first redirection to negotiated lang (#347)\n+  [laulaz]\n \n - Moved to named behaviors. [iham] (#342)\n \ndiff --git a/src/plone/app/multilingual/browser/switcher.py b/src/plone/app/multilingual/browser/switcher.py\nindex 2d9ddca1..a06477b0 100644\n--- a/src/plone/app/multilingual/browser/switcher.py\n+++ b/src/plone/app/multilingual/browser/switcher.py\n@@ -28,4 +28,4 @@ def __call__(self):\n         if not langCookie or langCookie != target:\n             self.request.response.setCookie('I18N_LANGUAGE', target, path='/')\n \n-        self.request.response.redirect(url, status=301)\n+        self.request.response.redirect(url, status=302)\n"

