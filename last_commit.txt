Repository: plone.namedfile


Branch: refs/heads/master
Date: 2016-05-12T16:33:39+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.namedfile/commit/a04f7cc65a8031f3c6074732b1662c552e1a11bc

pass scale over

Files changed:
M plone/namedfile/scaling.py

diff --git a/plone/namedfile/scaling.py b/plone/namedfile/scaling.py
index 4e44efb..bfc99c9 100644
--- a/plone/namedfile/scaling.py
+++ b/plone/namedfile/scaling.py
@@ -2,7 +2,6 @@
 from AccessControl.ZopeGuards import guarded_getattr
 from Acquisition import aq_base
 from DateTime import DateTime
-from logging import exception
 from plone.namedfile.file import FILECHUNK_CLASSES
 from plone.namedfile.interfaces import IAvailableSizes
 from plone.namedfile.interfaces import IStableImageScale
@@ -223,7 +222,7 @@ def __call__(
         except (ConflictError, KeyboardInterrupt):
             raise
         except Exception:
-            exception(
+            logger.exception(
                 'Could not scale "%r" of %r',
                 orig_value,
                 self.context.absolute_url()
@@ -382,6 +381,7 @@ def scale(
             height=height,
             width=width,
             direction=direction,
+            scale=scale,
             **parameters
         )
         if info is None:
@@ -399,5 +399,5 @@ def tag(
         direction='thumbnail',
         **kwargs
     ):
-        scale = self.scale(fieldname, scale, height, width, direction)
+        scale = self.scale(fieldname, scale, height, width, direction, scale)
         return scale.tag(**kwargs) if scale else None


