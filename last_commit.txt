Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-11-30T08:44:17+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.contenttypes/commit/a033a2dc74aec7f024eccee1a9927dd10ef45a85

add loading='lazy' to tag for images lazy loading

Files changed:
M plone/app/contenttypes/browser/templates/listing_album.pt

b'diff --git a/plone/app/contenttypes/browser/templates/listing_album.pt b/plone/app/contenttypes/browser/templates/listing_album.pt\nindex 57473bed..6774f606 100644\n--- a/plone/app/contenttypes/browser/templates/listing_album.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_album.pt\n@@ -21,7 +21,7 @@\n   <tal:images tal:repeat="image images">\n     <div class="col mb-5">\n       <div class="card h-100">\n-        <div tal:define="scale python:image_scale.tag(image, \'image\', scale=\'mini\')" tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n+        <div tal:define="scale python:image_scale.tag(image, \'image\', scale=\'mini\', loading=\'lazy\')" tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n           <img tal:replace="structure scale" />\n         </div>\n         <div class="card-body">\n@@ -36,7 +36,7 @@\n   <tal:albums tal:repeat="album albums">\n     <div class="col mb-5">\n       <div class="card album h-100">\n-        <div tal:define="scale python:image_scale.tag(album, \'image\', scale=\'mini\') if getattr(album, \'image\', None) else None"\n+        <div tal:define="scale python:image_scale.tag(album, \'image\', scale=\'mini\', loading=\'lazy\') if getattr(album, \'image\', None) else None"\n          tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n           <img tal:replace="structure scale" />\n         </div>\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-11-30T08:45:21+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.contenttypes/commit/a57e5114438ad59b5c0efba2cf6eef9c466c7cee

add loading='lazy' to tag for images lazy loading

Files changed:
M plone/app/contenttypes/browser/templates/listing_summary.pt

b'diff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex 5c35f359..b11a43d6 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -48,7 +48,7 @@\n           <div class="col-3"\n                tal:condition="python: item_has_image and thumb_scale_summary">\n             <a tal:attributes="href item_link">\n-              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary)" />\n+              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary, loading=\'lazy\')" />\n             </a>\n           </div>\n \n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-11-30T08:51:22+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.contenttypes/commit/1ac27b806d91056edee5d33870d46bd75d46ea35

add loading='lazy' to tag for images lazy loading

Files changed:
M plone/app/contenttypes/browser/templates/listing_tabular.pt

b'diff --git a/plone/app/contenttypes/browser/templates/listing_tabular.pt b/plone/app/contenttypes/browser/templates/listing_tabular.pt\nindex 42d5f71d..0447709d 100644\n--- a/plone/app/contenttypes/browser/templates/listing_tabular.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_tabular.pt\n@@ -78,7 +78,7 @@\n \n                   <td>\n                     <a tal:condition="python:item_has_image and thumb_scale_table">\n-                      <img tal:attributes="href python: item_link" tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_table, css_class=img_class)" />\n+                      <img tal:attributes="href python: item_link" tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_table, css_class=img_class, loading=\'lazy\')" />\n                     </a>\n                   </td>\n \n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-11-30T08:53:57+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.contenttypes/commit/6aa88e6aebdd891125ea44921d239894f457e819

changelog

Files changed:
A news/655.news

b"diff --git a/news/655.news b/news/655.news\nnew file mode 100644\nindex 00000000..68c4f08a\n--- /dev/null\n+++ b/news/655.news\n@@ -0,0 +1,2 @@\n+add loading='lazy' to img tag in listing album and summary\n+[yurj]\n"

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-11-30T08:56:15+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.contenttypes/commit/505ab7dfa501a947efa0ab86bd52b7344b4575db

add tabular to changelo

Files changed:
M news/655.news

b"diff --git a/news/655.news b/news/655.news\nindex 68c4f08a..621f64c8 100644\n--- a/news/655.news\n+++ b/news/655.news\n@@ -1,2 +1,2 @@\n-add loading='lazy' to img tag in listing album and summary\n+add loading='lazy' to img tag in listing album, summary and tabular\n [yurj]\n"

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-12-01T23:21:43+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.contenttypes/commit/670737c59863f07a6555d485e92554929c96902d

Merge pull request #655 from plone/lazyloadinglisting

Lazy loading listing

Files changed:
A news/655.news
M plone/app/contenttypes/browser/templates/listing_album.pt
M plone/app/contenttypes/browser/templates/listing_summary.pt
M plone/app/contenttypes/browser/templates/listing_tabular.pt

b'diff --git a/news/655.news b/news/655.news\nnew file mode 100644\nindex 00000000..621f64c8\n--- /dev/null\n+++ b/news/655.news\n@@ -0,0 +1,2 @@\n+add loading=\'lazy\' to img tag in listing album, summary and tabular\n+[yurj]\ndiff --git a/plone/app/contenttypes/browser/templates/listing_album.pt b/plone/app/contenttypes/browser/templates/listing_album.pt\nindex 57473bed..6774f606 100644\n--- a/plone/app/contenttypes/browser/templates/listing_album.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_album.pt\n@@ -21,7 +21,7 @@\n   <tal:images tal:repeat="image images">\n     <div class="col mb-5">\n       <div class="card h-100">\n-        <div tal:define="scale python:image_scale.tag(image, \'image\', scale=\'mini\')" tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n+        <div tal:define="scale python:image_scale.tag(image, \'image\', scale=\'mini\', loading=\'lazy\')" tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n           <img tal:replace="structure scale" />\n         </div>\n         <div class="card-body">\n@@ -36,7 +36,7 @@\n   <tal:albums tal:repeat="album albums">\n     <div class="col mb-5">\n       <div class="card album h-100">\n-        <div tal:define="scale python:image_scale.tag(album, \'image\', scale=\'mini\') if getattr(album, \'image\', None) else None"\n+        <div tal:define="scale python:image_scale.tag(album, \'image\', scale=\'mini\', loading=\'lazy\') if getattr(album, \'image\', None) else None"\n          tal:condition="scale" class="card-image d-flex justify-content-center align-items-center" style="height: 14rem;">\n           <img tal:replace="structure scale" />\n         </div>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex 5c35f359..b11a43d6 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -48,7 +48,7 @@\n           <div class="col-3"\n                tal:condition="python: item_has_image and thumb_scale_summary">\n             <a tal:attributes="href item_link">\n-              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary)" />\n+              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary, loading=\'lazy\')" />\n             </a>\n           </div>\n \ndiff --git a/plone/app/contenttypes/browser/templates/listing_tabular.pt b/plone/app/contenttypes/browser/templates/listing_tabular.pt\nindex 42d5f71d..0447709d 100644\n--- a/plone/app/contenttypes/browser/templates/listing_tabular.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_tabular.pt\n@@ -78,7 +78,7 @@\n \n                   <td>\n                     <a tal:condition="python:item_has_image and thumb_scale_table">\n-                      <img tal:attributes="href python: item_link" tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_table, css_class=img_class)" />\n+                      <img tal:attributes="href python: item_link" tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_table, css_class=img_class, loading=\'lazy\')" />\n                     </a>\n                   </td>\n \n'

