Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-03-08T13:25:13+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/50f0c0542fa016f8f9206ab31dbd5a90720720be

fix deprecation warning, follow Deprecation Guide

Files changed:
A news/95.bugfix
M plone/dexterity/schema.py

b'diff --git a/news/95.bugfix b/news/95.bugfix\nnew file mode 100644\nindex 0000000..234d3e6\n--- /dev/null\n+++ b/news/95.bugfix\n@@ -0,0 +1,3 @@\n+Turn a warning meant as deprecation warning into a a real DeprecationWarning,\n+follows Deprecation Guide best practice.\n+[jensens]\ndiff --git a/plone/dexterity/schema.py b/plone/dexterity/schema.py\nindex 90cf48a..93565ea 100644\n--- a/plone/dexterity/schema.py\n+++ b/plone/dexterity/schema.py\n@@ -23,8 +23,8 @@\n \n import functools\n import logging\n-import six\n import types\n+import warnings\n \n \n log = logging.getLogger(__name__)\n@@ -135,11 +135,13 @@ def behavior_registrations(self, fti):\n             registration = queryUtility(IBehavior, name=behavior_name)\n             if registration is None:\n                 # BBB - this case should be deprecated in v 3.0\n-                log.warning(\n+                warnings.warn(\n                     \'No behavior registration found for behavior named: "{0}"\'\n-                    \' - trying fallback lookup..."\'.format(\n+                    \' - trying deprecated fallback lookup (will be removed \'\n+                    \'in 3.0)..."\'.format(\n                         behavior_name\n-                    )\n+                    ),\n+                    DeprecationWarning,\n                 )\n                 try:\n                     schema_interface = resolve(behavior_name)\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-03-27T00:21:18+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/84a0a013fd4750c6f6196c9b4eca924dc0984dbc

Merge pull request #95 from plone/jensens-fix-deprecation

fix deprecation warning, follow Deprecation Guide

Files changed:
A news/95.bugfix
M plone/dexterity/schema.py

b'diff --git a/news/95.bugfix b/news/95.bugfix\nnew file mode 100644\nindex 0000000..234d3e6\n--- /dev/null\n+++ b/news/95.bugfix\n@@ -0,0 +1,3 @@\n+Turn a warning meant as deprecation warning into a a real DeprecationWarning,\n+follows Deprecation Guide best practice.\n+[jensens]\ndiff --git a/plone/dexterity/schema.py b/plone/dexterity/schema.py\nindex 90cf48a..93565ea 100644\n--- a/plone/dexterity/schema.py\n+++ b/plone/dexterity/schema.py\n@@ -23,8 +23,8 @@\n \n import functools\n import logging\n-import six\n import types\n+import warnings\n \n \n log = logging.getLogger(__name__)\n@@ -135,11 +135,13 @@ def behavior_registrations(self, fti):\n             registration = queryUtility(IBehavior, name=behavior_name)\n             if registration is None:\n                 # BBB - this case should be deprecated in v 3.0\n-                log.warning(\n+                warnings.warn(\n                     \'No behavior registration found for behavior named: "{0}"\'\n-                    \' - trying fallback lookup..."\'.format(\n+                    \' - trying deprecated fallback lookup (will be removed \'\n+                    \'in 3.0)..."\'.format(\n                         behavior_name\n-                    )\n+                    ),\n+                    DeprecationWarning,\n                 )\n                 try:\n                     schema_interface = resolve(behavior_name)\n'

