Repository: plone.app.mosaic


Branch: refs/heads/es6
Date: 2022-06-13T12:33:55+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.mosaic/commit/f23f663b7654f2ea2738f86274101ca32aba0672

refactor imports

Files changed:
M resources/js/mosaic.overlay.js
M resources/js/mosaic.pattern.js

b'diff --git a/resources/js/mosaic.overlay.js b/resources/js/mosaic.overlay.js\nindex a7dc5d36..2f14a2fb 100644\n--- a/resources/js/mosaic.overlay.js\n+++ b/resources/js/mosaic.overlay.js\n@@ -21,7 +21,7 @@ export default class Overlay {\n             content: "#content-core",\n             modalSizeClass: "modal-xl",\n         });\n-        self.modal.initModal();\n+        self.modal.init();\n     }\n \n     open (mode, tile_config) {\ndiff --git a/resources/js/mosaic.pattern.js b/resources/js/mosaic.pattern.js\nindex 227a9bd1..e1ef50ad 100644\n--- a/resources/js/mosaic.pattern.js\n+++ b/resources/js/mosaic.pattern.js\n@@ -7,6 +7,11 @@ import utils from "@plone/mockup/src/core/utils";\n import Modal from "@plone/mockup/src/pat/modal/modal";\n import logging from "@patternslib/patternslib/src/core/logging";\n \n+import Overlay  from "./mosaic.overlay";\n+import Panel from "./mosaic.panel";\n+import Tile  from "./mosaic.tile";\n+import Toolbar from "./mosaic.toolbar";\n+\n import SelectLayoutTemplate from "./templates/select_layout.xml";\n import SaveLayoutTemplate from "./templates/save_layout.xml";\n import ManageLayoutsTemplate from "./templates/manage_layouts.xml";\n@@ -144,8 +149,6 @@ export default Base.extend({\n         // Drop panels within panels (only the top level panels are editable)\n         $("[data-panel] [data-panel]", self.document).removeAttr("data-panel");\n \n-        const Panel = (await import("./mosaic.panel")).default;\n-\n         $content.find("[data-panel]").each(function () {\n             var panel = new Panel(this);\n             panel.initialize($content);\n@@ -158,9 +161,6 @@ export default Base.extend({\n \n         self.panels = $(".mosaic-panel", self.document);\n \n-        // Init app tiles\n-        const Tile = (await import("./mosaic.tile")).default;\n-\n         self.panels.find("[data-tile]").each(async function (idx) {\n             log.info(`Panel tile counter: ${idx}`);\n             if (validTile(this)) {\n@@ -178,12 +178,10 @@ export default Base.extend({\n         await self._initPanels(content);\n \n         // Init overlay\n-        const Overlay = (await import("./mosaic.overlay")).default;\n         self.overlay = new Overlay(self.options, self.panels);\n         self.overlay.initialize();\n \n         // Init toolbar\n-        const Toolbar = (await import("./mosaic.toolbar")).default;\n         self.toolbar = new Toolbar(self);\n         self.toolbar.initToolbar();\n \n'

