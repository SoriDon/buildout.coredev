Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-05-05T16:10:50+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/5ea6c0ede14ab1060bea851acc59bfdd56f1ddca

WarningInterceptor was removed in CMF 5 years ago and here also not needed.

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/testPortalCreation.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2884c60..687bb97 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,6 +26,9 @@ New features:
 
 Bug fixes:
 
+- CMFCore ``WarningInterceptor`` test base class was gone and is not needed in Plone, so removed.
+  [jensens]
+
 - Fix default value for ``robots.txt`` to avoid issues with content containing "search" in the id.
   [hvelarde]
 
diff --git a/Products/CMFPlone/tests/testPortalCreation.py b/Products/CMFPlone/tests/testPortalCreation.py
index ea3b84c..be2a5dc 100644
--- a/Products/CMFPlone/tests/testPortalCreation.py
+++ b/Products/CMFPlone/tests/testPortalCreation.py
@@ -1,7 +1,6 @@
 # -*- coding: utf-8 -*-
 from Products.CMFPlone.tests import PloneTestCase
 from Products.CMFPlone.tests import dummy
-from Products.CMFCore.tests.base.testcase import WarningInterceptor
 
 from zope.component import getGlobalSiteManager
 from zope.component import getSiteManager
@@ -39,7 +38,7 @@
 from plone.registry.interfaces import IRegistry
 
 
-class TestPortalCreation(PloneTestCase.PloneTestCase, WarningInterceptor):
+class TestPortalCreation(PloneTestCase.PloneTestCase):
 
     def afterSetUp(self):
         self.membership = self.portal.portal_membership
@@ -57,9 +56,6 @@ def afterSetUp(self):
         self.javascripts = self.portal.portal_javascripts
         self.setup = self.portal.portal_setup
 
-    def beforeTearDown(self):
-        self._free_warning_output()
-
     def testInstanceVersion(self):
         # Test if the version of the instance has been set
         mt = getToolByName(self.portal, 'portal_migration')
@@ -360,7 +356,6 @@ def testContentsTabVisible(self):
                 self.assertTrue(a.visible)
 
     def testDefaultGroupsAdded(self):
-        self._trap_warning_output()
         self.assertTrue('Administrators' in self.groups.listGroupIds())
         self.assertTrue('Reviewers' in self.groups.listGroupIds())
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-05-08T10:31:52+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/e94ca255c8ec8ac44dc1e851f3fb1bf3219b5877

Merge pull request #2046 from plone/remove-WarningInterceptor

WarningInterceptor was removed in CMF 5 years ago

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/testPortalCreation.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2884c60..687bb97 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -26,6 +26,9 @@ New features:
 
 Bug fixes:
 
+- CMFCore ``WarningInterceptor`` test base class was gone and is not needed in Plone, so removed.
+  [jensens]
+
 - Fix default value for ``robots.txt`` to avoid issues with content containing "search" in the id.
   [hvelarde]
 
diff --git a/Products/CMFPlone/tests/testPortalCreation.py b/Products/CMFPlone/tests/testPortalCreation.py
index ea3b84c..be2a5dc 100644
--- a/Products/CMFPlone/tests/testPortalCreation.py
+++ b/Products/CMFPlone/tests/testPortalCreation.py
@@ -1,7 +1,6 @@
 # -*- coding: utf-8 -*-
 from Products.CMFPlone.tests import PloneTestCase
 from Products.CMFPlone.tests import dummy
-from Products.CMFCore.tests.base.testcase import WarningInterceptor
 
 from zope.component import getGlobalSiteManager
 from zope.component import getSiteManager
@@ -39,7 +38,7 @@
 from plone.registry.interfaces import IRegistry
 
 
-class TestPortalCreation(PloneTestCase.PloneTestCase, WarningInterceptor):
+class TestPortalCreation(PloneTestCase.PloneTestCase):
 
     def afterSetUp(self):
         self.membership = self.portal.portal_membership
@@ -57,9 +56,6 @@ def afterSetUp(self):
         self.javascripts = self.portal.portal_javascripts
         self.setup = self.portal.portal_setup
 
-    def beforeTearDown(self):
-        self._free_warning_output()
-
     def testInstanceVersion(self):
         # Test if the version of the instance has been set
         mt = getToolByName(self.portal, 'portal_migration')
@@ -360,7 +356,6 @@ def testContentsTabVisible(self):
                 self.assertTrue(a.visible)
 
     def testDefaultGroupsAdded(self):
-        self._trap_warning_output()
         self.assertTrue('Administrators' in self.groups.listGroupIds())
         self.assertTrue('Reviewers' in self.groups.listGroupIds())
 


