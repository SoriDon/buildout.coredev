Repository: plone.testing


Branch: refs/heads/master
Date: 2018-01-29T12:10:36+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.testing/commit/fd441948b844a8ebf72d0cd3cad8afab4d3628ce

No longer use deprecated import for getSite/setSite

Files changed:
M CHANGES.rst
M src/plone/testing/_z2_testbrowser.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 88b50f1..a7348a9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -9,6 +9,9 @@ Changelog
   + Only support ``Zope >= 4``, no longer support ``Zope2``.
   + Drop support for Python 2.6.
 
+- No longer use deprecated import for getSite/setSite.
+  [jensens]
+
 - Update code to follow Plone styleguide.
   [gforcada]
 
diff --git a/src/plone/testing/_z2_testbrowser.py b/src/plone/testing/_z2_testbrowser.py
index bc4467b..eab8d45 100644
--- a/src/plone/testing/_z2_testbrowser.py
+++ b/src/plone/testing/_z2_testbrowser.py
@@ -27,8 +27,8 @@ def saveState(func):
     """
     from AccessControl.SecurityManagement import getSecurityManager
     from AccessControl.SecurityManagement import setSecurityManager
-    from zope.site.hooks import getSite
-    from zope.site.hooks import setSite
+    from zope.component.hooks import getSite
+    from zope.component.hooks import setSite
 
     def wrapped_func(*args, **kw):
         sm, site = getSecurityManager(), getSite()


