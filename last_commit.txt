Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-11-04T08:06:32+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/e13d5d841ebacb1d8fe60452ffd69d43530335f5

Fix for `.list-group-numbered` in Bootstrap.

When the offset variable is implemented in Boostrap, the `counter-reset` can be removed here again.

Files changed:
M Products/CMFPlone/browser/templates/search.pt

b'diff --git a/Products/CMFPlone/browser/templates/search.pt b/Products/CMFPlone/browser/templates/search.pt\nindex 31f2004a97..2c707bb178 100644\n--- a/Products/CMFPlone/browser/templates/search.pt\n+++ b/Products/CMFPlone/browser/templates/search.pt\n@@ -198,8 +198,9 @@\n                                          use_view_action python:context.portal_registry.get(\'plone.types_use_view_action_in_listings\', []);\n                                          allowAnonymousViewAbout python:context.portal_registry[\'plone.allow_anon_views_about\'];\n                                          show_about python:not isAnon or allowAnonymousViewAbout;\n-                                         image_scale portal/@@image_scale">\n-                <ol class="searchResults list-group list-group-numbered" start="${python:request.get(\'b_start\', 0) + 1}">\n+                                         image_scale portal/@@image_scale;\n+                                         count_offset python:request.get(\'b_start\', 0)">\n+                <ol class="searchResults list-group list-group-numbered" start="${python:count_offset + 1}" style="--list-start: ${count_offset}; counter-reset: section var(--list-start, 0)">\n                   <tal:results repeat="item batch">\n                     <li tal:define="hasIcon item/getIcon" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start  fs-4">\n                       <div class="ms-2 me-auto">\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-11-04T08:06:36+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/266aa8c77147742ef1d43b8f9841b0b46ff2f93f

changenote

Files changed:
A news/3661.bugfix

b'diff --git a/news/3661.bugfix b/news/3661.bugfix\nnew file mode 100644\nindex 0000000000..37c836844a\n--- /dev/null\n+++ b/news/3661.bugfix\n@@ -0,0 +1,3 @@\n+Bootstrap fix for numbering `.list-group-numbered`.\n+See suggestions here https://github.com/twbs/bootstrap/issues/37345\n+[petschki]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-11-04T13:55:21+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/a382eaf1b6d19ae0bf0bd1c11c1fbe45db4bc5ac

Merge pull request #3669 from plone/petschki-search-numbering

Files changed:
A news/3661.bugfix
M Products/CMFPlone/browser/templates/search.pt

b'diff --git a/Products/CMFPlone/browser/templates/search.pt b/Products/CMFPlone/browser/templates/search.pt\nindex 31f2004a97..2c707bb178 100644\n--- a/Products/CMFPlone/browser/templates/search.pt\n+++ b/Products/CMFPlone/browser/templates/search.pt\n@@ -198,8 +198,9 @@\n                                          use_view_action python:context.portal_registry.get(\'plone.types_use_view_action_in_listings\', []);\n                                          allowAnonymousViewAbout python:context.portal_registry[\'plone.allow_anon_views_about\'];\n                                          show_about python:not isAnon or allowAnonymousViewAbout;\n-                                         image_scale portal/@@image_scale">\n-                <ol class="searchResults list-group list-group-numbered" start="${python:request.get(\'b_start\', 0) + 1}">\n+                                         image_scale portal/@@image_scale;\n+                                         count_offset python:request.get(\'b_start\', 0)">\n+                <ol class="searchResults list-group list-group-numbered" start="${python:count_offset + 1}" style="--list-start: ${count_offset}; counter-reset: section var(--list-start, 0)">\n                   <tal:results repeat="item batch">\n                     <li tal:define="hasIcon item/getIcon" class="list-group-item list-group-item-action d-flex justify-content-between align-items-start  fs-4">\n                       <div class="ms-2 me-auto">\ndiff --git a/news/3661.bugfix b/news/3661.bugfix\nnew file mode 100644\nindex 0000000000..37c836844a\n--- /dev/null\n+++ b/news/3661.bugfix\n@@ -0,0 +1,3 @@\n+Bootstrap fix for numbering `.list-group-numbered`.\n+See suggestions here https://github.com/twbs/bootstrap/issues/37345\n+[petschki]\n'

