Repository: mockup


Branch: refs/heads/master
Date: 2022-05-16T14:17:21+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/70b7401251bb8a1ad0a2ae32bffe1881f7aa058f

feat(pat toolbar) Add styles with CSS variables

Files changed:
A src/pat/toolbar/toolbar.scss
M src/pat/toolbar/toolbar.js

b'diff --git a/src/pat/toolbar/toolbar.js b/src/pat/toolbar/toolbar.js\nindex b98c242c0..0a5070536 100644\n--- a/src/pat/toolbar/toolbar.js\n+++ b/src/pat/toolbar/toolbar.js\n@@ -11,6 +11,8 @@ export default Base.extend({\n     defaults: {},\n \n     init: function () {\n+        import("./toolbar.scss");\n+\n         $("body").on("structure-url-changed", (e, path) => {\n             $.ajax({\n                 url: $("body").attr("data-portal-url") + path + "/@@render-toolbar",\ndiff --git a/src/pat/toolbar/toolbar.scss b/src/pat/toolbar/toolbar.scss\nnew file mode 100644\nindex 000000000..7f00296ef\n--- /dev/null\n+++ b/src/pat/toolbar/toolbar.scss\n@@ -0,0 +1,250 @@\n+/* TOOLBAR */\n+@import "bootstrap/scss/bootstrap";\n+\n+:root {\n+    --plone-toolbar-bg: var(--bs-dark);\n+    --plone-toolbar-text-color: var(--bs-white);\n+    --plone-toolbar-locked-color: var(--bs-warning);\n+    --plone-toolbar-font: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;\n+    --plone-toolbar-separator-color: var(--bs-gray-500);\n+    --plone-toolbar-link-color: var(--plone-link-color);\n+    --plone-toolbar-link-hover-color: var(--plone-link-hover-color);\n+    --plone-toolbar-width: 220px;\n+    --plone-toolbar-width-collapsed: 60px;\n+    --plone-toolbar-top-height: 2.5rem;\n+}\n+\n+/* general collapsed dark mode */\n+#edit-zone {\n+    font-family: var(--plone-toolbar-font);\n+    position: fixed;\n+    z-index: $zindex-offcanvas;\n+    top: 0;\n+    left: 0;\n+    bottom: 0;\n+    display: flex;\n+    flex-direction: column;\n+    height: 100%;\n+    background: var(--plone-toolbar-bg);\n+    width: var(--plone-toolbar-width);\n+    color: var(--plone-toolbar-text-color);\n+    border-right: none;\n+\n+    &,\n+    .dropdown-menu {\n+        background-color: var(--plone-toolbar-bg);\n+    }\n+\n+    .dropdown-header {\n+        color: var(--plone-toolbar-text-color);\n+    }\n+\n+    .dropdown-menu {\n+        border-radius: 0;\n+        min-width: 12rem;\n+    }\n+\n+    .nav-link,\n+    .dropdown-item {\n+        color: var(--plone-toolbar-text-color);\n+\n+        &:hover,\n+        &:focus {\n+            background: var(--plone-toolbar-link-color);\n+            color: var(--plone-toolbar-text-color);\n+\n+            .label-state-published,\n+            .label-state-external {\n+                color: var(--plone-toolbar-link-hover-color) !important;\n+            }\n+        }\n+    }\n+\n+    .toolbar-header {\n+        background: var(--bs-primary);\n+        padding: 0.5rem 1rem;\n+        margin-bottom: 0.5rem;\n+        height: var(--plone-toolbar-top-height);\n+\n+        a {\n+            color: var(--plone-toolbar-text-color);\n+\n+            @include media-breakpoint-down(md) {\n+                display: none;\n+            }\n+        }\n+    }\n+\n+\n+    .label-state-published,\n+    .label-state-external {\n+        color: var(--plone-link-color-on-dark) !important;\n+    }\n+\n+    .label-state-internally_published {\n+        color: var(--plone-state-internally-published-color) !important;\n+    }\n+\n+    .label-state-pending {\n+        color: var(--plone-state-pending) !important;\n+    }\n+\n+    li.active .label-state-pending,\n+    .label-state-pending:hover {\n+        color: var(--plone-toolbar-text-color) !important;\n+    }\n+\n+    .label-state-draft,\n+    .label-state-internal {\n+        color: var(--plone-state-draft) !important;\n+    }\n+\n+    .label-state-private {\n+        color: var(--plone-state-private) !important;\n+    }\n+\n+    .personaltools-wrapper {\n+        margin-top: auto;\n+        border-top: solid 1px var(--plone-toolbar-separator-color);\n+        padding: 0.5rem 0;\n+    }\n+\n+}\n+\n+body.plone-toolbar-left {\n+    padding-left: var(--plone-toolbar-width-collapsed);\n+\n+    .toolbar-expand,\n+    .toolbar-collapse {\n+        display: none;\n+    }\n+\n+    #edit-zone {\n+        .nav-link {\n+            padding-right: 0.5rem;\n+        }\n+\n+        .border-top {\n+            border-top-color: var(--plone-toolbar-separator-color);\n+        }\n+    }\n+\n+    .toolbar-expand {\n+        display: block;\n+    }\n+\n+    #edit-zone {\n+        visibility: visible !important;\n+        transform: none;\n+        transition: none;\n+        width: var(--plone-toolbar-width-collapsed);\n+\n+        .toolbar-label {\n+            display: none;\n+        }\n+    }\n+\n+    // ONLY IF MD OR HIGHER\n+    @include media-breakpoint-up(md) {\n+        &.plone-toolbar-left-expanded {\n+            .toolbar-expand {\n+                display: none;\n+            }\n+\n+            .toolbar-collapse {\n+                display: block;\n+            }\n+\n+            padding-left: var(--plone-toolbar-width);\n+\n+            #edit-zone {\n+                width: var(--plone-toolbar-width);\n+\n+                .toolbar-label {\n+                    display: inline-block;\n+                }\n+            }\n+        }\n+    }\n+}\n+\n+/* extending dropdown from BS5 outside media query */\n+body.plone-toolbar-top {\n+    padding-left: var(--plone-toolbar-width-collapsed);\n+    padding-top: 0;\n+\n+    .toolbar-expand,\n+    .toolbar-collapse {\n+        display: none;\n+    }\n+\n+    .toolbar-label {\n+        display: none;\n+    }\n+}\n+\n+@include media-breakpoint-up(md) {\n+    body.plone-toolbar-top {\n+        padding-top: var(--plone-toolbar-top-height);\n+        padding-left: 0;\n+\n+        .toolbar-collapse,\n+        .toolbar-header {\n+            height: 100%;\n+        }\n+\n+        #edit-zone {\n+            bottom: unset;\n+            width: 100%;\n+            flex-direction: row;\n+            height: var(--plone-toolbar-top-height);\n+\n+            .plone-toolbar-main {\n+                flex-direction: row;\n+\n+                >.border-top {\n+                    border-top: none;\n+                    border-right: solid 1px var(--plone-toolbar-separator-color);\n+                }\n+            }\n+\n+            .personaltools-wrapper {\n+                margin-left: auto;\n+                margin-top: 0;\n+                padding: 0;\n+                border-top: none;\n+            }\n+\n+        }\n+    }\n+}\n+\n+/* Dropdown fixes for mobile with top bar  */\n+@include media-breakpoint-down(md) {\n+    body.plone-toolbar-top {\n+        #edit-zone {\n+            width: var(--plone-toolbar-width-collapsed);\n+\n+            .nav-link {\n+                padding-right: 0.5rem;\n+\n+                &.dropdown-toggle::after {\n+                    vertical-align: 0;\n+                    margin-left: 0;\n+                    border-top: .3em solid transparent;\n+                    border-right: 0;\n+                    border-bottom: .3em solid transparent;\n+                    border-left: .3em solid;\n+                }\n+            }\n+\n+            .dropdown-menu.show {\n+                display: block;\n+                margin-left: var(--plone-toolbar-width-collapsed) !important;\n+                margin-top: -2.5rem !important;\n+            }\n+\n+\n+        }\n+    }\n+}\n'

Repository: mockup


Branch: refs/heads/master
Date: 2022-05-16T14:18:20+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/582e2459c3f943b51d81788ed04f59fdcba17ed1

feat(pat toolbar) Update toolbar toggler

Files changed:
M src/pat/toolbar/toolbar.js

b'diff --git a/src/pat/toolbar/toolbar.js b/src/pat/toolbar/toolbar.js\nindex 0a5070536..ec878a79f 100644\n--- a/src/pat/toolbar/toolbar.js\n+++ b/src/pat/toolbar/toolbar.js\n@@ -28,13 +28,13 @@ export default Base.extend({\n         });\n \n         // unpin toolbar and save state\n-        this.$el.on("click", ".offcanvas-unpin", (e) => {\n+        this.$el.on("click", ".toolbar-collapse", (e) => {\n             $("body").removeClass("plone-toolbar-left-expanded");\n             Cookies.set("plone-toolbar", JSON.stringify({expanded: false}), {path: "/"});\n         });\n \n         // pin toolbar and save state\n-        this.$el.on("click", ".offcanvas-pin", (e) => {\n+        this.$el.on("click", ".toolbar-expand", (e) => {\n             $("body").addClass("plone-toolbar-left-expanded");\n             Cookies.set("plone-toolbar", JSON.stringify({expanded: true}), {path: "/"});\n         });\n'

Repository: mockup


Branch: refs/heads/master
Date: 2022-05-16T14:41:34+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/mockup/commit/1ba485cc3926a73fff500df6d3ebc806fc7788db

Merge pull request #1168 from plone/toolbar-improvements

Toolbar improvements

Files changed:
A src/pat/toolbar/toolbar.scss
M src/pat/toolbar/toolbar.js

b'diff --git a/src/pat/toolbar/toolbar.js b/src/pat/toolbar/toolbar.js\nindex b98c242c0..ec878a79f 100644\n--- a/src/pat/toolbar/toolbar.js\n+++ b/src/pat/toolbar/toolbar.js\n@@ -11,6 +11,8 @@ export default Base.extend({\n     defaults: {},\n \n     init: function () {\n+        import("./toolbar.scss");\n+\n         $("body").on("structure-url-changed", (e, path) => {\n             $.ajax({\n                 url: $("body").attr("data-portal-url") + path + "/@@render-toolbar",\n@@ -26,13 +28,13 @@ export default Base.extend({\n         });\n \n         // unpin toolbar and save state\n-        this.$el.on("click", ".offcanvas-unpin", (e) => {\n+        this.$el.on("click", ".toolbar-collapse", (e) => {\n             $("body").removeClass("plone-toolbar-left-expanded");\n             Cookies.set("plone-toolbar", JSON.stringify({expanded: false}), {path: "/"});\n         });\n \n         // pin toolbar and save state\n-        this.$el.on("click", ".offcanvas-pin", (e) => {\n+        this.$el.on("click", ".toolbar-expand", (e) => {\n             $("body").addClass("plone-toolbar-left-expanded");\n             Cookies.set("plone-toolbar", JSON.stringify({expanded: true}), {path: "/"});\n         });\ndiff --git a/src/pat/toolbar/toolbar.scss b/src/pat/toolbar/toolbar.scss\nnew file mode 100644\nindex 000000000..7f00296ef\n--- /dev/null\n+++ b/src/pat/toolbar/toolbar.scss\n@@ -0,0 +1,250 @@\n+/* TOOLBAR */\n+@import "bootstrap/scss/bootstrap";\n+\n+:root {\n+    --plone-toolbar-bg: var(--bs-dark);\n+    --plone-toolbar-text-color: var(--bs-white);\n+    --plone-toolbar-locked-color: var(--bs-warning);\n+    --plone-toolbar-font: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;\n+    --plone-toolbar-separator-color: var(--bs-gray-500);\n+    --plone-toolbar-link-color: var(--plone-link-color);\n+    --plone-toolbar-link-hover-color: var(--plone-link-hover-color);\n+    --plone-toolbar-width: 220px;\n+    --plone-toolbar-width-collapsed: 60px;\n+    --plone-toolbar-top-height: 2.5rem;\n+}\n+\n+/* general collapsed dark mode */\n+#edit-zone {\n+    font-family: var(--plone-toolbar-font);\n+    position: fixed;\n+    z-index: $zindex-offcanvas;\n+    top: 0;\n+    left: 0;\n+    bottom: 0;\n+    display: flex;\n+    flex-direction: column;\n+    height: 100%;\n+    background: var(--plone-toolbar-bg);\n+    width: var(--plone-toolbar-width);\n+    color: var(--plone-toolbar-text-color);\n+    border-right: none;\n+\n+    &,\n+    .dropdown-menu {\n+        background-color: var(--plone-toolbar-bg);\n+    }\n+\n+    .dropdown-header {\n+        color: var(--plone-toolbar-text-color);\n+    }\n+\n+    .dropdown-menu {\n+        border-radius: 0;\n+        min-width: 12rem;\n+    }\n+\n+    .nav-link,\n+    .dropdown-item {\n+        color: var(--plone-toolbar-text-color);\n+\n+        &:hover,\n+        &:focus {\n+            background: var(--plone-toolbar-link-color);\n+            color: var(--plone-toolbar-text-color);\n+\n+            .label-state-published,\n+            .label-state-external {\n+                color: var(--plone-toolbar-link-hover-color) !important;\n+            }\n+        }\n+    }\n+\n+    .toolbar-header {\n+        background: var(--bs-primary);\n+        padding: 0.5rem 1rem;\n+        margin-bottom: 0.5rem;\n+        height: var(--plone-toolbar-top-height);\n+\n+        a {\n+            color: var(--plone-toolbar-text-color);\n+\n+            @include media-breakpoint-down(md) {\n+                display: none;\n+            }\n+        }\n+    }\n+\n+\n+    .label-state-published,\n+    .label-state-external {\n+        color: var(--plone-link-color-on-dark) !important;\n+    }\n+\n+    .label-state-internally_published {\n+        color: var(--plone-state-internally-published-color) !important;\n+    }\n+\n+    .label-state-pending {\n+        color: var(--plone-state-pending) !important;\n+    }\n+\n+    li.active .label-state-pending,\n+    .label-state-pending:hover {\n+        color: var(--plone-toolbar-text-color) !important;\n+    }\n+\n+    .label-state-draft,\n+    .label-state-internal {\n+        color: var(--plone-state-draft) !important;\n+    }\n+\n+    .label-state-private {\n+        color: var(--plone-state-private) !important;\n+    }\n+\n+    .personaltools-wrapper {\n+        margin-top: auto;\n+        border-top: solid 1px var(--plone-toolbar-separator-color);\n+        padding: 0.5rem 0;\n+    }\n+\n+}\n+\n+body.plone-toolbar-left {\n+    padding-left: var(--plone-toolbar-width-collapsed);\n+\n+    .toolbar-expand,\n+    .toolbar-collapse {\n+        display: none;\n+    }\n+\n+    #edit-zone {\n+        .nav-link {\n+            padding-right: 0.5rem;\n+        }\n+\n+        .border-top {\n+            border-top-color: var(--plone-toolbar-separator-color);\n+        }\n+    }\n+\n+    .toolbar-expand {\n+        display: block;\n+    }\n+\n+    #edit-zone {\n+        visibility: visible !important;\n+        transform: none;\n+        transition: none;\n+        width: var(--plone-toolbar-width-collapsed);\n+\n+        .toolbar-label {\n+            display: none;\n+        }\n+    }\n+\n+    // ONLY IF MD OR HIGHER\n+    @include media-breakpoint-up(md) {\n+        &.plone-toolbar-left-expanded {\n+            .toolbar-expand {\n+                display: none;\n+            }\n+\n+            .toolbar-collapse {\n+                display: block;\n+            }\n+\n+            padding-left: var(--plone-toolbar-width);\n+\n+            #edit-zone {\n+                width: var(--plone-toolbar-width);\n+\n+                .toolbar-label {\n+                    display: inline-block;\n+                }\n+            }\n+        }\n+    }\n+}\n+\n+/* extending dropdown from BS5 outside media query */\n+body.plone-toolbar-top {\n+    padding-left: var(--plone-toolbar-width-collapsed);\n+    padding-top: 0;\n+\n+    .toolbar-expand,\n+    .toolbar-collapse {\n+        display: none;\n+    }\n+\n+    .toolbar-label {\n+        display: none;\n+    }\n+}\n+\n+@include media-breakpoint-up(md) {\n+    body.plone-toolbar-top {\n+        padding-top: var(--plone-toolbar-top-height);\n+        padding-left: 0;\n+\n+        .toolbar-collapse,\n+        .toolbar-header {\n+            height: 100%;\n+        }\n+\n+        #edit-zone {\n+            bottom: unset;\n+            width: 100%;\n+            flex-direction: row;\n+            height: var(--plone-toolbar-top-height);\n+\n+            .plone-toolbar-main {\n+                flex-direction: row;\n+\n+                >.border-top {\n+                    border-top: none;\n+                    border-right: solid 1px var(--plone-toolbar-separator-color);\n+                }\n+            }\n+\n+            .personaltools-wrapper {\n+                margin-left: auto;\n+                margin-top: 0;\n+                padding: 0;\n+                border-top: none;\n+            }\n+\n+        }\n+    }\n+}\n+\n+/* Dropdown fixes for mobile with top bar  */\n+@include media-breakpoint-down(md) {\n+    body.plone-toolbar-top {\n+        #edit-zone {\n+            width: var(--plone-toolbar-width-collapsed);\n+\n+            .nav-link {\n+                padding-right: 0.5rem;\n+\n+                &.dropdown-toggle::after {\n+                    vertical-align: 0;\n+                    margin-left: 0;\n+                    border-top: .3em solid transparent;\n+                    border-right: 0;\n+                    border-bottom: .3em solid transparent;\n+                    border-left: .3em solid;\n+                }\n+            }\n+\n+            .dropdown-menu.show {\n+                display: block;\n+                margin-left: var(--plone-toolbar-width-collapsed) !important;\n+                margin-top: -2.5rem !important;\n+            }\n+\n+\n+        }\n+    }\n+}\n'

