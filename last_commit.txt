Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-12-21T15:37:55+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/2eded9804c702985b99516411e390527b01e4782

Fixed Unauthorized error in folder_full_view for anonymous users.

Fixes issue https://github.com/plone/Products.CMFPlone/issues/1292

Files changed:
M CHANGES.rst
M Products/CMFPlone/skins/plone_content/folder_full_view_item.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index a559aee..474f38c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -8,7 +8,15 @@ Changelog
 5.0.2 (unreleased)
 ------------------
 
-- Nothing changed yet.
+New:
+
+- *add item here*
+
+Fixes:
+
+- Fixed Unauthorized error in folder_full_view for anonymous users.
+  Fixes issue https://github.com/plone/Products.CMFPlone/issues/1292
+  [maurits]
 
 
 5.0.1 (2015-12-17)
diff --git a/Products/CMFPlone/skins/plone_content/folder_full_view_item.pt b/Products/CMFPlone/skins/plone_content/folder_full_view_item.pt
index 7eca5d2..b60457d 100644
--- a/Products/CMFPlone/skins/plone_content/folder_full_view_item.pt
+++ b/Products/CMFPlone/skins/plone_content/folder_full_view_item.pt
@@ -22,7 +22,7 @@
                      item_layout here/getLayout;
                      override python: {'Link': 'link_view'};
                      item_macro python:path('here/%s/macros/content-core | nothing' % override.get(item_type, item_layout));
-                     use_view_action python:context.portal_registry.get('plone.types_use_view_action_in_listings', []);
+                     use_view_action python:context.portal_registry['plone.types_use_view_action_in_listings'];
                      item_url context/absolute_url;
                      normalizeString nocall: context/plone_utils/normalizeString;
                      item_type_class python: 'contenttype-' + normalizeString(item_type);


