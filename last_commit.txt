Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-06T00:12:06+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.widgets/commit/efd3a0b3b134d56cd73cf8b461f939c006e41185

Fixed timing issue in robot tests.

Well, that is what I hope.
Sample error link in a pull request job:
http://jenkins.plone.org/job/pull-request-5.0/841/robot/report/robot_log.html#s1-s33-t1

Files changed:
M CHANGES.rst
M plone/app/widgets/tests/robot/test_querystring_widget.robot

diff --git a/CHANGES.rst b/CHANGES.rst
index 141d487..efb3dfa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,8 @@ New:
 
 Fixes:
 
+- Fixed timing issue in robot tests.  [maurits]
+
 - Use plone i18n domain
   [staeff]
 
diff --git a/plone/app/widgets/tests/robot/test_querystring_widget.robot b/plone/app/widgets/tests/robot/test_querystring_widget.robot
index 90bbaf4..3339494 100644
--- a/plone/app/widgets/tests/robot/test_querystring_widget.robot
+++ b/plone/app/widgets/tests/robot/test_querystring_widget.robot
@@ -14,12 +14,12 @@ Querystring Widget rows appear and disappear correctly
   Given I'm logged in as a 'Site Administrator'
     And I create a collection  My Collection
         Wait For Condition  return $('body.patterns-loaded').size() > 0
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1)
         Page should not contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When I select criteria index in row  1  Expiration date
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When Click Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2) .querystring-criteria-remove
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When Click Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1) .querystring-criteria-remove
         Page should not contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
 
@@ -82,7 +82,7 @@ Collection Creation works
    When I select criteria index in row  1  Location
     And I select criteria operator in row  1  Absolute path
     And I save
-        Page should contain Element  jquery=.contenttype-collection:contains(My Collection)
+        Wait until page contains Element  jquery=.contenttype-collection:contains(My Collection)
 
 
 *** Keywords ***
@@ -102,7 +102,7 @@ I select criteria operator in row
 Operator slave field becomes visible
   [Arguments]  ${number}  ${selector}
   ${criteria_row} =  Convert to String  ${querywidget_selector} .querystring-criteria-wrapper:nth-child(${number})
-  Page should contain Element  css=${criteria_row} .querystring-criteria-value ${selector}
+  Wait until page contains Element  css=${criteria_row} .querystring-criteria-value ${selector}
 
 Date criteria operators are functional
   [Arguments]  ${number}


Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-06T22:36:24+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.widgets/commit/fb6a294a0b2bf156b92f913c02f4eb77b7841c63

Merge pull request #129 from plone/robot-timing

Fixed timing issue in robot tests.

Files changed:
M CHANGES.rst
M plone/app/widgets/tests/robot/test_querystring_widget.robot

diff --git a/CHANGES.rst b/CHANGES.rst
index 141d487..efb3dfa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,8 @@ New:
 
 Fixes:
 
+- Fixed timing issue in robot tests.  [maurits]
+
 - Use plone i18n domain
   [staeff]
 
diff --git a/plone/app/widgets/tests/robot/test_querystring_widget.robot b/plone/app/widgets/tests/robot/test_querystring_widget.robot
index 90bbaf4..3339494 100644
--- a/plone/app/widgets/tests/robot/test_querystring_widget.robot
+++ b/plone/app/widgets/tests/robot/test_querystring_widget.robot
@@ -14,12 +14,12 @@ Querystring Widget rows appear and disappear correctly
   Given I'm logged in as a 'Site Administrator'
     And I create a collection  My Collection
         Wait For Condition  return $('body.patterns-loaded').size() > 0
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1)
         Page should not contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When I select criteria index in row  1  Expiration date
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When Click Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2) .querystring-criteria-remove
-        Page should contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
+        Wait until page contains Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
    When Click Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(1) .querystring-criteria-remove
         Page should not contain Element  css=${querywidget_selector} .querystring-criteria-wrapper:nth-child(2)
 
@@ -82,7 +82,7 @@ Collection Creation works
    When I select criteria index in row  1  Location
     And I select criteria operator in row  1  Absolute path
     And I save
-        Page should contain Element  jquery=.contenttype-collection:contains(My Collection)
+        Wait until page contains Element  jquery=.contenttype-collection:contains(My Collection)
 
 
 *** Keywords ***
@@ -102,7 +102,7 @@ I select criteria operator in row
 Operator slave field becomes visible
   [Arguments]  ${number}  ${selector}
   ${criteria_row} =  Convert to String  ${querywidget_selector} .querystring-criteria-wrapper:nth-child(${number})
-  Page should contain Element  css=${criteria_row} .querystring-criteria-value ${selector}
+  Wait until page contains Element  css=${criteria_row} .querystring-criteria-value ${selector}
 
 Date criteria operators are functional
   [Arguments]  ${number}


