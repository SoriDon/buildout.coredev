Repository: mockup


Branch: refs/heads/master
Date: 2017-01-13T13:58:59+02:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/142bcd3ce7a5c579164af75af263876a3d2db122

Add livesearch pattern to support Esc for hiding results

Files changed:
M CHANGES.rst
M mockup/patterns/livesearch/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 92e9cf9..e2ab4e1 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -189,6 +189,9 @@ New:
 - Update package.json dependencies, except less which has incompatible changes since 2.0 (less.parse).
   [thet]
 
+- Livesearch pattern: clear search term and hide results when Esc is pressed
+  [datakurre]
+
 
 Fixes:
 
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 12b06f5..0327d22 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -219,9 +219,15 @@ define([
           self.render();
         }
       }).attr('autocomplete', 'off').off('keyup').on('keyup', function(e){
-        // first off, we're capturing up, down and enter key presses
+        var code = e.keyCode || e.which;
+        // first off, we're capturing esc presses
+        if(code === 27){
+          self.$input.val('');
+          self.hide();
+          return;
+        }
+        // then, we're capturing up, down and enter key presses
         if(self.results && self.results.items && self.results.items.length > 0){
-          var code = e.keyCode || e.which;
           if(code === 13){
             /* enter key, check to see if there is a selected item */
             if(self.selectedItem !== -1){


Repository: mockup


Branch: refs/heads/master
Date: 2017-01-13T09:31:14-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/cd7880ff02f9cabdb5f3c560498578dca4c70b78

Merge pull request #729 from plone/datakurre-livesearch-esc

Add livesearch pattern to support Esc for hiding results

Files changed:
M CHANGES.rst
M mockup/patterns/livesearch/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 53037d2..da8508b 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -193,6 +193,9 @@ New:
 - Update package.json dependencies, except less which has incompatible changes since 2.0 (less.parse).
   [thet]
 
+- Livesearch pattern: clear search term and hide results when Esc is pressed
+  [datakurre]
+
 
 Fixes:
 
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 12b06f5..0327d22 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -219,9 +219,15 @@ define([
           self.render();
         }
       }).attr('autocomplete', 'off').off('keyup').on('keyup', function(e){
-        // first off, we're capturing up, down and enter key presses
+        var code = e.keyCode || e.which;
+        // first off, we're capturing esc presses
+        if(code === 27){
+          self.$input.val('');
+          self.hide();
+          return;
+        }
+        // then, we're capturing up, down and enter key presses
         if(self.results && self.results.items && self.results.items.length > 0){
-          var code = e.keyCode || e.which;
           if(code === 13){
             /* enter key, check to see if there is a selected item */
             if(self.selectedItem !== -1){


