Repository: plone.app.layout


Branch: refs/heads/master
Date: 2017-07-03T14:24:14+03:00
Author: Paul Roeland (polyester) <paul@cleanclothes.org>
Commit: https://github.com/plone/plone.app.layout/commit/05a8ad98e169403848785bbca89718572338942d

fixes https://github.com/plone/Products.CMFPlone/issues/1619

because of https://www.w3.org/TR/WCAG20-TECHS/C27.html the 'only in this section' part should not be displayed after the input field, as in original issue description. 
I'll also make a change in Barcelonetta to align properly.

Files changed:
M plone/app/layout/viewlets/searchbox.pt

diff --git a/plone/app/layout/viewlets/searchbox.pt b/plone/app/layout/viewlets/searchbox.pt
index 7ec8ac4..689ec62 100644
--- a/plone/app/layout/viewlets/searchbox.pt
+++ b/plone/app/layout/viewlets/searchbox.pt
@@ -13,7 +13,22 @@
         <label class="hiddenStructure"
                for="searchGadget"
                i18n:translate="text_search">Search Site</label>
-
+             
+        <div class="searchSection">
+            <input id="searchbox_currentfolder_only"
+                   class="noborder"
+                   type="checkbox"
+                   name="path"
+                   tal:attributes="value view/folder_path;
+                                   checked request/form/path|nothing"
+                   />
+            <label for="searchbox_currentfolder_only"
+                   i18n:translate="label_searchbox_currentfolder_only"
+                   style="cursor: pointer">
+                only in current section
+            </label>
+        </div>
+             
         <input name="SearchableText"
                type="text"
                size="18"
@@ -31,21 +46,7 @@
                value="Search"
                i18n:attributes="value label_search;" />
 
-        <div class="searchSection">
-            <input id="searchbox_currentfolder_only"
-                   class="noborder"
-                   type="checkbox"
-                   name="path"
-                   tal:attributes="value view/folder_path;
-                                   checked request/form/path|nothing"
-                   />
-            <label for="searchbox_currentfolder_only"
-                   i18n:translate="label_searchbox_currentfolder_only"
-                   style="cursor: pointer">
-                only in current section
-            </label>
-        </div>
-        </div>
+         </div>
     </form>
 
     <div id="portal-advanced-search"


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2017-07-05T12:09:17+03:00
Author: Paul Roeland (polyester) <paul@cleanclothes.org>
Commit: https://github.com/plone/plone.app.layout/commit/8eea015ae15bb9b71d53fa4c01e81fce2218bc39

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 041232b..66e3ae4 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Put "search in this section" checkbox where assistive tech users have a fair chance of finding and using it
+  https://github.com/plone/Products.CMFPlone/issues/1619
+  [polyester]
 
 
 2.7.1 (2017-07-03)


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2017-07-05T14:22:38+03:00
Author: Eric Steele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.layout/commit/42a892bb904eeceb5f0880456b933ae23532920e

Merge pull request #126 from polyester/master

fixes https://github.com/plone/Products.CMFPlone/issues/1619

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/searchbox.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ac15ac8..33bd59c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Put "search in this section" checkbox where assistive tech users have a fair chance of finding and using it
+  https://github.com/plone/Products.CMFPlone/issues/1619
+  [polyester]
 
 
 2.7.2 (2017-07-04)
diff --git a/plone/app/layout/viewlets/searchbox.pt b/plone/app/layout/viewlets/searchbox.pt
index 7ec8ac4..689ec62 100644
--- a/plone/app/layout/viewlets/searchbox.pt
+++ b/plone/app/layout/viewlets/searchbox.pt
@@ -13,7 +13,22 @@
         <label class="hiddenStructure"
                for="searchGadget"
                i18n:translate="text_search">Search Site</label>
-
+             
+        <div class="searchSection">
+            <input id="searchbox_currentfolder_only"
+                   class="noborder"
+                   type="checkbox"
+                   name="path"
+                   tal:attributes="value view/folder_path;
+                                   checked request/form/path|nothing"
+                   />
+            <label for="searchbox_currentfolder_only"
+                   i18n:translate="label_searchbox_currentfolder_only"
+                   style="cursor: pointer">
+                only in current section
+            </label>
+        </div>
+             
         <input name="SearchableText"
                type="text"
                size="18"
@@ -31,21 +46,7 @@
                value="Search"
                i18n:attributes="value label_search;" />
 
-        <div class="searchSection">
-            <input id="searchbox_currentfolder_only"
-                   class="noborder"
-                   type="checkbox"
-                   name="path"
-                   tal:attributes="value view/folder_path;
-                                   checked request/form/path|nothing"
-                   />
-            <label for="searchbox_currentfolder_only"
-                   i18n:translate="label_searchbox_currentfolder_only"
-                   style="cursor: pointer">
-                only in current section
-            </label>
-        </div>
-        </div>
+         </div>
     </form>
 
     <div id="portal-advanced-search"


