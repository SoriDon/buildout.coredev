Repository: plone.autoinclude


Branch: refs/heads/main
Date: 2022-12-07T20:05:27+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.autoinclude/commit/c061a8e0cdf24d78f0c14553ef78778d2083763a

Fix gh-actions, buildout3 was inheriting from buildout2 in a wrong way.

Files changed:
M tox.ini

b"diff --git a/tox.ini b/tox.ini\nindex 247dfad..df6d394 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -148,6 +148,7 @@ deps =\n     setuptools < 52\n     zc.buildout < 3\n commands_pre =\n+    python -m pip list\n     {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir}\n commands =\n     {envbindir}/test-unit {posargs:-cv}\n@@ -160,14 +161,15 @@ setenv =\n # Work around 'TypeError: dist must be a Distribution instance' on GHA:\n     SETUPTOOLS_USE_DISTUTILS = stdlib\n deps =\n-    pip == 21.3.1\n-    setuptools >= 60.2.0\n-    zc.buildout >= 3.0.0rc1\n+    pip == 22.3.1\n+    setuptools >= 65.6.3\n+    zc.buildout >= 3.0.1\n commands_pre =\n     python -m pip list\n-    {[testenv:buildout2]commands_pre}\n+    {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir}\n commands =\n-    {[testenv:buildout2]commands}\n+    {envbindir}/test-unit {posargs:-cv}\n+    {envbindir}/test-integration {posargs:-cv}\n \n [testenv:z3c-pip]\n # This is for testing with z3c.autoinclude and *without* plone.autoinclude.\n"

Repository: plone.autoinclude


Branch: refs/heads/main
Date: 2022-12-07T21:27:27+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.autoinclude/commit/3923ff9d5bcf8afb132092d34d0e8537bc4f5c98

Use tox &lt; 4 for now.

Files changed:
M .github/workflows/tests.yml

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 2a41864..965eadf 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -56,7 +56,10 @@ jobs:\n     - name: Install dependencies\n       run: |\n         python -m pip install --upgrade pip\n-        pip install tox\n+        # At least the coverage part fails with tox 4.0.0.\n+        # See https://github.com/plone/plone.autoinclude/pull/23#issuecomment-1341547082\n+        # Should be a temporary fix.  Done 2022-12-07.\n+        pip install "tox < 4"\n     - name: Test\n       run: tox -e ${{ matrix.config[1] }}\n     - name: Coverage\n'

Repository: plone.autoinclude


Branch: refs/heads/main
Date: 2022-12-07T14:19:06-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.autoinclude/commit/0d8d7e9c0129c5679e9f39142b7145718690c65f

Merge pull request #23 from plone/maurits-fix-gh-actions-buildout2-3

Fix gh-actions, buildout3 was inheriting from buildout2 in a wrong way.

Files changed:
M .github/workflows/tests.yml
M tox.ini

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 2a41864..965eadf 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -56,7 +56,10 @@ jobs:\n     - name: Install dependencies\n       run: |\n         python -m pip install --upgrade pip\n-        pip install tox\n+        # At least the coverage part fails with tox 4.0.0.\n+        # See https://github.com/plone/plone.autoinclude/pull/23#issuecomment-1341547082\n+        # Should be a temporary fix.  Done 2022-12-07.\n+        pip install "tox < 4"\n     - name: Test\n       run: tox -e ${{ matrix.config[1] }}\n     - name: Coverage\ndiff --git a/tox.ini b/tox.ini\nindex 247dfad..df6d394 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -148,6 +148,7 @@ deps =\n     setuptools < 52\n     zc.buildout < 3\n commands_pre =\n+    python -m pip list\n     {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir}\n commands =\n     {envbindir}/test-unit {posargs:-cv}\n@@ -160,14 +161,15 @@ setenv =\n # Work around \'TypeError: dist must be a Distribution instance\' on GHA:\n     SETUPTOOLS_USE_DISTUTILS = stdlib\n deps =\n-    pip == 21.3.1\n-    setuptools >= 60.2.0\n-    zc.buildout >= 3.0.0rc1\n+    pip == 22.3.1\n+    setuptools >= 65.6.3\n+    zc.buildout >= 3.0.1\n commands_pre =\n     python -m pip list\n-    {[testenv:buildout2]commands_pre}\n+    {envbindir}/buildout -nc {toxinidir}/buildout.cfg buildout:directory={envdir}\n commands =\n-    {[testenv:buildout2]commands}\n+    {envbindir}/test-unit {posargs:-cv}\n+    {envbindir}/test-integration {posargs:-cv}\n \n [testenv:z3c-pip]\n # This is for testing with z3c.autoinclude and *without* plone.autoinclude.\n'

