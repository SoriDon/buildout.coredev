Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-01T23:19:57+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.app.widgets/commit/4209de926f0a480481b8a24a7e185643757e2825

Use plone i18n domain

Files changed:
M CHANGES.rst
M plone/app/widgets/configure.zcml
M plone/app/widgets/utils.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9d02950..141d487 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
+- Use plone i18n domain
+  [staeff]
 
 
 2.0.2 (2015-11-28)
diff --git a/plone/app/widgets/configure.zcml b/plone/app/widgets/configure.zcml
index 5230acc..2257741 100644
--- a/plone/app/widgets/configure.zcml
+++ b/plone/app/widgets/configure.zcml
@@ -7,7 +7,7 @@
     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
     xmlns:plone="http://namespaces.plone.org/plone"
     xmlns:i18n="http://namespaces.zope.org/i18n"
-    i18n_domain="plone.app.widgets">
+    i18n_domain="plone">
 
   <i18n:registerTranslations directory="locales" />
 
diff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py
index 636de98..daec100 100644
--- a/plone/app/widgets/utils.py
+++ b/plone/app/widgets/utils.py
@@ -16,8 +16,7 @@
 import json
 from zope.globalrequest import getRequest
 
-_ = MessageFactory('plone.app.widgets')
-_plone = MessageFactory('plone')
+_ = MessageFactory('plone')
 
 
 try:
@@ -67,9 +66,9 @@ def get_date_options(request):
             'format': translate(
                 _('pickadate_date_format', default='mmmm d, yyyy'),
                 context=request),
-            'placeholder': translate(_plone('Enter date...'), context=request),
-            'today': translate(_plone(u"Today"), context=request),
-            'clear': translate(_plone(u"Clear"), context=request),
+            'placeholder': translate(_('Enter date...'), context=request),
+            'today': translate(_(u"Today"), context=request),
+            'clear': translate(_(u"Clear"), context=request),
         }
     }
 
@@ -80,8 +79,8 @@ def get_datetime_options(request):
         'format': translate(
             _('pickadate_time_format', default='h:i a'),
             context=request),
-        'placeholder': translate(_plone('Enter time...'), context=request),
-        'today': translate(_plone(u"Today"), context=request),
+        'placeholder': translate(_('Enter time...'), context=request),
+        'today': translate(_(u"Today"), context=request),
     }
     return options
 
@@ -126,11 +125,11 @@ def get_relateditems_options(context, value, separator, vocabulary_name,
                                      field_name)
 
     request = getRequest()
-    msgstr = translate(_plone(u'Search'), context=request)
+    msgstr = translate(_(u'Search'), context=request)
     options.setdefault('searchText', msgstr)
     msgstr = translate(_(u'Entire site'), context=request)
     options.setdefault('searchAllText', msgstr)
-    msgstr = translate(_plone('tabs_home',
+    msgstr = translate(_('tabs_home',
                        default=u'Home'),
                        context=request)
     options.setdefault('homeText', msgstr)


Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-01T23:21:34+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.app.widgets/commit/349a87d23cdcfbc8f74715514e2770eb448b5f1a

Remove locales folder

Files changed:
M plone/app/widgets/configure.zcml
D plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/plone.app.widgets.pot

diff --git a/plone/app/widgets/configure.zcml b/plone/app/widgets/configure.zcml
index 2257741..dfeb792 100644
--- a/plone/app/widgets/configure.zcml
+++ b/plone/app/widgets/configure.zcml
@@ -9,8 +9,6 @@
     xmlns:i18n="http://namespaces.zope.org/i18n"
     i18n_domain="plone">
 
-  <i18n:registerTranslations directory="locales" />
-
   <include package="Products.CMFPlone" />
   <include package="plone.app.vocabularies" />
   <include package="five.globalrequest" />
diff --git a/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index cbe23a5..0000000
--- a/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,45 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-15 13:45+0100\n"
-"Last-Translator: Daniel Widerin <daniel@widerin.net>\n"
-"Language-Team: Plone i18n <plone-i18n@lists.sourceforge.net>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: de\n"
-"Language-Name: German\n"
-"Domain: plone.app.widgets\n"
-"X-Generator: Poedit 1.5.5\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "d mmmm, yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "HH:i"
-
-#: ../utils.py:126
-msgid "Entire site"
-msgstr "Ganze Seite"
-
-
-#: ?
-msgid "Select folder"
-msgstr "Ordner auswählen"
-
-#: ?
-msgid "Select"
-msgstr "Auswählen"
-
-
-
-
diff --git a/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index 4b6df1c..0000000
--- a/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,27 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-04 15:36+0200\n"
-"Last-Translator: Simone Deponti <simone.deponti@abstract.it>\n"
-"Language-Team: Plone i18n <plone-i18n@lists.sourceforge.net>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Domain: plone.app.widgets\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "mmmm d, yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "h:i a"
diff --git a/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index 6cc712a..0000000
--- a/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,28 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-04 15:36+0200\n"
-"Last-Translator: Simone Deponti <simone.deponti@abstract.it>\n"
-"Language-Team: Plone italian translation project <plone-italian-translation-discussion@lists.coactivate.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: it\n"
-"Language-Name: Italian\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.app.widgets\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "d mmmm yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "HH:i"
diff --git a/plone/app/widgets/locales/plone.app.widgets.pot b/plone/app/widgets/locales/plone.app.widgets.pot
deleted file mode 100644
index ad36f4b..0000000
--- a/plone/app/widgets/locales/plone.app.widgets.pot
+++ /dev/null
@@ -1,28 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.app.widgets\n"
-
-#: ../dx/datetime.py:91
-#. Original 'yyyy-mm-dd', see http://amsul.ca/pickadate.js/date.htm#formatting_rules
-msgid "pickadate_date_format"
-msgstr ""
-
-#: ../dx/datetime.py:62
-#. Original 'HH:i', see http://amsul.ca/pickadate.js/time.htm#formatting_rules
-msgid "pickadate_time_format"
-msgstr ""


Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-02T07:44:56+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.widgets/commit/4bf03d40f67476ee67ab709ea8f13d06e4dd391d

Merge pull request #126 from plone/use-plone-i18n-domain

Use plone i18n domain

Files changed:
M CHANGES.rst
M plone/app/widgets/configure.zcml
M plone/app/widgets/utils.py
D plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
D plone/app/widgets/locales/plone.app.widgets.pot

diff --git a/CHANGES.rst b/CHANGES.rst
index 9d02950..141d487 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
+- Use plone i18n domain
+  [staeff]
 
 
 2.0.2 (2015-11-28)
diff --git a/plone/app/widgets/configure.zcml b/plone/app/widgets/configure.zcml
index 5230acc..dfeb792 100644
--- a/plone/app/widgets/configure.zcml
+++ b/plone/app/widgets/configure.zcml
@@ -7,9 +7,7 @@
     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"
     xmlns:plone="http://namespaces.plone.org/plone"
     xmlns:i18n="http://namespaces.zope.org/i18n"
-    i18n_domain="plone.app.widgets">
-
-  <i18n:registerTranslations directory="locales" />
+    i18n_domain="plone">
 
   <include package="Products.CMFPlone" />
   <include package="plone.app.vocabularies" />
diff --git a/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index cbe23a5..0000000
--- a/plone/app/widgets/locales/de/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,45 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-15 13:45+0100\n"
-"Last-Translator: Daniel Widerin <daniel@widerin.net>\n"
-"Language-Team: Plone i18n <plone-i18n@lists.sourceforge.net>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: de\n"
-"Language-Name: German\n"
-"Domain: plone.app.widgets\n"
-"X-Generator: Poedit 1.5.5\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "d mmmm, yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "HH:i"
-
-#: ../utils.py:126
-msgid "Entire site"
-msgstr "Ganze Seite"
-
-
-#: ?
-msgid "Select folder"
-msgstr "Ordner auswählen"
-
-#: ?
-msgid "Select"
-msgstr "Auswählen"
-
-
-
-
diff --git a/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index 4b6df1c..0000000
--- a/plone/app/widgets/locales/en/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,27 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-04 15:36+0200\n"
-"Last-Translator: Simone Deponti <simone.deponti@abstract.it>\n"
-"Language-Team: Plone i18n <plone-i18n@lists.sourceforge.net>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Domain: plone.app.widgets\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "mmmm d, yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "h:i a"
diff --git a/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po b/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
deleted file mode 100644
index 6cc712a..0000000
--- a/plone/app/widgets/locales/it/LC_MESSAGES/plone.app.widgets.po
+++ /dev/null
@@ -1,28 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: plone.app.widgets\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: 2013-04-04 15:36+0200\n"
-"Last-Translator: Simone Deponti <simone.deponti@abstract.it>\n"
-"Language-Team: Plone italian translation project <plone-italian-translation-discussion@lists.coactivate.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=UTF-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0;\n"
-"Language-Code: it\n"
-"Language-Name: Italian\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.app.widgets\n"
-
-#. See http://amsul.ca/pickadate.js/date.htm#formatting_rules
-#: ../dx/datetime.py:91
-msgid "pickadate_date_format"
-msgstr "d mmmm yyyy"
-
-#. See http://amsul.ca/pickadate.js/time.htm#formatting_rules
-#: ../dx/datetime.py:62
-msgid "pickadate_time_format"
-msgstr "HH:i"
diff --git a/plone/app/widgets/locales/plone.app.widgets.pot b/plone/app/widgets/locales/plone.app.widgets.pot
deleted file mode 100644
index ad36f4b..0000000
--- a/plone/app/widgets/locales/plone.app.widgets.pot
+++ /dev/null
@@ -1,28 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-04-04 12:39+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.app.widgets\n"
-
-#: ../dx/datetime.py:91
-#. Original 'yyyy-mm-dd', see http://amsul.ca/pickadate.js/date.htm#formatting_rules
-msgid "pickadate_date_format"
-msgstr ""
-
-#: ../dx/datetime.py:62
-#. Original 'HH:i', see http://amsul.ca/pickadate.js/time.htm#formatting_rules
-msgid "pickadate_time_format"
-msgstr ""
diff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py
index 636de98..daec100 100644
--- a/plone/app/widgets/utils.py
+++ b/plone/app/widgets/utils.py
@@ -16,8 +16,7 @@
 import json
 from zope.globalrequest import getRequest
 
-_ = MessageFactory('plone.app.widgets')
-_plone = MessageFactory('plone')
+_ = MessageFactory('plone')
 
 
 try:
@@ -67,9 +66,9 @@ def get_date_options(request):
             'format': translate(
                 _('pickadate_date_format', default='mmmm d, yyyy'),
                 context=request),
-            'placeholder': translate(_plone('Enter date...'), context=request),
-            'today': translate(_plone(u"Today"), context=request),
-            'clear': translate(_plone(u"Clear"), context=request),
+            'placeholder': translate(_('Enter date...'), context=request),
+            'today': translate(_(u"Today"), context=request),
+            'clear': translate(_(u"Clear"), context=request),
         }
     }
 
@@ -80,8 +79,8 @@ def get_datetime_options(request):
         'format': translate(
             _('pickadate_time_format', default='h:i a'),
             context=request),
-        'placeholder': translate(_plone('Enter time...'), context=request),
-        'today': translate(_plone(u"Today"), context=request),
+        'placeholder': translate(_('Enter time...'), context=request),
+        'today': translate(_(u"Today"), context=request),
     }
     return options
 
@@ -126,11 +125,11 @@ def get_relateditems_options(context, value, separator, vocabulary_name,
                                      field_name)
 
     request = getRequest()
-    msgstr = translate(_plone(u'Search'), context=request)
+    msgstr = translate(_(u'Search'), context=request)
     options.setdefault('searchText', msgstr)
     msgstr = translate(_(u'Entire site'), context=request)
     options.setdefault('searchAllText', msgstr)
-    msgstr = translate(_plone('tabs_home',
+    msgstr = translate(_('tabs_home',
                        default=u'Home'),
                        context=request)
     options.setdefault('homeText', msgstr)


