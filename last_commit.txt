Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-06-16T14:45:35+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/8c8d4a9a8edb1ba20e1f6987e5880a2f3b55c121

prevent "dictionary changed size during iteration"

Files changed:
M Products/CMFPlone/PasswordResetTool.py

b'diff --git a/Products/CMFPlone/PasswordResetTool.py b/Products/CMFPlone/PasswordResetTool.py\nindex d15ecc7b20..2f5f74e4e2 100644\n--- a/Products/CMFPlone/PasswordResetTool.py\n+++ b/Products/CMFPlone/PasswordResetTool.py\n@@ -176,7 +176,7 @@ def clearExpired(self, days=0):\n         Parameter controls how many days past expired it must be to disappear.\n         """\n         now = datetime.datetime.utcnow()\n-        for key, record in self._requests.items():\n+        for key, record in list(self._requests.items()):\n             stored_user, expiry = record\n             if self.expired(expiry, now - datetime.timedelta(days=days)):\n                 del self._requests[key]\n'

