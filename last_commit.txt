Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2018-08-08T13:46:16+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.discussion/commit/76f4f501606b3ba94cb750426a123707661a30d8

get rid of plone.app.controlpanel dependencies

Files changed:
M CHANGES.rst
M plone/app/discussion/browser/controlpanel.py
M plone/app/discussion/subscribers.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 0a8f3fd9..be4873e8 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -15,6 +15,9 @@ New features:\n \n Bug fixes:\n \n+- Fix location of controlpanel events.\n+  [jensens]\n+\n - Fixed tests when IRichText behavior is used.\n   IRichText -> IRichTextBehavior\n   This is a follow up to `issue 476 <https://github.com/plone/plone.app.contenttypes/issues/476>`_.\ndiff --git a/plone/app/discussion/browser/controlpanel.py b/plone/app/discussion/browser/controlpanel.py\nindex 3c88ebe3..5e904d80 100644\n--- a/plone/app/discussion/browser/controlpanel.py\n+++ b/plone/app/discussion/browser/controlpanel.py\n@@ -1,5 +1,4 @@\n # -*- coding: utf-8 -*-\n-from plone.app.controlpanel.interfaces import IConfigurationChangedEvent\n from plone.app.discussion.interfaces import _\n from plone.app.discussion.interfaces import IDiscussionSettings\n from plone.app.discussion.upgrades import update_registry\n@@ -7,6 +6,7 @@\n from plone.registry.interfaces import IRecordModifiedEvent\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n+from Products.CMFPlone.interfaces.controlpanel import IConfigurationChangedEvent  # noqa: E501\n from Products.CMFPlone.interfaces.controlpanel import IMailSchema\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/plone/app/discussion/subscribers.zcml b/plone/app/discussion/subscribers.zcml\nindex 5bb35353..20e1b7f5 100644\n--- a/plone/app/discussion/subscribers.zcml\n+++ b/plone/app/discussion/subscribers.zcml\n@@ -66,7 +66,7 @@\n     <!-- Control panel event subscribers -->\n \n     <subscriber\n-        for="plone.app.controlpanel.interfaces.IConfigurationChangedEvent"\n+        for="Products.CMFPlone.interfaces.events.IConfigurationChangedEvent"\n         handler=".browser.controlpanel.notify_configuration_changed"\n         />\n \n'

Repository: plone.app.discussion


Branch: refs/heads/master
Date: 2018-08-09T18:11:44+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.discussion/commit/a7d95a9449aece02b8919d322f9d4ca58b5fdbd4

Merge pull request #137 from plone/jensens/get-rid-of-p.a.controlpanel

get rid of plone.app.controlpanel dependencies

Files changed:
M CHANGES.rst
M plone/app/discussion/browser/controlpanel.py
M plone/app/discussion/subscribers.zcml

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 0a8f3fd9..be4873e8 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -15,6 +15,9 @@ New features:\n \n Bug fixes:\n \n+- Fix location of controlpanel events.\n+  [jensens]\n+\n - Fixed tests when IRichText behavior is used.\n   IRichText -> IRichTextBehavior\n   This is a follow up to `issue 476 <https://github.com/plone/plone.app.contenttypes/issues/476>`_.\ndiff --git a/plone/app/discussion/browser/controlpanel.py b/plone/app/discussion/browser/controlpanel.py\nindex 3c88ebe3..5e904d80 100644\n--- a/plone/app/discussion/browser/controlpanel.py\n+++ b/plone/app/discussion/browser/controlpanel.py\n@@ -1,5 +1,4 @@\n # -*- coding: utf-8 -*-\n-from plone.app.controlpanel.interfaces import IConfigurationChangedEvent\n from plone.app.discussion.interfaces import _\n from plone.app.discussion.interfaces import IDiscussionSettings\n from plone.app.discussion.upgrades import update_registry\n@@ -7,6 +6,7 @@\n from plone.registry.interfaces import IRecordModifiedEvent\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n+from Products.CMFPlone.interfaces.controlpanel import IConfigurationChangedEvent  # noqa: E501\n from Products.CMFPlone.interfaces.controlpanel import IMailSchema\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/plone/app/discussion/subscribers.zcml b/plone/app/discussion/subscribers.zcml\nindex 5bb35353..20e1b7f5 100644\n--- a/plone/app/discussion/subscribers.zcml\n+++ b/plone/app/discussion/subscribers.zcml\n@@ -66,7 +66,7 @@\n     <!-- Control panel event subscribers -->\n \n     <subscriber\n-        for="plone.app.controlpanel.interfaces.IConfigurationChangedEvent"\n+        for="Products.CMFPlone.interfaces.events.IConfigurationChangedEvent"\n         handler=".browser.controlpanel.notify_configuration_changed"\n         />\n \n'

