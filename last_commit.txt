Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-08-02T18:43:21+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/69f7a2bbd1724b1d1fb3219dfb17d19984f3477f

Fixed accidentally removing permissions when saving portal_controlpanel in ZMI.

Fixes https://github.com/plone/Products.CMFPlone/issues/1376.

Files changed:
M CHANGES.rst
M Products/CMFPlone/PloneControlPanel.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d4cc19604..bbbf583dc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -29,6 +29,9 @@ New features:
 
 Bug fixes:
 
+- Fixed accidentally removing permissions when saving the ``portal_controlpanel`` settings in the ZMI.
+  Fixes `issue 1376 <https://github.com/plone/Products.CMFPlone/issues/1376>`_.  [maurits]
+
 - Do not open links on a new tab as this is against basic usability guidelines.
   [hvelarde]
 
diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py
index 9a29951e6..34556be2c 100644
--- a/Products/CMFPlone/PloneControlPanel.py
+++ b/Products/CMFPlone/PloneControlPanel.py
@@ -195,7 +195,7 @@ def _extractAction(self, properties, index):
             except ValueError:
                 visible = 0
 
-        if not isinstance(permissions, basestring):
+        if isinstance(permissions, basestring):
             permissions = (permissions, )
 
         return PloneConfiglet(id=id,


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-08-02T21:32:00+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/b2edbdff8f2fc5020afee194d43262e649585d8c

Merge pull request #2114 from plone/issue-1376-controlpanel-permissions-master

Fixed removing permissions when saving portal_controlpanel in ZMI. [master]

Files changed:
M CHANGES.rst
M Products/CMFPlone/PloneControlPanel.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d4cc19604..bbbf583dc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -29,6 +29,9 @@ New features:
 
 Bug fixes:
 
+- Fixed accidentally removing permissions when saving the ``portal_controlpanel`` settings in the ZMI.
+  Fixes `issue 1376 <https://github.com/plone/Products.CMFPlone/issues/1376>`_.  [maurits]
+
 - Do not open links on a new tab as this is against basic usability guidelines.
   [hvelarde]
 
diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py
index 9a29951e6..34556be2c 100644
--- a/Products/CMFPlone/PloneControlPanel.py
+++ b/Products/CMFPlone/PloneControlPanel.py
@@ -195,7 +195,7 @@ def _extractAction(self, properties, index):
             except ValueError:
                 visible = 0
 
-        if not isinstance(permissions, basestring):
+        if isinstance(permissions, basestring):
             permissions = (permissions, )
 
         return PloneConfiglet(id=id,


