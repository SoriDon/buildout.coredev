Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-11-18T13:49:31+02:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.layout/commit/6dc31deea34514f5dfa1db5241f7ebbdc0e01376

Fix document-actions icons

Files changed:
A news/321.bugfix
M plone/app/layout/viewlets/document_actions.pt

b'diff --git a/news/321.bugfix b/news/321.bugfix\nnew file mode 100644\nindex 00000000..3ccd93b7\n--- /dev/null\n+++ b/news/321.bugfix\n@@ -0,0 +1 @@\n+Fix document-actions icons [MrTango]\ndiff --git a/plone/app/layout/viewlets/document_actions.pt b/plone/app/layout/viewlets/document_actions.pt\nindex a11c1859..111b910e 100644\n--- a/plone/app/layout/viewlets/document_actions.pt\n+++ b/plone/app/layout/viewlets/document_actions.pt\n@@ -9,14 +9,23 @@\n               Document Actions\n             </div>\n \n-            <ul class="list-inline" tal:define="normalizeString nocall: context/@@plone/normalizeString">\n+            <ul class="list-inline"\n+                tal:define="normalizeString nocall: context/@@plone/normalizeString;\n+                            icons python:context.restrictedTraverse(\'@@iconresolver\');\n+                            ">\n                   <li tal:repeat="daction view/actions"\n                       tal:attributes="id python:\'document-action-\' + normalizeString(daction[\'id\'])">\n                       <a href=""\n                          tal:attributes="href daction/url;\n                                          target daction/link_target|nothing;\n-                                         title daction/description"\n-                         tal:content="daction/title">\n+                                         title daction/description|nothing"\n+                        >\n+                        <tal:icon tal:replace="structure python:icons.tag(daction.get(\'icon\'))" />\n+                        <span\n+                            i18n:translate=""\n+                            tal:replace="daction/title">\n+                            Menu Title\n+                        </span>\n                       </a>\n                   </li>\n             </ul>\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-11-18T14:16:03+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.layout/commit/170e352621af810f7b4141e3d35e286aeb2c7b3b

Merge pull request #329 from plone/fix-document-action-icons

Fix document-actions icons

Files changed:
A news/321.bugfix
M plone/app/layout/viewlets/document_actions.pt

b'diff --git a/news/321.bugfix b/news/321.bugfix\nnew file mode 100644\nindex 00000000..3ccd93b7\n--- /dev/null\n+++ b/news/321.bugfix\n@@ -0,0 +1 @@\n+Fix document-actions icons [MrTango]\ndiff --git a/plone/app/layout/viewlets/document_actions.pt b/plone/app/layout/viewlets/document_actions.pt\nindex a11c1859..111b910e 100644\n--- a/plone/app/layout/viewlets/document_actions.pt\n+++ b/plone/app/layout/viewlets/document_actions.pt\n@@ -9,14 +9,23 @@\n               Document Actions\n             </div>\n \n-            <ul class="list-inline" tal:define="normalizeString nocall: context/@@plone/normalizeString">\n+            <ul class="list-inline"\n+                tal:define="normalizeString nocall: context/@@plone/normalizeString;\n+                            icons python:context.restrictedTraverse(\'@@iconresolver\');\n+                            ">\n                   <li tal:repeat="daction view/actions"\n                       tal:attributes="id python:\'document-action-\' + normalizeString(daction[\'id\'])">\n                       <a href=""\n                          tal:attributes="href daction/url;\n                                          target daction/link_target|nothing;\n-                                         title daction/description"\n-                         tal:content="daction/title">\n+                                         title daction/description|nothing"\n+                        >\n+                        <tal:icon tal:replace="structure python:icons.tag(daction.get(\'icon\'))" />\n+                        <span\n+                            i18n:translate=""\n+                            tal:replace="daction/title">\n+                            Menu Title\n+                        </span>\n                       </a>\n                   </li>\n             </ul>\n'

