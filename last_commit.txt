Repository: plone.staticresources


Branch: refs/heads/master
Date: 2021-09-23T17:27:46+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.staticresources/commit/a779abb2e95fa30a649152261d07f7965eca1cbf

update toolbar icons (#165)

* Update svg toolbar icons

* add upgrade step

* add news

Files changed:
A news/165.bugfix
A src/plone/staticresources/upgrades/207.zcml
A src/plone/staticresources/upgrades/profiles/207/registry/icons_toolbar.xml
M src/plone/staticresources/profiles/default/metadata.xml
M src/plone/staticresources/profiles/default/registry/icons_toolbar.xml
M src/plone/staticresources/setuphandlers.py
M src/plone/staticresources/upgrades/configure.zcml

b'diff --git a/news/165.bugfix b/news/165.bugfix\nnew file mode 100644\nindex 00000000..cb512d76\n--- /dev/null\n+++ b/news/165.bugfix\n@@ -0,0 +1,2 @@\n+Update svg toolbar icons\n+[agitator]\ndiff --git a/src/plone/staticresources/profiles/default/metadata.xml b/src/plone/staticresources/profiles/default/metadata.xml\nindex 6dabc339..4cf79975 100644\n--- a/src/plone/staticresources/profiles/default/metadata.xml\n+++ b/src/plone/staticresources/profiles/default/metadata.xml\n@@ -1,6 +1,6 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <metadata>\n-  <version>206</version>\n+  <version>207</version>\n   <dependencies>\n     <dependency>profile-plone.resource:default</dependency>\n   </dependencies>\ndiff --git a/src/plone/staticresources/profiles/default/registry/icons_toolbar.xml b/src/plone/staticresources/profiles/default/registry/icons_toolbar.xml\nindex 615ad3df..d9213548 100644\n--- a/src/plone/staticresources/profiles/default/registry/icons_toolbar.xml\n+++ b/src/plone/staticresources/profiles/default/registry/icons_toolbar.xml\n@@ -44,9 +44,30 @@\n     <value key="resource">++plone++bootstrap-icons/eye.svg</value>\n   </record>\n \n-  <record name="plone.icon.toolbar-action/portlet">\n+  <record name="plone.icon.toolbar-action/factories">\n     <field type="plone.registry.field.TextLine">\n-      <title>Plone Toolbar Action Portlet</title>\n+      <title>Plone Toolbar Action Factories</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/plus-square.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/actions">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Actions</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/lightning.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/workflow">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Workflow</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/bezier2.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/portlets">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Portlets</title>\n     </field>\n     <value key="resource">++plone++bootstrap-icons/window.svg</value>\n   </record>\ndiff --git a/src/plone/staticresources/setuphandlers.py b/src/plone/staticresources/setuphandlers.py\nindex f3c8899a..ddc78308 100644\n--- a/src/plone/staticresources/setuphandlers.py\n+++ b/src/plone/staticresources/setuphandlers.py\n@@ -36,4 +36,5 @@ def getNonInstallableProfiles(self):\n             "plone.staticresources.upgrades:204",\n             "plone.staticresources.upgrades:205",\n             "plone.staticresources.upgrades:206",\n+            "plone.staticresources.upgrades:207",\n         ]\ndiff --git a/src/plone/staticresources/upgrades/207.zcml b/src/plone/staticresources/upgrades/207.zcml\nnew file mode 100644\nindex 00000000..f3dc5f60\n--- /dev/null\n+++ b/src/plone/staticresources/upgrades/207.zcml\n@@ -0,0 +1,21 @@\n+<configure xmlns="http://namespaces.zope.org/zope"\n+  xmlns:gs="http://namespaces.zope.org/genericsetup">\n+\n+  <gs:registerProfile name="207"\n+    title="Update svg toolbar icons"\n+    description=\'Configuration for version 207\'\n+    directory="profiles/207"\n+    for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+    provides="Products.GenericSetup.interfaces.EXTENSION" />\n+\n+  <gs:upgradeSteps source="206"\n+    destination="207"\n+    profile="plone.staticresources:default">\n+\n+    <gs:upgradeDepends\n+      title="Update svg toolbar icons"\n+      import_profile="plone.staticresources.upgrades:207" />\n+\n+  </gs:upgradeSteps>\n+\n+</configure>\ndiff --git a/src/plone/staticresources/upgrades/configure.zcml b/src/plone/staticresources/upgrades/configure.zcml\nindex 427033c3..2a23789a 100644\n--- a/src/plone/staticresources/upgrades/configure.zcml\n+++ b/src/plone/staticresources/upgrades/configure.zcml\n@@ -19,5 +19,6 @@\n   <include file="204.zcml" />\n   <include file="205.zcml" />\n   <include file="206.zcml" />\n+  <include file="207.zcml" />\n \n </configure>\ndiff --git a/src/plone/staticresources/upgrades/profiles/207/registry/icons_toolbar.xml b/src/plone/staticresources/upgrades/profiles/207/registry/icons_toolbar.xml\nnew file mode 100644\nindex 00000000..d9213548\n--- /dev/null\n+++ b/src/plone/staticresources/upgrades/profiles/207/registry/icons_toolbar.xml\n@@ -0,0 +1,110 @@\n+<?xml version="1.0"?>\n+\n+<registry>\n+\n+  <!-- <record name="plone.icon.mimetype-application">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Mimetype Application (generic)</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/file-earmark-code.svg</value>\n+  </record> -->\n+\n+  <!-- <record name="plone.icon.mimetype-application/pdf">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Mimetype application/pdf</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/file-earmark-richtext.svg</value>\n+  </record> -->\n+\n+  <record name="plone.icon.toolbar-action">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Default</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/command.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/folderContents">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Folder Contents</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/folder2-open.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/edit">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Edit</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/pencil.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/view">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action View</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/eye.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/factories">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Factories</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/plus-square.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/actions">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Actions</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/lightning.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/workflow">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Workflow</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/bezier2.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/portlets">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Portlets</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/window.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/state">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Portlet</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/shield-lock.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/display">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Display</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/layers-half.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/history">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action History</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/clock.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/sharing">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action History</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/people.svg</value>\n+  </record>\n+\n+  <record name="plone.icon.toolbar-action/personaltools">\n+    <field type="plone.registry.field.TextLine">\n+      <title>Plone Toolbar Action Personal Tools</title>\n+    </field>\n+    <value key="resource">++plone++bootstrap-icons/person.svg</value>\n+  </record>\n+\n+</registry>\n\\ No newline at end of file\n'

