Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-05-10T15:05:06+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/4a6ea573c2fc200fe2c248fdc54bedc6580c1bc4

do not rely on order of body classes in test

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/browser.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index 687bb97..5179cd0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -62,6 +62,9 @@ Bug fixes:
 - Updated dead link to the error reference docs
   [sgrepos]
 
+- Do not rely on order in test of generated body classes ``browser.txt``.
+  [jensens]
+
 5.1b3 (2017-04-03)
 ------------------
 
diff --git a/Products/CMFPlone/tests/browser.txt b/Products/CMFPlone/tests/browser.txt
index cbcdb72..f69a56e 100644
--- a/Products/CMFPlone/tests/browser.txt
+++ b/Products/CMFPlone/tests/browser.txt
@@ -42,10 +42,29 @@ Test for "template id" in <body> tag. See tickets #9111/#8777
 
     >>> browser.open('http://nohost/plone/front-page')
     >>> browser.contents
-    '...<body ... class="template-document_view portaltype-document site-plone section-front-page...'
+    '...<body ... class="...template-document_view...'
+
+    >>> browser.contents
+    '...<body ... class="...portaltype-document...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'
+
+    >>> browser.contents
+    '...<body ... class="...section-front-page...'
+
     >>> browser.open('http://nohost/plone/news')
     >>> browser.contents
-    '...<body ... class="template-summary_view portaltype-collection site-plone section-news...'
+    '...<body ... class="...portaltype-collection...'
+
+    >>> browser.contents
+    '...<body ... class="...template-summary_view...'
+
+    >>> browser.contents
+    '...<body ... class="...section-news...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'
 
 Login
 
@@ -58,4 +77,10 @@ Test explicit browser view
 
     >>> browser.open('http://nohost/plone/@@dashboard')
     >>> browser.contents
-    '...<body ... class="template-dashboard portaltype-plone-site site-plone...'
+    '...<body ... class="...template-dashboard...'
+
+    >>> browser.contents
+    '...<body ... class="...portaltype-plone-site...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-05-11T11:11:12+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/419d956f88f1109d880e42d186fa73caebd52d12

Merge pull request #2050 from plone/fix-test-single-classes

do not rely on order of body classes in test

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/browser.txt

diff --git a/CHANGES.rst b/CHANGES.rst
index 687bb97..5179cd0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -62,6 +62,9 @@ Bug fixes:
 - Updated dead link to the error reference docs
   [sgrepos]
 
+- Do not rely on order in test of generated body classes ``browser.txt``.
+  [jensens]
+
 5.1b3 (2017-04-03)
 ------------------
 
diff --git a/Products/CMFPlone/tests/browser.txt b/Products/CMFPlone/tests/browser.txt
index cbcdb72..f69a56e 100644
--- a/Products/CMFPlone/tests/browser.txt
+++ b/Products/CMFPlone/tests/browser.txt
@@ -42,10 +42,29 @@ Test for "template id" in <body> tag. See tickets #9111/#8777
 
     >>> browser.open('http://nohost/plone/front-page')
     >>> browser.contents
-    '...<body ... class="template-document_view portaltype-document site-plone section-front-page...'
+    '...<body ... class="...template-document_view...'
+
+    >>> browser.contents
+    '...<body ... class="...portaltype-document...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'
+
+    >>> browser.contents
+    '...<body ... class="...section-front-page...'
+
     >>> browser.open('http://nohost/plone/news')
     >>> browser.contents
-    '...<body ... class="template-summary_view portaltype-collection site-plone section-news...'
+    '...<body ... class="...portaltype-collection...'
+
+    >>> browser.contents
+    '...<body ... class="...template-summary_view...'
+
+    >>> browser.contents
+    '...<body ... class="...section-news...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'
 
 Login
 
@@ -58,4 +77,10 @@ Test explicit browser view
 
     >>> browser.open('http://nohost/plone/@@dashboard')
     >>> browser.contents
-    '...<body ... class="template-dashboard portaltype-plone-site site-plone...'
+    '...<body ... class="...template-dashboard...'
+
+    >>> browser.contents
+    '...<body ... class="...portaltype-plone-site...'
+
+    >>> browser.contents
+    '...<body ... class="...site-plone...'


