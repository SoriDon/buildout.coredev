Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-10-15T07:00:22-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/plone.restapi/commit/8a53034e85234535220969266dd8e144b2727ad3

Add Matomo Analytics, Remove Google Analytics (#1518)

* Add Matomo Analytics, Remove Google Analytics

* Add changelog entry

Files changed:
A docs/source/_templates/layout.html
A news/1518.doc
M docs/source/conf.py

b'diff --git a/docs/source/_templates/layout.html b/docs/source/_templates/layout.html\nnew file mode 100644\nindex 000000000..bc6ccbfd9\n--- /dev/null\n+++ b/docs/source/_templates/layout.html\n@@ -0,0 +1,17 @@\n+{% extends "sphinx_book_theme/layout.html" %}\n+{%- block extrahead %}\n+{{ super() }}\n+<!-- Matomo Tag Manager -->\n+<script>\n+var _mtm = window._mtm = window._mtm || [];\n+_mtm.push({\'mtm.startTime\': (new Date().getTime()), \'event\': \'mtm.Start\'});\n+var d=document, g=d.createElement(\'script\'), s=d.getElementsByTagName(\'script\')[0];\n+g.async=true; g.src=\'https://stats.plone.org/js/container_RVam7mtw.js\'; s.parentNode.insertBefore(g,s);\n+</script>\n+<!-- End Matomo Tag Manager -->\n+{% endblock %}\n+\n+\n+{% block body_tag %}\n+  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="100">\n+{%- endblock %}\n\\ No newline at end of file\ndiff --git a/docs/source/conf.py b/docs/source/conf.py\nindex c01f212c3..e3787eee8 100644\n--- a/docs/source/conf.py\n+++ b/docs/source/conf.py\n@@ -172,7 +172,6 @@ def patch_pygments_to_highlight_jsonschema():\n todo_include_todos = True\n \n html_theme_options = {\n-    "google_analytics_id": "G-P8NCTB796E",\n     "path_to_docs": "docs",\n     "repository_url": "https://github.com/plone/plone.restapi",\n     "repository_branch": "master",\ndiff --git a/news/1518.doc b/news/1518.doc\nnew file mode 100644\nindex 000000000..020c9d337\n--- /dev/null\n+++ b/news/1518.doc\n@@ -0,0 +1 @@\n+Add Matomo Analytics, Remove Google Analytics. [stevepiercy]\n'

