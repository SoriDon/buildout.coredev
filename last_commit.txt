Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-04T17:32:47+01:00
Author: 1letter (1letter) <1letter@gmx.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/720358a93d2d0c528d63873f25cb75ddbf8b22bf

Remove control panels: Change Member Password and Personal Preferences

There are other, better ways to reach these. They don't belong in the site setup.

Also fixes https://github.com/plone/Products.CMFPlone/issues/3031

Files changed:
A news/3031.bugfix
M Products/CMFPlone/profiles/default/controlpanel.xml
M Products/CMFPlone/tests/testControlPanel.py

b'diff --git a/Products/CMFPlone/profiles/default/controlpanel.xml b/Products/CMFPlone/profiles/default/controlpanel.xml\nindex 1cf104e4b7..2ab92c9020 100644\n--- a/Products/CMFPlone/profiles/default/controlpanel.xml\n+++ b/Products/CMFPlone/profiles/default/controlpanel.xml\n@@ -50,20 +50,6 @@\n     i18n:attributes="title">\n   <permission>Plone Site Setup: Users and Groups</permission>\n  </configlet>\n- <configlet title="Personal Preferences" action_id="MemberPrefs" appId="Plone"\n-    category="Member" condition_expr=""\n-    icon_expr="string:person"\n-    url_expr="string:${portal_url}/@@personal-preferences" visible="True"\n-    i18n:attributes="title">\n-  <permission>Set own properties</permission>\n- </configlet>\n- <configlet title="Change Password" action_id="MemberPassword" appId="Plone"\n-    category="Member" condition_expr="python:member.canPasswordSet()"\n-    icon_expr="string:lock"\n-    url_expr="string:${portal_url}/password_form" visible="True"\n-    i18n:attributes="title">\n-  <permission>Set own password</permission>\n- </configlet>\n  <configlet title="Mail" action_id="MailHost" appId="MailHost"\n     category="plone-general" condition_expr=""\n     icon_expr="string:envelope-open"\ndiff --git a/Products/CMFPlone/tests/testControlPanel.py b/Products/CMFPlone/tests/testControlPanel.py\nindex 159e1ee627..0ce80c7acf 100644\n--- a/Products/CMFPlone/tests/testControlPanel.py\n+++ b/Products/CMFPlone/tests/testControlPanel.py\n@@ -13,8 +13,8 @@ def setUp(self):\n         # get the expected default groups and configlets\n         self.groups = [\'Plone\', \'Products\']\n         self.configlets = [\'QuickInstaller\', \'MailHost\',\n-                           \'UsersGroups\', \'MemberPrefs\', \'PortalSkin\',\n-                           \'MemberPassword\', \'ZMI\', \'SecuritySettings\',\n+                           \'UsersGroups\', \'PortalSkin\',\n+                           \'ZMI\', \'SecuritySettings\',\n                            \'NavigationSettings\', \'SearchSettings\',\n                            \'errorLog\', \'PloneReconfig\', \'TypesSettings\',\n                            \'FilterSettings\',\ndiff --git a/news/3031.bugfix b/news/3031.bugfix\nnew file mode 100644\nindex 0000000000..a856dc7521\n--- /dev/null\n+++ b/news/3031.bugfix\n@@ -0,0 +1,5 @@\n+Remove Configlets, Change Member Password and Member Prefs not needed in Overview Controlpanel\n+both Views available via User Control Panel\n+\n+the deleton of "Change Member Password" Configlet remove also the issue #3031\n+[1letter]\n\\ No newline at end of file\n'

