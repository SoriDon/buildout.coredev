Repository: plone.namedfile


Branch: refs/heads/master
Date: 2019-04-02T15:05:15+02:00
Author: Elio Schmutz (elioschmutz) <e.schmutz@4teamwork.ch>
Commit: https://github.com/plone/plone.namedfile/commit/db23e19b274efa9ed46c7eb9fd86302911f00c96

Increase static MAX_INFO_BYTES to fix an issue where the filesize was not extracted properly from an image with lots of metadata.

Files changed:
A news/74.bugfix
M plone/namedfile/file.py

b'diff --git a/news/74.bugfix b/news/74.bugfix\nnew file mode 100644\nindex 0000000..5e0ec18\n--- /dev/null\n+++ b/news/74.bugfix\n@@ -0,0 +1 @@\n+Increase static MAX_INFO_BYTES to fix an issue where the filesize was not extracted properly from an image with lots of metadata. [elioschmutz]\ndiff --git a/plone/namedfile/file.py b/plone/namedfile/file.py\nindex 9f9d89d..d726fd3 100644\n--- a/plone/namedfile/file.py\n+++ b/plone/namedfile/file.py\n@@ -28,7 +28,7 @@\n \n MAXCHUNKSIZE = 1 << 16\n IMAGE_INFO_BYTES = 1024\n-MAX_INFO_BYTES = 1 << 16\n+MAX_INFO_BYTES = 1 << 18\n \n \n class FileChunk(Persistent):\n'

Repository: plone.namedfile


Branch: refs/heads/master
Date: 2019-04-03T22:43:17+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.namedfile/commit/c0f6e0c39ceb76318589d39bb92fb1ae11320825

Merge pull request #75 from plone/es-74-fix-broken-file-size-for-blob-images

Fixes an issue where the filesize was not extracted properly from an image with lots of metadata.

Files changed:
A news/74.bugfix
M plone/namedfile/file.py

b'diff --git a/news/74.bugfix b/news/74.bugfix\nnew file mode 100644\nindex 0000000..5e0ec18\n--- /dev/null\n+++ b/news/74.bugfix\n@@ -0,0 +1 @@\n+Increase static MAX_INFO_BYTES to fix an issue where the filesize was not extracted properly from an image with lots of metadata. [elioschmutz]\ndiff --git a/plone/namedfile/file.py b/plone/namedfile/file.py\nindex 9f9d89d..d726fd3 100644\n--- a/plone/namedfile/file.py\n+++ b/plone/namedfile/file.py\n@@ -28,7 +28,7 @@\n \n MAXCHUNKSIZE = 1 << 16\n IMAGE_INFO_BYTES = 1024\n-MAX_INFO_BYTES = 1 << 16\n+MAX_INFO_BYTES = 1 << 18\n \n \n class FileChunk(Persistent):\n'

