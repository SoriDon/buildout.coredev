Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-03-27T15:31:01+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/febebfd4f1b66f9431fe504c64e96ec691a0e205

Fix to make plone/plone.session#11 work

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/tests/test_controlpanel_installer.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 67e5b5017..50dc6bcca 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -24,6 +24,16 @@ Breaking changes:
 
 - Remove old PlacelessTranslationService.
   [jensens, ksuess]
+- Fix to make plone/plone.session#11 work:
+  Make test for installation of  plone.session more explicit.
+  [jensens]
+
+- Advanced Catalog Clear And Rebuild feature showed wrong processing time due to new queue processing.
+  This was fixed bei calling ``processQueue()`` after indexing.
+  [jensens]
+
+- Some nested `section id="edit-bar"` tag in folder_contents page #2322
+  [terapyon]
 
 - Remove ``plone-generate-gruntfile`` (it is all available through ``plone-compile-resources``).
   [jensens]
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_installer.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_installer.py
index 152961563..f93f92e51 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_installer.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_installer.py
@@ -152,9 +152,9 @@ def test_get_install_profiles(self):
         # It lists *all* extension profiles.
         # The method seems unneeded.
         self.assertEqual(self.installer.get_install_profiles('foo'), [])
-        self.assertEqual(
-            self.installer.get_install_profiles('plone.session'),
-            ['plone.session:default', 'plone.session:uninstall'])
+        session_profiles = self.installer.get_install_profiles('plone.session')
+        self.assertIn('plone.session:default', session_profiles)
+        self.assertIn('plone.session:uninstall', session_profiles)
         self.assertEqual(
             self.installer.get_install_profiles('plone.app.dexterity'),
             ['plone.app.dexterity:default', 'plone.app.dexterity:testing'])


