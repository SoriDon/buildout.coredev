Repository: mockup


Branch: refs/heads/master
Date: 2022-05-23T02:14:15+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/51e90776b572575d0367044cb8d5a84140c0b103

maint(Build): Makefile: Do clean and install before releasing.

This avoids any node_modules subdirectories from linked dependencies to land in the build.

Files changed:
M Makefile

b'diff --git a/Makefile b/Makefile\nindex 21677be9c..c85a3cd38 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -57,7 +57,7 @@ release-zip: clean-dist bundle\n \tcd dist/ && zip -r $(PACKAGE_NAME)-bundle-$(PACKAGE_VERSION).zip $(PACKAGE_NAME)-bundle-$(PACKAGE_VERSION)/\n \n .PHONY: release-major\n-release-major: check\n+release-major: clean install check\n \tnpx release-it major && \\\n \t\tmake release-zip && \\\n \t\tnpx release-it --github.release --github.update --github.assets=dist/*.zip --no-github.draft --no-increment --no-git --no-npm && \\\n@@ -65,7 +65,7 @@ release-major: check\n \n \n .PHONY: release-minor\n-release-minor: check\n+release-minor: clean install check\n \tnpx release-it minor && \\\n \t\tmake release-zip && \\\n \t\tnpx release-it --github.release --github.update --github.assets=dist/*.zip --no-github.draft --no-increment --no-git --no-npm && \\\n@@ -73,7 +73,7 @@ release-minor: check\n \n \n .PHONY: release-patch\n-release-patch: check\n+release-patch: clean install check\n \tnpx release-it patch && \\\n \t\tmake release-zip && \\\n \t\tnpx release-it --github.release --github.update --github.assets=dist/*.zip --no-github.draft --no-increment --no-git --no-npm && \\\n@@ -81,7 +81,7 @@ release-patch: check\n \n \n .PHONY: prerelease\n-prerelease:\n+prerelease: clean install\n \tnpx release-it --preRelease=alpha && \\\n \t\tmake release-zip && \\\n \t\tnpx release-it --github.preRelease --github.update --github.assets=dist/*.zip --no-github.draft --no-increment --no-git --no-npm && \\\n'

