Repository: mockup


Branch: refs/heads/master
Date: 2016-08-18T11:15:57-06:00
Author: Sean Upton (seanupton) <sdupton@gmail.com>
Commit: https://github.com/plone/mockup/commit/6ec3b4e133fa8d63a945009f876a7963470df003

Related Items pattern: content icon cross-compatibility with Plone
4.x/5.x -- use Plone 5 boolean-typed getIcon as conditional to maintain
existing behavior, but also only fetch image scales for images in Plone
4, based on portal_type.

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 8f1df25..26a2331 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -55,6 +55,14 @@ New:
 
 Fixes:
 
+- Related Items pattern: content icon cross-compatibility with Plone
+  5.x and 4.x (via plone.app.widgets 1.x); in Plone 5 getIcon returned
+  from brain is a boolean, in Plone 4, it is a string -- use this to
+  show content icons in Plone 5 as previous, but also show image scale
+  in Plone 4, but only for images.  This is the most reasonable
+  solution to avoid requesting many broken image scales (404) in Plone 4.
+  [seanupton]
+
 - Upload pattern LESS: included omitted styles for progress bar
   in upload patttern by importing seletected styles from Bootstrap LESS.
   Fixes incorrect/omitted display of progress bar in plone.app.widgets 1.x.
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 69b7990..3caeb29 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -112,7 +112,7 @@ define([
       resultTemplate: '' +
         '<div class="   pattern-relateditems-result  <% if (selected) { %>pattern-relateditems-active<% } %>">' +
         '  <a href="#" class=" pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">' +
-        '    <% if (typeof getIcon !== "undefined" && getIcon) { %><img src="<%- getURL %>/@@images/image/icon "> <% } %>' +
+        '    <% if (getIcon === true || portal_type === "Image") { %><img src="<%- getURL %>/@@images/image/icon "> <% } %>' +
         '    <span class="pattern-relateditems-result-title  <% if (typeof review_state !== "undefined") { %> state-<%- review_state %> <% } %>  " /span>' +
         '    <span class="pattern-relateditems contenttype-<%- portal_type.toLowerCase() %>"><%- Title %></span>' +
         '    <span class="pattern-relateditems-result-path"><%- path %></span>' +
@@ -126,7 +126,7 @@ define([
       resultTemplateSelector: null,
       selectionTemplate: '' +
         '<span class="pattern-relateditems-item">' +
-        ' <% if (typeof getIcon !== "undefined" && getIcon) { %> <img src="<%- getURL %>/@@images/image/icon"> <% } %>' +
+        ' <% if (getIcon === true || portal_type === "Image") { %> <img src="<%- getURL %>/@@images/image/icon"> <% } %>' +
         ' <span class="pattern-relateditems-item-title contenttype-<%- portal_type.toLowerCase() %> <% if (typeof review_state !== "undefined") { %> state-<%- review_state  %> <% } %>" ><%- Title %></span>' +
         ' <span class="pattern-relateditems-item-path"><%- path %></span>' +
         '</span>',


Repository: mockup


Branch: refs/heads/master
Date: 2016-08-18T11:33:38-06:00
Author: Sean Upton (seanupton) <sdupton@gmail.com>
Commit: https://github.com/plone/mockup/commit/98327d37d6a4b09233a290b972c8aa80738d6262

Related items pattern: result button style margin for scrollbar and
hover style for improved user experience, expectation.

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.relateditems.less

diff --git a/CHANGES.rst b/CHANGES.rst
index 26a2331..e941eeb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,11 @@ Incompatibilities:
 
 New:
 
+- Related items pattern: result button style allow for more room
+  for scrollbar, and have subltle color change on hover to deliniate
+  user-expected behavior of browsing vs. selecting item.
+  [seanupton]
+
 - Fix urls in modals not opening in new window
   [vangheem]
 
diff --git a/mockup/patterns/relateditems/pattern.relateditems.less b/mockup/patterns/relateditems/pattern.relateditems.less
index 30bf235..a7a111b 100644
--- a/mockup/patterns/relateditems/pattern.relateditems.less
+++ b/mockup/patterns/relateditems/pattern.relateditems.less
@@ -60,6 +60,7 @@
   right: 0;
   top: 50%;
   margin-top: -16px;
+  margin-right: 8px;
   a {
     display: block;
     height: 36px;
@@ -67,6 +68,9 @@
     .glyphicon();
     .glyphicon-chevron-right();
   }
+  a:hover:before {
+    color:purple;
+  }
 }
 
 .pattern-relateditems-result {


Repository: mockup


Branch: refs/heads/master
Date: 2016-08-22T01:17:46-05:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/mockup/commit/a275282fb5d1cbbed3e3fc87d5a3f80b0ceb465f

Merge pull request #699 from upiq/master

Minor related items fixes: Plone 4 icon compat; result button style

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/relateditems/pattern.relateditems.less

diff --git a/CHANGES.rst b/CHANGES.rst
index 7dd30fe..94efe96 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,11 @@ Incompatibilities:
 
 New:
 
+- Related items pattern: result button style allow for more room
+  for scrollbar, and have subltle color change on hover to deliniate
+  user-expected behavior of browsing vs. selecting item.
+  [seanupton]
+
 - Fix urls in modals not opening in new window
   [vangheem]
 
@@ -55,6 +60,14 @@ New:
 
 Fixes:
 
+- Related Items pattern: content icon cross-compatibility with Plone
+  5.x and 4.x (via plone.app.widgets 1.x); in Plone 5 getIcon returned
+  from brain is a boolean, in Plone 4, it is a string -- use this to
+  show content icons in Plone 5 as previous, but also show image scale
+  in Plone 4, but only for images.  This is the most reasonable
+  solution to avoid requesting many broken image scales (404) in Plone 4.
+  [seanupton]
+
 - Upload pattern LESS: included omitted styles for progress bar
   in upload patttern by importing seletected styles from Bootstrap LESS.
   Fixes incorrect/omitted display of progress bar in plone.app.widgets 1.x.
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 69b7990..3caeb29 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -112,7 +112,7 @@ define([
       resultTemplate: '' +
         '<div class="   pattern-relateditems-result  <% if (selected) { %>pattern-relateditems-active<% } %>">' +
         '  <a href="#" class=" pattern-relateditems-result-select <% if (selectable) { %>selectable<% } %>">' +
-        '    <% if (typeof getIcon !== "undefined" && getIcon) { %><img src="<%- getURL %>/@@images/image/icon "> <% } %>' +
+        '    <% if (getIcon === true || portal_type === "Image") { %><img src="<%- getURL %>/@@images/image/icon "> <% } %>' +
         '    <span class="pattern-relateditems-result-title  <% if (typeof review_state !== "undefined") { %> state-<%- review_state %> <% } %>  " /span>' +
         '    <span class="pattern-relateditems contenttype-<%- portal_type.toLowerCase() %>"><%- Title %></span>' +
         '    <span class="pattern-relateditems-result-path"><%- path %></span>' +
@@ -126,7 +126,7 @@ define([
       resultTemplateSelector: null,
       selectionTemplate: '' +
         '<span class="pattern-relateditems-item">' +
-        ' <% if (typeof getIcon !== "undefined" && getIcon) { %> <img src="<%- getURL %>/@@images/image/icon"> <% } %>' +
+        ' <% if (getIcon === true || portal_type === "Image") { %> <img src="<%- getURL %>/@@images/image/icon"> <% } %>' +
         ' <span class="pattern-relateditems-item-title contenttype-<%- portal_type.toLowerCase() %> <% if (typeof review_state !== "undefined") { %> state-<%- review_state  %> <% } %>" ><%- Title %></span>' +
         ' <span class="pattern-relateditems-item-path"><%- path %></span>' +
         '</span>',
diff --git a/mockup/patterns/relateditems/pattern.relateditems.less b/mockup/patterns/relateditems/pattern.relateditems.less
index 30bf235..a7a111b 100644
--- a/mockup/patterns/relateditems/pattern.relateditems.less
+++ b/mockup/patterns/relateditems/pattern.relateditems.less
@@ -60,6 +60,7 @@
   right: 0;
   top: 50%;
   margin-top: -16px;
+  margin-right: 8px;
   a {
     display: block;
     height: 36px;
@@ -67,6 +68,9 @@
     .glyphicon();
     .glyphicon-chevron-right();
   }
+  a:hover:before {
+    color:purple;
+  }
 }
 
 .pattern-relateditems-result {


