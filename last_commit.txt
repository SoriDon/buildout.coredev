Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-02-04T17:18:38+01:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c1044b794d70fa4b186fba1e159a26a543e418af

Update the patch for zope.sendmail.mailer.SMTPMailer.__init__

Files changed:
A news/2665.bugfix
M Products/CMFPlone/patches/sendmail.py

b'diff --git a/Products/CMFPlone/patches/sendmail.py b/Products/CMFPlone/patches/sendmail.py\nindex 04e3c38a1..b57e698b7 100644\n--- a/Products/CMFPlone/patches/sendmail.py\n+++ b/Products/CMFPlone/patches/sendmail.py\n@@ -3,11 +3,13 @@\n from Products.CMFPlone.interfaces import IMailSchema\n from transaction._transaction import Status\n from zope.component import getUtility\n+from zope.sendmail.mailer import _SMTPState\n from zope.sendmail.mailer import SMTPMailer\n \n import logging\n import transaction\n \n+\n log = logging.getLogger("MailDataManager")\n \n \n@@ -53,5 +55,7 @@ def new_init(\n     self.password = mail_settings.smtp_pass\n     self.force_tls = force_tls\n     self.no_tls = no_tls\n+    self._smtp = _SMTPState()\n+\n \n SMTPMailer.__init__ = new_init\ndiff --git a/news/2665.bugfix b/news/2665.bugfix\nnew file mode 100644\nindex 000000000..e75852c5a\n--- /dev/null\n+++ b/news/2665.bugfix\n@@ -0,0 +1 @@\n+The patched init method for the class zope.sendmail.mailer.SMTPMailer has been updated, fixing a bug that was preventing to send emails.\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-02-04T17:19:53+01:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/9c4d3cdb18af2fe807d9aaf715e7209c5f47cb94

Give credits

Files changed:
M news/2665.bugfix

b'diff --git a/news/2665.bugfix b/news/2665.bugfix\nindex e75852c5a..1cd3f0170 100644\n--- a/news/2665.bugfix\n+++ b/news/2665.bugfix\n@@ -1 +1,2 @@\n The patched init method for the class zope.sendmail.mailer.SMTPMailer has been updated, fixing a bug that was preventing to send emails.\n+[ale-rt, nazrulworld]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-02-05T16:34:39+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/1e62068589ef00cc56976404b7ebe327f872f18a

Merge pull request #2714 from plone/2665-fix-patched-smtp-init

 Update the patch for zope.sendmail.mailer.SMTPMailer.__init__

Files changed:
A news/2665.bugfix
M Products/CMFPlone/patches/sendmail.py

b'diff --git a/Products/CMFPlone/patches/sendmail.py b/Products/CMFPlone/patches/sendmail.py\nindex 04e3c38a1..b57e698b7 100644\n--- a/Products/CMFPlone/patches/sendmail.py\n+++ b/Products/CMFPlone/patches/sendmail.py\n@@ -3,11 +3,13 @@\n from Products.CMFPlone.interfaces import IMailSchema\n from transaction._transaction import Status\n from zope.component import getUtility\n+from zope.sendmail.mailer import _SMTPState\n from zope.sendmail.mailer import SMTPMailer\n \n import logging\n import transaction\n \n+\n log = logging.getLogger("MailDataManager")\n \n \n@@ -53,5 +55,7 @@ def new_init(\n     self.password = mail_settings.smtp_pass\n     self.force_tls = force_tls\n     self.no_tls = no_tls\n+    self._smtp = _SMTPState()\n+\n \n SMTPMailer.__init__ = new_init\ndiff --git a/news/2665.bugfix b/news/2665.bugfix\nnew file mode 100644\nindex 000000000..1cd3f0170\n--- /dev/null\n+++ b/news/2665.bugfix\n@@ -0,0 +1,2 @@\n+The patched init method for the class zope.sendmail.mailer.SMTPMailer has been updated, fixing a bug that was preventing to send emails.\n+[ale-rt, nazrulworld]\n'

