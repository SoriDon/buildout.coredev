Repository: mockup


Branch: refs/heads/master
Date: 2022-03-25T16:48:45+01:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/mockup/commit/9ef169b4469b3e38b2370f1baeef4235d1e7108b

Restructure searchbox markup for mobile navigation as offcanvas sidebar.

Files changed:
M CHANGES.md
M src/pat/livesearch/livesearch.js

b'diff --git a/CHANGES.md b/CHANGES.md\nindex ad78f7880..2cb567c0c 100644\n--- a/CHANGES.md\n+++ b/CHANGES.md\n@@ -15,4 +15,4 @@\n \n * Remove Mockup\'s ``pat-eventedit``, which was unused. Instead use Patternslib\' ``pat-date-picker``, ``pat-depends`` and ``pat-validation``.\n \n-\n+* Restructure searchbox markup for mobile navigation as offcanvas sidebar.\ndiff --git a/src/pat/livesearch/livesearch.js b/src/pat/livesearch/livesearch.js\nindex 896191bf0..af2127719 100644\n--- a/src/pat/livesearch/livesearch.js\n+++ b/src/pat/livesearch/livesearch.js\n@@ -12,7 +12,7 @@ export default Base.extend({\n     active: false,\n     results: null,\n     selectedItem: -1,\n-    resultsClass: "livesearch-results",\n+    resultsClass: "livesearch-results list-group mt-2 w-100 d-none",\n     defaults: {\n         ajaxUrl: null,\n         defaultSortOn: "",\n@@ -21,9 +21,9 @@ export default Base.extend({\n         minimumInputLength: 4,\n         inputSelector: \'input[type="text"]\',\n         itemTemplate:\n-            \'<li class="search-result <%- state %>">\' +\n-            \'<h4 class="title"><a href="<%- url %>"><%- title %></a></h4>\' +\n-            \'<p class="description"><%- description %></p>\' +\n+            \'<li class="search-result <%- state %> list-group-item">\' +\n+            \'<a class="fs-4" href="<%- url %>"><%- title %></a>\' +\n+            \'<div class="description"><%- description %></div>\' +\n             "</li>",\n     },\n     doSearch: function (page) {\n@@ -107,25 +107,25 @@ export default Base.extend({\n \n         if (self.active) {\n             self.$results.append(\n-                $(\'<li class="searching">\' + _t("searching\xe2\x80\xa6") + "</li>")\n+                $(\'<li class="searching list-group-item">\' + _t("searching\xe2\x80\xa6") + "</li>")\n             );\n         } else if (self.results === null) {\n             // no results gathered yet\n             self.$results.append(\n                 $(\n-                    \'<li class="no-results no-search">\' +\n+                    \'<li class="no-results no-search list-group-item">\' +\n                         _t("enter search phrase") +\n                         "</li>"\n                 )\n             );\n         } else if (self.results.total === 0) {\n             self.$results.append(\n-                $(\'<li class="no-results">\' + _t("no results found") + "</li>")\n+                $(\'<li class="no-results list-group-item">\' + _t("no results found") + "</li>")\n             );\n         } else {\n             self.$results.append(\n                 $(\n-                    \'<li class="results-summary">\' +\n+                    \'<li class="results-summary list-group-item">\' +\n                         _t("found") +\n                         " " +\n                         self.results.total +\n@@ -146,7 +146,7 @@ export default Base.extend({\n                     }\n                 });\n                 if (index === self.selectedItem) {\n-                    $el.addClass("selected");\n+                    $el.addClass("list-group-item-secondary");\n                 }\n                 self.$results.append($el);\n             });\n@@ -171,7 +171,7 @@ export default Base.extend({\n             }\n             if (nav.length > 0) {\n                 var $li = $(\n-                    \'<li class="load-more"><div class="page">\' +\n+                    \'<li class="list-group-item load-more"><div class="page">\' +\n                         self.page +\n                         "</div></li>"\n                 );\n@@ -200,7 +200,7 @@ export default Base.extend({\n         this.$el.removeClass("livesearch-active");\n     },\n     init: function () {\n-        import("./livesearch.scss");\n+        // import("./livesearch.scss");\n \n         var self = this;\n \n@@ -299,6 +299,6 @@ export default Base.extend({\n         /* create result dom */\n         self.$results = $(\'<ul class="\' + self.resultsClass + \'"></ul>\')\n             .hide()\n-            .insertAfter(self.$input);\n+            .insertAfter(self.$el);\n     },\n });\n'

Repository: mockup


Branch: refs/heads/master
Date: 2022-03-25T16:49:15+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/ec28be774483717b08311131307a61ab2f542428

Merge pull request #1137 from plone/offcanvas-nav

restructure livesearch markup for offcanvas nav

Files changed:
M CHANGES.md
M src/pat/livesearch/livesearch.js

b'diff --git a/CHANGES.md b/CHANGES.md\nindex ad78f7880..2cb567c0c 100644\n--- a/CHANGES.md\n+++ b/CHANGES.md\n@@ -15,4 +15,4 @@\n \n * Remove Mockup\'s ``pat-eventedit``, which was unused. Instead use Patternslib\' ``pat-date-picker``, ``pat-depends`` and ``pat-validation``.\n \n-\n+* Restructure searchbox markup for mobile navigation as offcanvas sidebar.\ndiff --git a/src/pat/livesearch/livesearch.js b/src/pat/livesearch/livesearch.js\nindex 896191bf0..af2127719 100644\n--- a/src/pat/livesearch/livesearch.js\n+++ b/src/pat/livesearch/livesearch.js\n@@ -12,7 +12,7 @@ export default Base.extend({\n     active: false,\n     results: null,\n     selectedItem: -1,\n-    resultsClass: "livesearch-results",\n+    resultsClass: "livesearch-results list-group mt-2 w-100 d-none",\n     defaults: {\n         ajaxUrl: null,\n         defaultSortOn: "",\n@@ -21,9 +21,9 @@ export default Base.extend({\n         minimumInputLength: 4,\n         inputSelector: \'input[type="text"]\',\n         itemTemplate:\n-            \'<li class="search-result <%- state %>">\' +\n-            \'<h4 class="title"><a href="<%- url %>"><%- title %></a></h4>\' +\n-            \'<p class="description"><%- description %></p>\' +\n+            \'<li class="search-result <%- state %> list-group-item">\' +\n+            \'<a class="fs-4" href="<%- url %>"><%- title %></a>\' +\n+            \'<div class="description"><%- description %></div>\' +\n             "</li>",\n     },\n     doSearch: function (page) {\n@@ -107,25 +107,25 @@ export default Base.extend({\n \n         if (self.active) {\n             self.$results.append(\n-                $(\'<li class="searching">\' + _t("searching\xe2\x80\xa6") + "</li>")\n+                $(\'<li class="searching list-group-item">\' + _t("searching\xe2\x80\xa6") + "</li>")\n             );\n         } else if (self.results === null) {\n             // no results gathered yet\n             self.$results.append(\n                 $(\n-                    \'<li class="no-results no-search">\' +\n+                    \'<li class="no-results no-search list-group-item">\' +\n                         _t("enter search phrase") +\n                         "</li>"\n                 )\n             );\n         } else if (self.results.total === 0) {\n             self.$results.append(\n-                $(\'<li class="no-results">\' + _t("no results found") + "</li>")\n+                $(\'<li class="no-results list-group-item">\' + _t("no results found") + "</li>")\n             );\n         } else {\n             self.$results.append(\n                 $(\n-                    \'<li class="results-summary">\' +\n+                    \'<li class="results-summary list-group-item">\' +\n                         _t("found") +\n                         " " +\n                         self.results.total +\n@@ -146,7 +146,7 @@ export default Base.extend({\n                     }\n                 });\n                 if (index === self.selectedItem) {\n-                    $el.addClass("selected");\n+                    $el.addClass("list-group-item-secondary");\n                 }\n                 self.$results.append($el);\n             });\n@@ -171,7 +171,7 @@ export default Base.extend({\n             }\n             if (nav.length > 0) {\n                 var $li = $(\n-                    \'<li class="load-more"><div class="page">\' +\n+                    \'<li class="list-group-item load-more"><div class="page">\' +\n                         self.page +\n                         "</div></li>"\n                 );\n@@ -200,7 +200,7 @@ export default Base.extend({\n         this.$el.removeClass("livesearch-active");\n     },\n     init: function () {\n-        import("./livesearch.scss");\n+        // import("./livesearch.scss");\n \n         var self = this;\n \n@@ -299,6 +299,6 @@ export default Base.extend({\n         /* create result dom */\n         self.$results = $(\'<ul class="\' + self.resultsClass + \'"></ul>\')\n             .hide()\n-            .insertAfter(self.$input);\n+            .insertAfter(self.$el);\n     },\n });\n'

