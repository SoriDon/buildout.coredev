Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-10-06T13:49:42+02:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.restapi/commit/f6e9ef6ab7a2b25ab0ffb3703e871b46e662d9f0

Fix passwords used in tests (#1513)

* Fix passwords used in tests

* changelog

Files changed:
A news/1513.bugfix
M src/plone/restapi/tests/test_functional_auth.py

b'diff --git a/news/1513.bugfix b/news/1513.bugfix\nnew file mode 100644\nindex 000000000..037805eb2\n--- /dev/null\n+++ b/news/1513.bugfix\n@@ -0,0 +1 @@\n+- Fix passwords used in tests. [davisagli]\ndiff --git a/src/plone/restapi/tests/test_functional_auth.py b/src/plone/restapi/tests/test_functional_auth.py\nindex 59b8b31de..e308c903f 100644\n--- a/src/plone/restapi/tests/test_functional_auth.py\n+++ b/src/plone/restapi/tests/test_functional_auth.py\n@@ -1,6 +1,7 @@\n from plone.app.testing import login\n from plone.app.testing import setRoles\n from plone.app.testing import SITE_OWNER_NAME\n+from plone.app.testing import SITE_OWNER_PASSWORD\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n from plone.app.testing import TEST_USER_PASSWORD\n@@ -72,7 +73,7 @@ def test_api_login_grants_zmi(self):\n         login_resp = session.post(\n             self.portal_url + "/@login",\n             headers={"Accept": "application/json"},\n-            json={"login": SITE_OWNER_NAME, "password": TEST_USER_PASSWORD},\n+            json={"login": SITE_OWNER_NAME, "password": SITE_OWNER_PASSWORD},\n         )\n         self.assertIn(\n             "__ac",\n@@ -117,7 +118,7 @@ def test_zmi_login_grants_api(self):\n         basic_auth_headers = {\n             "Authorization": "Basic {}".format(\n                 base64.b64encode(\n-                    f"{SITE_OWNER_NAME}:{TEST_USER_PASSWORD}".encode(),\n+                    f"{SITE_OWNER_NAME}:{SITE_OWNER_PASSWORD}".encode(),\n                 ).decode()\n             )\n         }\n@@ -178,7 +179,7 @@ def test_cookie_login_grants_api(self):\n             self.portal_url + "/login",\n             data={\n                 "__ac_name": SITE_OWNER_NAME,\n-                "__ac_password": TEST_USER_PASSWORD,\n+                "__ac_password": SITE_OWNER_PASSWORD,\n                 "came_from": "/".join(self.private_document.getPhysicalPath()),\n                 "buttons.login": "Log in",\n             },\n'

