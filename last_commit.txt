Repository: mockup


Branch: refs/heads/master
Date: 2017-05-04T11:48:50+02:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/89cb008af1bfa66b0c15a61a033f2d6b3b21ceeb

Fix issue where formunloadalert pattern raised initialization error for modals

Files changed:
M CHANGES.rst
M mockup/patterns/formunloadalert/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index d6c6579..f2caca0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -88,6 +88,9 @@ Bug fixes:
 - fix localization of "Open folder" link title in related items pattern
   [datakurre]
 
+- Fix issue where formunloadalert pattern raised initialization error for modals.
+  [datakurre]
+
 
 2.4.0 (2017-02-20)
 ------------------
diff --git a/mockup/patterns/formunloadalert/pattern.js b/mockup/patterns/formunloadalert/pattern.js
index 6e691bc..1988efa 100644
--- a/mockup/patterns/formunloadalert/pattern.js
+++ b/mockup/patterns/formunloadalert/pattern.js
@@ -62,8 +62,8 @@ define([
 
       var $modal = self.$el.parents('.plone-modal');
       if ($modal.size() !== 0) {
-        $modal.data('pattern-modal').on('hide', function(e) {
-          var modal = $modal.data('pattern-modal');
+        $modal.data('patternPloneModal').on('hide', function(e) {
+          var modal = $modal.data('patternPloneModal');
           if (modal) {
             modal._suppressHide = self._handleUnload.apply(self, e);
           }


Repository: mockup


Branch: refs/heads/master
Date: 2017-05-04T11:50:07+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/9555091e4bf8281830088d390bf6ab20034fbcc9

Merge pull request #759 from plone/datakurre-formunloadalert

Fix issue where formunloadalert pattern raised initialization error for modals

Files changed:
M CHANGES.rst
M mockup/patterns/formunloadalert/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index d6c6579..f2caca0 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -88,6 +88,9 @@ Bug fixes:
 - fix localization of "Open folder" link title in related items pattern
   [datakurre]
 
+- Fix issue where formunloadalert pattern raised initialization error for modals.
+  [datakurre]
+
 
 2.4.0 (2017-02-20)
 ------------------
diff --git a/mockup/patterns/formunloadalert/pattern.js b/mockup/patterns/formunloadalert/pattern.js
index 6e691bc..1988efa 100644
--- a/mockup/patterns/formunloadalert/pattern.js
+++ b/mockup/patterns/formunloadalert/pattern.js
@@ -62,8 +62,8 @@ define([
 
       var $modal = self.$el.parents('.plone-modal');
       if ($modal.size() !== 0) {
-        $modal.data('pattern-modal').on('hide', function(e) {
-          var modal = $modal.data('pattern-modal');
+        $modal.data('patternPloneModal').on('hide', function(e) {
+          var modal = $modal.data('patternPloneModal');
           if (modal) {
             modal._suppressHide = self._handleUnload.apply(self, e);
           }


