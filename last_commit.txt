Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-12-22T18:51:05+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.Archetypes/commit/84ffcb10632bfa3f53b90e2cf55a3cbc28489f07

fix randomly failing test in test_referenceable, trial 2

Files changed:
M Products/Archetypes/tests/test_referenceable.py

diff --git a/Products/Archetypes/tests/test_referenceable.py b/Products/Archetypes/tests/test_referenceable.py
index 5d4048d..5e41e8c 100644
--- a/Products/Archetypes/tests/test_referenceable.py
+++ b/Products/Archetypes/tests/test_referenceable.py
@@ -615,7 +615,10 @@ def test_copyKeepsReferences(self):
         self.assertEqual(a.getRefs(), [b])
         # Original non-copied object should point to both the original and the
         # copied object
-        self.assertEqual(sorted(b.getBRefs()), sorted([a, copy_a]))
+        self.assertEqual(
+            sorted([x.absolute_url() for x in b.getBRefs()]),
+            sorted([x.absolute_url() for x in [a, copy_a]])
+        )
 
     def test_copyPasteSupport(self):
         # copy/paste behaviour test


