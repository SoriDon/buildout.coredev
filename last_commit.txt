Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2018-03-22T17:21:20+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/c220fa95ef21feade566f890c5887a2a91b090b6

prevent the password being wrapped in another b''

Files changed:
M src/plone/recipe/zope2instance/make.py

diff --git a/src/plone/recipe/zope2instance/make.py b/src/plone/recipe/zope2instance/make.py
index 2747c17..2132544 100644
--- a/src/plone/recipe/zope2instance/make.py
+++ b/src/plone/recipe/zope2instance/make.py
@@ -60,7 +60,7 @@ def get_inituser():
 def write_inituser(fn, user, password):
     fp = open(fn, 'w')
     pw = b2a_base64(sha1(password.encode('utf-8')).digest())[:-1]
-    fp.write('%s:{SHA}%s\n' % (user, pw))
+    fp.write('%s:{SHA}%s\n' % (user, pw.decode('ascii')))
     fp.close()
     os.chmod(fn, 0o644)
 


