Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-10-27T10:37:01+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/41b8709e268fcaa3a895451586e1df0469df43f7

Move querystring performance test to their own thread group.

Files changed:
M performance.jmx

b'diff --git a/performance.jmx b/performance.jmx\nindex 413d581d1..60801f6a0 100644\n--- a/performance.jmx\n+++ b/performance.jmx\n@@ -1437,42 +1437,6 @@\n \t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n \t\t}&#xd;\n \t]&#xd;\n-}</stringProp>\n-                <stringProp name="Argument.metadata">=</stringProp>\n-              </elementProp>\n-            </collectionProp>\n-          </elementProp>\n-          <stringProp name="HTTPSampler.domain"></stringProp>\n-          <stringProp name="HTTPSampler.port"></stringProp>\n-          <stringProp name="HTTPSampler.protocol"></stringProp>\n-          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n-          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/document/@querystring-search</stringProp>\n-          <stringProp name="HTTPSampler.method">POST</stringProp>\n-          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n-          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n-          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>\n-          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>\n-          <boolProp name="HTTPSampler.BROWSER_COMPATIBLE_MULTIPART">true</boolProp>\n-          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>\n-          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n-          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n-        </HTTPSamplerProxy>\n-        <hashTree/>\n-        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Querystring Search (Content Object, Fullobjects=True)" enabled="true">\n-          <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>\n-          <elementProp name="HTTPsampler.Arguments" elementType="Arguments">\n-            <collectionProp name="Arguments.arguments">\n-              <elementProp name="" elementType="HTTPArgument">\n-                <boolProp name="HTTPArgument.always_encode">false</boolProp>\n-                <stringProp name="Argument.value">{&#xd;\n-\t&quot;fullobjects&quot;: 1,&#xd;\n-\t&quot;query&quot;: [&#xd;\n-\t\t{&#xd;\n-\t\t\t&quot;i&quot;: &quot;portal_type&quot;, &#xd;\n-\t\t\t&quot;o&quot;: &quot;plone.app.querystring.operation.selection.any&quot;, &#xd;\n-\t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n-\t\t}&#xd;\n-\t]&#xd;\n }</stringProp>\n                 <stringProp name="Argument.metadata">=</stringProp>\n               </elementProp>\n@@ -4234,6 +4198,258 @@\n         </ResultCollector>\n         <hashTree/>\n       </hashTree>\n+      <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="Querystring Search (Read)" enabled="true">\n+        <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>\n+        <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="Schleifen-Controller (Loop Controller)" enabled="true">\n+          <boolProp name="LoopController.continue_forever">false</boolProp>\n+          <stringProp name="LoopController.loops">100</stringProp>\n+        </elementProp>\n+        <stringProp name="ThreadGroup.num_threads">5</stringProp>\n+        <stringProp name="ThreadGroup.ramp_time">1</stringProp>\n+        <longProp name="ThreadGroup.start_time">1463570296000</longProp>\n+        <longProp name="ThreadGroup.end_time">1463570296000</longProp>\n+        <boolProp name="ThreadGroup.scheduler">false</boolProp>\n+        <stringProp name="ThreadGroup.duration"></stringProp>\n+        <stringProp name="ThreadGroup.delay"></stringProp>\n+        <boolProp name="ThreadGroup.same_user_on_next_iteration">true</boolProp>\n+      </ThreadGroup>\n+      <hashTree>\n+        <ConfigTestElement guiclass="HttpDefaultsGui" testclass="ConfigTestElement" testname="HTTP Request Defaults" enabled="true">\n+          <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="User Defined Variables" enabled="true">\n+            <collectionProp name="Arguments.arguments"/>\n+          </elementProp>\n+          <stringProp name="HTTPSampler.domain">localhost</stringProp>\n+          <stringProp name="HTTPSampler.port">12345</stringProp>\n+          <stringProp name="HTTPSampler.protocol">http</stringProp>\n+          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder}/</stringProp>\n+          <stringProp name="HTTPSampler.concurrentPool">4</stringProp>\n+          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n+          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n+        </ConfigTestElement>\n+        <hashTree/>\n+        <HeaderManager guiclass="HeaderPanel" testclass="HeaderManager" testname="HTTP Header Manager" enabled="true">\n+          <collectionProp name="HeaderManager.headers">\n+            <elementProp name="" elementType="Header">\n+              <stringProp name="Header.name">Accept</stringProp>\n+              <stringProp name="Header.value">application/json</stringProp>\n+            </elementProp>\n+            <elementProp name="" elementType="Header">\n+              <stringProp name="Header.name">Content-Type</stringProp>\n+              <stringProp name="Header.value">application/json</stringProp>\n+            </elementProp>\n+          </collectionProp>\n+        </HeaderManager>\n+        <hashTree/>\n+        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Querystring Search (Root)" enabled="true">\n+          <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>\n+          <elementProp name="HTTPsampler.Arguments" elementType="Arguments">\n+            <collectionProp name="Arguments.arguments">\n+              <elementProp name="" elementType="HTTPArgument">\n+                <boolProp name="HTTPArgument.always_encode">false</boolProp>\n+                <stringProp name="Argument.value">{&#xd;\n+\t&quot;query&quot;: [&#xd;\n+\t\t{&#xd;\n+\t\t\t&quot;i&quot;: &quot;portal_type&quot;, &#xd;\n+\t\t\t&quot;o&quot;: &quot;plone.app.querystring.operation.selection.any&quot;, &#xd;\n+\t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n+\t\t}&#xd;\n+\t]&#xd;\n+}</stringProp>\n+                <stringProp name="Argument.metadata">=</stringProp>\n+              </elementProp>\n+            </collectionProp>\n+          </elementProp>\n+          <stringProp name="HTTPSampler.domain"></stringProp>\n+          <stringProp name="HTTPSampler.port"></stringProp>\n+          <stringProp name="HTTPSampler.protocol"></stringProp>\n+          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/@querystring-search</stringProp>\n+          <stringProp name="HTTPSampler.method">POST</stringProp>\n+          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n+          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n+          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>\n+          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>\n+          <boolProp name="HTTPSampler.BROWSER_COMPATIBLE_MULTIPART">true</boolProp>\n+          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>\n+          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n+          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n+        </HTTPSamplerProxy>\n+        <hashTree/>\n+        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Querystring Search (Root, Fullobjects=True)" enabled="true">\n+          <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>\n+          <elementProp name="HTTPsampler.Arguments" elementType="Arguments">\n+            <collectionProp name="Arguments.arguments">\n+              <elementProp name="" elementType="HTTPArgument">\n+                <boolProp name="HTTPArgument.always_encode">false</boolProp>\n+                <stringProp name="Argument.value">{&#xd;\n+\t&quot;fullobjects&quot;: 1,&#xd;\n+\t&quot;query&quot;: [&#xd;\n+\t\t{&#xd;\n+\t\t\t&quot;i&quot;: &quot;portal_type&quot;, &#xd;\n+\t\t\t&quot;o&quot;: &quot;plone.app.querystring.operation.selection.any&quot;, &#xd;\n+\t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n+\t\t}&#xd;\n+\t]&#xd;\n+}</stringProp>\n+                <stringProp name="Argument.metadata">=</stringProp>\n+              </elementProp>\n+            </collectionProp>\n+          </elementProp>\n+          <stringProp name="HTTPSampler.domain"></stringProp>\n+          <stringProp name="HTTPSampler.port"></stringProp>\n+          <stringProp name="HTTPSampler.protocol"></stringProp>\n+          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/@querystring-search</stringProp>\n+          <stringProp name="HTTPSampler.method">POST</stringProp>\n+          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n+          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n+          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>\n+          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>\n+          <boolProp name="HTTPSampler.BROWSER_COMPATIBLE_MULTIPART">true</boolProp>\n+          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>\n+          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n+          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n+        </HTTPSamplerProxy>\n+        <hashTree/>\n+        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Querystring Search (Content Object)" enabled="true">\n+          <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>\n+          <elementProp name="HTTPsampler.Arguments" elementType="Arguments">\n+            <collectionProp name="Arguments.arguments">\n+              <elementProp name="" elementType="HTTPArgument">\n+                <boolProp name="HTTPArgument.always_encode">false</boolProp>\n+                <stringProp name="Argument.value">{&#xd;\n+\t&quot;query&quot;: [&#xd;\n+\t\t{&#xd;\n+\t\t\t&quot;i&quot;: &quot;portal_type&quot;, &#xd;\n+\t\t\t&quot;o&quot;: &quot;plone.app.querystring.operation.selection.any&quot;, &#xd;\n+\t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n+\t\t}&#xd;\n+\t]&#xd;\n+}</stringProp>\n+                <stringProp name="Argument.metadata">=</stringProp>\n+              </elementProp>\n+            </collectionProp>\n+          </elementProp>\n+          <stringProp name="HTTPSampler.domain"></stringProp>\n+          <stringProp name="HTTPSampler.port"></stringProp>\n+          <stringProp name="HTTPSampler.protocol"></stringProp>\n+          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/document/@querystring-search</stringProp>\n+          <stringProp name="HTTPSampler.method">POST</stringProp>\n+          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n+          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n+          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>\n+          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>\n+          <boolProp name="HTTPSampler.BROWSER_COMPATIBLE_MULTIPART">true</boolProp>\n+          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>\n+          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n+          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n+        </HTTPSamplerProxy>\n+        <hashTree/>\n+        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Querystring Search (Content Object, Fullobjects=True)" enabled="true">\n+          <boolProp name="HTTPSampler.postBodyRaw">true</boolProp>\n+          <elementProp name="HTTPsampler.Arguments" elementType="Arguments">\n+            <collectionProp name="Arguments.arguments">\n+              <elementProp name="" elementType="HTTPArgument">\n+                <boolProp name="HTTPArgument.always_encode">false</boolProp>\n+                <stringProp name="Argument.value">{&#xd;\n+\t&quot;fullobjects&quot;: 1,&#xd;\n+\t&quot;query&quot;: [&#xd;\n+\t\t{&#xd;\n+\t\t\t&quot;i&quot;: &quot;portal_type&quot;, &#xd;\n+\t\t\t&quot;o&quot;: &quot;plone.app.querystring.operation.selection.any&quot;, &#xd;\n+\t\t\t&quot;v&quot;: [&quot;Document&quot;]&#xd;\n+\t\t}&#xd;\n+\t]&#xd;\n+}</stringProp>\n+                <stringProp name="Argument.metadata">=</stringProp>\n+              </elementProp>\n+            </collectionProp>\n+          </elementProp>\n+          <stringProp name="HTTPSampler.domain"></stringProp>\n+          <stringProp name="HTTPSampler.port"></stringProp>\n+          <stringProp name="HTTPSampler.protocol"></stringProp>\n+          <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/document/@querystring-search</stringProp>\n+          <stringProp name="HTTPSampler.method">POST</stringProp>\n+          <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n+          <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n+          <boolProp name="HTTPSampler.use_keepalive">true</boolProp>\n+          <boolProp name="HTTPSampler.DO_MULTIPART_POST">false</boolProp>\n+          <boolProp name="HTTPSampler.BROWSER_COMPATIBLE_MULTIPART">true</boolProp>\n+          <stringProp name="HTTPSampler.embedded_url_re"></stringProp>\n+          <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n+          <stringProp name="HTTPSampler.response_timeout"></stringProp>\n+        </HTTPSamplerProxy>\n+        <hashTree/>\n+        <ResultCollector guiclass="StatGraphVisualizer" testclass="ResultCollector" testname="Aggregate Graph" enabled="true">\n+          <boolProp name="ResultCollector.error_logging">false</boolProp>\n+          <objProp>\n+            <name>saveConfig</name>\n+            <value class="SampleSaveConfiguration">\n+              <time>true</time>\n+              <latency>true</latency>\n+              <timestamp>true</timestamp>\n+              <success>true</success>\n+              <label>true</label>\n+              <code>true</code>\n+              <message>true</message>\n+              <threadName>true</threadName>\n+              <dataType>true</dataType>\n+              <encoding>false</encoding>\n+              <assertions>true</assertions>\n+              <subresults>true</subresults>\n+              <responseData>false</responseData>\n+              <samplerData>false</samplerData>\n+              <xml>false</xml>\n+              <fieldNames>false</fieldNames>\n+              <responseHeaders>false</responseHeaders>\n+              <requestHeaders>false</requestHeaders>\n+              <responseDataOnError>false</responseDataOnError>\n+              <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>\n+              <assertionsResultsToSave>0</assertionsResultsToSave>\n+              <bytes>true</bytes>\n+              <threadCounts>true</threadCounts>\n+            </value>\n+          </objProp>\n+          <stringProp name="filename"></stringProp>\n+        </ResultCollector>\n+        <hashTree/>\n+        <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="View Results Tree" enabled="true">\n+          <boolProp name="ResultCollector.error_logging">false</boolProp>\n+          <objProp>\n+            <name>saveConfig</name>\n+            <value class="SampleSaveConfiguration">\n+              <time>true</time>\n+              <latency>true</latency>\n+              <timestamp>true</timestamp>\n+              <success>true</success>\n+              <label>true</label>\n+              <code>true</code>\n+              <message>true</message>\n+              <threadName>true</threadName>\n+              <dataType>true</dataType>\n+              <encoding>false</encoding>\n+              <assertions>true</assertions>\n+              <subresults>true</subresults>\n+              <responseData>false</responseData>\n+              <samplerData>false</samplerData>\n+              <xml>false</xml>\n+              <fieldNames>false</fieldNames>\n+              <responseHeaders>false</responseHeaders>\n+              <requestHeaders>false</requestHeaders>\n+              <responseDataOnError>false</responseDataOnError>\n+              <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>\n+              <assertionsResultsToSave>0</assertionsResultsToSave>\n+              <bytes>true</bytes>\n+              <threadCounts>true</threadCounts>\n+            </value>\n+          </objProp>\n+          <stringProp name="filename"></stringProp>\n+        </ResultCollector>\n+        <hashTree/>\n+      </hashTree>\n     </hashTree>\n   </hashTree>\n </jmeterTestPlan>\n'

