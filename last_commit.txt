Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-05-19T23:03:12+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.layout/commit/c668c72fe6675f341183463b5a1863e9326fd7d5

Remove alt tags from icons within links.

Files changed:
M plone/app/layout/viewlets/menu.pt
M plone/app/layout/viewlets/toolbar.pt

b'diff --git a/plone/app/layout/viewlets/menu.pt b/plone/app/layout/viewlets/menu.pt\nindex fb11e06a..64958e1f 100644\n--- a/plone/app/layout/viewlets/menu.pt\n+++ b/plone/app/layout/viewlets/menu.pt\n@@ -14,12 +14,12 @@\n \n           <tal:if condition="python:actionid != \'history\'">\n             <tal:icon tal:condition="python:action[\'icon\']"\n-                      tal:replace="structure python:icons.tag(action[\'icon\'] or \'toolbar-action\', tag_alt=action[\'id\'], tag_class=\'me-1\')" />\n+                      tal:replace="structure python:icons.tag(action[\'icon\'] or \'toolbar-action\', tag_class=\'me-1\')" />\n             <span class="toolbar-label" tal:content="action/title" i18n:translate="">View name</span>\n           </tal:if>\n \n           <tal:if tal:condition="python:actionid == \'history\'">\n-            <tal:icon tal:replace="structure python:icons.tag(\'lock\' if locked else action[\'icon\'], tag_alt=action[\'id\'], tag_class=\'me-1\')" />\n+            <tal:icon tal:replace="structure python:icons.tag(\'lock\' if locked else action[\'icon\'], tag_class=\'me-1\')" />\n             <span class="toolbar-label">\n               <time\n                 class="pat-display-time"\ndiff --git a/plone/app/layout/viewlets/toolbar.pt b/plone/app/layout/viewlets/toolbar.pt\nindex c9bc183b..8549ca81 100644\n--- a/plone/app/layout/viewlets/toolbar.pt\n+++ b/plone/app/layout/viewlets/toolbar.pt\n@@ -34,7 +34,7 @@\n          data-bs-offset="0,0"\n          aria-expanded="false"\n          tal:attributes="href personal_bar/homelink_url">\n-        <tal:icon tal:replace="structure python:icons.tag(\'toolbar-action/personaltools\', tag_alt=\'portal-personaltools\', tag_class=\'me-1\')" />\n+        <tal:icon tal:replace="structure python:icons.tag(\'toolbar-action/personaltools\', tag_class=\'me-1\')" />\n         <span class="toolbar-label" tal:content="personal_bar/user_name">User</span>\n       </a>\n \n@@ -46,7 +46,7 @@\n         </li>\n         <li tal:repeat="action personal_bar/user_actions">\n           <a href="${action/href}" class="dropdown-item">\n-            <tal:icon replace="structure python:icons.tag(action.get(\'icon\', \'dot\'), tag_alt=\'portal-personaltools\', tag_class=\'me-1\')" />\n+            <tal:icon replace="structure python:icons.tag(action.get(\'icon\', \'dot\'), tag_class=\'me-1\')" />\n             <tal:actionname tal:content="action/title">\n               action title\n             </tal:actionname>\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-05-19T23:09:08+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.layout/commit/2586df6ef5e5e5aec3e5173548dc678d35dab22c

add news

Files changed:
A news/309.bugfix

b'diff --git a/news/309.bugfix b/news/309.bugfix\nnew file mode 100644\nindex 00000000..098bf1c4\n--- /dev/null\n+++ b/news/309.bugfix\n@@ -0,0 +1,2 @@\n+Remove alt tags from icons within links.\n+[agitator]\n\\ No newline at end of file\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-05-20T15:43:48+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/6147620c46c3ed722e9be560f91f413b2273e79a

Merge pull request #309 from plone/toolbar-icon-alt-tag

Remove alt tags from icons within links.

Files changed:
A news/309.bugfix
M plone/app/layout/viewlets/menu.pt
M plone/app/layout/viewlets/toolbar.pt

b'diff --git a/news/309.bugfix b/news/309.bugfix\nnew file mode 100644\nindex 00000000..098bf1c4\n--- /dev/null\n+++ b/news/309.bugfix\n@@ -0,0 +1,2 @@\n+Remove alt tags from icons within links.\n+[agitator]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/viewlets/menu.pt b/plone/app/layout/viewlets/menu.pt\nindex fb11e06a..64958e1f 100644\n--- a/plone/app/layout/viewlets/menu.pt\n+++ b/plone/app/layout/viewlets/menu.pt\n@@ -14,12 +14,12 @@\n \n           <tal:if condition="python:actionid != \'history\'">\n             <tal:icon tal:condition="python:action[\'icon\']"\n-                      tal:replace="structure python:icons.tag(action[\'icon\'] or \'toolbar-action\', tag_alt=action[\'id\'], tag_class=\'me-1\')" />\n+                      tal:replace="structure python:icons.tag(action[\'icon\'] or \'toolbar-action\', tag_class=\'me-1\')" />\n             <span class="toolbar-label" tal:content="action/title" i18n:translate="">View name</span>\n           </tal:if>\n \n           <tal:if tal:condition="python:actionid == \'history\'">\n-            <tal:icon tal:replace="structure python:icons.tag(\'lock\' if locked else action[\'icon\'], tag_alt=action[\'id\'], tag_class=\'me-1\')" />\n+            <tal:icon tal:replace="structure python:icons.tag(\'lock\' if locked else action[\'icon\'], tag_class=\'me-1\')" />\n             <span class="toolbar-label">\n               <time\n                 class="pat-display-time"\ndiff --git a/plone/app/layout/viewlets/toolbar.pt b/plone/app/layout/viewlets/toolbar.pt\nindex c9bc183b..8549ca81 100644\n--- a/plone/app/layout/viewlets/toolbar.pt\n+++ b/plone/app/layout/viewlets/toolbar.pt\n@@ -34,7 +34,7 @@\n          data-bs-offset="0,0"\n          aria-expanded="false"\n          tal:attributes="href personal_bar/homelink_url">\n-        <tal:icon tal:replace="structure python:icons.tag(\'toolbar-action/personaltools\', tag_alt=\'portal-personaltools\', tag_class=\'me-1\')" />\n+        <tal:icon tal:replace="structure python:icons.tag(\'toolbar-action/personaltools\', tag_class=\'me-1\')" />\n         <span class="toolbar-label" tal:content="personal_bar/user_name">User</span>\n       </a>\n \n@@ -46,7 +46,7 @@\n         </li>\n         <li tal:repeat="action personal_bar/user_actions">\n           <a href="${action/href}" class="dropdown-item">\n-            <tal:icon replace="structure python:icons.tag(action.get(\'icon\', \'dot\'), tag_alt=\'portal-personaltools\', tag_class=\'me-1\')" />\n+            <tal:icon replace="structure python:icons.tag(action.get(\'icon\', \'dot\'), tag_class=\'me-1\')" />\n             <tal:actionname tal:content="action/title">\n               action title\n             </tal:actionname>\n'

