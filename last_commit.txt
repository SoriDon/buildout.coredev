Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-09-29T01:25:07+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/fe36b71320a6775880947a7dffed8a28c9a2e522

Update npm dependencies.

Files changed:
M CHANGES.rst
M Products/CMFPlone/_scripts/_generate_gruntfile.py
M Products/CMFPlone/_scripts/compile_resources.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f44020629..fca8eeeaa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Update npm dependencies.
+  [thet]
 
 Bug fixes:
 
diff --git a/Products/CMFPlone/_scripts/_generate_gruntfile.py b/Products/CMFPlone/_scripts/_generate_gruntfile.py
index b5990f04c..a9aa6de56 100644
--- a/Products/CMFPlone/_scripts/_generate_gruntfile.py
+++ b/Products/CMFPlone/_scripts/_generate_gruntfile.py
@@ -122,24 +122,25 @@ def applyBrowserLayers(site):
             "{bkey}": {{
                 options: {{
                     baseUrl: "/",
+                    exclude: ["jquery"],
                     generateSourceMaps: false,
-                    preserveLicenseComments: false,
-                    paths: {paths},
-                    shim: {shims},
-                    wrapShim: true,
                     name: "{name}",
-                    exclude: ["jquery"],
+                    optimize: "none",
                     out: "{out}",
-                    optimize: "none"
+                    paths: {paths},
+                    preserveLicenseComments: false,
+                    shim: {shims},
+                    wrapShim: true
                 }}
             }},
 """
 UGLIFY_CONFIG_TEMPLATE = """
         "{bkey}": {{
           options: {{
-            sourceMap: true,
-            sourceMapName: "{destination}.map",
-            sourceMapIncludeSources: false
+            sourceMap: {{
+              includeSources: false
+            }},
+            sourceMapName: "{destination}.map"
           }},
           files: {{
             "{destination}": {files}
@@ -154,18 +155,16 @@ def applyBrowserLayers(site):
                 ],
                 options: {{
                     compress: true,
-                    strictMath: false,
-                    sourceMap: true,
+                    modifyVars: modifyVars,
                     outputSourceFiles: true,
-                    strictImports: false,
-                    sourceMapURL: "{sourcemap_url}",
-                    sourceMapBasepath: "{base_path}",
-                    relativeUrls: true,
-                    plugins: [
-                        new require("less-plugin-inline-urls"),
-                    ],
                     paths: lessPaths,
-                    modifyVars: modifyVars
+                    plugins: [new require("less-plugin-inline-urls"),],
+                    relativeUrls: true,
+                    sourceMap: true,
+                    sourceMapBasepath: "{base_path}",
+                    sourceMapURL: "{sourcemap_url}",
+                    strictImports: false,
+                    strictMath: false
                 }}
             }}\
 """
diff --git a/Products/CMFPlone/_scripts/compile_resources.py b/Products/CMFPlone/_scripts/compile_resources.py
index eec9fd285..784ab50a8 100644
--- a/Products/CMFPlone/_scripts/compile_resources.py
+++ b/Products/CMFPlone/_scripts/compile_resources.py
@@ -8,19 +8,19 @@
 
 package_json_contents = """{
   "name": "gruntrunner",
-  "version": "1.1.2",
+  "version": "1.1.3",
   "private": true,
   "devDependencies": {
-    "grunt": "~0.4.5",
+    "grunt": "~1.0.1",
     "grunt-cli": "~1.2.0",
-    "grunt-contrib-less": "~1.3.0",
+    "grunt-contrib-less": "~1.4.1",
     "grunt-contrib-requirejs": "~1.0.0",
-    "grunt-contrib-uglify": "~1.0.1",
+    "grunt-contrib-uglify": "~3.1.0",
     "grunt-contrib-watch": "~1.0.0",
     "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4", 
     "less-plugin-inline-urls": "^1.2.0"
   }
-}"""
+}"""  # noqa
 
 if os.name == 'nt':
     NPM_CMD = 'npm.cmd'


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-10-01T23:44:29+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/7ef4ec8eabdfb4e24b43386c3954c60b33de50ec

Merge pull request #2162 from plone/thet-updnpm

Update npm dependencies.

Files changed:
M CHANGES.rst
M Products/CMFPlone/_scripts/_generate_gruntfile.py
M Products/CMFPlone/_scripts/compile_resources.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f44020629..fca8eeeaa 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Update npm dependencies.
+  [thet]
 
 Bug fixes:
 
diff --git a/Products/CMFPlone/_scripts/_generate_gruntfile.py b/Products/CMFPlone/_scripts/_generate_gruntfile.py
index b5990f04c..a9aa6de56 100644
--- a/Products/CMFPlone/_scripts/_generate_gruntfile.py
+++ b/Products/CMFPlone/_scripts/_generate_gruntfile.py
@@ -122,24 +122,25 @@ def applyBrowserLayers(site):
             "{bkey}": {{
                 options: {{
                     baseUrl: "/",
+                    exclude: ["jquery"],
                     generateSourceMaps: false,
-                    preserveLicenseComments: false,
-                    paths: {paths},
-                    shim: {shims},
-                    wrapShim: true,
                     name: "{name}",
-                    exclude: ["jquery"],
+                    optimize: "none",
                     out: "{out}",
-                    optimize: "none"
+                    paths: {paths},
+                    preserveLicenseComments: false,
+                    shim: {shims},
+                    wrapShim: true
                 }}
             }},
 """
 UGLIFY_CONFIG_TEMPLATE = """
         "{bkey}": {{
           options: {{
-            sourceMap: true,
-            sourceMapName: "{destination}.map",
-            sourceMapIncludeSources: false
+            sourceMap: {{
+              includeSources: false
+            }},
+            sourceMapName: "{destination}.map"
           }},
           files: {{
             "{destination}": {files}
@@ -154,18 +155,16 @@ def applyBrowserLayers(site):
                 ],
                 options: {{
                     compress: true,
-                    strictMath: false,
-                    sourceMap: true,
+                    modifyVars: modifyVars,
                     outputSourceFiles: true,
-                    strictImports: false,
-                    sourceMapURL: "{sourcemap_url}",
-                    sourceMapBasepath: "{base_path}",
-                    relativeUrls: true,
-                    plugins: [
-                        new require("less-plugin-inline-urls"),
-                    ],
                     paths: lessPaths,
-                    modifyVars: modifyVars
+                    plugins: [new require("less-plugin-inline-urls"),],
+                    relativeUrls: true,
+                    sourceMap: true,
+                    sourceMapBasepath: "{base_path}",
+                    sourceMapURL: "{sourcemap_url}",
+                    strictImports: false,
+                    strictMath: false
                 }}
             }}\
 """
diff --git a/Products/CMFPlone/_scripts/compile_resources.py b/Products/CMFPlone/_scripts/compile_resources.py
index eec9fd285..784ab50a8 100644
--- a/Products/CMFPlone/_scripts/compile_resources.py
+++ b/Products/CMFPlone/_scripts/compile_resources.py
@@ -8,19 +8,19 @@
 
 package_json_contents = """{
   "name": "gruntrunner",
-  "version": "1.1.2",
+  "version": "1.1.3",
   "private": true,
   "devDependencies": {
-    "grunt": "~0.4.5",
+    "grunt": "~1.0.1",
     "grunt-cli": "~1.2.0",
-    "grunt-contrib-less": "~1.3.0",
+    "grunt-contrib-less": "~1.4.1",
     "grunt-contrib-requirejs": "~1.0.0",
-    "grunt-contrib-uglify": "~1.0.1",
+    "grunt-contrib-uglify": "~3.1.0",
     "grunt-contrib-watch": "~1.0.0",
     "grunt-sed": "collective/grunt-sed#e625902539f5c29f1246228270a0330c1097b1e4", 
     "less-plugin-inline-urls": "^1.2.0"
   }
-}"""
+}"""  # noqa
 
 if os.name == 'nt':
     NPM_CMD = 'npm.cmd'


