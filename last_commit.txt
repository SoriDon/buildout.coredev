Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2022-02-26T16:17:12+01:00
Author: Victor Fernandez de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.app.robotframework/commit/61ba0bdbe70b3be1590a1f675071aa1c23615e7b

Add VHM support in the PloneRobotFixture

Files changed:
A news/127.feature
M src/plone/app/robotframework/testing.py

b'diff --git a/news/127.feature b/news/127.feature\nnew file mode 100644\nindex 0000000..d4ffdd7\n--- /dev/null\n+++ b/news/127.feature\n@@ -0,0 +1,2 @@\n+Add VHM support in the PloneRobotFixture\n+[sneridagh]\ndiff --git a/src/plone/app/robotframework/testing.py b/src/plone/app/robotframework/testing.py\nindex 74ce372..ab4c054 100644\n--- a/src/plone/app/robotframework/testing.py\n+++ b/src/plone/app/robotframework/testing.py\n@@ -1,6 +1,7 @@\n # -*- coding: utf-8 -*-\n """Test layers required to run plone.app.robotframework tests."""\n from Acquisition import aq_base\n+from OFS.Application import AppInitializer\n from plone.app.robotframework.autologin import AutoLogin\n from plone.app.robotframework.content import Content\n from plone.app.robotframework.genericsetup import GenericSetup\n@@ -220,6 +221,9 @@ def _get_robot_variable(self, name):\n \n     def setUpZope(self, app, configurationContext):\n \n+        # This installs the VHM in the Zope root, so we can have VHM support too\n+        AppInitializer(app).install_virtual_hosting()\n+\n         for locales in self._get_robot_variable(\'REGISTER_TRANSLATIONS\'):\n             if locales and os.path.isdir(locales):\n                 from zope.i18n.zcml import registerTranslations\n'

Repository: plone.app.robotframework


Branch: refs/heads/master
Date: 2022-02-26T22:30:52+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.robotframework/commit/32487bd549c5f6df79bbd45dd5e8935775d6ad23

Merge pull request #128 from plone/install_vhm

Add VHM support in the PloneRobotFixture

Files changed:
A news/127.feature
M src/plone/app/robotframework/testing.py

b'diff --git a/news/127.feature b/news/127.feature\nnew file mode 100644\nindex 0000000..d4ffdd7\n--- /dev/null\n+++ b/news/127.feature\n@@ -0,0 +1,2 @@\n+Add VHM support in the PloneRobotFixture\n+[sneridagh]\ndiff --git a/src/plone/app/robotframework/testing.py b/src/plone/app/robotframework/testing.py\nindex 74ce372..ab4c054 100644\n--- a/src/plone/app/robotframework/testing.py\n+++ b/src/plone/app/robotframework/testing.py\n@@ -1,6 +1,7 @@\n # -*- coding: utf-8 -*-\n """Test layers required to run plone.app.robotframework tests."""\n from Acquisition import aq_base\n+from OFS.Application import AppInitializer\n from plone.app.robotframework.autologin import AutoLogin\n from plone.app.robotframework.content import Content\n from plone.app.robotframework.genericsetup import GenericSetup\n@@ -220,6 +221,9 @@ def _get_robot_variable(self, name):\n \n     def setUpZope(self, app, configurationContext):\n \n+        # This installs the VHM in the Zope root, so we can have VHM support too\n+        AppInitializer(app).install_virtual_hosting()\n+\n         for locales in self._get_robot_variable(\'REGISTER_TRANSLATIONS\'):\n             if locales and os.path.isdir(locales):\n                 from zope.i18n.zcml import registerTranslations\n'

