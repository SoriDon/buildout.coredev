Repository: Products.isurlinportal


Branch: refs/heads/master
Date: 2023-02-25T01:23:57+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.isurlinportal/commit/432c442fb0666de55c4b0cc71c042e3ac05025fe

Drop compatibility with Plone 5.2 and lower.

Drop Python 2 compatibility.
Use plone.base.

Files changed:
A news/60.breaking
M Products/__init__.py
M Products/isurlinportal/__init__.py
M Products/isurlinportal/tests.py
M setup.py
D Products/isurlinportal/_compat.py

b'diff --git a/Products/__init__.py b/Products/__init__.py\nindex ca12a73..5284146 100644\n--- a/Products/__init__.py\n+++ b/Products/__init__.py\n@@ -1,8 +1 @@\n-# -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__("pkg_resources").declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-\n-    __path__ = extend_path(__path__, __name__)\n+__import__("pkg_resources").declare_namespace(__name__)\ndiff --git a/Products/isurlinportal/__init__.py b/Products/isurlinportal/__init__.py\nindex a7c4cd7..768497d 100644\n--- a/Products/isurlinportal/__init__.py\n+++ b/Products/isurlinportal/__init__.py\n@@ -1,12 +1,12 @@\n-# -*- coding: utf-8 -*-\n-from ._compat import get_external_sites\n-from ._compat import unescape\n-from ._compat import urljoin\n-from ._compat import urlparse\n+from html import unescape\n+from plone.base.interfaces import ILoginSchema\n+from plone.registry.interfaces import IRegistry\n from posixpath import normpath\n-\n # This is the class we will patch:\n from Products.CMFPlone.URLTool import URLTool\n+from urllib.parse import urljoin\n+from urllib.parse import urlparse\n+from zope.component import getUtility\n \n import re\n import string\n@@ -88,6 +88,13 @@ def safe_url_first_char(url):\n     return True\n \n \n+def get_external_sites(context=None):\n+    # context is not used here\n+    registry = getUtility(IRegistry)\n+    settings = registry.forInterface(ILoginSchema, prefix="plone")\n+    return settings.allow_external_login_sites\n+\n+\n def isURLInPortal(self, url, context=None):\n     # Note: no docstring, because the method is publicly available\n     # but does not need to be callable on site-url/portal_url/isURLInPortal.\ndiff --git a/Products/isurlinportal/_compat.py b/Products/isurlinportal/_compat.py\ndeleted file mode 100644\nindex 04f436b..0000000\n--- a/Products/isurlinportal/_compat.py\n+++ /dev/null\n@@ -1,45 +0,0 @@\n-# We do not want to depend on the \'six\' package for compatibility,\n-# because not all Plone versions may have it.\n-\n-# from six.moves.urllib import parse\n-try:\n-    # Python 3\n-    from urllib.parse import urlparse\n-    from urllib.parse import urljoin\n-except ImportError:\n-    # Python 2\n-    from urlparse import urlparse\n-    from urlparse import urljoin\n-\n-try:\n-    # Python 2\n-    from HTMLParser import HTMLParser\n-\n-    hp = HTMLParser()\n-    unescape = hp.unescape\n-\n-except ImportError:\n-    # Python 3\n-    import html\n-\n-    unescape = html.unescape\n-\n-try:\n-    # Plone 5.0+\n-    from plone.registry.interfaces import IRegistry\n-    from Products.CMFPlone.interfaces import ILoginSchema\n-    from zope.component import getUtility\n-\n-    def get_external_sites(context=None):\n-        # context is not used here\n-        registry = getUtility(IRegistry)\n-        settings = registry.forInterface(ILoginSchema, prefix="plone")\n-        return settings.allow_external_login_sites\n-\n-except ImportError:\n-    # Plone 4.3\n-    from Products.CMFCore.utils import getToolByName\n-\n-    def get_external_sites(context=None):\n-        props = getToolByName(context, "portal_properties").site_properties\n-        return props.getProperty("allow_external_login_sites", [])\ndiff --git a/Products/isurlinportal/tests.py b/Products/isurlinportal/tests.py\nindex b7409a1..f2ea7bf 100644\n--- a/Products/isurlinportal/tests.py\n+++ b/Products/isurlinportal/tests.py\n@@ -1,9 +1,7 @@\n-# -*- coding: utf-8 -*-\n from Acquisition import aq_parent\n from Products.CMFCore.tests.base.dummy import DummyContent\n from Products.CMFCore.tests.base.dummy import DummyFolder\n from Products.CMFCore.tests.base.dummy import DummySite\n-from zope.component import getSiteManager\n \n import unittest\n \ndiff --git a/news/60.breaking b/news/60.breaking\nnew file mode 100644\nindex 0000000..24ce0fb\n--- /dev/null\n+++ b/news/60.breaking\n@@ -0,0 +1,2 @@\n+Drop compatibility with Plone 5.2 and lower.\n+[maurits]\ndiff --git a/setup.py b/setup.py\nindex 6dd8923..8475677 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,7 +1,6 @@\n from setuptools import find_packages\n from setuptools import setup\n \n-import os\n \n with open("README.rst") as myfile:\n     readme = myfile.read()\n@@ -12,22 +11,15 @@\n \n setup(\n     name="Products.isurlinportal",\n-    version="1.2.2.dev0",\n+    version="2.0.0.dev0",\n     description="Replacement for isURLInPortal method in Plone",\n     long_description=long_description,\n     # Get more strings from https://pypi.org/classifiers/\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n-        "Framework :: Plone :: 4.3",\n-        "Framework :: Plone :: 5.0",\n-        "Framework :: Plone :: 5.1",\n-        "Framework :: Plone :: 5.2",\n         "License :: OSI Approved :: GNU General Public License (GPL)",\n         "Programming Language :: Python",\n-        "Programming Language :: Python :: 2.7",\n-        "Programming Language :: Python :: 3.6",\n-        "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n         "Programming Language :: Python :: 3.9",\n         "Programming Language :: Python :: 3.10",\n@@ -42,6 +34,6 @@\n     namespace_packages=["Products"],\n     include_package_data=True,\n     zip_safe=False,\n-    python_requires=">=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,!=3.5.*",\n+    python_requires=">=3.8",\n     install_requires=["setuptools"],\n )\n'

Repository: Products.isurlinportal


Branch: refs/heads/master
Date: 2023-02-25T01:47:50+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.isurlinportal/commit/8087b78d4b5caf52fac09c5302569d6350ce5f03

Fix tox and gh-actions to run on Plone 6.0.

Files changed:
M .github/workflows/tests.yml
M buildout.cfg
M requirements.txt
M tox.ini

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 520a30a..720ef8c 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -4,6 +4,7 @@ on:\n   push:\n     branches: [ master ]\n   pull_request:\n+  workflow_dispatch:\n \n jobs:\n   build:\n@@ -11,28 +12,21 @@ jobs:\n       matrix:\n         config:\n         # [Python version, tox env]\n-        - ["2.7",   "4.3-py27"]\n-        - ["2.7",   "5.0-py27"]\n-        - ["2.7",   "5.1-py27"]\n-        - ["2.7",   "5.2-py27"]\n-        - ["3.6",   "5.2-py36"]\n-        - ["3.7",   "5.2-py37"]\n-        - ["3.8",   "5.2-py38"]\n+        - ["3.8",   "plone60-py38"]\n+        - ["3.9",   "plone60-py39"]\n+        - ["3.10",   "plone60-py310"]\n+        - ["3.11",   "plone60-py311"]\n \n     runs-on: ubuntu-latest\n     name: ${{ matrix.config[1] }}\n     steps:\n-    - uses: actions/checkout@v2\n-    - name: Install lxml compilation dependencies\n-      run: |\n-          sudo apt-get update\n-          sudo apt-get install libxml2-dev libxslt1-dev\n+    - uses: actions/checkout@v3\n     - name: Set up Python\n-      uses: actions/setup-python@v2\n+      uses: actions/setup-python@v3\n       with:\n         python-version: ${{ matrix.config[0] }}\n     - name: Pip cache\n-      uses: actions/cache@v2\n+      uses: actions/cache@v3\n       with:\n         path: ~/.cache/pip\n         key: ${{ runner.os }}-pip-${{ matrix.config[0] }}-${{ hashFiles(\'setup.*\', \'tox.ini\') }}\n@@ -40,7 +34,7 @@ jobs:\n           ${{ runner.os }}-pip-${{ matrix.config[0] }}-\n           ${{ runner.os }}-pip-\n     - name: Buildout cache\n-      uses: actions/cache@v2\n+      uses: actions/cache@v3\n       with:\n         path: ~/.buildout/eggs\n         key: ${{ runner.os }}-buildout-${{ matrix.config[1] }}-${{ hashFiles(\'setup.*\', \'tox.ini\', \'*cfg\') }}\ndiff --git a/buildout.cfg b/buildout.cfg\nindex b79ffd8..800a083 100644\n--- a/buildout.cfg\n+++ b/buildout.cfg\n@@ -1,11 +1,13 @@\n [buildout]\n extends =\n-    https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-5.x.cfg\n+    https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-6.0.x.cfg\n \n package-name = Products.isurlinportal\n \n [versions]\n-setuptools = 41.2.0\n-zc.buildout = 2.13.3\n+pip =\n+setuptools =\n+wheel =\n+zc.buildout =\n # Use development version:\n Products.isurlinportal =\ndiff --git a/requirements.txt b/requirements.txt\nindex 7e1b0b6..eed370c 100644\n--- a/requirements.txt\n+++ b/requirements.txt\n@@ -1,2 +1,4 @@\n-setuptools==41.2.0\n-zc.buildout==2.13.3\n+pip==22.3.1\n+setuptools==65.7.0\n+wheel==0.38.4\n+zc.buildout==3.0.1\ndiff --git a/tox.ini b/tox.ini\nindex c6f42d2..e16622e 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,57 +1,39 @@\n [tox]\n envlist =\n-    4.3-py27,\n-    5.0-py27,\n-    5.1-py27,\n-    5.2-py27\n-    5.2-py36\n-    5.2-py37\n-    5.2-py38\n+    plone60-py38\n+    plone60-py39\n+    plone60-py310\n+    plone60-py311\n \n [testenv]\n-basepython = python2.7\n commands =\n     cp {toxinidir}/buildout.cfg {envdir}/buildout.cfg\n-    sed -ie "s/test-5.x.cfg/test-{env:PLONE_VERSION}.x.cfg/" {envdir}/buildout.cfg\n+    sed -ie "s/test-6.0.x.cfg/test-{env:PLONE_VERSION}.x.cfg/" {envdir}/buildout.cfg\n     {envbindir}/buildout -c {envdir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} install test\n     {envbindir}/test\n skip_install = true\n deps =\n     -rrequirements.txt\n-whitelist_externals =\n+allowlist_externals =\n     cp\n     sed\n \n-[testenv:4.3-py27]\n-setenv =\n-    PLONE_VERSION=4.3\n-\n-[testenv:5.0-py27]\n-setenv =\n-    PLONE_VERSION=5.0\n-deps =\n-    -rrequirements.txt\n-    Pillow==3.3.0\n-\n-[testenv:5.1-py27]\n-setenv =\n-    PLONE_VERSION=5.1\n-\n-[testenv:5.2-py27]\n+[testenv:plone60-py38]\n+basepython = python3.8\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py36]\n-basepython = python3.6\n+[testenv:plone60-py39]\n+basepython = python3.9\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py37]\n-basepython = python3.7\n+[testenv:plone60-py310]\n+basepython = python3.10\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py38]\n-basepython = python3.8\n+[testenv:plone60-py311]\n+basepython = python3.11\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n'

Repository: Products.isurlinportal


Branch: refs/heads/master
Date: 2023-02-25T13:12:52+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.isurlinportal/commit/ce25ec00c0895b736f1b429c61647f2e98503442

Add Plone 6.0 framework classifier.

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 8475677..6488772 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -18,6 +18,7 @@\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n+        "Framework :: Plone : 6.0",\n         "License :: OSI Approved :: GNU General Public License (GPL)",\n         "Programming Language :: Python",\n         "Programming Language :: Python :: 3.8",\n'

Repository: Products.isurlinportal


Branch: refs/heads/master
Date: 2023-02-25T23:04:37+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.isurlinportal/commit/35162761234ba25dc011e4fcf9d271b6088ff644

Merge pull request #10 from plone/maurits-drop-52

Drop compatibility with Plone 5.2 and lower.

Files changed:
A news/60.breaking
M .github/workflows/tests.yml
M Products/__init__.py
M Products/isurlinportal/__init__.py
M Products/isurlinportal/tests.py
M buildout.cfg
M requirements.txt
M setup.py
M tox.ini
D Products/isurlinportal/_compat.py

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 520a30a..720ef8c 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -4,6 +4,7 @@ on:\n   push:\n     branches: [ master ]\n   pull_request:\n+  workflow_dispatch:\n \n jobs:\n   build:\n@@ -11,28 +12,21 @@ jobs:\n       matrix:\n         config:\n         # [Python version, tox env]\n-        - ["2.7",   "4.3-py27"]\n-        - ["2.7",   "5.0-py27"]\n-        - ["2.7",   "5.1-py27"]\n-        - ["2.7",   "5.2-py27"]\n-        - ["3.6",   "5.2-py36"]\n-        - ["3.7",   "5.2-py37"]\n-        - ["3.8",   "5.2-py38"]\n+        - ["3.8",   "plone60-py38"]\n+        - ["3.9",   "plone60-py39"]\n+        - ["3.10",   "plone60-py310"]\n+        - ["3.11",   "plone60-py311"]\n \n     runs-on: ubuntu-latest\n     name: ${{ matrix.config[1] }}\n     steps:\n-    - uses: actions/checkout@v2\n-    - name: Install lxml compilation dependencies\n-      run: |\n-          sudo apt-get update\n-          sudo apt-get install libxml2-dev libxslt1-dev\n+    - uses: actions/checkout@v3\n     - name: Set up Python\n-      uses: actions/setup-python@v2\n+      uses: actions/setup-python@v3\n       with:\n         python-version: ${{ matrix.config[0] }}\n     - name: Pip cache\n-      uses: actions/cache@v2\n+      uses: actions/cache@v3\n       with:\n         path: ~/.cache/pip\n         key: ${{ runner.os }}-pip-${{ matrix.config[0] }}-${{ hashFiles(\'setup.*\', \'tox.ini\') }}\n@@ -40,7 +34,7 @@ jobs:\n           ${{ runner.os }}-pip-${{ matrix.config[0] }}-\n           ${{ runner.os }}-pip-\n     - name: Buildout cache\n-      uses: actions/cache@v2\n+      uses: actions/cache@v3\n       with:\n         path: ~/.buildout/eggs\n         key: ${{ runner.os }}-buildout-${{ matrix.config[1] }}-${{ hashFiles(\'setup.*\', \'tox.ini\', \'*cfg\') }}\ndiff --git a/Products/__init__.py b/Products/__init__.py\nindex ca12a73..5284146 100644\n--- a/Products/__init__.py\n+++ b/Products/__init__.py\n@@ -1,8 +1 @@\n-# -*- coding: utf-8 -*-\n-# See http://peak.telecommunity.com/DevCenter/setuptools#namespace-packages\n-try:\n-    __import__("pkg_resources").declare_namespace(__name__)\n-except ImportError:\n-    from pkgutil import extend_path\n-\n-    __path__ = extend_path(__path__, __name__)\n+__import__("pkg_resources").declare_namespace(__name__)\ndiff --git a/Products/isurlinportal/__init__.py b/Products/isurlinportal/__init__.py\nindex a7c4cd7..768497d 100644\n--- a/Products/isurlinportal/__init__.py\n+++ b/Products/isurlinportal/__init__.py\n@@ -1,12 +1,12 @@\n-# -*- coding: utf-8 -*-\n-from ._compat import get_external_sites\n-from ._compat import unescape\n-from ._compat import urljoin\n-from ._compat import urlparse\n+from html import unescape\n+from plone.base.interfaces import ILoginSchema\n+from plone.registry.interfaces import IRegistry\n from posixpath import normpath\n-\n # This is the class we will patch:\n from Products.CMFPlone.URLTool import URLTool\n+from urllib.parse import urljoin\n+from urllib.parse import urlparse\n+from zope.component import getUtility\n \n import re\n import string\n@@ -88,6 +88,13 @@ def safe_url_first_char(url):\n     return True\n \n \n+def get_external_sites(context=None):\n+    # context is not used here\n+    registry = getUtility(IRegistry)\n+    settings = registry.forInterface(ILoginSchema, prefix="plone")\n+    return settings.allow_external_login_sites\n+\n+\n def isURLInPortal(self, url, context=None):\n     # Note: no docstring, because the method is publicly available\n     # but does not need to be callable on site-url/portal_url/isURLInPortal.\ndiff --git a/Products/isurlinportal/_compat.py b/Products/isurlinportal/_compat.py\ndeleted file mode 100644\nindex 04f436b..0000000\n--- a/Products/isurlinportal/_compat.py\n+++ /dev/null\n@@ -1,45 +0,0 @@\n-# We do not want to depend on the \'six\' package for compatibility,\n-# because not all Plone versions may have it.\n-\n-# from six.moves.urllib import parse\n-try:\n-    # Python 3\n-    from urllib.parse import urlparse\n-    from urllib.parse import urljoin\n-except ImportError:\n-    # Python 2\n-    from urlparse import urlparse\n-    from urlparse import urljoin\n-\n-try:\n-    # Python 2\n-    from HTMLParser import HTMLParser\n-\n-    hp = HTMLParser()\n-    unescape = hp.unescape\n-\n-except ImportError:\n-    # Python 3\n-    import html\n-\n-    unescape = html.unescape\n-\n-try:\n-    # Plone 5.0+\n-    from plone.registry.interfaces import IRegistry\n-    from Products.CMFPlone.interfaces import ILoginSchema\n-    from zope.component import getUtility\n-\n-    def get_external_sites(context=None):\n-        # context is not used here\n-        registry = getUtility(IRegistry)\n-        settings = registry.forInterface(ILoginSchema, prefix="plone")\n-        return settings.allow_external_login_sites\n-\n-except ImportError:\n-    # Plone 4.3\n-    from Products.CMFCore.utils import getToolByName\n-\n-    def get_external_sites(context=None):\n-        props = getToolByName(context, "portal_properties").site_properties\n-        return props.getProperty("allow_external_login_sites", [])\ndiff --git a/Products/isurlinportal/tests.py b/Products/isurlinportal/tests.py\nindex b7409a1..f2ea7bf 100644\n--- a/Products/isurlinportal/tests.py\n+++ b/Products/isurlinportal/tests.py\n@@ -1,9 +1,7 @@\n-# -*- coding: utf-8 -*-\n from Acquisition import aq_parent\n from Products.CMFCore.tests.base.dummy import DummyContent\n from Products.CMFCore.tests.base.dummy import DummyFolder\n from Products.CMFCore.tests.base.dummy import DummySite\n-from zope.component import getSiteManager\n \n import unittest\n \ndiff --git a/buildout.cfg b/buildout.cfg\nindex b79ffd8..800a083 100644\n--- a/buildout.cfg\n+++ b/buildout.cfg\n@@ -1,11 +1,13 @@\n [buildout]\n extends =\n-    https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-5.x.cfg\n+    https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-6.0.x.cfg\n \n package-name = Products.isurlinportal\n \n [versions]\n-setuptools = 41.2.0\n-zc.buildout = 2.13.3\n+pip =\n+setuptools =\n+wheel =\n+zc.buildout =\n # Use development version:\n Products.isurlinportal =\ndiff --git a/news/60.breaking b/news/60.breaking\nnew file mode 100644\nindex 0000000..24ce0fb\n--- /dev/null\n+++ b/news/60.breaking\n@@ -0,0 +1,2 @@\n+Drop compatibility with Plone 5.2 and lower.\n+[maurits]\ndiff --git a/requirements.txt b/requirements.txt\nindex 7e1b0b6..eed370c 100644\n--- a/requirements.txt\n+++ b/requirements.txt\n@@ -1,2 +1,4 @@\n-setuptools==41.2.0\n-zc.buildout==2.13.3\n+pip==22.3.1\n+setuptools==65.7.0\n+wheel==0.38.4\n+zc.buildout==3.0.1\ndiff --git a/setup.py b/setup.py\nindex 6dd8923..6488772 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,7 +1,6 @@\n from setuptools import find_packages\n from setuptools import setup\n \n-import os\n \n with open("README.rst") as myfile:\n     readme = myfile.read()\n@@ -12,22 +11,16 @@\n \n setup(\n     name="Products.isurlinportal",\n-    version="1.2.2.dev0",\n+    version="2.0.0.dev0",\n     description="Replacement for isURLInPortal method in Plone",\n     long_description=long_description,\n     # Get more strings from https://pypi.org/classifiers/\n     classifiers=[\n         "Development Status :: 5 - Production/Stable",\n         "Framework :: Plone",\n-        "Framework :: Plone :: 4.3",\n-        "Framework :: Plone :: 5.0",\n-        "Framework :: Plone :: 5.1",\n-        "Framework :: Plone :: 5.2",\n+        "Framework :: Plone : 6.0",\n         "License :: OSI Approved :: GNU General Public License (GPL)",\n         "Programming Language :: Python",\n-        "Programming Language :: Python :: 2.7",\n-        "Programming Language :: Python :: 3.6",\n-        "Programming Language :: Python :: 3.7",\n         "Programming Language :: Python :: 3.8",\n         "Programming Language :: Python :: 3.9",\n         "Programming Language :: Python :: 3.10",\n@@ -42,6 +35,6 @@\n     namespace_packages=["Products"],\n     include_package_data=True,\n     zip_safe=False,\n-    python_requires=">=2.7,!=3.0.*,!=3.1.*,!=3.2.*,!=3.3.*,!=3.4.*,!=3.5.*",\n+    python_requires=">=3.8",\n     install_requires=["setuptools"],\n )\ndiff --git a/tox.ini b/tox.ini\nindex c6f42d2..e16622e 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,57 +1,39 @@\n [tox]\n envlist =\n-    4.3-py27,\n-    5.0-py27,\n-    5.1-py27,\n-    5.2-py27\n-    5.2-py36\n-    5.2-py37\n-    5.2-py38\n+    plone60-py38\n+    plone60-py39\n+    plone60-py310\n+    plone60-py311\n \n [testenv]\n-basepython = python2.7\n commands =\n     cp {toxinidir}/buildout.cfg {envdir}/buildout.cfg\n-    sed -ie "s/test-5.x.cfg/test-{env:PLONE_VERSION}.x.cfg/" {envdir}/buildout.cfg\n+    sed -ie "s/test-6.0.x.cfg/test-{env:PLONE_VERSION}.x.cfg/" {envdir}/buildout.cfg\n     {envbindir}/buildout -c {envdir}/buildout.cfg buildout:directory={envdir} buildout:develop={toxinidir} install test\n     {envbindir}/test\n skip_install = true\n deps =\n     -rrequirements.txt\n-whitelist_externals =\n+allowlist_externals =\n     cp\n     sed\n \n-[testenv:4.3-py27]\n-setenv =\n-    PLONE_VERSION=4.3\n-\n-[testenv:5.0-py27]\n-setenv =\n-    PLONE_VERSION=5.0\n-deps =\n-    -rrequirements.txt\n-    Pillow==3.3.0\n-\n-[testenv:5.1-py27]\n-setenv =\n-    PLONE_VERSION=5.1\n-\n-[testenv:5.2-py27]\n+[testenv:plone60-py38]\n+basepython = python3.8\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py36]\n-basepython = python3.6\n+[testenv:plone60-py39]\n+basepython = python3.9\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py37]\n-basepython = python3.7\n+[testenv:plone60-py310]\n+basepython = python3.10\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n \n-[testenv:5.2-py38]\n-basepython = python3.8\n+[testenv:plone60-py311]\n+basepython = python3.11\n setenv =\n-    PLONE_VERSION=5.2\n+    PLONE_VERSION=6.0\n'

