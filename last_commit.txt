Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2017-06-10T13:14:21+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.ATContentTypes/commit/38a397b91c98aeaa038c287afde374ea3a88261f

Fix MimeTypeException deprecation warnings

Files changed:
M CHANGES.rst
M Products/ATContentTypes/content/file.py

diff --git a/CHANGES.rst b/CHANGES.rst
index bb87cd7d..7f2ef539 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix MimeTypeException deprecation warnings
+  [ale-rt]
 
 
 2.3.5 (2017-05-29)
diff --git a/Products/ATContentTypes/content/file.py b/Products/ATContentTypes/content/file.py
index 0a732562..fcd7c69b 100644
--- a/Products/ATContentTypes/content/file.py
+++ b/Products/ATContentTypes/content/file.py
@@ -18,7 +18,6 @@
 from Products.CMFCore.permissions import ModifyPortalContent
 from Products.CMFCore.permissions import View
 from Products.CMFCore.utils import getToolByName
-from Products.MimetypesRegistry.common import MimeTypeException
 from Products.validation import V_REQUIRED
 from Products.validation.config import validation
 from Products.validation.validators.SupplValidators import MaxSizeValidator
@@ -28,6 +27,13 @@
 import logging
 
 
+try:
+    from Products.MimetypesRegistry.interfaces import MimeTypeException
+except ImportError:
+    # Products.MimetypesRegistry < 2.1
+    from Products.MimetypesRegistry.common import MimeTypeException
+
+
 LOG = logging.getLogger('ATCT')
 
 validation.register(MaxSizeValidator('checkFileMaxSize',


Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2017-06-10T22:14:52+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.ATContentTypes/commit/e6282bc05da274d8b5b3b55d5c8883de7a0d27e4

Merge pull request #49 from plone/fix-deprecation-warnings

Fix MimeTypeException deprecation warnings

Files changed:
M CHANGES.rst
M Products/ATContentTypes/content/file.py

diff --git a/CHANGES.rst b/CHANGES.rst
index bb87cd7d..7f2ef539 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix MimeTypeException deprecation warnings
+  [ale-rt]
 
 
 2.3.5 (2017-05-29)
diff --git a/Products/ATContentTypes/content/file.py b/Products/ATContentTypes/content/file.py
index 0a732562..fcd7c69b 100644
--- a/Products/ATContentTypes/content/file.py
+++ b/Products/ATContentTypes/content/file.py
@@ -18,7 +18,6 @@
 from Products.CMFCore.permissions import ModifyPortalContent
 from Products.CMFCore.permissions import View
 from Products.CMFCore.utils import getToolByName
-from Products.MimetypesRegistry.common import MimeTypeException
 from Products.validation import V_REQUIRED
 from Products.validation.config import validation
 from Products.validation.validators.SupplValidators import MaxSizeValidator
@@ -28,6 +27,13 @@
 import logging
 
 
+try:
+    from Products.MimetypesRegistry.interfaces import MimeTypeException
+except ImportError:
+    # Products.MimetypesRegistry < 2.1
+    from Products.MimetypesRegistry.common import MimeTypeException
+
+
 LOG = logging.getLogger('ATCT')
 
 validation.register(MaxSizeValidator('checkFileMaxSize',


