Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2023-02-09T16:45:18+01:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/9883e91faeeb9ed2b35beb91c01cd5fd7ba7a62a

Fix deprecation warnings

Closes #58

Files changed:
A news/58.bugfix
M plone/formwidget/namedfile/tests.py
M plone/formwidget/namedfile/utils.py
M setup.py

b'diff --git a/news/58.bugfix b/news/58.bugfix\nnew file mode 100644\nindex 0000000..2fec334\n--- /dev/null\n+++ b/news/58.bugfix\n@@ -0,0 +1 @@\n+Fix deprecation warnings\ndiff --git a/plone/formwidget/namedfile/tests.py b/plone/formwidget/namedfile/tests.py\nindex d018079..da6cf95 100644\n--- a/plone/formwidget/namedfile/tests.py\n+++ b/plone/formwidget/namedfile/tests.py\n@@ -39,7 +39,6 @@ def Title(self):\n \n \n class ScaleGenerateOnSaveTests(unittest.TestCase):\n-\n     layer = FUNCTIONAL_TESTING\n \n     def setUp(self):\n@@ -72,7 +71,9 @@ def test_generate_scales_on_save(self):\n \n def test_suite():\n     suite = unittest.TestSuite()\n-    suite.addTest(unittest.makeSuite(ScaleGenerateOnSaveTests))\n+    suite.addTest(\n+        unittest.defaultTestLoader.loadTestsFromTestCase(ScaleGenerateOnSaveTests)\n+    )\n     suite.addTest(\n         layered(\n             doctest.DocFileSuite(\ndiff --git a/plone/formwidget/namedfile/utils.py b/plone/formwidget/namedfile/utils.py\nindex f3a3643..3478f88 100644\n--- a/plone/formwidget/namedfile/utils.py\n+++ b/plone/formwidget/namedfile/utils.py\n@@ -1,17 +1,17 @@\n from BTrees.OOBTree import OOBTree\n-from Products.CMFPlone.interfaces import IImagingSchema\n-from ZPublisher.HTTPRequest import FileUpload\n from datetime import datetime\n from datetime import timedelta\n from persistent.dict import PersistentDict\n+from plone.base.interfaces import IImagingSchema\n from plone.formwidget.namedfile.interfaces import IFileUploadTemporaryStorage\n from plone.registry.interfaces import IRegistry\n from random import randint\n from zope.annotation.interfaces import IAnnotations\n from zope.component import adapter\n from zope.component import getUtility\n-from zope.interface import Interface\n from zope.interface import implementer\n+from zope.interface import Interface\n+from ZPublisher.HTTPRequest import FileUpload\n \n \n FILE_UPLOAD_MAP_KEY = "file_upload_map"\ndiff --git a/setup.py b/setup.py\nindex 1117533..b8f3519 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -32,6 +32,7 @@\n     zip_safe=False,\n     install_requires=[\n         "setuptools",\n+        "plone.base",\n         "plone.namedfile",\n         "plone.z3cform >= 0.7.4",\n         "z3c.form",\n'

Repository: plone.formwidget.namedfile


Branch: refs/heads/master
Date: 2023-02-10T10:08:43+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.formwidget.namedfile/commit/a5b039c3c44bd0798b076b0635433daee4417a0a

Merge pull request #59 from plone/58.bugfix

Fix deprecation warnings

Files changed:
A news/58.bugfix
M plone/formwidget/namedfile/tests.py
M plone/formwidget/namedfile/utils.py
M setup.py

b'diff --git a/news/58.bugfix b/news/58.bugfix\nnew file mode 100644\nindex 0000000..2fec334\n--- /dev/null\n+++ b/news/58.bugfix\n@@ -0,0 +1 @@\n+Fix deprecation warnings\ndiff --git a/plone/formwidget/namedfile/tests.py b/plone/formwidget/namedfile/tests.py\nindex d018079..da6cf95 100644\n--- a/plone/formwidget/namedfile/tests.py\n+++ b/plone/formwidget/namedfile/tests.py\n@@ -39,7 +39,6 @@ def Title(self):\n \n \n class ScaleGenerateOnSaveTests(unittest.TestCase):\n-\n     layer = FUNCTIONAL_TESTING\n \n     def setUp(self):\n@@ -72,7 +71,9 @@ def test_generate_scales_on_save(self):\n \n def test_suite():\n     suite = unittest.TestSuite()\n-    suite.addTest(unittest.makeSuite(ScaleGenerateOnSaveTests))\n+    suite.addTest(\n+        unittest.defaultTestLoader.loadTestsFromTestCase(ScaleGenerateOnSaveTests)\n+    )\n     suite.addTest(\n         layered(\n             doctest.DocFileSuite(\ndiff --git a/plone/formwidget/namedfile/utils.py b/plone/formwidget/namedfile/utils.py\nindex f3a3643..3478f88 100644\n--- a/plone/formwidget/namedfile/utils.py\n+++ b/plone/formwidget/namedfile/utils.py\n@@ -1,17 +1,17 @@\n from BTrees.OOBTree import OOBTree\n-from Products.CMFPlone.interfaces import IImagingSchema\n-from ZPublisher.HTTPRequest import FileUpload\n from datetime import datetime\n from datetime import timedelta\n from persistent.dict import PersistentDict\n+from plone.base.interfaces import IImagingSchema\n from plone.formwidget.namedfile.interfaces import IFileUploadTemporaryStorage\n from plone.registry.interfaces import IRegistry\n from random import randint\n from zope.annotation.interfaces import IAnnotations\n from zope.component import adapter\n from zope.component import getUtility\n-from zope.interface import Interface\n from zope.interface import implementer\n+from zope.interface import Interface\n+from ZPublisher.HTTPRequest import FileUpload\n \n \n FILE_UPLOAD_MAP_KEY = "file_upload_map"\ndiff --git a/setup.py b/setup.py\nindex 1117533..b8f3519 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -32,6 +32,7 @@\n     zip_safe=False,\n     install_requires=[\n         "setuptools",\n+        "plone.base",\n         "plone.namedfile",\n         "plone.z3cform >= 0.7.4",\n         "z3c.form",\n'

