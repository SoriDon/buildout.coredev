Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2022-12-01T13:30:55+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.relationfield/commit/cf090053cdf222d1ccaec3f8da3fac1a4680e27b

Remove deprecated `plone.app.widgets` usage

Files changed:
M plone/app/relationfield/testing.py
M plone/app/relationfield/widget.zcml

b'diff --git a/plone/app/relationfield/testing.py b/plone/app/relationfield/testing.py\nindex 6c7c43f..51ab0fa 100644\n--- a/plone/app/relationfield/testing.py\n+++ b/plone/app/relationfield/testing.py\n@@ -114,10 +114,6 @@ def setUpZope(self, app, configurationContext):\n \n         self.loadZCML(package=plone.app.dexterity)\n \n-        import plone.app.widgets\n-\n-        self.loadZCML(package=plone.app.widgets)\n-\n         import plone.app.relationfield\n \n         self.loadZCML(package=plone.app.relationfield)\ndiff --git a/plone/app/relationfield/widget.zcml b/plone/app/relationfield/widget.zcml\nindex d4a89d9..23a610b 100644\n--- a/plone/app/relationfield/widget.zcml\n+++ b/plone/app/relationfield/widget.zcml\n@@ -16,7 +16,7 @@\n            provides="zope.schema.interfaces.IVocabularyFactory"\n            />\n \n-  <configure zcml:condition="not-installed plone.app.widgets">\n+  <configure zcml:condition="installed plone.formwidget.contenttree">\n     <adapter factory="plone.formwidget.contenttree.ContentTreeFieldWidget"\n              for="z3c.relationfield.interfaces.IRelationChoice\n                   z3c.form.interfaces.IFormLayer"\n@@ -30,17 +30,4 @@\n              />\n   </configure>\n \n-  <configure zcml:condition="installed plone.app.widgets">\n-    <adapter factory="plone.app.widgets.dx.RelatedItemsFieldWidget"\n-             for="z3c.relationfield.interfaces.IRelationChoice\n-                 z3c.form.interfaces.IFormLayer"\n-             zcml:condition="not-have plone-5"\n-             />\n-    <adapter factory="plone.app.widgets.dx.RelatedItemsFieldWidget"\n-             for="z3c.relationfield.interfaces.IRelationList\n-                  z3c.form.interfaces.IFormLayer"\n-             zcml:condition="not-have plone-5"\n-             />\n-  </configure>\n-\n </configure>\n'

Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2022-12-01T13:31:51+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.relationfield/commit/2a486cdcb5aa8b625b3a9e1a7f04f125355872e3

changenote

Files changed:
A news/36.bugfix

b'diff --git a/news/36.bugfix b/news/36.bugfix\nnew file mode 100644\nindex 0000000..96cc690\n--- /dev/null\n+++ b/news/36.bugfix\n@@ -0,0 +1,2 @@\n+Remove deprecated ``plone.app.widgets`` code.\n+[petschki]\n'

Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2022-12-02T14:14:24+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.relationfield/commit/e7db2e6bf6b81154d38f357c9fef6284ff4cfdf3

Removed duplicate zcml condition.

Files changed:
M plone/app/relationfield/widget.zcml

b'diff --git a/plone/app/relationfield/widget.zcml b/plone/app/relationfield/widget.zcml\nindex 23a610b..830fb4d 100644\n--- a/plone/app/relationfield/widget.zcml\n+++ b/plone/app/relationfield/widget.zcml\n@@ -20,13 +20,11 @@\n     <adapter factory="plone.formwidget.contenttree.ContentTreeFieldWidget"\n              for="z3c.relationfield.interfaces.IRelationChoice\n                   z3c.form.interfaces.IFormLayer"\n-             zcml:condition="installed plone.formwidget.contenttree"\n              />\n \n     <adapter factory="plone.formwidget.contenttree.MultiContentTreeFieldWidget"\n              for="z3c.relationfield.interfaces.IRelationList\n                   z3c.form.interfaces.IFormLayer"\n-             zcml:condition="installed plone.formwidget.contenttree"\n              />\n   </configure>\n \n'

Repository: plone.app.relationfield


Branch: refs/heads/master
Date: 2022-12-02T19:24:10+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.relationfield/commit/63552c8d40f61ea4dfe38a2ba105378640255c3a

Merge pull request #36 from plone/deprecate-plone-app-widgets

Remove deprecated `plone.app.widgets` usage

Files changed:
A news/36.bugfix
M plone/app/relationfield/testing.py
M plone/app/relationfield/widget.zcml

b'diff --git a/news/36.bugfix b/news/36.bugfix\nnew file mode 100644\nindex 0000000..96cc690\n--- /dev/null\n+++ b/news/36.bugfix\n@@ -0,0 +1,2 @@\n+Remove deprecated ``plone.app.widgets`` code.\n+[petschki]\ndiff --git a/plone/app/relationfield/testing.py b/plone/app/relationfield/testing.py\nindex 6c7c43f..51ab0fa 100644\n--- a/plone/app/relationfield/testing.py\n+++ b/plone/app/relationfield/testing.py\n@@ -114,10 +114,6 @@ def setUpZope(self, app, configurationContext):\n \n         self.loadZCML(package=plone.app.dexterity)\n \n-        import plone.app.widgets\n-\n-        self.loadZCML(package=plone.app.widgets)\n-\n         import plone.app.relationfield\n \n         self.loadZCML(package=plone.app.relationfield)\ndiff --git a/plone/app/relationfield/widget.zcml b/plone/app/relationfield/widget.zcml\nindex d4a89d9..830fb4d 100644\n--- a/plone/app/relationfield/widget.zcml\n+++ b/plone/app/relationfield/widget.zcml\n@@ -16,30 +16,15 @@\n            provides="zope.schema.interfaces.IVocabularyFactory"\n            />\n \n-  <configure zcml:condition="not-installed plone.app.widgets">\n+  <configure zcml:condition="installed plone.formwidget.contenttree">\n     <adapter factory="plone.formwidget.contenttree.ContentTreeFieldWidget"\n              for="z3c.relationfield.interfaces.IRelationChoice\n                   z3c.form.interfaces.IFormLayer"\n-             zcml:condition="installed plone.formwidget.contenttree"\n              />\n \n     <adapter factory="plone.formwidget.contenttree.MultiContentTreeFieldWidget"\n              for="z3c.relationfield.interfaces.IRelationList\n                   z3c.form.interfaces.IFormLayer"\n-             zcml:condition="installed plone.formwidget.contenttree"\n-             />\n-  </configure>\n-\n-  <configure zcml:condition="installed plone.app.widgets">\n-    <adapter factory="plone.app.widgets.dx.RelatedItemsFieldWidget"\n-             for="z3c.relationfield.interfaces.IRelationChoice\n-                 z3c.form.interfaces.IFormLayer"\n-             zcml:condition="not-have plone-5"\n-             />\n-    <adapter factory="plone.app.widgets.dx.RelatedItemsFieldWidget"\n-             for="z3c.relationfield.interfaces.IRelationList\n-                  z3c.form.interfaces.IFormLayer"\n-             zcml:condition="not-have plone-5"\n              />\n   </configure>\n \n'

