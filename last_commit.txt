Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-08-30T18:32:46+03:00
Author: ichim-david (ichim-david) <ichim.david@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/f9c201957a1edc7349e346574bb485594c747196

- Check with getattr if item isPrincipiaFolderish as Comment does

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e4d00a5..8b0554f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
 
 
 1.2.1 (2016-08-15)
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 15ad3c2..3d6a1fc 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -170,7 +170,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-08-30T20:53:29+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.collection/commit/ea6290bc2f9d32e92946051595a6d6e145c3e4a2

Merge pull request #36 from ichim-david/master

Check with getattr if item isPrincipiaFolderish as Comment does

Files changed:
M CHANGES.rst
M plone/app/collection/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e4d00a5..8b0554f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Check with getattr if item isPrincipiaFolderish as Comment does
+  not have this attribute which would render an AttributeError
+  [ichim-david]
 
 
 1.2.1 (2016-08-15)
diff --git a/plone/app/collection/collection.py b/plone/app/collection/collection.py
index 15ad3c2..3d6a1fc 100644
--- a/plone/app/collection/collection.py
+++ b/plone/app/collection/collection.py
@@ -170,7 +170,7 @@ def getFoldersAndImages(self):
 
         for item in results:
             item_path = item.getPath()
-            if item.isPrincipiaFolderish:
+            if getattr(item, 'isPrincipiaFolderish', []):
                 query = {
                     'portal_type': image_types,
                     'path': item_path,


