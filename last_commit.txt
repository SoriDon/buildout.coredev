Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2019-04-16T19:59:40+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/b6b7017bc510d3eecc3ed36a0389bbb39a73d809

main_template is a browser-view. speed up traversal by making that explicit.

Files changed:
M plone/app/contenttypes/browser/templates/file.pt
M plone/app/contenttypes/browser/templates/full_view.pt
M plone/app/contenttypes/browser/templates/image.pt
M plone/app/contenttypes/browser/templates/link.pt
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_summary.pt
M plone/app/contenttypes/browser/templates/listing_tabular.pt
M plone/app/contenttypes/browser/templates/newsitem.pt
M plone/app/contenttypes/migration/atct_migrator.pt
M plone/app/contenttypes/migration/atct_migrator_results.pt
M plone/app/contenttypes/migration/custom_migration.pt
M plone/app/contenttypes/migration/pac_installer.pt

b'diff --git a/plone/app/contenttypes/browser/templates/file.pt b/plone/app/contenttypes/browser/templates/file.pt\nindex fcdab4f2..25946fe4 100644\n--- a/plone/app/contenttypes/browser/templates/file.pt\n+++ b/plone/app/contenttypes/browser/templates/file.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/full_view.pt b/plone/app/contenttypes/browser/templates/full_view.pt\nindex 8d71e34b..85191c0c 100644\n--- a/plone/app/contenttypes/browser/templates/full_view.pt\n+++ b/plone/app/contenttypes/browser/templates/full_view.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/image.pt b/plone/app/contenttypes/browser/templates/image.pt\nindex 8f154187..dcebeb9f 100644\n--- a/plone/app/contenttypes/browser/templates/image.pt\n+++ b/plone/app/contenttypes/browser/templates/image.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/link.pt b/plone/app/contenttypes/browser/templates/link.pt\nindex 10079cb5..b0a94f56 100644\n--- a/plone/app/contenttypes/browser/templates/link.pt\n+++ b/plone/app/contenttypes/browser/templates/link.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex ec1c7bb8..c82dd6ce 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex 0a923e35..40dba020 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/listing_tabular.pt b/plone/app/contenttypes/browser/templates/listing_tabular.pt\nindex 064062cf..b9b44218 100644\n--- a/plone/app/contenttypes/browser/templates/listing_tabular.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_tabular.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/browser/templates/newsitem.pt b/plone/app/contenttypes/browser/templates/newsitem.pt\nindex 9f642abd..18feb59f 100644\n--- a/plone/app/contenttypes/browser/templates/newsitem.pt\n+++ b/plone/app/contenttypes/browser/templates/newsitem.pt\n@@ -3,7 +3,7 @@\n     xmlns:metal="http://xml.zope.org/namespaces/metal"\n     xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n     lang="en"\n-    metal:use-macro="context/main_template/macros/master"\n+    metal:use-macro="context/@@main_template/macros/master"\n     i18n:domain="plone">\n <body>\n \ndiff --git a/plone/app/contenttypes/migration/atct_migrator.pt b/plone/app/contenttypes/migration/atct_migrator.pt\nindex 42b22a96..c6a49e54 100644\n--- a/plone/app/contenttypes/migration/atct_migrator.pt\n+++ b/plone/app/contenttypes/migration/atct_migrator.pt\n@@ -3,7 +3,7 @@\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n-      metal:use-macro="context/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n <metal:block fill-slot="top_slot"\ndiff --git a/plone/app/contenttypes/migration/atct_migrator_results.pt b/plone/app/contenttypes/migration/atct_migrator_results.pt\nindex 470dc3ea..65875308 100644\n--- a/plone/app/contenttypes/migration/atct_migrator_results.pt\n+++ b/plone/app/contenttypes/migration/atct_migrator_results.pt\n@@ -3,7 +3,7 @@\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n-      metal:use-macro="context/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n <metal:block fill-slot="top_slot"\ndiff --git a/plone/app/contenttypes/migration/custom_migration.pt b/plone/app/contenttypes/migration/custom_migration.pt\nindex 386f8b20..6a27b2cd 100644\n--- a/plone/app/contenttypes/migration/custom_migration.pt\n+++ b/plone/app/contenttypes/migration/custom_migration.pt\n@@ -3,7 +3,7 @@\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\n-      metal:use-macro="context/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n <metal:block fill-slot="top_slot"\ndiff --git a/plone/app/contenttypes/migration/pac_installer.pt b/plone/app/contenttypes/migration/pac_installer.pt\nindex edad6383..fd6eaa84 100644\n--- a/plone/app/contenttypes/migration/pac_installer.pt\n+++ b/plone/app/contenttypes/migration/pac_installer.pt\n@@ -2,7 +2,7 @@\n       xmlns:tal="http://xml.zope.org/namespaces/tal"\n       xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-      metal:use-macro="context/main_template/macros/master"\n+      metal:use-macro="context/@@main_template/macros/master"\n       i18n:domain="plone">\n \n     <metal:block fill-slot="top_slot"\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2019-04-16T19:59:40+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/88edf944ca649fae1d56643026cb4b6368b33711

add changenote

Files changed:
A news/517.bugfix

b'diff --git a/news/517.bugfix b/news/517.bugfix\nnew file mode 100644\nindex 00000000..7e61ed3d\n--- /dev/null\n+++ b/news/517.bugfix\n@@ -0,0 +1,2 @@\n+Speed up traversal to main_template by markling it as a browser-view.\n+[pbauer]\n\\ No newline at end of file\n'

