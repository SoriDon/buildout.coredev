Repository: mockup


Branch: refs/heads/master
Date: 2019-06-18T14:29:30+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/b4c96accd700130fb50fc9170b37539be137d8bb

minor updates to PR #906

Files changed:
M mockup/patterns/navigationmarker/pattern.js

b'diff --git a/mockup/patterns/navigationmarker/pattern.js b/mockup/patterns/navigationmarker/pattern.js\nindex 4eb24a785..65ddd2636 100644\n--- a/mockup/patterns/navigationmarker/pattern.js\n+++ b/mockup/patterns/navigationmarker/pattern.js\n@@ -23,7 +23,7 @@ define([\n             var href = document.querySelector(\'head link[rel="canonical"]\').href || window.location.href;\n \n             $(\'a\', this.$el).each(function () {\n-                var navlink = this.href.replace(\'/view\', \'\')\n+                var navlink = this.href.replace(\'/view\', \'\');\n                 if (href.indexOf(navlink) !== -1) {\n                     var parent = $(this).parent();\n \n@@ -35,10 +35,12 @@ define([\n \n                     // set "inPath" to all nav items which are within the current path\n                     // check if parts of navlink are in canonical url parts\n-                    var hrefParts = href.split(\'/\')\n-                    var navParts = navlink.split(\'/\')\n+                    var hrefParts = href.split(\'/\');\n+                    var navParts = navlink.split(\'/\');\n+                    var inPath = false;\n                     for (var i = 0, size = navParts.length; i < size; i++) {\n-                        var inPath = false\n+                        // The last path-part must match.\n+                        inPath = false;\n                         if (navParts[i] === hrefParts[i]) {\n                             inPath = true;\n                         }\n@@ -57,4 +59,4 @@ define([\n     });\n \n     return Navigation;\n-});\n\\ No newline at end of file\n+});\n'

