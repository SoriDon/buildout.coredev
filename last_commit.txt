Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T14:19:22+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/ab0049ada1b683fdd2ee1d08d86fa9c5658e39ae

Fixed html validation: section lacks heading.

Renamed some sections to divs.
These were not really sections.

See http://w3c.github.io/html/sections.html#the-section-element
which says:

The section element is not a generic container element. When an
element is needed only for styling purposes or as a convenience for
scripting, authors are encouraged to use the div element instead. A
general rule is that the section element is appropriate only if the
element’s contents would be listed explicitly in the document’s
outline.

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/colophon.pt
M Products/CMFPlone/browser/templates/footer.pt
M Products/CMFPlone/browser/templates/main_template.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index b4c4eb6..238b036 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -87,6 +87,8 @@ Fixes:
 - better readability with a darker background in submenu, use font fallback
 - chain as in barcelonetta (works also w/o the theme).
   [jensens]
+- Fixed html validation: section lacks heading.
+  [maurits]
 
 - Fix browser spell checking not working with TinyMCE
   [vangheem]
diff --git a/Products/CMFPlone/browser/templates/colophon.pt b/Products/CMFPlone/browser/templates/colophon.pt
index cbe0a70..6136938 100644
--- a/Products/CMFPlone/browser/templates/colophon.pt
+++ b/Products/CMFPlone/browser/templates/colophon.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <section class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
+  <div class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
     <div class="portletContent">
       <a href="http://plone.com" target="_blank"
          title="This site was built using the Plone Open Source CMS/WCM."
@@ -14,5 +14,5 @@
          i18n:translate="label_powered_by_plone">
         Powered by Plone &amp; Python</a>
     </div>
-  </section>
+  </div>
 </html>
diff --git a/Products/CMFPlone/browser/templates/footer.pt b/Products/CMFPlone/browser/templates/footer.pt
index 03980c9..b659745 100644
--- a/Products/CMFPlone/browser/templates/footer.pt
+++ b/Products/CMFPlone/browser/templates/footer.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <section class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
+  <div class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
     <div class="portletContent">
       <span i18n:translate="description_copyright" tal:omit-tag="">
       The
@@ -31,5 +31,5 @@
                 <a href="http://creativecommons.org/licenses/GPL/2.0/" i18n:translate="label_gnu_gpl_licence">GNU GPL license</a></span>.
       </span>
     </div>
-  </section>
+  </div>
 </html>
diff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt
index 67d1342..2660dbc 100644
--- a/Products/CMFPlone/browser/templates/main_template.pt
+++ b/Products/CMFPlone/browser/templates/main_template.pt
@@ -67,7 +67,7 @@
       </div>
     </aside>
 
-    <section id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" />
+    <div id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" />
 
     <article id="portal-column-content">
 
@@ -102,13 +102,13 @@
             </metal:description>
           </header>
 
-          <section id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" />
-          <section id="content-core">
+          <div id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" />
+          <div id="content-core">
             <metal:text define-slot="content-core" tal:content="nothing">
               Page body text
             </metal:text>
-          </section>
-          <section id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" />
+          </div>
+          <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" />
 
           </metal:bodytext>
         </article>


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T14:19:22+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/b79c4759e38b0538d19905219b4767dc602d36d3

Fixed html validation: element nav does not need a role attribute.

Files changed:
M CHANGES.rst
M Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html

diff --git a/CHANGES.rst b/CHANGES.rst
index 238b036..0d4d81e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -87,6 +87,9 @@ Fixes:
 - better readability with a darker background in submenu, use font fallback
 - chain as in barcelonetta (works also w/o the theme).
   [jensens]
+- Fixed html validation: element nav does not need a role attribute.
+  [maurits]
+
 - Fixed html validation: section lacks heading.
   [maurits]
 
diff --git a/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html b/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
index e393e95..f7c1221 100644
--- a/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
+++ b/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
@@ -22,7 +22,7 @@
           <img alt="Plone Toolbar" src="plone-toolbarlogo.svg" />
         </a>
         <a class="plone-toolbar-switcher"><span>Left-Top switcher</span></a>
-        <nav role="navigation">
+        <nav>
           <ul>
             <li class="plone-toolbar-separator">
               <a href="#">


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T14:19:23+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/7c4847c579c9196a79b541977aeab5fa65e9309b

Added incompatibility note for changed html elements.

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 0d4d81e..ab35ba5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,12 @@ Changelog
 
 Incompatibilities:
 
-- *add item here*
+- Changed these ``section`` elements to ``div`` elements:
+  ``#portal-colophon``, ``#portal-footer-signature``,
+  ``#viewlet-above-content``, ``#viewlet-above-content-body``,
+  ``#content-core``, ``#viewlet-below-content-body``.  This might
+  affect your custom styling or javascript.
+  [maurits]
 
 New:
 
@@ -32,14 +37,19 @@ New:
   never possible in the old way.  The plone-final step is kept for
   backwards compatibility.
   [maurits]
-  
-- Remove Zope mention in logout form 
+
+- Remove Zope mention in logout form
   [tkimnguyen]
 
 Fixes:
 
 - Do not break background images relative urls in CSS when concatening bundles
   [ebrehault]
+- Fixed html validation: element nav does not need a role attribute.
+  [maurits]
+
+- Fixed html validation: section lacks heading.
+  [maurits]
 
 
 5.0.3 (2016-03-??)
@@ -87,11 +97,6 @@ Fixes:
 - better readability with a darker background in submenu, use font fallback
 - chain as in barcelonetta (works also w/o the theme).
   [jensens]
-- Fixed html validation: element nav does not need a role attribute.
-  [maurits]
-
-- Fixed html validation: section lacks heading.
-  [maurits]
 
 - Fix browser spell checking not working with TinyMCE
   [vangheem]


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T14:20:03+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/a5267450eb809712bb01e46178d9021c61e94be6

use aside for portlets wrapping nodes

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/colophon.pt
M Products/CMFPlone/browser/templates/footer.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ab35ba5..357088c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -45,6 +45,7 @@ Fixes:
 
 - Do not break background images relative urls in CSS when concatening bundles
   [ebrehault]
+
 - Fixed html validation: element nav does not need a role attribute.
   [maurits]
 
diff --git a/Products/CMFPlone/browser/templates/colophon.pt b/Products/CMFPlone/browser/templates/colophon.pt
index 6136938..be0cec0 100644
--- a/Products/CMFPlone/browser/templates/colophon.pt
+++ b/Products/CMFPlone/browser/templates/colophon.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <div class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
+  <aside class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
     <div class="portletContent">
       <a href="http://plone.com" target="_blank"
          title="This site was built using the Plone Open Source CMS/WCM."
@@ -14,5 +14,5 @@
          i18n:translate="label_powered_by_plone">
         Powered by Plone &amp; Python</a>
     </div>
-  </div>
+  </aside>
 </html>
diff --git a/Products/CMFPlone/browser/templates/footer.pt b/Products/CMFPlone/browser/templates/footer.pt
index b659745..76628ee 100644
--- a/Products/CMFPlone/browser/templates/footer.pt
+++ b/Products/CMFPlone/browser/templates/footer.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <div class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
+  <aside class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
     <div class="portletContent">
       <span i18n:translate="description_copyright" tal:omit-tag="">
       The
@@ -31,5 +31,5 @@
                 <a href="http://creativecommons.org/licenses/GPL/2.0/" i18n:translate="label_gnu_gpl_licence">GNU GPL license</a></span>.
       </span>
     </div>
-  </div>
+  </aside>
 </html>


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T14:20:44+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/6577b2881b6e85fa67990e8574fd978d360b313f

Merge pull request #1431 from plone/maurits-fix-html-validation

Fix html validation

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/templates/colophon.pt
M Products/CMFPlone/browser/templates/footer.pt
M Products/CMFPlone/browser/templates/main_template.pt
M Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html

diff --git a/CHANGES.rst b/CHANGES.rst
index b4c4eb6..357088c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,12 @@ Changelog
 
 Incompatibilities:
 
-- *add item here*
+- Changed these ``section`` elements to ``div`` elements:
+  ``#portal-colophon``, ``#portal-footer-signature``,
+  ``#viewlet-above-content``, ``#viewlet-above-content-body``,
+  ``#content-core``, ``#viewlet-below-content-body``.  This might
+  affect your custom styling or javascript.
+  [maurits]
 
 New:
 
@@ -32,8 +37,8 @@ New:
   never possible in the old way.  The plone-final step is kept for
   backwards compatibility.
   [maurits]
-  
-- Remove Zope mention in logout form 
+
+- Remove Zope mention in logout form
   [tkimnguyen]
 
 Fixes:
@@ -41,6 +46,12 @@ Fixes:
 - Do not break background images relative urls in CSS when concatening bundles
   [ebrehault]
 
+- Fixed html validation: element nav does not need a role attribute.
+  [maurits]
+
+- Fixed html validation: section lacks heading.
+  [maurits]
+
 
 5.0.3 (2016-03-??)
 ------------------
diff --git a/Products/CMFPlone/browser/templates/colophon.pt b/Products/CMFPlone/browser/templates/colophon.pt
index cbe0a70..be0cec0 100644
--- a/Products/CMFPlone/browser/templates/colophon.pt
+++ b/Products/CMFPlone/browser/templates/colophon.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <section class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
+  <aside class="portlet portletClassic" id="portal-colophon" metal:define-macro="portlet">
     <div class="portletContent">
       <a href="http://plone.com" target="_blank"
          title="This site was built using the Plone Open Source CMS/WCM."
@@ -14,5 +14,5 @@
          i18n:translate="label_powered_by_plone">
         Powered by Plone &amp; Python</a>
     </div>
-  </section>
+  </aside>
 </html>
diff --git a/Products/CMFPlone/browser/templates/footer.pt b/Products/CMFPlone/browser/templates/footer.pt
index 03980c9..76628ee 100644
--- a/Products/CMFPlone/browser/templates/footer.pt
+++ b/Products/CMFPlone/browser/templates/footer.pt
@@ -6,7 +6,7 @@
       tal:omit-tag=""
       i18n:domain="plone">
 
-  <section class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
+  <aside class="portlet portletClassic" id="portal-footer-signature" metal:define-macro="portlet">
     <div class="portletContent">
       <span i18n:translate="description_copyright" tal:omit-tag="">
       The
@@ -31,5 +31,5 @@
                 <a href="http://creativecommons.org/licenses/GPL/2.0/" i18n:translate="label_gnu_gpl_licence">GNU GPL license</a></span>.
       </span>
     </div>
-  </section>
+  </aside>
 </html>
diff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt
index 67d1342..2660dbc 100644
--- a/Products/CMFPlone/browser/templates/main_template.pt
+++ b/Products/CMFPlone/browser/templates/main_template.pt
@@ -67,7 +67,7 @@
       </div>
     </aside>
 
-    <section id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" />
+    <div id="viewlet-above-content" tal:content="structure provider:plone.abovecontent" />
 
     <article id="portal-column-content">
 
@@ -102,13 +102,13 @@
             </metal:description>
           </header>
 
-          <section id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" />
-          <section id="content-core">
+          <div id="viewlet-above-content-body" tal:content="structure provider:plone.abovecontentbody" />
+          <div id="content-core">
             <metal:text define-slot="content-core" tal:content="nothing">
               Page body text
             </metal:text>
-          </section>
-          <section id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" />
+          </div>
+          <div id="viewlet-below-content-body" tal:content="structure provider:plone.belowcontentbody" />
 
           </metal:bodytext>
         </article>
diff --git a/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html b/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
index e393e95..f7c1221 100644
--- a/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
+++ b/Products/CMFPlone/static/patterns/toolbar/toolbar-demo.html
@@ -22,7 +22,7 @@
           <img alt="Plone Toolbar" src="plone-toolbarlogo.svg" />
         </a>
         <a class="plone-toolbar-switcher"><span>Left-Top switcher</span></a>
-        <nav role="navigation">
+        <nav>
           <ul>
             <li class="plone-toolbar-separator">
               <a href="#">


