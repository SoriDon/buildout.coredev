Repository: plone.testing


Branch: refs/heads/master
Date: 2018-01-29T12:09:46+01:00
Author: Michael Howitz (icemac) <mh@gocept.com>
Commit: https://github.com/plone/plone.testing/commit/73f33313ac71005f56977ae61c5dfeea4c8fc82b

Add support for coverage and coveralls. (#43)

* Add support for coverage and coveralls.

* Configure coverage.

Files changed:
M .travis.yml
M setup.cfg

diff --git a/.travis.yml b/.travis.yml
index d0939b7..eb3bc5b 100644
--- a/.travis.yml
+++ b/.travis.yml
@@ -1,15 +1,18 @@
 language: python
-python: 2.7
 sudo: false
+python:
+    - 2.7
+install:
+    - pip install setuptools zc.buildout
+    - pip install coveralls coverage
+    - buildout bootstrap
+    - buildout
+script:
+    - coverage run bin/test -v1
+after_success:
+    - coverage combine
+    - coveralls
 cache:
   pip: true
   directories:
-    - $HOME/buildout-cache
-before_install:
-  - mkdir -p $HOME/buildout-cache/{eggs,downloads}
-  - pip install setuptools zc.buildout
-install:
-  - buildout bootstrap
-  - buildout
-script:
-  - bin/test
+    - eggs/
diff --git a/setup.cfg b/setup.cfg
index 9de46f9..1af2e32 100644
--- a/setup.cfg
+++ b/setup.cfg
@@ -1,5 +1,15 @@
+[bdist_wheel]
+universal = 1
+
 [check-manifest]
 ignore =
     bootstrap.py
     buildout.cfg
     tox.ini
+
+[coverage:run]
+branch = True
+source = plone.testing
+
+[coverage:report]
+precision = 2


