Repository: plone.app.redirector


Branch: refs/heads/master
Date: 2019-02-07T15:11:20+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.redirector/commit/ca93078f10d18b89a6969b0a456d3d77182a68e8

No longer try to check portal_redirection for allowed types.

This was from Products.RedirectionTool, which is scheduled to be merged into CMFPlone 5.2.
The feature to allow redirections only for specific types will be either removed or changed.
[maurits]

Files changed:
A news/1486.breaking
M plone/app/redirector/subscribers.py

b"diff --git a/news/1486.breaking b/news/1486.breaking\nnew file mode 100644\nindex 0000000..a6b34ea\n--- /dev/null\n+++ b/news/1486.breaking\n@@ -0,0 +1,5 @@\n+No longer try to check portal_redirection for allowed types.\n+\n+This was from Products.RedirectionTool, which is scheduled to be merged into CMFPlone 5.2.\n+The feature to allow redirections only for specific types will be either removed or changed.\n+[maurits]\ndiff --git a/plone/app/redirector/subscribers.py b/plone/app/redirector/subscribers.py\nindex f004055..d934667 100644\n--- a/plone/app/redirector/subscribers.py\n+++ b/plone/app/redirector/subscribers.py\n@@ -29,14 +29,6 @@ def objectMoved(obj, event):\n             if '/portal_factory/' in old_path:\n                 return\n \n-            # If we have the 'UI' package for redirector installed, check its\n-            # config and see if we should create redirects for the contenttype\n-            rt = getToolByName(obj, 'portal_redirection', None)\n-            if rt is not None:\n-                allowedtypes = rt.getRedirectionAllowedForTypes()\n-                if not obj.portal_type in allowedtypes:\n-                    return\n-\n             # Special case: don't remember object when it was just created...\n             putils = getToolByName(obj, 'plone_utils')\n             if putils is not None and putils.isIDAutoGenerated(event.oldName):\n"

Repository: plone.app.redirector


Branch: refs/heads/master
Date: 2019-02-12T16:43:40+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.redirector/commit/4d868e0398458a0c980b414f646eb4e5b07e2506

Merge pull request #10 from plone/plip-1486-redirection

No longer try to check portal_redirection for allowed types.

Files changed:
A news/1486.breaking
M plone/app/redirector/subscribers.py

b"diff --git a/news/1486.breaking b/news/1486.breaking\nnew file mode 100644\nindex 0000000..a6b34ea\n--- /dev/null\n+++ b/news/1486.breaking\n@@ -0,0 +1,5 @@\n+No longer try to check portal_redirection for allowed types.\n+\n+This was from Products.RedirectionTool, which is scheduled to be merged into CMFPlone 5.2.\n+The feature to allow redirections only for specific types will be either removed or changed.\n+[maurits]\ndiff --git a/plone/app/redirector/subscribers.py b/plone/app/redirector/subscribers.py\nindex f004055..d934667 100644\n--- a/plone/app/redirector/subscribers.py\n+++ b/plone/app/redirector/subscribers.py\n@@ -29,14 +29,6 @@ def objectMoved(obj, event):\n             if '/portal_factory/' in old_path:\n                 return\n \n-            # If we have the 'UI' package for redirector installed, check its\n-            # config and see if we should create redirects for the contenttype\n-            rt = getToolByName(obj, 'portal_redirection', None)\n-            if rt is not None:\n-                allowedtypes = rt.getRedirectionAllowedForTypes()\n-                if not obj.portal_type in allowedtypes:\n-                    return\n-\n             # Special case: don't remember object when it was just created...\n             putils = getToolByName(obj, 'plone_utils')\n             if putils is not None and putils.isIDAutoGenerated(event.oldName):\n"

