Repository: mockup


Branch: refs/heads/master
Date: 2022-07-12T10:09:16+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/mockup/commit/12252a535b5ac14a8a30890c6d0c2ede0ac6b749

fix(pat tinymce): Fix `linkType` mismatch in link/image modal

Files changed:
M src/pat/tinymce/js/links.js

b'diff --git a/src/pat/tinymce/js/links.js b/src/pat/tinymce/js/links.js\nindex 1191e7b2e..95633a573 100644\n--- a/src/pat/tinymce/js/links.js\n+++ b/src/pat/tinymce/js/links.js\n@@ -884,7 +884,7 @@ export default Base.extend({\n             }\n \n             linkType = self.dom.getAttrib(self.imgElm, "data-linktype");\n-            if (linkType) {\n+            if (linkType && (linkType in self.linkTypes)) {\n                 self.linkType = linkType;\n                 self.linkTypes[self.linkType].load(self.imgElm);\n                 // set scale selection in link modal:\n'

Repository: mockup


Branch: refs/heads/master
Date: 2022-07-12T12:41:02+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/mockup/commit/02bde25c866dd9aa3ac55fc2c370ce83fc618529

Merge pull request #1193 from plone/petschki-tinymce-link-modal-fix

Fix `linkType` mismatch in link/image modal

Files changed:
M src/pat/tinymce/js/links.js

b'diff --git a/src/pat/tinymce/js/links.js b/src/pat/tinymce/js/links.js\nindex 1191e7b2e..95633a573 100644\n--- a/src/pat/tinymce/js/links.js\n+++ b/src/pat/tinymce/js/links.js\n@@ -884,7 +884,7 @@ export default Base.extend({\n             }\n \n             linkType = self.dom.getAttrib(self.imgElm, "data-linktype");\n-            if (linkType) {\n+            if (linkType && (linkType in self.linkTypes)) {\n                 self.linkType = linkType;\n                 self.linkTypes[self.linkType].load(self.imgElm);\n                 // set scale selection in link modal:\n'

