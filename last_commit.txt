Repository: plone.app.workflow


Branch: refs/heads/python3
Date: 2018-06-27T00:29:05+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.workflow/commit/5f92c38fc13e67c7b470fe7b5c0816183b25ef97

setDefaultRoles is deprecated. addPermission from AccessControl.Permission is used.

Files changed:
M plone/app/workflow/permissions.py

b'diff --git a/plone/app/workflow/permissions.py b/plone/app/workflow/permissions.py\nindex cba2874..6b489d4 100644\n--- a/plone/app/workflow/permissions.py\n+++ b/plone/app/workflow/permissions.py\n@@ -1,26 +1,42 @@\n-from Products.CMFCore.permissions import setDefaultRoles\n+# -*- coding: utf-8 -*-\n from AccessControl import ModuleSecurityInfo\n+from AccessControl.Permission import addPermission\n \n security = ModuleSecurityInfo("plone.app.workflow.permissions")\n \n # Controls access to the "sharing" page\n security.declarePublic("DelegateRoles")\n DelegateRoles = "Sharing page: Delegate roles"\n-setDefaultRoles(DelegateRoles, (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\', \'Reviewer\', ))\n+addPermission(\n+    DelegateRoles,\n+    (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\', \'Reviewer\', ),\n+)\n \n # Control the individual roles\n security.declarePublic("DelegateReaderRole")\n DelegateReaderRole = "Sharing page: Delegate Reader role"\n-setDefaultRoles(DelegateReaderRole, (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\', \'Reviewer\'))\n+addPermission(\n+    DelegateReaderRole,\n+    (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\', \'Reviewer\'),\n+)\n \n security.declarePublic("DelegateEditorRole")\n DelegateEditorRole = "Sharing page: Delegate Editor role"\n-setDefaultRoles(DelegateEditorRole, (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\'))\n+addPermission(\n+    DelegateEditorRole,\n+    (\'Manager\', \'Site Administrator\', \'Owner\', \'Editor\'),\n+)\n \n security.declarePublic("DelegateContributorRole")\n DelegateContributorRole = "Sharing page: Delegate Contributor role"\n-setDefaultRoles(DelegateContributorRole, (\'Manager\', \'Site Administrator\', \'Owner\',))\n+addPermission(\n+    DelegateContributorRole,\n+    (\'Manager\', \'Site Administrator\', \'Owner\',),\n+)\n \n security.declarePublic("DelegateReviewerRole")\n DelegateReviewerRole = "Sharing page: Delegate Reviewer role"\n-setDefaultRoles(DelegateReviewerRole, (\'Manager\', \'Site Administrator\', \'Reviewer\',))\n+addPermission(\n+    DelegateReviewerRole,\n+    (\'Manager\', \'Site Administrator\', \'Reviewer\',),\n+)\n'

