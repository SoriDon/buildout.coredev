Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-04-18T13:00:04-03:00
Author: hvelarde (hvelarde) <hector.velarde@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/e20671e9ff9d7a54dcb8b5167194a83c9765b788

Do not use 'rel="tag"' attribute on the keywords viewlet

The referenced document is not a tag definition but a search result.

Refs. https://www.w3.org/TR/2011/WD-html5-20110113/links.html#link-type-tag

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ad80be5..905f24e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,6 +18,10 @@ New features:
 
 Bug fixes:
 
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites.
+  [hvelarde]
+
 - More py3 fixes.
   [pbauer]
 
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index a8dbd86..3c28837 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -10,7 +10,7 @@
     <li tal:repeat="category categories">
       <a href=""
          class="link-category"
-         rel="tag"
+         rel="nofollow"
          tal:content="category"
          tal:define="quotedCat python:url_quote(category)"
          tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-04-18T23:53:29+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/d40d4a957baec8bbf9da62a052dd92d6bfcbd1ad

Merge pull request #150 from plone/hvelarde-tag-2.8

Do not use 'rel="tag"' attribute on the keywords viewlet

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/keywords.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index ad80be5..905f24e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,6 +18,10 @@ New features:
 
 Bug fixes:
 
+- Do not use ``rel="tag"`` attribute on the keywords viewlet as the referenced document is not a tag definition but a search result;
+  use ``rel="nofollow"`` instead to avoid search crawlers hammering our sites.
+  [hvelarde]
+
 - More py3 fixes.
   [pbauer]
 
diff --git a/plone/app/layout/viewlets/keywords.pt b/plone/app/layout/viewlets/keywords.pt
index a8dbd86..3c28837 100644
--- a/plone/app/layout/viewlets/keywords.pt
+++ b/plone/app/layout/viewlets/keywords.pt
@@ -10,7 +10,7 @@
     <li tal:repeat="category categories">
       <a href=""
          class="link-category"
-         rel="tag"
+         rel="nofollow"
          tal:content="category"
          tal:define="quotedCat python:url_quote(category)"
          tal:attributes="href string:${context/@@plone_portal_state/navigation_root_url}/@@search?Subject%3Alist=${quotedCat}">


