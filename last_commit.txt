Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-07-11T12:28:55+02:00
Author: Markus Hilbert (iham) <markus.hilbert@iham.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/fe4bce6a9d0eeb7dacfd6fd80ce72f628b8d6efb

Fixed tests when IRichText behavior is used.

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/AddMoveAndDeleteDocument.txt
M Products/CMFPlone/tests/browser_collection_views.txt

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex d891b68cf..0393401da 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -31,6 +31,10 @@ Bug fixes:\n \n - Add test for issue #2469.\n   [jensens]\n+- Fixed tests when IRichText behavior is used.\n+  IRichText -> IRichTextBehavior\n+  This is a follow up to `issue 476 <https://github.com/plone/plone.app.contenttypes/issues/476>`_.\n+  [iham]\n \n \n 5.1.3 (2018-06-22)\ndiff --git a/Products/CMFPlone/tests/AddMoveAndDeleteDocument.txt b/Products/CMFPlone/tests/AddMoveAndDeleteDocument.txt\nindex 1674c4048..abd67864d 100644\n--- a/Products/CMFPlone/tests/AddMoveAndDeleteDocument.txt\n+++ b/Products/CMFPlone/tests/AddMoveAndDeleteDocument.txt\n@@ -51,7 +51,7 @@ browser.\n Now that the document has been added, we can edit it, but we pretend\n we don't know better and forget to type in a Title:\n \n-    >>> browser.getControl(name='form.widgets.IRichText.text').value = 'About me'\n+    >>> browser.getControl(name='form.widgets.IRichTextBehavior.text').value = 'About me'\n     >>> browser.getControl('Save').click()\n     >>> 'Required input is missing.' in browser.contents\n     True\n@@ -186,7 +186,7 @@ between cut and paste, the page should say so and not give a stacktrace.\n \n     >>> browser.open('http://nohost/plone')\n     >>> browser.getLink('Page').click()\n-    >>> browser.getControl(name='form.widgets.IRichText.text').value = ''\n+    >>> browser.getControl(name='form.widgets.IRichTextBehavior.text').value = ''\n     >>> browser.getControl('Title').value = 'Op een dag'\n     >>> browser.getControl('Save').click()\n     >>> 'Op een dag' in browser.contents\ndiff --git a/Products/CMFPlone/tests/browser_collection_views.txt b/Products/CMFPlone/tests/browser_collection_views.txt\nindex 2d0465e61..263f12361 100644\n--- a/Products/CMFPlone/tests/browser_collection_views.txt\n+++ b/Products/CMFPlone/tests/browser_collection_views.txt\n@@ -35,8 +35,8 @@ First create a folder and a demo collection:\n     >>> collection_description = 'Description. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod.'\n     >>> browser.getControl(name='form.widgets.IDublinCore.description').value = collection_description\n     >>> collection_text = '<p>Text. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>'\n-    >>> browser.getControl(name='form.widgets.IRichText.text').value = collection_text\n-    >>> browser.getControl(name='form.widgets.IRichText.text.mimeType').value = ['text/html']\n+    >>> browser.getControl(name='form.widgets.IRichTextBehavior.text').value = collection_text\n+    >>> browser.getControl(name='form.widgets.IRichTextBehavior.text.mimeType').value = ['text/html']\n     >>> browser.getControl('Save').click()\n \n Now let's login and visit the collection in the test browser:\n"

