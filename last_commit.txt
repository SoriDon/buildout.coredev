Repository: plone.app.layout


Branch: refs/heads/master
Date: 2016-11-13T21:30:52+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/d12465bde0038783ef1c1f0b8c11ab655cc17f60

showEditableBorder was renamed to showToolbar

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/contentactions_blank.pt
M plone/app/layout/viewlets/contentviews.pt
M plone/app/layout/viewlets/menu.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index cb721e4..4dcc989 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -23,6 +23,10 @@ Bug fixes:
 - Remove commented out viewlet (meant for Plone 3) and its related template.
   [gforcada]
 
+- Adapt code to some deprecated methods getting finally removed.
+  [gforcada]
+
+
 2.6.1 (2016-06-07)
 ------------------
 
diff --git a/plone/app/layout/viewlets/contentactions_blank.pt b/plone/app/layout/viewlets/contentactions_blank.pt
index 4af1fa2..41b946d 100644
--- a/plone/app/layout/viewlets/contentactions_blank.pt
+++ b/plone/app/layout/viewlets/contentactions_blank.pt
@@ -1,5 +1,5 @@
 <div class="contentActions"
      tal:define="ploneview context/@@plone"
-     tal:condition="ploneview/showEditableBorder">
+     tal:condition="ploneview/showToolbar">
 
-</div>
\ No newline at end of file
+</div>
diff --git a/plone/app/layout/viewlets/contentviews.pt b/plone/app/layout/viewlets/contentviews.pt
index 5abe09b..c0d759d 100644
--- a/plone/app/layout/viewlets/contentviews.pt
+++ b/plone/app/layout/viewlets/contentviews.pt
@@ -1,5 +1,5 @@
 <tal:contentviews tal:define="ploneview context/@@plone;"
-                  tal:condition="ploneview/showEditableBorder"
+                  tal:condition="ploneview/showToolbar"
                   i18n:domain="plone">
 
   <tal:block define="actions view/tabSet1;">
diff --git a/plone/app/layout/viewlets/menu.pt b/plone/app/layout/viewlets/menu.pt
index 61f9c8a..ea6a0d3 100644
--- a/plone/app/layout/viewlets/menu.pt
+++ b/plone/app/layout/viewlets/menu.pt
@@ -1,5 +1,5 @@
 <tal:contentviews tal:define="ploneview context/@@plone;"
-                  tal:condition="ploneview/showEditableBorder"
+                  tal:condition="ploneview/showToolbar"
                   i18n:domain="plone">
   <tal:actions tal:repeat="action options/actions">
     <li tal:attributes="id string:contentview-${action/id};
@@ -37,4 +37,4 @@
       </tal:var>
     </li>
   </tal:actions>
-</tal:contentviews>
\ No newline at end of file
+</tal:contentviews>


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2016-11-13T21:30:52+01:00
Author: Gil Forcada (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/8da53a12c81930c8acc13b0f0f2fb6d7252dccb2

have_portets is on plone_layout

It was on @@plone view but it was already deprecated and
finally it has been removed.

Files changed:
M plone/app/layout/viewlets/common.py

diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index 423e6c6..dc8c1de 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -420,12 +420,14 @@ class ManagePortletsFallbackViewlet(ViewletBase):
     def update(self):
         ploneview = getMultiAdapter((
             self.context, self.request), name=u'plone')
+        plonelayout = getMultiAdapter((
+            self.context, self.request), name=u'plone_layout')
         context_state = getMultiAdapter((self.context, self.request),
                                         name=u'plone_context_state')
 
         self.portlet_assignable = context_state.portlet_assignable()
-        self.sl = ploneview.have_portlets('plone.leftcolumn', self.context)
-        self.sr = ploneview.have_portlets('plone.rightcolumn', self.context)
+        self.sl = plonelayout.have_portlets('plone.leftcolumn', self.context)
+        self.sr = plonelayout.have_portlets('plone.rightcolumn', self.context)
         self.object_url = context_state.object_url()
 
     def available(self):


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2016-11-13T23:31:41+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/d358eb5685813bb9a862f5b016b8ed352e1da58f

Merge pull request #104 from plone/gforcada-patch-2

Replace showEditableBorder with showToolbar

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/common.py
M plone/app/layout/viewlets/contentactions_blank.pt
M plone/app/layout/viewlets/contentviews.pt
M plone/app/layout/viewlets/menu.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index cb721e4..4dcc989 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -23,6 +23,10 @@ Bug fixes:
 - Remove commented out viewlet (meant for Plone 3) and its related template.
   [gforcada]
 
+- Adapt code to some deprecated methods getting finally removed.
+  [gforcada]
+
+
 2.6.1 (2016-06-07)
 ------------------
 
diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index 423e6c6..dc8c1de 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -420,12 +420,14 @@ class ManagePortletsFallbackViewlet(ViewletBase):
     def update(self):
         ploneview = getMultiAdapter((
             self.context, self.request), name=u'plone')
+        plonelayout = getMultiAdapter((
+            self.context, self.request), name=u'plone_layout')
         context_state = getMultiAdapter((self.context, self.request),
                                         name=u'plone_context_state')
 
         self.portlet_assignable = context_state.portlet_assignable()
-        self.sl = ploneview.have_portlets('plone.leftcolumn', self.context)
-        self.sr = ploneview.have_portlets('plone.rightcolumn', self.context)
+        self.sl = plonelayout.have_portlets('plone.leftcolumn', self.context)
+        self.sr = plonelayout.have_portlets('plone.rightcolumn', self.context)
         self.object_url = context_state.object_url()
 
     def available(self):
diff --git a/plone/app/layout/viewlets/contentactions_blank.pt b/plone/app/layout/viewlets/contentactions_blank.pt
index 4af1fa2..41b946d 100644
--- a/plone/app/layout/viewlets/contentactions_blank.pt
+++ b/plone/app/layout/viewlets/contentactions_blank.pt
@@ -1,5 +1,5 @@
 <div class="contentActions"
      tal:define="ploneview context/@@plone"
-     tal:condition="ploneview/showEditableBorder">
+     tal:condition="ploneview/showToolbar">
 
-</div>
\ No newline at end of file
+</div>
diff --git a/plone/app/layout/viewlets/contentviews.pt b/plone/app/layout/viewlets/contentviews.pt
index 5abe09b..c0d759d 100644
--- a/plone/app/layout/viewlets/contentviews.pt
+++ b/plone/app/layout/viewlets/contentviews.pt
@@ -1,5 +1,5 @@
 <tal:contentviews tal:define="ploneview context/@@plone;"
-                  tal:condition="ploneview/showEditableBorder"
+                  tal:condition="ploneview/showToolbar"
                   i18n:domain="plone">
 
   <tal:block define="actions view/tabSet1;">
diff --git a/plone/app/layout/viewlets/menu.pt b/plone/app/layout/viewlets/menu.pt
index 61f9c8a..ea6a0d3 100644
--- a/plone/app/layout/viewlets/menu.pt
+++ b/plone/app/layout/viewlets/menu.pt
@@ -1,5 +1,5 @@
 <tal:contentviews tal:define="ploneview context/@@plone;"
-                  tal:condition="ploneview/showEditableBorder"
+                  tal:condition="ploneview/showToolbar"
                   i18n:domain="plone">
   <tal:actions tal:repeat="action options/actions">
     <li tal:attributes="id string:contentview-${action/id};
@@ -37,4 +37,4 @@
       </tal:var>
     </li>
   </tal:actions>
-</tal:contentviews>
\ No newline at end of file
+</tal:contentviews>


