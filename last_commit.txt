Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2016-10-23T10:29:32-04:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.ATContentTypes/commit/62fd8bc52ea9a61c45b60b7dd65beb0534f9e758

Fix imports from Globals that was removed in Zope4

Files changed:
M CHANGES.rst
M Products/ATContentTypes/configuration/config.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 51c0aa8..4492c17 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Fix imports from Globals that was removed in Zope4
+  [pbauer]
+
 - Require plone.app.imaging even if Plone itself does not. [davisagli]
 
 
diff --git a/Products/ATContentTypes/configuration/config.py b/Products/ATContentTypes/configuration/config.py
index 9a380d0..7a57efc 100644
--- a/Products/ATContentTypes/configuration/config.py
+++ b/Products/ATContentTypes/configuration/config.py
@@ -1,5 +1,4 @@
 # -*- coding: utf-8 -*-
-from Globals import INSTANCE_HOME
 from Products.ATContentTypes.configuration.schema import atctSchema
 from ZConfig.loader import ConfigLoader
 
@@ -7,7 +6,7 @@
 
 
 # directories
-INSTANCE_ETC = os.path.join(INSTANCE_HOME, 'etc')
+INSTANCE_ETC = os.path.join(os.environ.get('INSTANCE_HOME'), 'etc')
 _here = os.path.dirname(__file__)
 ATCT_HOME = os.path.dirname(os.path.abspath(os.path.join(_here)))
 ATCT_ETC = os.path.join(ATCT_HOME, 'etc')


Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2016-10-23T23:59:19-04:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.ATContentTypes/commit/5f1c71154a964bf8edc5753372bf664f73261631

Merge pull request #38 from plone/plonezope4

Fix imports from Globals that was removed in Zope4

Files changed:
M CHANGES.rst
M Products/ATContentTypes/configuration/config.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 51c0aa8..4492c17 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,9 @@ New features:
 
 Bug fixes:
 
+- Fix imports from Globals that was removed in Zope4
+  [pbauer]
+
 - Require plone.app.imaging even if Plone itself does not. [davisagli]
 
 
diff --git a/Products/ATContentTypes/configuration/config.py b/Products/ATContentTypes/configuration/config.py
index 9a380d0..7a57efc 100644
--- a/Products/ATContentTypes/configuration/config.py
+++ b/Products/ATContentTypes/configuration/config.py
@@ -1,5 +1,4 @@
 # -*- coding: utf-8 -*-
-from Globals import INSTANCE_HOME
 from Products.ATContentTypes.configuration.schema import atctSchema
 from ZConfig.loader import ConfigLoader
 
@@ -7,7 +6,7 @@
 
 
 # directories
-INSTANCE_ETC = os.path.join(INSTANCE_HOME, 'etc')
+INSTANCE_ETC = os.path.join(os.environ.get('INSTANCE_HOME'), 'etc')
 _here = os.path.dirname(__file__)
 ATCT_HOME = os.path.dirname(os.path.abspath(os.path.join(_here)))
 ATCT_ETC = os.path.join(ATCT_HOME, 'etc')


