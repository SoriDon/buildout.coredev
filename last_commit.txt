Repository: plone.i18n


Branch: refs/heads/master
Date: 2019-01-31T11:15:20+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.i18n/commit/28c3b5ddb111980c6523d724e07c2779ae0cc0e1

Be more verbose when Japanese normalizer fails in tests.

See https://github.com/plone/plone.i18n/issues/25

Files changed:
A news/25.bugfix
M plone/i18n/normalizer/ja.py

b'diff --git a/news/25.bugfix b/news/25.bugfix\nnew file mode 100644\nindex 0000000..6c5c19b\n--- /dev/null\n+++ b/news/25.bugfix\n@@ -0,0 +1 @@\n+Be more verbose when Japanese normalizer fails in tests.\ndiff --git a/plone/i18n/normalizer/ja.py b/plone/i18n/normalizer/ja.py\nindex 1dc94b1..ebb2c5e 100644\n--- a/plone/i18n/normalizer/ja.py\n+++ b/plone/i18n/normalizer/ja.py\n@@ -58,13 +58,17 @@ class Normalizer(object):\n       >>> normalized = norm.normalize(text)\n       >>> all(s in allowed for s in normalized)\n       True\n-      >>> len(normalized)\n-      6\n+\n+    We expect the default length of 6.\n+    Report the normalized value in case of failure.\n+\n+      >>> len(normalized) == 6 or (len(normalized), normalized)\n+      True\n \n     The max_length argument is respected.\n       >>> normalized = norm.normalize(text, max_length=8)\n-      >>> len(normalized)\n-      8\n+      >>> len(normalized) == 8 or (len(normalized), normalized)\n+      True\n     """\n \n     def normalize(self, text, locale=None, max_length=MAX_LENGTH):\n'

Repository: plone.i18n


Branch: refs/heads/master
Date: 2019-01-31T16:04:24+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.i18n/commit/4d4c6d78c8e22c7993e3606954af5641e2ded230

Merge pull request #26 from plone/japanese-normalizer-unstable-test

Be more verbose when Japanese normalizer fails in tests.

Files changed:
A news/25.bugfix
M plone/i18n/normalizer/ja.py

b'diff --git a/news/25.bugfix b/news/25.bugfix\nnew file mode 100644\nindex 0000000..6c5c19b\n--- /dev/null\n+++ b/news/25.bugfix\n@@ -0,0 +1 @@\n+Be more verbose when Japanese normalizer fails in tests.\ndiff --git a/plone/i18n/normalizer/ja.py b/plone/i18n/normalizer/ja.py\nindex 1dc94b1..ebb2c5e 100644\n--- a/plone/i18n/normalizer/ja.py\n+++ b/plone/i18n/normalizer/ja.py\n@@ -58,13 +58,17 @@ class Normalizer(object):\n       >>> normalized = norm.normalize(text)\n       >>> all(s in allowed for s in normalized)\n       True\n-      >>> len(normalized)\n-      6\n+\n+    We expect the default length of 6.\n+    Report the normalized value in case of failure.\n+\n+      >>> len(normalized) == 6 or (len(normalized), normalized)\n+      True\n \n     The max_length argument is respected.\n       >>> normalized = norm.normalize(text, max_length=8)\n-      >>> len(normalized)\n-      8\n+      >>> len(normalized) == 8 or (len(normalized), normalized)\n+      True\n     """\n \n     def normalize(self, text, locale=None, max_length=MAX_LENGTH):\n'

