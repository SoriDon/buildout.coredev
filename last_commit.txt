Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2018-10-29T19:35:30+01:00
Author: Huub Bouma (huubbouma) <bouma@w20e.com>
Commit: https://github.com/plone/Products.CMFEditions/commit/7e2b602cb5551762d8e4c2782c6eb68de1646f86

Fix success() responses in controller actions browser views for AT types (Fixes #62)

Files changed:
A news/62.bugfix
M Products/CMFEditions/browser/views.py

b"diff --git a/Products/CMFEditions/browser/views.py b/Products/CMFEditions/browser/views.py\nindex d3d094d..64507d6 100644\n--- a/Products/CMFEditions/browser/views.py\n+++ b/Products/CMFEditions/browser/views.py\n@@ -13,7 +13,7 @@\n class UpdateVersionOnEditView(BrowserView):\n \n     def success(self):\n-        return self.context.restrictedTraverse('content_edit')\n+        self.request.response.redirect('view')\n \n     def __call__(self):\n         context = aq_inner(self.context)\n@@ -39,7 +39,7 @@ def __call__(self):\n class UpdateVersionBeforeEditView(BrowserView):\n \n     def success(self):\n-        self.request.response.redirect('view')\n+        return self.context.restrictedTraverse('content_edit')\n \n     def __call__(self):\n         context = aq_inner(self.context)\ndiff --git a/news/62.bugfix b/news/62.bugfix\nnew file mode 100644\nindex 0000000..05b9943\n--- /dev/null\n+++ b/news/62.bugfix\n@@ -0,0 +1 @@\n+Fix success() responses in controller actions browser views for AT types\n"

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2018-10-29T19:44:02+01:00
Author: Huub Bouma (huubbouma) <bouma@w20e.com>
Commit: https://github.com/plone/Products.CMFEditions/commit/cbc6a30fda9ff57a02a1aac7f0e3a2b3fea81624

Merge pull request #63 from huubbouma/master

Fix success() responses in browser views for AT types

Files changed:
A news/62.bugfix
M Products/CMFEditions/browser/views.py

b"diff --git a/Products/CMFEditions/browser/views.py b/Products/CMFEditions/browser/views.py\nindex d3d094d..64507d6 100644\n--- a/Products/CMFEditions/browser/views.py\n+++ b/Products/CMFEditions/browser/views.py\n@@ -13,7 +13,7 @@\n class UpdateVersionOnEditView(BrowserView):\n \n     def success(self):\n-        return self.context.restrictedTraverse('content_edit')\n+        self.request.response.redirect('view')\n \n     def __call__(self):\n         context = aq_inner(self.context)\n@@ -39,7 +39,7 @@ def __call__(self):\n class UpdateVersionBeforeEditView(BrowserView):\n \n     def success(self):\n-        self.request.response.redirect('view')\n+        return self.context.restrictedTraverse('content_edit')\n \n     def __call__(self):\n         context = aq_inner(self.context)\ndiff --git a/news/62.bugfix b/news/62.bugfix\nnew file mode 100644\nindex 0000000..05b9943\n--- /dev/null\n+++ b/news/62.bugfix\n@@ -0,0 +1 @@\n+Fix success() responses in controller actions browser views for AT types\n"

