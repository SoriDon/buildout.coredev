Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-08-20T15:06:34+02:00
Author: Daniel Havlik (dhavlik) <dh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/4a3bc974dcc64d776c8d85335d5a32c65750f43d

Fix a deprecation warning. This also fixes a side effect which can bite you if you rely on ZOPETESTCASE environment variable, which is set to "1" whenever you import something from Testing.ZopeTestCase.

Files changed:
M src/plone/recipe/zope2instance/ctl.py

b'diff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 0782e9f..c260082 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -678,8 +678,8 @@ def get_startup_cmd(self, python, more, pyflags=""):\n \n         if not self.options.no_request:\n             cmdline += (\n-                \'from Testing.ZopeTestCase.utils import makerequest; \'\n-                \'app = makerequest(app); \'\n+                \'import Testing.makerequest; \'\n+                \'app = Testing.makerequest(app); \'\n                 # REQUEST.traverse needs this but no reason not to set\n                 # this even if we\'re not traversing to an object\n                 \'app.REQUEST[\\\'PARENTS\\\'] = [app]; \'\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-08-20T15:13:52+02:00
Author: Daniel Havlik (dhavlik) <dh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/e8b78255193e6c36ecbf582d7820e67ce72b8e5e

changelog

Files changed:
A news/122.bugfix

b'diff --git a/news/122.bugfix b/news/122.bugfix\nnew file mode 100644\nindex 0000000..98ffbea\n--- /dev/null\n+++ b/news/122.bugfix\n@@ -0,0 +1 @@\n+Fixed a deprecation warning when importing "makerequest" from Testing.ZopeTestCase.utils. This also fixes a side effect which can bite you if you rely on ZOPETESTCASE environment variable, which is set to "1" whenever you import something from Testing.ZopeTestCase.\n\\ No newline at end of file\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-08-21T09:34:29+02:00
Author: Daniel Havlik (dhavlik) <dh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/caf9125d7b94eac206049e1d4d19ea551c0e3135

Update news/122.bugfix

Co-Authored-By: Michael Howitz &lt;mh@gocept.com&gt;

Files changed:
M news/122.bugfix

b'diff --git a/news/122.bugfix b/news/122.bugfix\nindex 98ffbea..3ffd825 100644\n--- a/news/122.bugfix\n+++ b/news/122.bugfix\n@@ -1 +1 @@\n-Fixed a deprecation warning when importing "makerequest" from Testing.ZopeTestCase.utils. This also fixes a side effect which can bite you if you rely on ZOPETESTCASE environment variable, which is set to "1" whenever you import something from Testing.ZopeTestCase.\n\\ No newline at end of file\n+Fixed a deprecation warning when importing "makerequest" from Testing.ZopeTestCase.utils. This also fixes a side effect which can bite you if you rely on ZOPETESTCASE environment variable, only being set to "1" during test runs.\n'

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-08-21T11:00:44+02:00
Author: Daniel Havlik (dhavlik) <dh@gocept.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/7f5aca3e4b71704c03cf1b87a047e9124a51b7e7

Merge pull request #121 from dhavlik/master

Fix a deprecation warning.

Files changed:
A news/122.bugfix
M src/plone/recipe/zope2instance/ctl.py

b'diff --git a/news/122.bugfix b/news/122.bugfix\nnew file mode 100644\nindex 0000000..3ffd825\n--- /dev/null\n+++ b/news/122.bugfix\n@@ -0,0 +1 @@\n+Fixed a deprecation warning when importing "makerequest" from Testing.ZopeTestCase.utils. This also fixes a side effect which can bite you if you rely on ZOPETESTCASE environment variable, only being set to "1" during test runs.\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex 0782e9f..c260082 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -678,8 +678,8 @@ def get_startup_cmd(self, python, more, pyflags=""):\n \n         if not self.options.no_request:\n             cmdline += (\n-                \'from Testing.ZopeTestCase.utils import makerequest; \'\n-                \'app = makerequest(app); \'\n+                \'import Testing.makerequest; \'\n+                \'app = Testing.makerequest(app); \'\n                 # REQUEST.traverse needs this but no reason not to set\n                 # this even if we\'re not traversing to an object\n                 \'app.REQUEST[\\\'PARENTS\\\'] = [app]; \'\n'

