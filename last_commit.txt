Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-12-21T10:46:26+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/Products.CMFPlone/commit/c2d5d93dcb9fba768af1cd2ee4c3d66cdb859030

Plone 60: add data-bundle="diazo" back. add a data-bundle="plonecustomcss" also for @@custom.css stylesheet

Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI). Add a data-bundle="plonecustomcss" also for `@@customcss` stylesheet

Files changed:
M Products/CMFPlone/resources/browser/resource.py

b'diff --git a/Products/CMFPlone/resources/browser/resource.py b/Products/CMFPlone/resources/browser/resource.py\nindex 9e5808da57..8ddcf4767b 100644\n--- a/Products/CMFPlone/resources/browser/resource.py\n+++ b/Products/CMFPlone/resources/browser/resource.py\n@@ -242,6 +242,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_js"] if external else None,\n                 crossorigin="anonymous" if external else None,\n                 integrity=not external,\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Theme CSS\n@@ -264,6 +265,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_css"] if external else None,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Custom CSS\n@@ -280,6 +282,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 group=root_group_css,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "plonecustomcss"},\n             )\n \n         self.renderer = {}\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-12-21T10:48:22+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/Products.CMFPlone/commit/119846872a97b850fa4614fae3f974f163019e89

Create 3890.bugfix

Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI).
Add a data-bundle="plonecustomcss" also for @@custom.css stylesheet
[yurj]

Files changed:
A news/3890.bugfix

b'diff --git a/news/3890.bugfix b/news/3890.bugfix\nnew file mode 100644\nindex 0000000000..e56c02faf9\n--- /dev/null\n+++ b/news/3890.bugfix\n@@ -0,0 +1,3 @@\n+Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI).\n+Add a data-bundle="plonecustomcss" also for @@custom.css stylesheet\n+[yurj]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2024-01-08T16:31:14+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/39f44ee5c2d888b9ba7b0179af3ed8ed01bedc2e

Merge pull request #3890 from plone/yurj-diazo-bundle-60

Plone 60: add data-bundle="diazo" back. add a data-bundle="plonecustoâ€¦

Files changed:
A news/3890.bugfix
M Products/CMFPlone/resources/browser/resource.py

b'diff --git a/Products/CMFPlone/resources/browser/resource.py b/Products/CMFPlone/resources/browser/resource.py\nindex 9e5808da57..8ddcf4767b 100644\n--- a/Products/CMFPlone/resources/browser/resource.py\n+++ b/Products/CMFPlone/resources/browser/resource.py\n@@ -242,6 +242,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_js"] if external else None,\n                 crossorigin="anonymous" if external else None,\n                 integrity=not external,\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Theme CSS\n@@ -264,6 +265,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 url=themedata["production_css"] if external else None,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "diazo"},\n             )\n \n         # add Custom CSS\n@@ -280,6 +282,7 @@ def check_dependencies(bundle_name, depends, bundles):\n                 group=root_group_css,\n                 media="all",\n                 rel="stylesheet",\n+                **{"data-bundle": "plonecustomcss"},\n             )\n \n         self.renderer = {}\ndiff --git a/news/3890.bugfix b/news/3890.bugfix\nnew file mode 100644\nindex 0000000000..e56c02faf9\n--- /dev/null\n+++ b/news/3890.bugfix\n@@ -0,0 +1,3 @@\n+Add data-bundle="diazo" back, for backward compatibility with backend.xml (Classic UI).\n+Add a data-bundle="plonecustomcss" also for @@custom.css stylesheet\n+[yurj]\n'

