Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2022-03-17T17:00:53+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/d48df12c6bbd33ca6cadb854a2834de26d3b6764

code cleanup

Files changed:
M src/plone/app/multilingual/dx/cloner.py
M src/plone/app/multilingual/dx/form.py

b"diff --git a/src/plone/app/multilingual/dx/cloner.py b/src/plone/app/multilingual/dx/cloner.py\nindex 8207218c..c556be9c 100644\n--- a/src/plone/app/multilingual/dx/cloner.py\n+++ b/src/plone/app/multilingual/dx/cloner.py\n@@ -11,15 +11,8 @@\n from zope.component import getUtility\n from zope.component import queryAdapter\n from zope.interface import implementer\n+from zope.intid.interfaces import IIntIds\n \n-import pkg_resources\n-\n-\n-try:\n-    # pkg_resources.get_distribution('zope.initd')\n-    from zope.intid.interfaces import IIntIds\n-except pkg_resources.DistributionNotFound:\n-    from zope.app.intid.interfaces import IIntIds\n \n _marker = object()\n \n@@ -54,8 +47,7 @@ def copy_relation(self, relation_value, target_language):\n         translation = ITranslationManager(obj).get_translation(target_language)\n         if translation:\n             return RelationValue(intids.getId(translation))\n-        else:\n-            return RelationValue(intids.getId(obj))\n+        return RelationValue(intids.getId(obj))\n \n     def copy_fields(self, translation):\n         doomed = False\ndiff --git a/src/plone/app/multilingual/dx/form.py b/src/plone/app/multilingual/dx/form.py\nindex dde7f382..20afebee 100644\n--- a/src/plone/app/multilingual/dx/form.py\n+++ b/src/plone/app/multilingual/dx/form.py\n@@ -12,13 +12,7 @@\n \n \n def isLanguageIndependent(field):\n-    if field.interface is None:\n-        return False\n-\n-    if ILanguageIndependentField.providedBy(field):\n-        return True\n-    else:\n-        return False\n+    return field.interface is not None and ILanguageIndependentField.providedBy(field)\n \n \n class LanguageIndependentFieldValidator(StrictSimpleFieldValidator):\n"

