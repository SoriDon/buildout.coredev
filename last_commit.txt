Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-11-22T15:37:49-03:00
Author: wesleybl (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/d55bc33ba56d9622896b49138bba9fd6e6d92561

Fix random fails in test_querystring.robot

Input didn't appear on the screen. So, the problem was when clicking on
the element that loads the input. We wait for the element to become
visible before clicking on it.

This fix:

Element 'jquery=.select2-drop-active[style*="display: block;"] input'
not visible after 30 seconds.

Files changed:
M Products/CMFPlone/tests/robot/test_querystring.robot

b'diff --git a/Products/CMFPlone/tests/robot/test_querystring.robot b/Products/CMFPlone/tests/robot/test_querystring.robot\nindex cfc96d3d86..0c4a6e49b7 100644\n--- a/Products/CMFPlone/tests/robot/test_querystring.robot\n+++ b/Products/CMFPlone/tests/robot/test_querystring.robot\n@@ -317,8 +317,10 @@ I expect to be in Simple mode\n     Wait Until Element Is Not Visible  css=div#select2-drop-mask\n \n open the select box titled ${NAME}\n+    ${select_criteria_selector}  Set Variable  .querystring-criteria-${NAME} .select2-container a\n+    Wait Until Element Is Visible  css=${select_criteria_selector}\n     Click Element  css=body\n-    Click Element  css=.querystring-criteria-${NAME} .select2-container a\n+    Click Element  css=${select_criteria_selector}\n \n select index type ${INDEX}\n     ${input_selector}  Set Variable  .select2-drop-active[style*="display: block;"] input\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-11-22T15:43:31-03:00
Author: wesleybl (wesleybl) <wesleybl@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/2d759a69a439bb520912ad39ef03395d123dd193

Fix random fails in test_folder_contents.robot

Wait for the select all button to be visible on the screen before
clicking it.

This fix:

StaleElementReferenceException: Message: stale element reference: element is not attached to the page document

Files changed:
M Products/CMFPlone/tests/robot/test_folder_contents.robot

b'diff --git a/Products/CMFPlone/tests/robot/test_folder_contents.robot b/Products/CMFPlone/tests/robot/test_folder_contents.robot\nindex 6e3275a58b..78092f2298 100644\n--- a/Products/CMFPlone/tests/robot/test_folder_contents.robot\n+++ b/Products/CMFPlone/tests/robot/test_folder_contents.robot\n@@ -61,7 +61,9 @@ I click the \'${link_name}\' link\n I select all the elements\n     Wait until page contains element  css=.pat-structure .select-all\n     Wait until page contains element  css=.itemRow\n-    Click Element  css=.pat-structure .select-all\n+    ${select_all_selector}  Set Variable  .pat-structure .select-all\n+    Wait Until Element Is Visible  css=${select_all_selector}\n+    Click Element  css=${select_all_selector}\n \n the four elements got selected\n     Checkbox Should Be Selected  css=tr[data-id="doc1"] input\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-11-22T21:46:29+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/3186e377b3e0fc2e7f40ec4a00f9e9618bb77da7

Merge pull request #3363 from plone/fix_robot_tests

Fix random failures in robot tests

Files changed:
M Products/CMFPlone/tests/robot/test_folder_contents.robot
M Products/CMFPlone/tests/robot/test_querystring.robot

b'diff --git a/Products/CMFPlone/tests/robot/test_folder_contents.robot b/Products/CMFPlone/tests/robot/test_folder_contents.robot\nindex 6e3275a58b..78092f2298 100644\n--- a/Products/CMFPlone/tests/robot/test_folder_contents.robot\n+++ b/Products/CMFPlone/tests/robot/test_folder_contents.robot\n@@ -61,7 +61,9 @@ I click the \'${link_name}\' link\n I select all the elements\n     Wait until page contains element  css=.pat-structure .select-all\n     Wait until page contains element  css=.itemRow\n-    Click Element  css=.pat-structure .select-all\n+    ${select_all_selector}  Set Variable  .pat-structure .select-all\n+    Wait Until Element Is Visible  css=${select_all_selector}\n+    Click Element  css=${select_all_selector}\n \n the four elements got selected\n     Checkbox Should Be Selected  css=tr[data-id="doc1"] input\ndiff --git a/Products/CMFPlone/tests/robot/test_querystring.robot b/Products/CMFPlone/tests/robot/test_querystring.robot\nindex cfc96d3d86..0c4a6e49b7 100644\n--- a/Products/CMFPlone/tests/robot/test_querystring.robot\n+++ b/Products/CMFPlone/tests/robot/test_querystring.robot\n@@ -317,8 +317,10 @@ I expect to be in Simple mode\n     Wait Until Element Is Not Visible  css=div#select2-drop-mask\n \n open the select box titled ${NAME}\n+    ${select_criteria_selector}  Set Variable  .querystring-criteria-${NAME} .select2-container a\n+    Wait Until Element Is Visible  css=${select_criteria_selector}\n     Click Element  css=body\n-    Click Element  css=.querystring-criteria-${NAME} .select2-container a\n+    Click Element  css=${select_criteria_selector}\n \n select index type ${INDEX}\n     ${input_selector}  Set Variable  .select2-drop-active[style*="display: block;"] input\n'

