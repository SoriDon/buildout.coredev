Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T22:57:58+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/052b7296408168f0c3c64939b1682b00e6a91767

pyupgrade --py38-plus, plus remove six.

Files changed:
M Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py
M Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py
M Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
M Products/CMFPlacefulWorkflow/__init__.py
M Products/CMFPlacefulWorkflow/adapter.py
M Products/CMFPlacefulWorkflow/browser/views.py
M Products/CMFPlacefulWorkflow/exportimport/__init__.py
M Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py
M Products/CMFPlacefulWorkflow/global_symbols.py
M Products/CMFPlacefulWorkflow/interfaces.py
M Products/CMFPlacefulWorkflow/permissions.py
M Products/CMFPlacefulWorkflow/setuphandlers.py
M Products/CMFPlacefulWorkflow/testing.py
M Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py
M Products/CMFPlacefulWorkflow/tests/__init__.py
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M Products/CMFPlacefulWorkflow/tests/test_configlet.py
M Products/CMFPlacefulWorkflow/tests/test_doctests.py
M setup.py

b'diff --git a/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py b/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\nindex 760d18d..ada3bc0 100644\n--- a/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\n+++ b/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -34,8 +33,6 @@\n from Products.PageTemplates.PageTemplateFile import PageTemplateFile\n from zope.interface import implementer\n \n-import six\n-\n \n DEFAULT_CHAIN = "(Default)"\n _MARKER = "_MARKER"\n@@ -200,7 +197,7 @@ def getChainFor(self, ob, managescreen=False):\n         """\n \n         cbt = self._chains_by_type\n-        if isinstance(ob, six.string_types):\n+        if isinstance(ob, str):\n             pt = ob\n         elif hasattr(aq_base(ob), "_getPortalTypeName"):\n             pt = ob._getPortalTypeName()\n@@ -215,7 +212,7 @@ def getChainFor(self, ob, managescreen=False):\n             chain = cbt.get(pt, _MARKER)\n \n         # Backwards compatibility: before chain was a string, not a list\n-        if chain is not _MARKER and isinstance(chain, six.string_types):\n+        if chain is not _MARKER and isinstance(chain, str):\n             chain = map(lambda x: x.strip(), chain.split(","))\n \n         Log.debug("Chain founded in policy %s", chain)\n@@ -239,7 +236,7 @@ def setDefaultChain(self, default_chain, REQUEST=None):\n         """Sets the default chain for this tool."""\n         wftool = getToolByName(self, "portal_workflow")\n \n-        if isinstance(default_chain, six.string_types):\n+        if isinstance(default_chain, str):\n             default_chain = map(lambda x: x.strip(), default_chain.split(","))\n         ids = []\n         for wf_id in default_chain:\n@@ -282,7 +279,7 @@ def setChain(self, portal_type, chain, REQUEST=None):\n         if portal_type not in [pt.id for pt in self._listTypeInfo()]:\n             raise ValueError("\'%s\' is not a valid portal type." % portal_type)\n \n-        if isinstance(chain, six.string_types):\n+        if isinstance(chain, str):\n             chain = [i.strip() for i in chain.split(",")]\n \n         wftool = getToolByName(self, "portal_workflow")\n@@ -300,7 +297,9 @@ def setChain(self, portal_type, chain, REQUEST=None):\n             for wf_id in chain:\n                 if wf_id != "" and not wftool.getWorkflowById(wf_id):\n                     raise ValueError(\n-                        "\'%s\' is not a workflow ID.\\nchain: %s" % (wf_id, repr(chain))\n+                        "\'{}\' is not a workflow ID.\\nchain: {}".format(\n+                            wf_id, repr(chain)\n+                        )\n                     )\n             cbt[portal_type] = tuple(chain)\n \ndiff --git a/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py b/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\nindex c48caf7..3892cf4 100644\n--- a/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\n+++ b/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\nindex d0f70a3..19df32d 100644\n--- a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\n+++ b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -34,8 +33,6 @@\n )\n from Products.PageTemplates.PageTemplateFile import PageTemplateFile\n \n-import six\n-\n \n manage_addWorkflowPolicyConfigForm = PageTemplateFile(\n     path_join("www", "add_workflow_policy_config_form"), globals()\n@@ -118,8 +115,8 @@ def getPolicyBelow(self):\n     security.declareProtected(ManageWorkflowPolicies, "setPolicyIn")\n \n     def setPolicyIn(self, policy, update_security=False):\n-        if not isinstance(policy, six.string_types):\n-            raise ValueError("Policy must be a six.string_types")\n+        if not isinstance(policy, str):\n+            raise ValueError("Policy must be a string")\n         self.workflow_policy_in = policy\n         if update_security:\n             wtool = getToolByName(self, "portal_workflow")\n@@ -140,7 +137,7 @@ def setPolicyIn(self, policy, update_security=False):\n     security.declareProtected(ManageWorkflowPolicies, "setPolicyBelow")\n \n     def setPolicyBelow(self, policy, update_security=False):\n-        if not isinstance(policy, six.string_types):\n+        if not isinstance(policy, str):\n             raise ValueError("Policy must be a string")\n         self.workflow_policy_below = policy\n         if update_security:\ndiff --git a/Products/CMFPlacefulWorkflow/__init__.py b/Products/CMFPlacefulWorkflow/__init__.py\nindex cf48f75..330c248 100644\n--- a/Products/CMFPlacefulWorkflow/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/__init__.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/adapter.py b/Products/CMFPlacefulWorkflow/adapter.py\nindex 97f7b48..65abee3 100644\n--- a/Products/CMFPlacefulWorkflow/adapter.py\n+++ b/Products/CMFPlacefulWorkflow/adapter.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # Copyright (C) 2008 Ingeniweb\n \n # This program is free software; you can redistribute it and/or modify\n@@ -28,8 +27,6 @@\n from zope.interface import implementer\n from zope.interface import Interface\n \n-import six\n-\n \n @adapter(Interface, IPlacefulMarker)\n @implementer(IWorkflowChain)\n@@ -45,7 +42,7 @@ def PlacefulWorkflowChain(ob, tool):\n     4. if the parent is the portal object or None we stop and ask\n        portal_workflow\n     """\n-    if isinstance(ob, six.string_types):\n+    if isinstance(ob, str):\n         # We are not in an object, then we can only get default from\n         # portal_workflow\n         return ToolWorkflowChain(ob, tool)\ndiff --git a/Products/CMFPlacefulWorkflow/browser/views.py b/Products/CMFPlacefulWorkflow/browser/views.py\nindex a015390..5d3810e 100644\n--- a/Products/CMFPlacefulWorkflow/browser/views.py\n+++ b/Products/CMFPlacefulWorkflow/browser/views.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow import CMFPlacefulWorkflowMessageFactory as _\n from Products.Five import BrowserView\ndiff --git a/Products/CMFPlacefulWorkflow/exportimport/__init__.py b/Products/CMFPlacefulWorkflow/exportimport/__init__.py\nindex 23f1026..fb8ae84 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/exportimport/__init__.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CFMPlacefulWorkflow\n # Copyright (C)2007 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py b/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\nindex c66c21a..6aa042f 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\n+++ b/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorflow\n # Copyright (C)2006 Ingeniweb\n \n@@ -142,7 +141,7 @@ def _initChains(self, node):\n                                 raise\n \n     def _getChain(self, node):\n-        result = super(WorkflowPoliciesXMLAdapter, self)._getChain(node)\n+        result = super()._getChain(node)\n         if result == "":\n             return []\n         return result.split(",")\ndiff --git a/Products/CMFPlacefulWorkflow/global_symbols.py b/Products/CMFPlacefulWorkflow/global_symbols.py\nindex a5e0a56..c8ce2ea 100644\n--- a/Products/CMFPlacefulWorkflow/global_symbols.py\n+++ b/Products/CMFPlacefulWorkflow/global_symbols.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/interfaces.py b/Products/CMFPlacefulWorkflow/interfaces.py\nindex 5a5bab7..e3e0dc5 100644\n--- a/Products/CMFPlacefulWorkflow/interfaces.py\n+++ b/Products/CMFPlacefulWorkflow/interfaces.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/permissions.py b/Products/CMFPlacefulWorkflow/permissions.py\nindex 9ee65a7..525245c 100644\n--- a/Products/CMFPlacefulWorkflow/permissions.py\n+++ b/Products/CMFPlacefulWorkflow/permissions.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n """ Zope 2 permissions\n """\n \ndiff --git a/Products/CMFPlacefulWorkflow/setuphandlers.py b/Products/CMFPlacefulWorkflow/setuphandlers.py\nindex 3279380..94219ba 100644\n--- a/Products/CMFPlacefulWorkflow/setuphandlers.py\n+++ b/Products/CMFPlacefulWorkflow/setuphandlers.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # Copyright (C) 2008 Ingeniweb\n \n # This program is free software; you can redistribute it and/or modify\ndiff --git a/Products/CMFPlacefulWorkflow/testing.py b/Products/CMFPlacefulWorkflow/testing.py\nindex f9788c3..799764d 100644\n--- a/Products/CMFPlacefulWorkflow/testing.py\n+++ b/Products/CMFPlacefulWorkflow/testing.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE\n from plone.app.robotframework.testing import REMOTE_LIBRARY_BUNDLE_FIXTURE\n from plone.app.testing import applyProfile\ndiff --git a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\nindex ae521bc..2f74b5d 100644\n--- a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n+++ b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/tests/__init__.py b/Products/CMFPlacefulWorkflow/tests/__init__.py\nindex 72a4e41..f4adf64 100644\n--- a/Products/CMFPlacefulWorkflow/tests/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/tests/__init__.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\nindex 21450e7..1498915 100644\n--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/tests/test_configlet.py b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\nindex 9273475..e11d2eb 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -48,7 +47,8 @@ def getBrowser(self, logged_in=False):\n             # Add an authorization header using the given or default\n             # credentials """\n             browser.addHeader(\n-                "Authorization", "Basic %s:%s" % (SITE_OWNER_NAME, SITE_OWNER_PASSWORD)\n+                "Authorization",\n+                "Basic {}:{}".format(SITE_OWNER_NAME, SITE_OWNER_PASSWORD),\n             )\n         return browser\n \n@@ -84,7 +84,9 @@ def test_local_mapping_select_acquisition_chain(self):\n         self.assertEqual(browser.url, central_form)\n \n         # Now with a proper policy id.\n-        browser.open(f"{portal_url}/@@placeful-workflow-policy-mapping?wfpid=dummy_policy")\n+        browser.open(\n+            f"{portal_url}/@@placeful-workflow-policy-mapping?wfpid=dummy_policy"\n+        )\n         self.assertEqual(\n             browser.getControl(name="wf.Document:record").value,\n             [\ndiff --git a/Products/CMFPlacefulWorkflow/tests/test_doctests.py b/Products/CMFPlacefulWorkflow/tests/test_doctests.py\nindex 98589f9..fc9d465 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_doctests.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_doctests.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorflow\n # Copyright (C)2006 Ingeniweb\n \ndiff --git a/setup.py b/setup.py\nindex 29b3b22..00b5567 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -37,7 +37,6 @@\n     ),\n     install_requires=[\n         "setuptools",\n-        "six",\n         "zope.component",\n         "zope.interface",\n         "zope.i18nmessageid",\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T23:03:06+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/4129259b8aaa8769719a20b45f84c13691c703c4

zpretty zcml

Files changed:
M Products/CMFPlacefulWorkflow/browser/configure.zcml
M Products/CMFPlacefulWorkflow/configure.zcml
M Products/CMFPlacefulWorkflow/exportimport.zcml
M Products/CMFPlacefulWorkflow/permissions.zcml
M Products/CMFPlacefulWorkflow/profiles.zcml

b'diff --git a/Products/CMFPlacefulWorkflow/browser/configure.zcml b/Products/CMFPlacefulWorkflow/browser/configure.zcml\nindex 88ae9c8..9275cb6 100644\n--- a/Products/CMFPlacefulWorkflow/browser/configure.zcml\n+++ b/Products/CMFPlacefulWorkflow/browser/configure.zcml\n@@ -1,33 +1,34 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n+    xmlns:browser="http://namespaces.zope.org/browser"\n     xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:browser="http://namespaces.zope.org/browser">\n+    >\n \n-    <!-- Policy Config View on Context -->\n-    <browser:page\n-        for="*"\n-        name="placeful-workflow-configuration"\n-        class=".views.PlacefulWorkflowConfiguration"\n-        template="placeful_workflow_configuration.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Policy Config View on Context -->\n+  <browser:page\n+      name="placeful-workflow-configuration"\n+      for="*"\n+      class=".views.PlacefulWorkflowConfiguration"\n+      template="placeful_workflow_configuration.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n-    <!-- Mapping Config View CT to to Workflows -->\n-    <browser:page\n-        for="*"\n-        name="placeful-workflow-policy-mapping"\n-        class=".views.WorkflowPolicyMapping"\n-        template="placeful_workflow_policy_mapping.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Mapping Config View CT to to Workflows -->\n+  <browser:page\n+      name="placeful-workflow-policy-mapping"\n+      for="*"\n+      class=".views.WorkflowPolicyMapping"\n+      template="placeful_workflow_policy_mapping.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n-    <!-- Controlpanel View -->\n-    <browser:page\n-        for="*"\n-        name="workflow-policies-controlpanel"\n-        class=".views.WorkflowPoliciesForm"\n-        template="workflow_policies_controlpanel.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Controlpanel View -->\n+  <browser:page\n+      name="workflow-policies-controlpanel"\n+      for="*"\n+      class=".views.WorkflowPoliciesForm"\n+      template="workflow_policies_controlpanel.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/configure.zcml b/Products/CMFPlacefulWorkflow/configure.zcml\nindex df1d441..c074054 100644\n--- a/Products/CMFPlacefulWorkflow/configure.zcml\n+++ b/Products/CMFPlacefulWorkflow/configure.zcml\n@@ -1,11 +1,13 @@\n-<configure xmlns="http://namespaces.zope.org/zope"\n-    xmlns:zcml="http://namespaces.zope.org/zcml">\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:zcml="http://namespaces.zope.org/zcml"\n+    >\n \n-  <include file="implements.zcml"/>\n-  <include file="exportimport.zcml"/>\n-  <include file="profiles.zcml"/>\n-  <include file="permissions.zcml"/>\n-  <include package=".browser"/>\n+  <include file="implements.zcml" />\n+  <include file="exportimport.zcml" />\n+  <include file="profiles.zcml" />\n+  <include file="permissions.zcml" />\n+  <include package=".browser" />\n \n   <adapter factory=".adapter.PlacefulWorkflowChain" />\n \ndiff --git a/Products/CMFPlacefulWorkflow/exportimport.zcml b/Products/CMFPlacefulWorkflow/exportimport.zcml\nindex 14faf39..afc51a2 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport.zcml\n+++ b/Products/CMFPlacefulWorkflow/exportimport.zcml\n@@ -1,44 +1,46 @@\n <configure\n-   xmlns="http://namespaces.zope.org/zope"\n-   xmlns:five="http://namespaces.zope.org/five"\n-   xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-   i18n_domain="cmfplacefulworkflow">\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:five="http://namespaces.zope.org/five"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n   <adapter\n-     factory=".exportimport.workflow_policies.PlacefulWorkflowXMLAdapter"\n-     provides="Products.GenericSetup.interfaces.IBody"\n-     for=".interfaces.IPlacefulWorkflowTool\n-          Products.GenericSetup.interfaces.ISetupEnviron"\n-     />\n+      factory=".exportimport.workflow_policies.PlacefulWorkflowXMLAdapter"\n+      provides="Products.GenericSetup.interfaces.IBody"\n+      for=".interfaces.IPlacefulWorkflowTool\n+           Products.GenericSetup.interfaces.ISetupEnviron"\n+      />\n \n   <adapter\n-     factory=".exportimport.workflow_policies.WorkflowPoliciesXMLAdapter"\n-     provides="Products.GenericSetup.interfaces.IBody"\n-     for=".interfaces.IWorkflowPolicyDefinition\n-          Products.GenericSetup.interfaces.ISetupEnviron"\n-     />\n+      factory=".exportimport.workflow_policies.WorkflowPoliciesXMLAdapter"\n+      provides="Products.GenericSetup.interfaces.IBody"\n+      for=".interfaces.IWorkflowPolicyDefinition\n+           Products.GenericSetup.interfaces.ISetupEnviron"\n+      />\n \n   <include package="Products.CMFCore" />\n   <five:registerClass\n-     class=".DefaultWorkflowPolicy.DefaultWorkflowPolicyDefinition"\n-     meta_type="WorkflowPolicy"\n-     permission="cmf.ManagePortal"\n-     />\n+      class=".DefaultWorkflowPolicy.DefaultWorkflowPolicyDefinition"\n+      permission="cmf.ManagePortal"\n+      meta_type="WorkflowPolicy"\n+      />\n \n   <genericsetup:importStep\n-     name="placeful_workflow"\n-     title="Placeful Workflow Policies"\n-     description="Import placeful workflow policies."\n-     handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies">\n-    <depends name="typeinfo"/>\n-    <depends name="workflow"/>\n+      name="placeful_workflow"\n+      title="Placeful Workflow Policies"\n+      description="Import placeful workflow policies."\n+      handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n+      >\n+    <depends name="typeinfo" />\n+    <depends name="workflow" />\n   </genericsetup:importStep>\n \n   <genericsetup:exportStep\n-     name="portal_placeful_workflow"\n-     title="Placeful Workflow Policies"\n-     description="Export placeful workflow policies."\n-     handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n-     />\n+      name="portal_placeful_workflow"\n+      title="Placeful Workflow Policies"\n+      description="Export placeful workflow policies."\n+      handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/permissions.zcml b/Products/CMFPlacefulWorkflow/permissions.zcml\nindex 5a9bd6e..59595e8 100644\n--- a/Products/CMFPlacefulWorkflow/permissions.zcml\n+++ b/Products/CMFPlacefulWorkflow/permissions.zcml\n@@ -1,7 +1,11 @@\n-<configure xmlns="http://namespaces.zope.org/zope"\n-    i18n_domain="cmfplacefulworkflow">\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n-  <permission id="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-              title="CMFPlacefulWorkflow: Manage workflow policies" />\n+  <permission\n+      id="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      title="CMFPlacefulWorkflow: Manage workflow policies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles.zcml b/Products/CMFPlacefulWorkflow/profiles.zcml\nindex 175b3ea..3adb4f3 100644\n--- a/Products/CMFPlacefulWorkflow/profiles.zcml\n+++ b/Products/CMFPlacefulWorkflow/profiles.zcml\n@@ -1,58 +1,61 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="cmfplacefulworkflow">\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n   <genericsetup:registerProfile\n-     name="CMFPlacefulWorkflow"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow)"\n-     directory="profiles/default"\n-     description="Add in Plone the capability to change workflow chains for types in every object. Includes a dependency on core Plone types."\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     />\n+      name="CMFPlacefulWorkflow"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow)"\n+      description="Add in Plone the capability to change workflow chains for types in every object. Includes a dependency on core Plone types."\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/default"\n+      />\n \n   <genericsetup:registerProfile\n-     name="base"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow) - no core types dependency"\n-     directory="profiles/base"\n-     description="Add in Plone the capability to change workflow chains for types in every object. With no dependency on core Plone types."\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     post_handler="Products.CMFPlacefulWorkflow.setuphandlers.installMarker"\n-     />\n+      name="base"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow) - no core types dependency"\n+      description="Add in Plone the capability to change workflow chains for types in every object. With no dependency on core Plone types."\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/base"\n+      post_handler="Products.CMFPlacefulWorkflow.setuphandlers.installMarker"\n+      />\n \n   <genericsetup:registerProfile\n-     name="uninstall"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow) [uninstall]"\n-     directory="profiles/uninstall"\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     pre_handler="Products.CMFPlacefulWorkflow.setuphandlers.uninstall"\n-     />\n+      name="uninstall"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow) [uninstall]"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/uninstall"\n+      pre_handler="Products.CMFPlacefulWorkflow.setuphandlers.uninstall"\n+      />\n \n   <genericsetup:upgradeSteps\n-    source="1.4.1"\n-    destination="1000"\n-    profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow">\n+      profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow"\n+      source="1.4.1"\n+      destination="1000"\n+      >\n     <genericsetup:upgradeDepends\n-      title="Update controlpanel logo"\n-      import_profile="Products.CMFPlacefulWorkflow:base"\n-      import_steps="controlpanel"\n-      />\n+        title="Update controlpanel logo"\n+        import_profile="Products.CMFPlacefulWorkflow:base"\n+        import_steps="controlpanel"\n+        />\n     <genericsetup:upgradeDepends\n-      title="Remove skin layer"\n-      import_profile="Products.CMFPlacefulWorkflow:uninstall"\n-      import_steps="skins"\n-      />\n+        title="Remove skin layer"\n+        import_profile="Products.CMFPlacefulWorkflow:uninstall"\n+        import_steps="skins"\n+        />\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n-    source="1000"\n-    destination="1001"\n-    profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow">\n+      profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow"\n+      source="1000"\n+      destination="1001"\n+      >\n     <genericsetup:upgradeDepends\n-      title="Update controlpanel url expression"\n-      import_profile="Products.CMFPlacefulWorkflow:base"\n-      import_steps="controlpanel"\n-      />\n+        title="Update controlpanel url expression"\n+        import_profile="Products.CMFPlacefulWorkflow:base"\n+        import_steps="controlpanel"\n+        />\n   </genericsetup:upgradeSteps>\n \n </configure>\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T23:03:17+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/01490741edb3e75d34c0c3f2b36ab688d4c70909

zpretty xml

Files changed:
M Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml
M Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml
M Products/CMFPlacefulWorkflow/profiles/base/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/profiles/base/toolset.xml
M Products/CMFPlacefulWorkflow/profiles/default/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml
M Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml

b'diff --git a/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml b/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\nindex 9c48195..e68ad23 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\n@@ -1,9 +1,9 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <componentregistry>\n- <adapters/>\n- <utilities>\n-  <utility\n-     interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n-     object="portal_placeful_workflow"/>\n- </utilities>\n+  <adapters />\n+  <utilities>\n+    <utility interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n+             object="portal_placeful_workflow"\n+    />\n+  </utilities>\n </componentregistry>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml b/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\nindex 9abd318..2489210 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\n@@ -1,15 +1,19 @@\n-<?xml version="1.0"?>\n-<object\n-    name="portal_controlpanel"\n-    meta_type="Plone Control Panel Tool"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-    i18n:domain="plone">\n- <configlet\n-  title="Workflow Policies" action_id="placefulworkflow"\n-  appId="CMFPlacefulWorkflow" category="Products" condition_expr=""\n-  icon_expr="string:toolbar-action/workflow"\n-  url_expr="string:$portal_url/@@workflow-policies-controlpanel" visible="True"\n-  i18n:attributes="title">\n-  <permission>Manage portal</permission>\n- </configlet>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Plone Control Panel Tool"\n+        name="portal_controlpanel"\n+        i18n:domain="plone"\n+>\n+  <configlet action_id="placefulworkflow"\n+             appId="CMFPlacefulWorkflow"\n+             category="Products"\n+             condition_expr=""\n+             icon_expr="string:toolbar-action/workflow"\n+             title="Workflow Policies"\n+             url_expr="string:$portal_url/@@workflow-policies-controlpanel"\n+             visible="True"\n+             i18n:attributes="title"\n+  >\n+    <permission>Manage portal</permission>\n+  </configlet>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\nindex 5e97e46..9820946 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1001</version>\n </metadata>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\nindex dd2a5dd..a336a79 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\n@@ -1,5 +1,9 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n-</object>\n\\ No newline at end of file\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+</object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml b/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\nindex a7a32fa..48f1217 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\n@@ -1,7 +1,6 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <tool-setup>\n- <required\n- \ttool_id="portal_placeful_workflow"\n-    class="Products.CMFPlacefulWorkflow.PlacefulWorkflowTool.PlacefulWorkflowTool"\n- />\n+  <required class="Products.CMFPlacefulWorkflow.PlacefulWorkflowTool.PlacefulWorkflowTool"\n+            tool_id="portal_placeful_workflow"\n+  />\n </tool-setup>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\nindex 488320d..f5d0552 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1001</version>\n   <dependencies>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\nindex be46fa9..87f098f 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\n@@ -1,9 +1,21 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n- <object name="intranet" meta_type="WorkflowPolicy"/>\n- <object name="old-plone" meta_type="WorkflowPolicy"/>\n- <object name="one-state" meta_type="WorkflowPolicy"/>\n- <object name="simple-publication" meta_type="WorkflowPolicy"/>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+  <object meta_type="WorkflowPolicy"\n+          name="intranet"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="old-plone"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="one-state"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="simple-publication"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\nindex 205f20e..f2aafce 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\n@@ -1,21 +1,35 @@\n-<?xml version="1.0"?>\n-<object name="intranet" meta_type="WorkflowPolicy">\n- <property name="title">Intranet</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="intranet_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type default_chain="true" type_id="File"/>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="intranet_folder_workflow"/>\n-  </type>\n-  <type default_chain="true" type_id="Image"/>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type type_id="Collection">\n-   <bound-workflow workflow_id="intranet_folder_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="intranet"\n+>\n+  <property name="title">Intranet</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="intranet_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type default_chain="true"\n+          type_id="File"\n+    />\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="intranet_folder_workflow" />\n+    </type>\n+    <type default_chain="true"\n+          type_id="Image"\n+    />\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type type_id="Collection">\n+      <bound-workflow workflow_id="intranet_folder_workflow" />\n+    </type>\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\nindex 744229a..fb9dcfa 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\n@@ -1,21 +1,35 @@\n-<?xml version="1.0"?>\n-<object name="old-plone" meta_type="WorkflowPolicy">\n- <property name="title">Old Plone</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="plone_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type default_chain="true" type_id="File"/>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n-  <type default_chain="true" type_id="Image"/>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type type_id="Collection">\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="old-plone"\n+>\n+  <property name="title">Old Plone</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="plone_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type default_chain="true"\n+          type_id="File"\n+    />\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+    <type default_chain="true"\n+          type_id="Image"\n+    />\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type type_id="Collection">\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\nindex 4f09f03..6189761 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\n@@ -1,19 +1,33 @@\n-<?xml version="1.0"?>\n-<object name="one-state" meta_type="WorkflowPolicy">\n- <property name="title">One state</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="one_state_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type type_id="File">\n-  </type>\n-  <type default_chain="true" type_id="Folder"/>\n-  <type type_id="Image">\n-  </type>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type default_chain="true" type_id="Collection"/>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="one-state"\n+>\n+  <property name="title">One state</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="one_state_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type type_id="File">\n+</type>\n+    <type default_chain="true"\n+          type_id="Folder"\n+    />\n+    <type type_id="Image">\n+</type>\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type default_chain="true"\n+          type_id="Collection"\n+    />\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\nindex 4eb1d30..8f156fc 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\n@@ -1,19 +1,33 @@\n-<?xml version="1.0"?>\n-<object name="simple-publication" meta_type="WorkflowPolicy">\n- <property name="title">Simple publication</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="simple_publication_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type type_id="File">\n-  </type>\n-  <type default_chain="true" type_id="Folder"/>\n-  <type type_id="Image">\n-  </type>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type default_chain="true" type_id="Collection"/>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="simple-publication"\n+>\n+  <property name="title">Simple publication</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="simple_publication_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type type_id="File">\n+</type>\n+    <type default_chain="true"\n+          type_id="Folder"\n+    />\n+    <type type_id="Image">\n+</type>\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type default_chain="true"\n+          type_id="Collection"\n+    />\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml b/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\nindex c4626ea..4373443 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\n@@ -1,11 +1,12 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <rolemap>\n   <permissions>\n-    <permission name="CMFPlacefulWorkflow: Manage workflow policies"\n-                acquire="True">\n-      <role name="Manager"/>\n-      <role name="Owner"/>\n-      <role name="Site Administrator"/>\n+    <permission acquire="True"\n+                name="CMFPlacefulWorkflow: Manage workflow policies"\n+    >\n+      <role name="Manager" />\n+      <role name="Owner" />\n+      <role name="Site Administrator" />\n     </permission>\n   </permissions>\n-</rolemap>\n\\ No newline at end of file\n+</rolemap>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\nindex b1ab8bd..eb0dd55 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\n@@ -1,10 +1,10 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <componentregistry>\n-  <adapters/>\n+  <adapters />\n   <utilities>\n-    <utility\n-        remove="true"\n-        interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n-        object="portal_placeful_workflow"/>\n+    <utility interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n+             object="portal_placeful_workflow"\n+             remove="true"\n+    />\n   </utilities>\n </componentregistry>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\nindex 5265b5c..b74f06f 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\n@@ -1,4 +1,6 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <object name="portal_controlpanel">\n-  <configlet action_id="placefulworkflow" remove="true" />\n+  <configlet action_id="placefulworkflow"\n+             remove="true"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\nindex 8590785..f768b5a 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1000</version>\n </metadata>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\nindex 91fea6e..3311f84 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\n@@ -1,11 +1,15 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <object name="portal_skins">\n   <!-- Note: the skin layer is no longer added, since version 3.0.0a1.\n        But we keep this uninstall code for older versions and use it as upgrade step. -->\n-  <object name="CMFPlacefulWorkflow" remove="true" />\n+  <object name="CMFPlacefulWorkflow"\n+          remove="true"\n+  />\n \n   <skin-path name="*">\n-    <layer name="CMFPlacefulWorkflow" remove="true" />\n+    <layer name="CMFPlacefulWorkflow"\n+           remove="true"\n+    />\n   </skin-path>\n \n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\nindex 33b3b89..c33ef65 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\n@@ -1,4 +1,4 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <tool-setup>\n   <forbidden tool_id="portal_placeful_workflow" />\n </tool-setup>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\nindex e659360..ffd01bf 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\n@@ -1,8 +1,9 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <export-steps>\n- <export-step id="portal_placeful_workflow"\n-              handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n-              title="Placeful Workflow Policies">\n+  <export-step id="portal_placeful_workflow"\n+               handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n+               title="Placeful Workflow Policies"\n+  >\n    Export placeful workflow policies.\n  </export-step>\n </export-steps>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\nindex 65b9d1b..058a15f 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\n@@ -1,9 +1,11 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <import-steps>\n- <import-step id="portal_placeful_workflow" version="20070608-01"\n-              handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n-              title="Placeful Workflow Policies">\n-  <dependency step="workflow"/>\n+  <import-step id="portal_placeful_workflow"\n+               handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n+               title="Placeful Workflow Policies"\n+               version="20070608-01"\n+  >\n+    <dependency step="workflow" />\n     Import placeful workflow policies.\n- </import-step>\n+  </import-step>\n </import-steps>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\nindex 93fa6b1..d25ffc4 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\n@@ -1,6 +1,12 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n- <object name="baz_policy" meta_type="WorkflowPolicy"/>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+  <object meta_type="WorkflowPolicy"\n+          name="baz_policy"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\nindex 9eb5d27..3a0e78f 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\n@@ -1,19 +1,21 @@\n-<?xml version="1.0"?>\n-<object name="baz_policy" meta_type="WorkflowPolicy">\n- <property name="title">Baz Policy</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </default>\n-  <type type_id="Document"/>\n-  <type type_id="Event">\n-  </type>\n-  <type type_id="File">\n-   <bound-workflow workflow_id="plone_workflow"/>\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="plone_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="baz_policy"\n+>\n+  <property name="title">Baz Policy</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </default>\n+    <type type_id="Document" />\n+    <type type_id="Event">\n+</type>\n+    <type type_id="File">\n+      <bound-workflow workflow_id="plone_workflow" />\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="plone_workflow" />\n+    </type>\n+  </bindings>\n </object>\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T23:09:48+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/928b7243396bd7792f78ad5c140e314c02d7752f

Use plone.base

Files changed:
M Products/CMFPlacefulWorkflow/adapter.py
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M setup.py

b'diff --git a/Products/CMFPlacefulWorkflow/adapter.py b/Products/CMFPlacefulWorkflow/adapter.py\nindex 65abee3..3a5e014 100644\n--- a/Products/CMFPlacefulWorkflow/adapter.py\n+++ b/Products/CMFPlacefulWorkflow/adapter.py\n@@ -17,11 +17,11 @@\n from Acquisition import aq_base\n from Acquisition import aq_inner\n from Acquisition import aq_parent\n+from plone.base.interfaces import IWorkflowChain\n+from plone.base.utils import base_hasattr\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker\n from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id\n-from Products.CMFPlone.interfaces import IWorkflowChain\n-from Products.CMFPlone.utils import base_hasattr\n from Products.CMFPlone.workflow import ToolWorkflowChain\n from zope.component import adapter\n from zope.interface import implementer\ndiff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\nindex 1498915..70d3694 100644\n--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n@@ -22,6 +22,7 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.base.utils import get_installer\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker\n from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import (  # noqa: E501\n@@ -30,7 +31,6 @@\n from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import (  # noqa: E501\n     CMFPlacefulWorkflowTestCase,\n )\n-from Products.CMFPlone.utils import get_installer\n \n \n _edit_permissions = []\ndiff --git a/setup.py b/setup.py\nindex 00b5567..4db3d54 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -36,12 +36,13 @@\n         test=["plone.app.testing", "zope.testing", "plone.app.robotframework"],\n     ),\n     install_requires=[\n-        "setuptools",\n-        "zope.component",\n-        "zope.interface",\n-        "zope.i18nmessageid",\n+        "plone.base",\n         "Products.CMFCore",\n         "Products.CMFPlone",\n         "Products.GenericSetup >= 2.0",\n+        "setuptools",\n+        "zope.component",\n+        "zope.i18nmessageid",\n+        "zope.interface",\n     ],\n )\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T23:10:40+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/680dfba307d4fa3ea13a1028ad8120f203e7aa55

Make tests/__init__.py empty.

Contained only old cruft.

Files changed:
M Products/CMFPlacefulWorkflow/tests/__init__.py

b'diff --git a/Products/CMFPlacefulWorkflow/tests/__init__.py b/Products/CMFPlacefulWorkflow/tests/__init__.py\nindex f4adf64..e69de29 100644\n--- a/Products/CMFPlacefulWorkflow/tests/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/tests/__init__.py\n@@ -1,25 +0,0 @@\n-# CMFPlacefulWorkflow\n-# Copyright (C)2005 Ingeniweb\n-\n-# This program is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 2 of the License, or\n-# (at your option) any later version.\n-\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n-\n-# You should have received a copy of the GNU General Public License\n-# along with this program; see the file COPYING. If not, write to the\n-# Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n-"""\\\n-Unit test package for CMFPlone\n-\n-To run all tests type \'python runalltests.py\' or bin/zopectl test Products/CMFPlacefulWorkflow\n-"""\n-__version__ = "$Revision: 36863 $"\n-# $Source: /cvsroot/ingeniweb/CMFPlacefulWorkflow/tests/__init__.py,v $\n-# $Id: __init__.py 36863 2007-02-05 21:30:44Z encolpe $\n-__docformat__ = "restructuredtext"\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-12T23:15:49+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/39ccc924b5488afe552f6ada1ce1861c251481fc

Removed test dependency on plone.app.robotframework.

Files changed:
A news/44.bugfix
M Products/CMFPlacefulWorkflow/testing.py
M setup.py

b'diff --git a/Products/CMFPlacefulWorkflow/testing.py b/Products/CMFPlacefulWorkflow/testing.py\nindex 799764d..feabb1c 100644\n--- a/Products/CMFPlacefulWorkflow/testing.py\n+++ b/Products/CMFPlacefulWorkflow/testing.py\n@@ -1,5 +1,4 @@\n from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE\n-from plone.app.robotframework.testing import REMOTE_LIBRARY_BUNDLE_FIXTURE\n from plone.app.testing import applyProfile\n from plone.app.testing import FunctionalTesting\n from plone.app.testing import IntegrationTesting\n@@ -54,13 +53,3 @@ def setUpPloneSite(self, portal):\n     bases=(PRODUCTS_CMFPLACEFULWORKFLOW_FIXTURE,),\n     name="ProductsCmfplacefulworkflowLayer:FunctionalTesting",\n )\n-\n-\n-PRODUCTS_CMFPLACEFULWORKFLOW_ACCEPTANCE_TESTING = FunctionalTesting(\n-    bases=(\n-        PRODUCTS_CMFPLACEFULWORKFLOW_FIXTURE,\n-        REMOTE_LIBRARY_BUNDLE_FIXTURE,\n-        z2.ZSERVER_FIXTURE,\n-    ),\n-    name="ProductsCmfplacefulworkflowLayer:AcceptanceTesting",\n-)\ndiff --git a/news/44.bugfix b/news/44.bugfix\nnew file mode 100644\nindex 0000000..2e30c16\n--- /dev/null\n+++ b/news/44.bugfix\n@@ -0,0 +1 @@\n+Cleanup: remove six, use plone.base, zpretty.  [maurits]\ndiff --git a/setup.py b/setup.py\nindex 4db3d54..f3f7a37 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -33,7 +33,7 @@\n     include_package_data=True,\n     zip_safe=False,\n     extras_require=dict(\n-        test=["plone.app.testing", "zope.testing", "plone.app.robotframework"],\n+        test=["plone.app.testing", "zope.testing"],\n     ),\n     install_requires=[\n         "plone.base",\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-13T11:21:30+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/a68dfbc5716e641cb14053ba1bb6669c010b54d8

Remove transitive dependencies that we get via plone.base.

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex f3f7a37..8dd9882 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -37,12 +37,7 @@\n     ),\n     install_requires=[\n         "plone.base",\n-        "Products.CMFCore",\n         "Products.CMFPlone",\n-        "Products.GenericSetup >= 2.0",\n         "setuptools",\n-        "zope.component",\n-        "zope.i18nmessageid",\n-        "zope.interface",\n     ],\n )\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-12-13T13:32:17+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/5573d63a5c3e79c97f748846138c3008c712578d

Merge pull request #44 from plone/maurits-no-six

Cleanup: remove six, use plone.base, zpretty

Files changed:
A news/44.bugfix
M Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py
M Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py
M Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py
M Products/CMFPlacefulWorkflow/__init__.py
M Products/CMFPlacefulWorkflow/adapter.py
M Products/CMFPlacefulWorkflow/browser/configure.zcml
M Products/CMFPlacefulWorkflow/browser/views.py
M Products/CMFPlacefulWorkflow/configure.zcml
M Products/CMFPlacefulWorkflow/exportimport.zcml
M Products/CMFPlacefulWorkflow/exportimport/__init__.py
M Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py
M Products/CMFPlacefulWorkflow/global_symbols.py
M Products/CMFPlacefulWorkflow/interfaces.py
M Products/CMFPlacefulWorkflow/permissions.py
M Products/CMFPlacefulWorkflow/permissions.zcml
M Products/CMFPlacefulWorkflow/profiles.zcml
M Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml
M Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml
M Products/CMFPlacefulWorkflow/profiles/base/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/profiles/base/toolset.xml
M Products/CMFPlacefulWorkflow/profiles/default/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml
M Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml
M Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml
M Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml
M Products/CMFPlacefulWorkflow/setuphandlers.py
M Products/CMFPlacefulWorkflow/testing.py
M Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py
M Products/CMFPlacefulWorkflow/tests/__init__.py
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml
M Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml
M Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py
M Products/CMFPlacefulWorkflow/tests/test_configlet.py
M Products/CMFPlacefulWorkflow/tests/test_doctests.py
M setup.py

b'diff --git a/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py b/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\nindex 760d18d..ada3bc0 100644\n--- a/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\n+++ b/Products/CMFPlacefulWorkflow/DefaultWorkflowPolicy.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -34,8 +33,6 @@\n from Products.PageTemplates.PageTemplateFile import PageTemplateFile\n from zope.interface import implementer\n \n-import six\n-\n \n DEFAULT_CHAIN = "(Default)"\n _MARKER = "_MARKER"\n@@ -200,7 +197,7 @@ def getChainFor(self, ob, managescreen=False):\n         """\n \n         cbt = self._chains_by_type\n-        if isinstance(ob, six.string_types):\n+        if isinstance(ob, str):\n             pt = ob\n         elif hasattr(aq_base(ob), "_getPortalTypeName"):\n             pt = ob._getPortalTypeName()\n@@ -215,7 +212,7 @@ def getChainFor(self, ob, managescreen=False):\n             chain = cbt.get(pt, _MARKER)\n \n         # Backwards compatibility: before chain was a string, not a list\n-        if chain is not _MARKER and isinstance(chain, six.string_types):\n+        if chain is not _MARKER and isinstance(chain, str):\n             chain = map(lambda x: x.strip(), chain.split(","))\n \n         Log.debug("Chain founded in policy %s", chain)\n@@ -239,7 +236,7 @@ def setDefaultChain(self, default_chain, REQUEST=None):\n         """Sets the default chain for this tool."""\n         wftool = getToolByName(self, "portal_workflow")\n \n-        if isinstance(default_chain, six.string_types):\n+        if isinstance(default_chain, str):\n             default_chain = map(lambda x: x.strip(), default_chain.split(","))\n         ids = []\n         for wf_id in default_chain:\n@@ -282,7 +279,7 @@ def setChain(self, portal_type, chain, REQUEST=None):\n         if portal_type not in [pt.id for pt in self._listTypeInfo()]:\n             raise ValueError("\'%s\' is not a valid portal type." % portal_type)\n \n-        if isinstance(chain, six.string_types):\n+        if isinstance(chain, str):\n             chain = [i.strip() for i in chain.split(",")]\n \n         wftool = getToolByName(self, "portal_workflow")\n@@ -300,7 +297,9 @@ def setChain(self, portal_type, chain, REQUEST=None):\n             for wf_id in chain:\n                 if wf_id != "" and not wftool.getWorkflowById(wf_id):\n                     raise ValueError(\n-                        "\'%s\' is not a workflow ID.\\nchain: %s" % (wf_id, repr(chain))\n+                        "\'{}\' is not a workflow ID.\\nchain: {}".format(\n+                            wf_id, repr(chain)\n+                        )\n                     )\n             cbt[portal_type] = tuple(chain)\n \ndiff --git a/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py b/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\nindex c48caf7..3892cf4 100644\n--- a/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\n+++ b/Products/CMFPlacefulWorkflow/PlacefulWorkflowTool.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\nindex d0f70a3..19df32d 100644\n--- a/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\n+++ b/Products/CMFPlacefulWorkflow/WorkflowPolicyConfig.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -34,8 +33,6 @@\n )\n from Products.PageTemplates.PageTemplateFile import PageTemplateFile\n \n-import six\n-\n \n manage_addWorkflowPolicyConfigForm = PageTemplateFile(\n     path_join("www", "add_workflow_policy_config_form"), globals()\n@@ -118,8 +115,8 @@ def getPolicyBelow(self):\n     security.declareProtected(ManageWorkflowPolicies, "setPolicyIn")\n \n     def setPolicyIn(self, policy, update_security=False):\n-        if not isinstance(policy, six.string_types):\n-            raise ValueError("Policy must be a six.string_types")\n+        if not isinstance(policy, str):\n+            raise ValueError("Policy must be a string")\n         self.workflow_policy_in = policy\n         if update_security:\n             wtool = getToolByName(self, "portal_workflow")\n@@ -140,7 +137,7 @@ def setPolicyIn(self, policy, update_security=False):\n     security.declareProtected(ManageWorkflowPolicies, "setPolicyBelow")\n \n     def setPolicyBelow(self, policy, update_security=False):\n-        if not isinstance(policy, six.string_types):\n+        if not isinstance(policy, str):\n             raise ValueError("Policy must be a string")\n         self.workflow_policy_below = policy\n         if update_security:\ndiff --git a/Products/CMFPlacefulWorkflow/__init__.py b/Products/CMFPlacefulWorkflow/__init__.py\nindex cf48f75..330c248 100644\n--- a/Products/CMFPlacefulWorkflow/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/__init__.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/adapter.py b/Products/CMFPlacefulWorkflow/adapter.py\nindex 97f7b48..3a5e014 100644\n--- a/Products/CMFPlacefulWorkflow/adapter.py\n+++ b/Products/CMFPlacefulWorkflow/adapter.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # Copyright (C) 2008 Ingeniweb\n \n # This program is free software; you can redistribute it and/or modify\n@@ -18,18 +17,16 @@\n from Acquisition import aq_base\n from Acquisition import aq_inner\n from Acquisition import aq_parent\n+from plone.base.interfaces import IWorkflowChain\n+from plone.base.utils import base_hasattr\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker\n from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import WorkflowPolicyConfig_id\n-from Products.CMFPlone.interfaces import IWorkflowChain\n-from Products.CMFPlone.utils import base_hasattr\n from Products.CMFPlone.workflow import ToolWorkflowChain\n from zope.component import adapter\n from zope.interface import implementer\n from zope.interface import Interface\n \n-import six\n-\n \n @adapter(Interface, IPlacefulMarker)\n @implementer(IWorkflowChain)\n@@ -45,7 +42,7 @@ def PlacefulWorkflowChain(ob, tool):\n     4. if the parent is the portal object or None we stop and ask\n        portal_workflow\n     """\n-    if isinstance(ob, six.string_types):\n+    if isinstance(ob, str):\n         # We are not in an object, then we can only get default from\n         # portal_workflow\n         return ToolWorkflowChain(ob, tool)\ndiff --git a/Products/CMFPlacefulWorkflow/browser/configure.zcml b/Products/CMFPlacefulWorkflow/browser/configure.zcml\nindex 88ae9c8..9275cb6 100644\n--- a/Products/CMFPlacefulWorkflow/browser/configure.zcml\n+++ b/Products/CMFPlacefulWorkflow/browser/configure.zcml\n@@ -1,33 +1,34 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n+    xmlns:browser="http://namespaces.zope.org/browser"\n     xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:browser="http://namespaces.zope.org/browser">\n+    >\n \n-    <!-- Policy Config View on Context -->\n-    <browser:page\n-        for="*"\n-        name="placeful-workflow-configuration"\n-        class=".views.PlacefulWorkflowConfiguration"\n-        template="placeful_workflow_configuration.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Policy Config View on Context -->\n+  <browser:page\n+      name="placeful-workflow-configuration"\n+      for="*"\n+      class=".views.PlacefulWorkflowConfiguration"\n+      template="placeful_workflow_configuration.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n-    <!-- Mapping Config View CT to to Workflows -->\n-    <browser:page\n-        for="*"\n-        name="placeful-workflow-policy-mapping"\n-        class=".views.WorkflowPolicyMapping"\n-        template="placeful_workflow_policy_mapping.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Mapping Config View CT to to Workflows -->\n+  <browser:page\n+      name="placeful-workflow-policy-mapping"\n+      for="*"\n+      class=".views.WorkflowPolicyMapping"\n+      template="placeful_workflow_policy_mapping.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n-    <!-- Controlpanel View -->\n-    <browser:page\n-        for="*"\n-        name="workflow-policies-controlpanel"\n-        class=".views.WorkflowPoliciesForm"\n-        template="workflow_policies_controlpanel.pt"\n-        permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-        />\n+  <!-- Controlpanel View -->\n+  <browser:page\n+      name="workflow-policies-controlpanel"\n+      for="*"\n+      class=".views.WorkflowPoliciesForm"\n+      template="workflow_policies_controlpanel.pt"\n+      permission="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/browser/views.py b/Products/CMFPlacefulWorkflow/browser/views.py\nindex a015390..5d3810e 100644\n--- a/Products/CMFPlacefulWorkflow/browser/views.py\n+++ b/Products/CMFPlacefulWorkflow/browser/views.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow import CMFPlacefulWorkflowMessageFactory as _\n from Products.Five import BrowserView\ndiff --git a/Products/CMFPlacefulWorkflow/configure.zcml b/Products/CMFPlacefulWorkflow/configure.zcml\nindex df1d441..c074054 100644\n--- a/Products/CMFPlacefulWorkflow/configure.zcml\n+++ b/Products/CMFPlacefulWorkflow/configure.zcml\n@@ -1,11 +1,13 @@\n-<configure xmlns="http://namespaces.zope.org/zope"\n-    xmlns:zcml="http://namespaces.zope.org/zcml">\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:zcml="http://namespaces.zope.org/zcml"\n+    >\n \n-  <include file="implements.zcml"/>\n-  <include file="exportimport.zcml"/>\n-  <include file="profiles.zcml"/>\n-  <include file="permissions.zcml"/>\n-  <include package=".browser"/>\n+  <include file="implements.zcml" />\n+  <include file="exportimport.zcml" />\n+  <include file="profiles.zcml" />\n+  <include file="permissions.zcml" />\n+  <include package=".browser" />\n \n   <adapter factory=".adapter.PlacefulWorkflowChain" />\n \ndiff --git a/Products/CMFPlacefulWorkflow/exportimport.zcml b/Products/CMFPlacefulWorkflow/exportimport.zcml\nindex 14faf39..afc51a2 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport.zcml\n+++ b/Products/CMFPlacefulWorkflow/exportimport.zcml\n@@ -1,44 +1,46 @@\n <configure\n-   xmlns="http://namespaces.zope.org/zope"\n-   xmlns:five="http://namespaces.zope.org/five"\n-   xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-   i18n_domain="cmfplacefulworkflow">\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:five="http://namespaces.zope.org/five"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n   <adapter\n-     factory=".exportimport.workflow_policies.PlacefulWorkflowXMLAdapter"\n-     provides="Products.GenericSetup.interfaces.IBody"\n-     for=".interfaces.IPlacefulWorkflowTool\n-          Products.GenericSetup.interfaces.ISetupEnviron"\n-     />\n+      factory=".exportimport.workflow_policies.PlacefulWorkflowXMLAdapter"\n+      provides="Products.GenericSetup.interfaces.IBody"\n+      for=".interfaces.IPlacefulWorkflowTool\n+           Products.GenericSetup.interfaces.ISetupEnviron"\n+      />\n \n   <adapter\n-     factory=".exportimport.workflow_policies.WorkflowPoliciesXMLAdapter"\n-     provides="Products.GenericSetup.interfaces.IBody"\n-     for=".interfaces.IWorkflowPolicyDefinition\n-          Products.GenericSetup.interfaces.ISetupEnviron"\n-     />\n+      factory=".exportimport.workflow_policies.WorkflowPoliciesXMLAdapter"\n+      provides="Products.GenericSetup.interfaces.IBody"\n+      for=".interfaces.IWorkflowPolicyDefinition\n+           Products.GenericSetup.interfaces.ISetupEnviron"\n+      />\n \n   <include package="Products.CMFCore" />\n   <five:registerClass\n-     class=".DefaultWorkflowPolicy.DefaultWorkflowPolicyDefinition"\n-     meta_type="WorkflowPolicy"\n-     permission="cmf.ManagePortal"\n-     />\n+      class=".DefaultWorkflowPolicy.DefaultWorkflowPolicyDefinition"\n+      permission="cmf.ManagePortal"\n+      meta_type="WorkflowPolicy"\n+      />\n \n   <genericsetup:importStep\n-     name="placeful_workflow"\n-     title="Placeful Workflow Policies"\n-     description="Import placeful workflow policies."\n-     handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies">\n-    <depends name="typeinfo"/>\n-    <depends name="workflow"/>\n+      name="placeful_workflow"\n+      title="Placeful Workflow Policies"\n+      description="Import placeful workflow policies."\n+      handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n+      >\n+    <depends name="typeinfo" />\n+    <depends name="workflow" />\n   </genericsetup:importStep>\n \n   <genericsetup:exportStep\n-     name="portal_placeful_workflow"\n-     title="Placeful Workflow Policies"\n-     description="Export placeful workflow policies."\n-     handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n-     />\n+      name="portal_placeful_workflow"\n+      title="Placeful Workflow Policies"\n+      description="Export placeful workflow policies."\n+      handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/exportimport/__init__.py b/Products/CMFPlacefulWorkflow/exportimport/__init__.py\nindex 23f1026..fb8ae84 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/exportimport/__init__.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CFMPlacefulWorkflow\n # Copyright (C)2007 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py b/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\nindex c66c21a..6aa042f 100644\n--- a/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\n+++ b/Products/CMFPlacefulWorkflow/exportimport/workflow_policies.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorflow\n # Copyright (C)2006 Ingeniweb\n \n@@ -142,7 +141,7 @@ def _initChains(self, node):\n                                 raise\n \n     def _getChain(self, node):\n-        result = super(WorkflowPoliciesXMLAdapter, self)._getChain(node)\n+        result = super()._getChain(node)\n         if result == "":\n             return []\n         return result.split(",")\ndiff --git a/Products/CMFPlacefulWorkflow/global_symbols.py b/Products/CMFPlacefulWorkflow/global_symbols.py\nindex a5e0a56..c8ce2ea 100644\n--- a/Products/CMFPlacefulWorkflow/global_symbols.py\n+++ b/Products/CMFPlacefulWorkflow/global_symbols.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/interfaces.py b/Products/CMFPlacefulWorkflow/interfaces.py\nindex 5a5bab7..e3e0dc5 100644\n--- a/Products/CMFPlacefulWorkflow/interfaces.py\n+++ b/Products/CMFPlacefulWorkflow/interfaces.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/permissions.py b/Products/CMFPlacefulWorkflow/permissions.py\nindex 9ee65a7..525245c 100644\n--- a/Products/CMFPlacefulWorkflow/permissions.py\n+++ b/Products/CMFPlacefulWorkflow/permissions.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n """ Zope 2 permissions\n """\n \ndiff --git a/Products/CMFPlacefulWorkflow/permissions.zcml b/Products/CMFPlacefulWorkflow/permissions.zcml\nindex 5a9bd6e..59595e8 100644\n--- a/Products/CMFPlacefulWorkflow/permissions.zcml\n+++ b/Products/CMFPlacefulWorkflow/permissions.zcml\n@@ -1,7 +1,11 @@\n-<configure xmlns="http://namespaces.zope.org/zope"\n-    i18n_domain="cmfplacefulworkflow">\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n-  <permission id="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n-              title="CMFPlacefulWorkflow: Manage workflow policies" />\n+  <permission\n+      id="CMFPlacefulWorkflow.ManageWorkflowPolicies"\n+      title="CMFPlacefulWorkflow: Manage workflow policies"\n+      />\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles.zcml b/Products/CMFPlacefulWorkflow/profiles.zcml\nindex 175b3ea..3adb4f3 100644\n--- a/Products/CMFPlacefulWorkflow/profiles.zcml\n+++ b/Products/CMFPlacefulWorkflow/profiles.zcml\n@@ -1,58 +1,61 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="cmfplacefulworkflow">\n+    i18n_domain="cmfplacefulworkflow"\n+    >\n \n   <genericsetup:registerProfile\n-     name="CMFPlacefulWorkflow"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow)"\n-     directory="profiles/default"\n-     description="Add in Plone the capability to change workflow chains for types in every object. Includes a dependency on core Plone types."\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     />\n+      name="CMFPlacefulWorkflow"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow)"\n+      description="Add in Plone the capability to change workflow chains for types in every object. Includes a dependency on core Plone types."\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/default"\n+      />\n \n   <genericsetup:registerProfile\n-     name="base"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow) - no core types dependency"\n-     directory="profiles/base"\n-     description="Add in Plone the capability to change workflow chains for types in every object. With no dependency on core Plone types."\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     post_handler="Products.CMFPlacefulWorkflow.setuphandlers.installMarker"\n-     />\n+      name="base"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow) - no core types dependency"\n+      description="Add in Plone the capability to change workflow chains for types in every object. With no dependency on core Plone types."\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/base"\n+      post_handler="Products.CMFPlacefulWorkflow.setuphandlers.installMarker"\n+      />\n \n   <genericsetup:registerProfile\n-     name="uninstall"\n-     title="Workflow Policy Support (CMFPlacefulWorkflow) [uninstall]"\n-     directory="profiles/uninstall"\n-     provides="Products.GenericSetup.interfaces.EXTENSION"\n-     pre_handler="Products.CMFPlacefulWorkflow.setuphandlers.uninstall"\n-     />\n+      name="uninstall"\n+      title="Workflow Policy Support (CMFPlacefulWorkflow) [uninstall]"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/uninstall"\n+      pre_handler="Products.CMFPlacefulWorkflow.setuphandlers.uninstall"\n+      />\n \n   <genericsetup:upgradeSteps\n-    source="1.4.1"\n-    destination="1000"\n-    profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow">\n+      profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow"\n+      source="1.4.1"\n+      destination="1000"\n+      >\n     <genericsetup:upgradeDepends\n-      title="Update controlpanel logo"\n-      import_profile="Products.CMFPlacefulWorkflow:base"\n-      import_steps="controlpanel"\n-      />\n+        title="Update controlpanel logo"\n+        import_profile="Products.CMFPlacefulWorkflow:base"\n+        import_steps="controlpanel"\n+        />\n     <genericsetup:upgradeDepends\n-      title="Remove skin layer"\n-      import_profile="Products.CMFPlacefulWorkflow:uninstall"\n-      import_steps="skins"\n-      />\n+        title="Remove skin layer"\n+        import_profile="Products.CMFPlacefulWorkflow:uninstall"\n+        import_steps="skins"\n+        />\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n-    source="1000"\n-    destination="1001"\n-    profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow">\n+      profile="Products.CMFPlacefulWorkflow:CMFPlacefulWorkflow"\n+      source="1000"\n+      destination="1001"\n+      >\n     <genericsetup:upgradeDepends\n-      title="Update controlpanel url expression"\n-      import_profile="Products.CMFPlacefulWorkflow:base"\n-      import_steps="controlpanel"\n-      />\n+        title="Update controlpanel url expression"\n+        import_profile="Products.CMFPlacefulWorkflow:base"\n+        import_steps="controlpanel"\n+        />\n   </genericsetup:upgradeSteps>\n \n </configure>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml b/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\nindex 9c48195..e68ad23 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/componentregistry.xml\n@@ -1,9 +1,9 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <componentregistry>\n- <adapters/>\n- <utilities>\n-  <utility\n-     interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n-     object="portal_placeful_workflow"/>\n- </utilities>\n+  <adapters />\n+  <utilities>\n+    <utility interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n+             object="portal_placeful_workflow"\n+    />\n+  </utilities>\n </componentregistry>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml b/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\nindex 9abd318..2489210 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/controlpanel.xml\n@@ -1,15 +1,19 @@\n-<?xml version="1.0"?>\n-<object\n-    name="portal_controlpanel"\n-    meta_type="Plone Control Panel Tool"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-    i18n:domain="plone">\n- <configlet\n-  title="Workflow Policies" action_id="placefulworkflow"\n-  appId="CMFPlacefulWorkflow" category="Products" condition_expr=""\n-  icon_expr="string:toolbar-action/workflow"\n-  url_expr="string:$portal_url/@@workflow-policies-controlpanel" visible="True"\n-  i18n:attributes="title">\n-  <permission>Manage portal</permission>\n- </configlet>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Plone Control Panel Tool"\n+        name="portal_controlpanel"\n+        i18n:domain="plone"\n+>\n+  <configlet action_id="placefulworkflow"\n+             appId="CMFPlacefulWorkflow"\n+             category="Products"\n+             condition_expr=""\n+             icon_expr="string:toolbar-action/workflow"\n+             title="Workflow Policies"\n+             url_expr="string:$portal_url/@@workflow-policies-controlpanel"\n+             visible="True"\n+             i18n:attributes="title"\n+  >\n+    <permission>Manage portal</permission>\n+  </configlet>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\nindex 5e97e46..9820946 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1001</version>\n </metadata>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\nindex dd2a5dd..a336a79 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/portal_placeful_workflow.xml\n@@ -1,5 +1,9 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n-</object>\n\\ No newline at end of file\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+</object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml b/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\nindex a7a32fa..48f1217 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/base/toolset.xml\n@@ -1,7 +1,6 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <tool-setup>\n- <required\n- \ttool_id="portal_placeful_workflow"\n-    class="Products.CMFPlacefulWorkflow.PlacefulWorkflowTool.PlacefulWorkflowTool"\n- />\n+  <required class="Products.CMFPlacefulWorkflow.PlacefulWorkflowTool.PlacefulWorkflowTool"\n+            tool_id="portal_placeful_workflow"\n+  />\n </tool-setup>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\nindex 488320d..f5d0552 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1001</version>\n   <dependencies>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\nindex be46fa9..87f098f 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow.xml\n@@ -1,9 +1,21 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n- <object name="intranet" meta_type="WorkflowPolicy"/>\n- <object name="old-plone" meta_type="WorkflowPolicy"/>\n- <object name="one-state" meta_type="WorkflowPolicy"/>\n- <object name="simple-publication" meta_type="WorkflowPolicy"/>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+  <object meta_type="WorkflowPolicy"\n+          name="intranet"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="old-plone"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="one-state"\n+  />\n+  <object meta_type="WorkflowPolicy"\n+          name="simple-publication"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\nindex 205f20e..f2aafce 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/intranet.xml\n@@ -1,21 +1,35 @@\n-<?xml version="1.0"?>\n-<object name="intranet" meta_type="WorkflowPolicy">\n- <property name="title">Intranet</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="intranet_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type default_chain="true" type_id="File"/>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="intranet_folder_workflow"/>\n-  </type>\n-  <type default_chain="true" type_id="Image"/>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type type_id="Collection">\n-   <bound-workflow workflow_id="intranet_folder_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="intranet"\n+>\n+  <property name="title">Intranet</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="intranet_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type default_chain="true"\n+          type_id="File"\n+    />\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="intranet_folder_workflow" />\n+    </type>\n+    <type default_chain="true"\n+          type_id="Image"\n+    />\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type type_id="Collection">\n+      <bound-workflow workflow_id="intranet_folder_workflow" />\n+    </type>\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\nindex 744229a..fb9dcfa 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/old-plone.xml\n@@ -1,21 +1,35 @@\n-<?xml version="1.0"?>\n-<object name="old-plone" meta_type="WorkflowPolicy">\n- <property name="title">Old Plone</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="plone_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type default_chain="true" type_id="File"/>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n-  <type default_chain="true" type_id="Image"/>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type type_id="Collection">\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="old-plone"\n+>\n+  <property name="title">Old Plone</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="plone_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type default_chain="true"\n+          type_id="File"\n+    />\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+    <type default_chain="true"\n+          type_id="Image"\n+    />\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type type_id="Collection">\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\nindex 4f09f03..6189761 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/one-state.xml\n@@ -1,19 +1,33 @@\n-<?xml version="1.0"?>\n-<object name="one-state" meta_type="WorkflowPolicy">\n- <property name="title">One state</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="one_state_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type type_id="File">\n-  </type>\n-  <type default_chain="true" type_id="Folder"/>\n-  <type type_id="Image">\n-  </type>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type default_chain="true" type_id="Collection"/>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="one-state"\n+>\n+  <property name="title">One state</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="one_state_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type type_id="File">\n+</type>\n+    <type default_chain="true"\n+          type_id="Folder"\n+    />\n+    <type type_id="Image">\n+</type>\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type default_chain="true"\n+          type_id="Collection"\n+    />\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\nindex 4eb1d30..8f156fc 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/portal_placeful_workflow/simple-publication.xml\n@@ -1,19 +1,33 @@\n-<?xml version="1.0"?>\n-<object name="simple-publication" meta_type="WorkflowPolicy">\n- <property name="title">Simple publication</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="simple_publication_workflow"/>\n-  </default>\n-  <type default_chain="true" type_id="Document"/>\n-  <type default_chain="true" type_id="Event"/>\n-  <type type_id="File">\n-  </type>\n-  <type default_chain="true" type_id="Folder"/>\n-  <type type_id="Image">\n-  </type>\n-  <type default_chain="true" type_id="Link"/>\n-  <type default_chain="true" type_id="News Item"/>\n-  <type default_chain="true" type_id="Collection"/>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="simple-publication"\n+>\n+  <property name="title">Simple publication</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="simple_publication_workflow" />\n+    </default>\n+    <type default_chain="true"\n+          type_id="Document"\n+    />\n+    <type default_chain="true"\n+          type_id="Event"\n+    />\n+    <type type_id="File">\n+</type>\n+    <type default_chain="true"\n+          type_id="Folder"\n+    />\n+    <type type_id="Image">\n+</type>\n+    <type default_chain="true"\n+          type_id="Link"\n+    />\n+    <type default_chain="true"\n+          type_id="News Item"\n+    />\n+    <type default_chain="true"\n+          type_id="Collection"\n+    />\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml b/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\nindex c4626ea..4373443 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/default/rolemap.xml\n@@ -1,11 +1,12 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <rolemap>\n   <permissions>\n-    <permission name="CMFPlacefulWorkflow: Manage workflow policies"\n-                acquire="True">\n-      <role name="Manager"/>\n-      <role name="Owner"/>\n-      <role name="Site Administrator"/>\n+    <permission acquire="True"\n+                name="CMFPlacefulWorkflow: Manage workflow policies"\n+    >\n+      <role name="Manager" />\n+      <role name="Owner" />\n+      <role name="Site Administrator" />\n     </permission>\n   </permissions>\n-</rolemap>\n\\ No newline at end of file\n+</rolemap>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\nindex b1ab8bd..eb0dd55 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/componentregistry.xml\n@@ -1,10 +1,10 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <componentregistry>\n-  <adapters/>\n+  <adapters />\n   <utilities>\n-    <utility\n-        remove="true"\n-        interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n-        object="portal_placeful_workflow"/>\n+    <utility interface="Products.CMFPlacefulWorkflow.interfaces.IPlacefulWorkflowTool"\n+             object="portal_placeful_workflow"\n+             remove="true"\n+    />\n   </utilities>\n </componentregistry>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\nindex 5265b5c..b74f06f 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/controlpanel.xml\n@@ -1,4 +1,6 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <object name="portal_controlpanel">\n-  <configlet action_id="placefulworkflow" remove="true" />\n+  <configlet action_id="placefulworkflow"\n+             remove="true"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\nindex 8590785..f768b5a 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/metadata.xml\n@@ -1,3 +1,4 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1000</version>\n </metadata>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\nindex 91fea6e..3311f84 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/skins.xml\n@@ -1,11 +1,15 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <object name="portal_skins">\n   <!-- Note: the skin layer is no longer added, since version 3.0.0a1.\n        But we keep this uninstall code for older versions and use it as upgrade step. -->\n-  <object name="CMFPlacefulWorkflow" remove="true" />\n+  <object name="CMFPlacefulWorkflow"\n+          remove="true"\n+  />\n \n   <skin-path name="*">\n-    <layer name="CMFPlacefulWorkflow" remove="true" />\n+    <layer name="CMFPlacefulWorkflow"\n+           remove="true"\n+    />\n   </skin-path>\n \n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml b/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\nindex 33b3b89..c33ef65 100644\n--- a/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\n+++ b/Products/CMFPlacefulWorkflow/profiles/uninstall/toolset.xml\n@@ -1,4 +1,4 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <tool-setup>\n   <forbidden tool_id="portal_placeful_workflow" />\n </tool-setup>\ndiff --git a/Products/CMFPlacefulWorkflow/setuphandlers.py b/Products/CMFPlacefulWorkflow/setuphandlers.py\nindex 3279380..94219ba 100644\n--- a/Products/CMFPlacefulWorkflow/setuphandlers.py\n+++ b/Products/CMFPlacefulWorkflow/setuphandlers.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # Copyright (C) 2008 Ingeniweb\n \n # This program is free software; you can redistribute it and/or modify\ndiff --git a/Products/CMFPlacefulWorkflow/testing.py b/Products/CMFPlacefulWorkflow/testing.py\nindex f9788c3..feabb1c 100644\n--- a/Products/CMFPlacefulWorkflow/testing.py\n+++ b/Products/CMFPlacefulWorkflow/testing.py\n@@ -1,6 +1,4 @@\n-# -*- coding: utf-8 -*-\n from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE\n-from plone.app.robotframework.testing import REMOTE_LIBRARY_BUNDLE_FIXTURE\n from plone.app.testing import applyProfile\n from plone.app.testing import FunctionalTesting\n from plone.app.testing import IntegrationTesting\n@@ -55,13 +53,3 @@ def setUpPloneSite(self, portal):\n     bases=(PRODUCTS_CMFPLACEFULWORKFLOW_FIXTURE,),\n     name="ProductsCmfplacefulworkflowLayer:FunctionalTesting",\n )\n-\n-\n-PRODUCTS_CMFPLACEFULWORKFLOW_ACCEPTANCE_TESTING = FunctionalTesting(\n-    bases=(\n-        PRODUCTS_CMFPLACEFULWORKFLOW_FIXTURE,\n-        REMOTE_LIBRARY_BUNDLE_FIXTURE,\n-        z2.ZSERVER_FIXTURE,\n-    ),\n-    name="ProductsCmfplacefulworkflowLayer:AcceptanceTesting",\n-)\ndiff --git a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\nindex ae521bc..2f74b5d 100644\n--- a/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n+++ b/Products/CMFPlacefulWorkflow/tests/CMFPlacefulWorkflowTestCase.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \ndiff --git a/Products/CMFPlacefulWorkflow/tests/__init__.py b/Products/CMFPlacefulWorkflow/tests/__init__.py\nindex 72a4e41..e69de29 100644\n--- a/Products/CMFPlacefulWorkflow/tests/__init__.py\n+++ b/Products/CMFPlacefulWorkflow/tests/__init__.py\n@@ -1,26 +0,0 @@\n-# -*- coding: utf-8 -*-\n-# CMFPlacefulWorkflow\n-# Copyright (C)2005 Ingeniweb\n-\n-# This program is free software; you can redistribute it and/or modify\n-# it under the terms of the GNU General Public License as published by\n-# the Free Software Foundation; either version 2 of the License, or\n-# (at your option) any later version.\n-\n-# This program is distributed in the hope that it will be useful,\n-# but WITHOUT ANY WARRANTY; without even the implied warranty of\n-# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n-# GNU General Public License for more details.\n-\n-# You should have received a copy of the GNU General Public License\n-# along with this program; see the file COPYING. If not, write to the\n-# Free Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.\n-"""\\\n-Unit test package for CMFPlone\n-\n-To run all tests type \'python runalltests.py\' or bin/zopectl test Products/CMFPlacefulWorkflow\n-"""\n-__version__ = "$Revision: 36863 $"\n-# $Source: /cvsroot/ingeniweb/CMFPlacefulWorkflow/tests/__init__.py,v $\n-# $Id: __init__.py 36863 2007-02-05 21:30:44Z encolpe $\n-__docformat__ = "restructuredtext"\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\nindex e659360..ffd01bf 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/export_steps.xml\n@@ -1,8 +1,9 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <export-steps>\n- <export-step id="portal_placeful_workflow"\n-              handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n-              title="Placeful Workflow Policies">\n+  <export-step id="portal_placeful_workflow"\n+               handler="Products.CMFPlacefulWorkflow.exportimport.exportWorkflowPolicies"\n+               title="Placeful Workflow Policies"\n+  >\n    Export placeful workflow policies.\n  </export-step>\n </export-steps>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\nindex 65b9d1b..058a15f 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/import_steps.xml\n@@ -1,9 +1,11 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <import-steps>\n- <import-step id="portal_placeful_workflow" version="20070608-01"\n-              handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n-              title="Placeful Workflow Policies">\n-  <dependency step="workflow"/>\n+  <import-step id="portal_placeful_workflow"\n+               handler="Products.CMFPlacefulWorkflow.exportimport.importWorkflowPolicies"\n+               title="Placeful Workflow Policies"\n+               version="20070608-01"\n+  >\n+    <dependency step="workflow" />\n     Import placeful workflow policies.\n- </import-step>\n+  </import-step>\n </import-steps>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\nindex 93fa6b1..d25ffc4 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow.xml\n@@ -1,6 +1,12 @@\n-<?xml version="1.0"?>\n-<object name="portal_placeful_workflow" meta_type="Placeful Workflow Tool">\n- <property name="title"></property>\n- <property name="max_chain_length" type="int">1</property>\n- <object name="baz_policy" meta_type="WorkflowPolicy"/>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="Placeful Workflow Tool"\n+        name="portal_placeful_workflow"\n+>\n+  <property name="title" />\n+  <property name="max_chain_length"\n+            type="int"\n+  >1</property>\n+  <object meta_type="WorkflowPolicy"\n+          name="baz_policy"\n+  />\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\nindex 9eb5d27..3a0e78f 100644\n--- a/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\n+++ b/Products/CMFPlacefulWorkflow/tests/profiles/exportimport/portal_placeful_workflow/baz_policy.xml\n@@ -1,19 +1,21 @@\n-<?xml version="1.0"?>\n-<object name="baz_policy" meta_type="WorkflowPolicy">\n- <property name="title">Baz Policy</property>\n- <bindings>\n-  <default>\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </default>\n-  <type type_id="Document"/>\n-  <type type_id="Event">\n-  </type>\n-  <type type_id="File">\n-   <bound-workflow workflow_id="plone_workflow"/>\n-   <bound-workflow workflow_id="folder_workflow"/>\n-  </type>\n-  <type type_id="Folder">\n-   <bound-workflow workflow_id="plone_workflow"/>\n-  </type>\n- </bindings>\n+<?xml version="1.0" encoding="utf-8"?>\n+<object meta_type="WorkflowPolicy"\n+        name="baz_policy"\n+>\n+  <property name="title">Baz Policy</property>\n+  <bindings>\n+    <default>\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </default>\n+    <type type_id="Document" />\n+    <type type_id="Event">\n+</type>\n+    <type type_id="File">\n+      <bound-workflow workflow_id="plone_workflow" />\n+      <bound-workflow workflow_id="folder_workflow" />\n+    </type>\n+    <type type_id="Folder">\n+      <bound-workflow workflow_id="plone_workflow" />\n+    </type>\n+  </bindings>\n </object>\ndiff --git a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\nindex 21450e7..70d3694 100644\n--- a/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n+++ b/Products/CMFPlacefulWorkflow/tests/testCMFPlacefulWorkflow.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -23,6 +22,7 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.base.utils import get_installer\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlacefulWorkflow.interfaces import IPlacefulMarker\n from Products.CMFPlacefulWorkflow.PlacefulWorkflowTool import (  # noqa: E501\n@@ -31,7 +31,6 @@\n from Products.CMFPlacefulWorkflow.tests.CMFPlacefulWorkflowTestCase import (  # noqa: E501\n     CMFPlacefulWorkflowTestCase,\n )\n-from Products.CMFPlone.utils import get_installer\n \n \n _edit_permissions = []\ndiff --git a/Products/CMFPlacefulWorkflow/tests/test_configlet.py b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\nindex 9273475..e11d2eb 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_configlet.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorkflow\n # Copyright (C)2005 Ingeniweb\n \n@@ -48,7 +47,8 @@ def getBrowser(self, logged_in=False):\n             # Add an authorization header using the given or default\n             # credentials """\n             browser.addHeader(\n-                "Authorization", "Basic %s:%s" % (SITE_OWNER_NAME, SITE_OWNER_PASSWORD)\n+                "Authorization",\n+                "Basic {}:{}".format(SITE_OWNER_NAME, SITE_OWNER_PASSWORD),\n             )\n         return browser\n \n@@ -84,7 +84,9 @@ def test_local_mapping_select_acquisition_chain(self):\n         self.assertEqual(browser.url, central_form)\n \n         # Now with a proper policy id.\n-        browser.open(f"{portal_url}/@@placeful-workflow-policy-mapping?wfpid=dummy_policy")\n+        browser.open(\n+            f"{portal_url}/@@placeful-workflow-policy-mapping?wfpid=dummy_policy"\n+        )\n         self.assertEqual(\n             browser.getControl(name="wf.Document:record").value,\n             [\ndiff --git a/Products/CMFPlacefulWorkflow/tests/test_doctests.py b/Products/CMFPlacefulWorkflow/tests/test_doctests.py\nindex 98589f9..fc9d465 100644\n--- a/Products/CMFPlacefulWorkflow/tests/test_doctests.py\n+++ b/Products/CMFPlacefulWorkflow/tests/test_doctests.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n # CMFPlacefulWorflow\n # Copyright (C)2006 Ingeniweb\n \ndiff --git a/news/44.bugfix b/news/44.bugfix\nnew file mode 100644\nindex 0000000..2e30c16\n--- /dev/null\n+++ b/news/44.bugfix\n@@ -0,0 +1 @@\n+Cleanup: remove six, use plone.base, zpretty.  [maurits]\ndiff --git a/setup.py b/setup.py\nindex 29b3b22..8dd9882 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -33,16 +33,11 @@\n     include_package_data=True,\n     zip_safe=False,\n     extras_require=dict(\n-        test=["plone.app.testing", "zope.testing", "plone.app.robotframework"],\n+        test=["plone.app.testing", "zope.testing"],\n     ),\n     install_requires=[\n-        "setuptools",\n-        "six",\n-        "zope.component",\n-        "zope.interface",\n-        "zope.i18nmessageid",\n-        "Products.CMFCore",\n+        "plone.base",\n         "Products.CMFPlone",\n-        "Products.GenericSetup >= 2.0",\n+        "setuptools",\n     ],\n )\n'

