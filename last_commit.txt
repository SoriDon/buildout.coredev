Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-12-08T16:09:47+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/1c92c54042526adad8c3f1b19a7c3a7d79c7fc0b

resource registry bundles: in case there are no compilations the modifications list might be empty

Files changed:
M Products/CMFPlone/resources/bundle.py

diff --git a/Products/CMFPlone/resources/bundle.py b/Products/CMFPlone/resources/bundle.py
index eab92a8..3aa6247 100644
--- a/Products/CMFPlone/resources/bundle.py
+++ b/Products/CMFPlone/resources/bundle.py
@@ -81,7 +81,7 @@ def last_compilation(self):
                 mods.append(datetime.fromtimestamp(os.path.getmtime(path)))
             elif loc == 'zodb':
                 self.data.last_compilation
-        if self.data.last_compilation:
+        if self.data.last_compilation and mods:
             if self.data.last_compilation > max(mods):
                 return self.data.last_compilation
             else:


