Repository: plone.app.content


Branch: refs/heads/master
Date: 2015-12-08T22:40:41-06:00
Author: vangheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/c4445b853c36f59a391accf538b2cd2cdb9d62d2

Fix case where non-dexterity object did not properties

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/properties.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 6a7d2d7..5a025d2 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,9 @@ New:
 
 Fixes:
 
+- Fix case where non-dexterity object did not properties
+  [vangheem]
+
 - Fixed rearranging for archetypes.
   [Gagaro]
 
diff --git a/plone/app/content/browser/contents/properties.py b/plone/app/content/browser/contents/properties.py
index 095a315..2ccf800 100644
--- a/plone/app/content/browser/contents/properties.py
+++ b/plone/app/content/browser/contents/properties.py
@@ -78,15 +78,33 @@ def action(self, obj):
             self.dx_action(obj)
         else:
             if self.effectiveDate:
-                obj.setEffectiveDate(DateTime(self.effectiveDate))
+                try:
+                    obj.setEffectiveDate(DateTime(self.effectiveDate))
+                except AttributeError:
+                    pass
             if self.expirationDate:
-                obj.setExpirationDate(DateTime(self.expirationDate))
+                try:
+                    obj.setExpirationDate(DateTime(self.expirationDate))
+                except AttributeError:
+                    pass
             if self.copyright:
-                obj.setRights(self.copyright)
+                try:
+                    obj.setRights(self.copyright)
+                except AttributeError:
+                    pass
             if self.contributors:
-                obj.setContributors(self.contributors)
+                try:
+                    obj.setContributors(self.contributors)
+                except AttributeError:
+                    pass
             if self.creators:
-                obj.setCreators(self.creators)
+                try:
+                    obj.setCreators(self.creators)
+                except AttributeError:
+                    pass
             if self.exclude:
-                obj.setExcludeFromNav(self.exclude == 'yes')
+                try:
+                    obj.setExcludeFromNav(self.exclude == 'yes')
+                except AttributeError:
+                    pass
         obj.reindexObject()


