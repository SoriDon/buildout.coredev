Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2019-06-21T10:12:22+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFFormController/commit/d4fdab8e1c8a2684688c176ef64126d1087323bc

Add support for Python 3.8

Files changed:
M Products/CMFFormController/Actions/BaseFormAction.py

b'diff --git a/Products/CMFFormController/Actions/BaseFormAction.py b/Products/CMFFormController/Actions/BaseFormAction.py\nindex 3595fe7..00231be 100644\n--- a/Products/CMFFormController/Actions/BaseFormAction.py\n+++ b/Products/CMFFormController/Actions/BaseFormAction.py\n@@ -7,6 +7,7 @@\n from Products.CMFFormController.utils import log\n from Products.PageTemplates.Expressions import getEngine\n from Products.PageTemplates.Expressions import SecureModuleImporter\n+from six.moves.urllib.parse import parse_qs\n from six.moves.urllib.parse import urlparse\n from six.moves.urllib.parse import urlunparse\n from zope.interface import implementer\n@@ -89,14 +90,13 @@ def getArg(self, controller_state):\n     def combineArgs(self, url, kwargs):\n         """Utility method that takes a URL, parses its existing query string,\n         and combines the resulting dict with kwargs"""\n-        import cgi\n \n         # parse the existing URL\n         parsed_url = list(urlparse(url))\n         # get the existing query string\n         qs = parsed_url[4]\n         # parse the query into a dict\n-        d = cgi.parse_qs(qs, 1)\n+        d = parse_qs(qs, 1)\n         # update with stuff from kwargs\n         for k, v in kwargs.items():\n             if isinstance(v, six.text_type):\n'

Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2019-06-21T10:14:07+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFFormController/commit/6a14d7ef1dd90fb97bf52fc8bf86ee493fc5a41e

add changenote

Files changed:
A news/20.feature

b'diff --git a/news/20.feature b/news/20.feature\nnew file mode 100644\nindex 0000000..c0eea9e\n--- /dev/null\n+++ b/news/20.feature\n@@ -0,0 +1 @@\n+Add support for Python 3.8 [pbauer]\n\\ No newline at end of file\n'

Repository: Products.CMFFormController


Branch: refs/heads/master
Date: 2019-06-22T09:25:48+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFFormController/commit/ae3b86032f89ee2675532c05b383f74f4e9f5c3a

Merge pull request #20 from plone/python38

Add support for Python 3.8

Files changed:
A news/20.feature
M Products/CMFFormController/Actions/BaseFormAction.py

b'diff --git a/Products/CMFFormController/Actions/BaseFormAction.py b/Products/CMFFormController/Actions/BaseFormAction.py\nindex 3595fe7..00231be 100644\n--- a/Products/CMFFormController/Actions/BaseFormAction.py\n+++ b/Products/CMFFormController/Actions/BaseFormAction.py\n@@ -7,6 +7,7 @@\n from Products.CMFFormController.utils import log\n from Products.PageTemplates.Expressions import getEngine\n from Products.PageTemplates.Expressions import SecureModuleImporter\n+from six.moves.urllib.parse import parse_qs\n from six.moves.urllib.parse import urlparse\n from six.moves.urllib.parse import urlunparse\n from zope.interface import implementer\n@@ -89,14 +90,13 @@ def getArg(self, controller_state):\n     def combineArgs(self, url, kwargs):\n         """Utility method that takes a URL, parses its existing query string,\n         and combines the resulting dict with kwargs"""\n-        import cgi\n \n         # parse the existing URL\n         parsed_url = list(urlparse(url))\n         # get the existing query string\n         qs = parsed_url[4]\n         # parse the query into a dict\n-        d = cgi.parse_qs(qs, 1)\n+        d = parse_qs(qs, 1)\n         # update with stuff from kwargs\n         for k, v in kwargs.items():\n             if isinstance(v, six.text_type):\ndiff --git a/news/20.feature b/news/20.feature\nnew file mode 100644\nindex 0000000..c0eea9e\n--- /dev/null\n+++ b/news/20.feature\n@@ -0,0 +1 @@\n+Add support for Python 3.8 [pbauer]\n\\ No newline at end of file\n'

