Repository: plone.app.layout


Branch: refs/heads/master
Date: 2019-10-04T15:49:48+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.layout/commit/0b9fae529dfe5ad57c93ccfab201ef0f1dcdfedb

fix Unicode Error

Files changed:
A news/215.bugfix
M plone/app/layout/links/viewlets.py

b"diff --git a/news/215.bugfix b/news/215.bugfix\nnew file mode 100644\nindex 00000000..b208a207\n--- /dev/null\n+++ b/news/215.bugfix\n@@ -0,0 +1 @@\n+Fix Unicode Error in folders with special chars. See #215 [erral]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/links/viewlets.py b/plone/app/layout/links/viewlets.py\nindex e0fda5ba..f8cd9166 100644\n--- a/plone/app/layout/links/viewlets.py\n+++ b/plone/app/layout/links/viewlets.py\n@@ -9,6 +9,7 @@\n from Products.CMFPlone.interfaces import ISecuritySchema\n from Products.CMFPlone.interfaces.syndication import IFeedSettings\n from Products.CMFPlone.interfaces.syndication import ISiteSyndicationSettings\n+from Products.CMFPlone.utils import safe_bytes\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from zope.component import getMultiAdapter\n from zope.component import getUtility\n@@ -88,9 +89,10 @@ def getRssLinks(self, obj):\n                 term = vocabulary.getTerm(typ)\n             except LookupError:\n                 continue\n+\n             urls.append({\n                 'title': '%s - %s' % (\n-                    obj.Title(), term.title),\n+                    obj.Title(), safe_bytes(term.title)),\n                 'url': obj.absolute_url() + '/' + term.value})\n         return urls\n \n"

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2019-10-07T10:57:07+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/341b016f7bab7496930c6f71839f4e8f137d848e

Merge pull request #217 from plone/erral-issue-215-Plone-5.2

Fix unicode error in feed viewlet (Plone 5.2)

Files changed:
A news/215.bugfix
M plone/app/layout/links/viewlets.py

b"diff --git a/news/215.bugfix b/news/215.bugfix\nnew file mode 100644\nindex 00000000..b208a207\n--- /dev/null\n+++ b/news/215.bugfix\n@@ -0,0 +1 @@\n+Fix Unicode Error in folders with special chars. See #215 [erral]\n\\ No newline at end of file\ndiff --git a/plone/app/layout/links/viewlets.py b/plone/app/layout/links/viewlets.py\nindex e0fda5ba..f8cd9166 100644\n--- a/plone/app/layout/links/viewlets.py\n+++ b/plone/app/layout/links/viewlets.py\n@@ -9,6 +9,7 @@\n from Products.CMFPlone.interfaces import ISecuritySchema\n from Products.CMFPlone.interfaces.syndication import IFeedSettings\n from Products.CMFPlone.interfaces.syndication import ISiteSyndicationSettings\n+from Products.CMFPlone.utils import safe_bytes\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from zope.component import getMultiAdapter\n from zope.component import getUtility\n@@ -88,9 +89,10 @@ def getRssLinks(self, obj):\n                 term = vocabulary.getTerm(typ)\n             except LookupError:\n                 continue\n+\n             urls.append({\n                 'title': '%s - %s' % (\n-                    obj.Title(), term.title),\n+                    obj.Title(), safe_bytes(term.title)),\n                 'url': obj.absolute_url() + '/' + term.value})\n         return urls\n \n"

