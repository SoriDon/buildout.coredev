Repository: plone.volto


Branch: refs/heads/main
Date: 2022-01-09T12:50:22+01:00
Author: Victor Fernandez de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/3f3865eddbd287a6f2fb121eb102406a7e895716

Fix computed dates in content for demo pages

Files changed:
M CHANGES.rst
M src/plone/volto/setuphandlers.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex c896dbf..315d269 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,7 +4,8 @@ Changelog\n 3.1.0a8 (unreleased)\n --------------------\n \n-- Nothing changed yet.\n+- Computed copyright dates for content demo pages\n+  [sneridagh]\n \n \n 3.1.0a7 (2021-12-11)\ndiff --git a/src/plone/volto/setuphandlers.py b/src/plone/volto/setuphandlers.py\nindex 8568fee..e2b865a 100644\n--- a/src/plone/volto/setuphandlers.py\n+++ b/src/plone/volto/setuphandlers.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from datetime import datetime\n from plone import api\n from plone.app.multilingual.browser.setup import SetupMultilingualSite\n from plone.app.multilingual.setuphandlers import enable_translatable_behavior\n@@ -21,6 +22,7 @@\n import logging\n import transaction\n \n+\n logger = logging.getLogger("plone.volto")\n \n \n@@ -510,7 +512,7 @@ def create_root_homepage(context, default_home=None):\n                             "entityRanges": [],\n                             "inlineStyleRanges": [],\n                             "key": "f0prj",\n-                            "text": "2020 - Volto Team - Plone Foundation",\n+                            "text": f"{datetime.now().year} - Volto Team - Plone Foundation",\n                             "type": "unstyled",\n                         }\n                     ],\n@@ -842,7 +844,7 @@ def create_demo_homepage(context):\n                             "entityRanges": [],\n                             "inlineStyleRanges": [],\n                             "key": "f0prj",\n-                            "text": "2021 - Plone Foundation",\n+                            "text": f"{datetime.now().year} - Plone Foundation",\n                             "type": "unstyled",\n                         }\n                     ],\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-01-11T22:17:50+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/plone.volto/commit/c85c20c7536cda4547e5dea4ff2877e615ec32a7

Merge pull request #41 from plone/fixdatesindemos

Fix computed dates in content for demo pages

Files changed:
M CHANGES.rst
M src/plone/volto/setuphandlers.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex c896dbf..315d269 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,7 +4,8 @@ Changelog\n 3.1.0a8 (unreleased)\n --------------------\n \n-- Nothing changed yet.\n+- Computed copyright dates for content demo pages\n+  [sneridagh]\n \n \n 3.1.0a7 (2021-12-11)\ndiff --git a/src/plone/volto/setuphandlers.py b/src/plone/volto/setuphandlers.py\nindex 8568fee..e2b865a 100644\n--- a/src/plone/volto/setuphandlers.py\n+++ b/src/plone/volto/setuphandlers.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from datetime import datetime\n from plone import api\n from plone.app.multilingual.browser.setup import SetupMultilingualSite\n from plone.app.multilingual.setuphandlers import enable_translatable_behavior\n@@ -21,6 +22,7 @@\n import logging\n import transaction\n \n+\n logger = logging.getLogger("plone.volto")\n \n \n@@ -510,7 +512,7 @@ def create_root_homepage(context, default_home=None):\n                             "entityRanges": [],\n                             "inlineStyleRanges": [],\n                             "key": "f0prj",\n-                            "text": "2020 - Volto Team - Plone Foundation",\n+                            "text": f"{datetime.now().year} - Volto Team - Plone Foundation",\n                             "type": "unstyled",\n                         }\n                     ],\n@@ -842,7 +844,7 @@ def create_demo_homepage(context):\n                             "entityRanges": [],\n                             "inlineStyleRanges": [],\n                             "key": "f0prj",\n-                            "text": "2021 - Plone Foundation",\n+                            "text": f"{datetime.now().year} - Plone Foundation",\n                             "type": "unstyled",\n                         }\n                     ],\n'

