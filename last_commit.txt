Repository: plone.tiles


Branch: refs/heads/master
Date: 2016-02-16T14:42:23+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.tiles/commit/869637e8e6b79f3776eb89670d34524f65357b53

more style stuff

Files changed:
M .gitignore
M plone/tiles/__init__.py
M plone/tiles/absoluteurl.py
M plone/tiles/esi.py
M plone/tiles/tile.py

diff --git a/.gitignore b/.gitignore
index ece673a..7f401be 100644
--- a/.gitignore
+++ b/.gitignore
@@ -7,3 +7,7 @@
 /dist/
 /buildout-cache/
 /develop-eggs/
+/lib/
+/local/
+/include/
+/bin/
diff --git a/plone/tiles/__init__.py b/plone/tiles/__init__.py
index a013279..883d828 100644
--- a/plone/tiles/__init__.py
+++ b/plone/tiles/__init__.py
@@ -1,7 +1,7 @@
 # -*- coding: utf-8 -*-
-
 from plone.tiles.tile import PersistentTile
 from plone.tiles.tile import Tile
+
 # Convenience imports
 
 assert Tile, PersistentTile  # silence pyflakes
diff --git a/plone/tiles/absoluteurl.py b/plone/tiles/absoluteurl.py
index fd28d55..6d487d3 100644
--- a/plone/tiles/absoluteurl.py
+++ b/plone/tiles/absoluteurl.py
@@ -27,7 +27,7 @@ def __str__(self):
         context = tile.__parent__
 
         if name is None or context is None:
-            raise TypeError("Insufficient context to determine URL")
+            raise TypeError('Insufficient context to determine URL')
 
         tileFragment = '@@' + urllib.quote(name.encode('utf-8'), _safe)
         if tid:
diff --git a/plone/tiles/esi.py b/plone/tiles/esi.py
index c30cfb3..9758115 100644
--- a/plone/tiles/esi.py
+++ b/plone/tiles/esi.py
@@ -14,7 +14,7 @@
 BODY_CHILDREN = re.compile(r'<body[^>]*>(.*)</body>', re.I | re.S)
 
 ESI_NAMESPACE_MAP = {'esi': 'http://www.edge-delivery.org/esi/1.0'}
-_ESI_HREF = u'href="%(url)s/@@%(esiMode)s?%(queryString)s"'
+_ESI_HREF = u'href="{url}s/@@{esiMode}?{queryString}"'
 ESI_TEMPLATE = u'''\
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
@@ -53,11 +53,11 @@ def __call__(self, *args, **kwargs):
             mode = 'esi-body'
             if self.head:
                 mode = 'esi-head'
-            return ESI_TEMPLATE % {
-                'url': self.request.getURL(),
-                'queryString': self.request.get('QUERY_STRING', ''),
-                'esiMode': mode,
-            }
+            return ESI_TEMPLATE.fomat(
+                url=self.request.getURL(),
+                queryString=self.request.get('QUERY_STRING', ''),
+                esiMode=mode
+            )
         try:
             return self.index(*args, **kwargs)
         except AttributeError:
diff --git a/plone/tiles/tile.py b/plone/tiles/tile.py
index 2ddc589..98f83c7 100644
--- a/plone/tiles/tile.py
+++ b/plone/tiles/tile.py
@@ -44,7 +44,7 @@ def __getitem__(self, name):
             # __getitem__.
 
             if self.__doc__ is None:
-                self.__doc__ = "For Zope 2, to keep the ZPublisher happy"
+                self.__doc__ = 'For Zope 2, to keep the ZPublisher happy'
 
             self.request.response.setHeader(
                 'X-Tile-Url',


