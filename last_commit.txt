Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2017-08-30T16:31:46+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/346f74b5f4a8435a0460e16449cb378c8848c4ed

Test fixes for changes in plone.app.widgets querystring options.

Files changed:
M CHANGES.rst
M Products/Archetypes/tests/test_pawidgets.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0d50cb54..3d751823 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Test fixes for changes in plone.app.widgets querystring options.
+  [thet]
 
 1.14.2 (2017-08-27)
 -------------------
diff --git a/Products/Archetypes/tests/test_pawidgets.py b/Products/Archetypes/tests/test_pawidgets.py
index f6476266..717af32d 100644
--- a/Products/Archetypes/tests/test_pawidgets.py
+++ b/Products/Archetypes/tests/test_pawidgets.py
@@ -532,6 +532,18 @@ def setUp(self):
         self.context.absolute_url.return_value = ''
         self.field = Mock()
 
+    @mock.patch(
+        'plone.app.widgets.utils.get_ajaxselect_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_date_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_relateditems_options',
+        new=lambda *args, **kwargs: None
+    )
     def test_widget(self):
         from Products.Archetypes.Widget import QueryStringWidget
 
@@ -552,6 +564,9 @@ def test_widget(self):
                     'indexOptionsUrl': '/@@qsOptions',
                     'previewCountURL': '/@@querybuildernumberofresults',
                     'previewURL': '/@@querybuilder_html_results',
+                    'patternAjaxSelectOptions': None,
+                    'patternDateOptions': None,
+                    'patternRelateditemsOptions': None,
                 },
             },
             widget._base_args(self.context, self.field, self.request),


Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2017-09-03T20:01:44-04:00
Author: Eric Steele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/Products.Archetypes/commit/66dbe79186985cbf4901074daa5d3981770f6cf0

Merge pull request #98 from plone/thet-qsoptions-fixes

Test fixes for changes in plone.app.widgets querystring options.

Files changed:
M CHANGES.rst
M Products/Archetypes/tests/test_pawidgets.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0d50cb54..3d751823 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Test fixes for changes in plone.app.widgets querystring options.
+  [thet]
 
 1.14.2 (2017-08-27)
 -------------------
diff --git a/Products/Archetypes/tests/test_pawidgets.py b/Products/Archetypes/tests/test_pawidgets.py
index f6476266..717af32d 100644
--- a/Products/Archetypes/tests/test_pawidgets.py
+++ b/Products/Archetypes/tests/test_pawidgets.py
@@ -532,6 +532,18 @@ def setUp(self):
         self.context.absolute_url.return_value = ''
         self.field = Mock()
 
+    @mock.patch(
+        'plone.app.widgets.utils.get_ajaxselect_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_date_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_relateditems_options',
+        new=lambda *args, **kwargs: None
+    )
     def test_widget(self):
         from Products.Archetypes.Widget import QueryStringWidget
 
@@ -552,6 +564,9 @@ def test_widget(self):
                     'indexOptionsUrl': '/@@qsOptions',
                     'previewCountURL': '/@@querybuildernumberofresults',
                     'previewURL': '/@@querybuilder_html_results',
+                    'patternAjaxSelectOptions': None,
+                    'patternDateOptions': None,
+                    'patternRelateditemsOptions': None,
                 },
             },
             widget._base_args(self.context, self.field, self.request),


