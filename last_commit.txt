Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-02-10T17:23:40+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.dexterity/commit/a71527941ec3fcbfef9fcfbfd11bda13cf9379cb

Update add_type.py

use the svg document icon.Also using urls does not work, the plone icon was returned.

Files changed:
M plone/app/dexterity/browser/add_type.py

b"diff --git a/plone/app/dexterity/browser/add_type.py b/plone/app/dexterity/browser/add_type.py\nindex a028222..7d39822 100644\n--- a/plone/app/dexterity/browser/add_type.py\n+++ b/plone/app/dexterity/browser/add_type.py\n@@ -55,7 +55,7 @@ def create(self, data):\n \n         data['klass'] = 'plone.dexterity.content.Container'\n         data['filter_content_types'] = True\n-        data['icon_expr'] = 'string:${portal_url}/document_icon.png'\n+        data['icon_expr'] = 'string:file-earmark-text'\n         fti.manage_changeProperties(**data)\n         return fti\n \n"

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-02-10T17:26:30+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.dexterity/commit/9ad1fdcd929fe4d4bd5aaa9515330c2d4d133ea3

Create 340.news

Files changed:
A news/340.news

b'diff --git a/news/340.news b/news/340.news\nnew file mode 100644\nindex 0000000..58e04b7\n--- /dev/null\n+++ b/news/340.news\n@@ -0,0 +1 @@\n+- update the new type icon to svg, the old one was png and the expression as url does not work anymore (must be a icon resolver compatible name)\n'

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-02-10T23:19:34+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.dexterity/commit/531b49c6e739f47337ee3fdc9a23ed7e889479ab

Update editing.rst

document_icon -&gt; file-earmark-text

Files changed:
M plone/app/dexterity/tests/editing.rst

b"diff --git a/plone/app/dexterity/tests/editing.rst b/plone/app/dexterity/tests/editing.rst\nindex abd8284..f740fe9 100644\n--- a/plone/app/dexterity/tests/editing.rst\n+++ b/plone/app/dexterity/tests/editing.rst\n@@ -54,7 +54,7 @@ The new type should have the dublin core behavior assigned by default::\n   >>> plonista = portal.portal_types.plonista\n   >>> 'plone.dublincore' in plonista.behaviors\n   True\n-  >>> 'document_icon' in plonista.getIconExprObject().text\n+  >>> 'file-earmark-text' in plonista.getIconExprObject().text\n   True\n \n The listing needs to not break if a type description was stored encoded::\n@@ -411,7 +411,7 @@ using the Container base class::\n   >>> pf = getattr(portal.portal_types, 'plonista-folder')\n   >>> pf.klass\n   'plone.dexterity.content.Container'\n-  >>> 'document_icon' in pf.getIconExprObject().text\n+  >>> 'file-earmark-text' in pf.getIconExprObject().text\n   True\n \n We can configure the plonista-folder to allow contained content types::\n"

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-02-10T23:21:20+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.dexterity/commit/b129fe2af830543718850c95286b155c808d7a67

Update model-driven-types.rst

document_icon -&gt; file-earmark-text

Files changed:
M docs/model-driven-types.rst

b'diff --git a/docs/model-driven-types.rst b/docs/model-driven-types.rst\nindex b61c1df..cc6d76e 100644\n--- a/docs/model-driven-types.rst\n+++ b/docs/model-driven-types.rst\n@@ -93,7 +93,7 @@ For the *Presenter* type, we have ``example.conference.presenter.xml``:\n       <!-- Basic metadata -->\n       <property name="title" i18n:translate="">Presenter</property>\n       <property name="description" i18n:translate="">Conference Presenter</property>\n-      <property name="icon_expr">string:${portal_url}/document_icon.png</property>\n+      <property name="icon_expr">string:file-earmark-text</property>\n       <property name="factory">Presenter</property>\n       <property name="global_allow">True</property>\n       <property name="filter_content_types">True</property>\n'

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-02-11T12:53:47+01:00
Author: Yuri (yurj) <yurj@alfa.it>
Commit: https://github.com/plone/plone.app.dexterity/commit/aedbe9abdfb0be5cb55080d5fdb68990eefe310c

Merge pull request #340 from plone/yurj-icon_expr-1

Update add_type.py

Files changed:
A news/340.news
M docs/model-driven-types.rst
M plone/app/dexterity/browser/add_type.py
M plone/app/dexterity/tests/editing.rst

b'diff --git a/docs/model-driven-types.rst b/docs/model-driven-types.rst\nindex b61c1df..cc6d76e 100644\n--- a/docs/model-driven-types.rst\n+++ b/docs/model-driven-types.rst\n@@ -93,7 +93,7 @@ For the *Presenter* type, we have ``example.conference.presenter.xml``:\n       <!-- Basic metadata -->\n       <property name="title" i18n:translate="">Presenter</property>\n       <property name="description" i18n:translate="">Conference Presenter</property>\n-      <property name="icon_expr">string:${portal_url}/document_icon.png</property>\n+      <property name="icon_expr">string:file-earmark-text</property>\n       <property name="factory">Presenter</property>\n       <property name="global_allow">True</property>\n       <property name="filter_content_types">True</property>\ndiff --git a/news/340.news b/news/340.news\nnew file mode 100644\nindex 0000000..58e04b7\n--- /dev/null\n+++ b/news/340.news\n@@ -0,0 +1 @@\n+- update the new type icon to svg, the old one was png and the expression as url does not work anymore (must be a icon resolver compatible name)\ndiff --git a/plone/app/dexterity/browser/add_type.py b/plone/app/dexterity/browser/add_type.py\nindex a028222..7d39822 100644\n--- a/plone/app/dexterity/browser/add_type.py\n+++ b/plone/app/dexterity/browser/add_type.py\n@@ -55,7 +55,7 @@ def create(self, data):\n \n         data[\'klass\'] = \'plone.dexterity.content.Container\'\n         data[\'filter_content_types\'] = True\n-        data[\'icon_expr\'] = \'string:${portal_url}/document_icon.png\'\n+        data[\'icon_expr\'] = \'string:file-earmark-text\'\n         fti.manage_changeProperties(**data)\n         return fti\n \ndiff --git a/plone/app/dexterity/tests/editing.rst b/plone/app/dexterity/tests/editing.rst\nindex abd8284..f740fe9 100644\n--- a/plone/app/dexterity/tests/editing.rst\n+++ b/plone/app/dexterity/tests/editing.rst\n@@ -54,7 +54,7 @@ The new type should have the dublin core behavior assigned by default::\n   >>> plonista = portal.portal_types.plonista\n   >>> \'plone.dublincore\' in plonista.behaviors\n   True\n-  >>> \'document_icon\' in plonista.getIconExprObject().text\n+  >>> \'file-earmark-text\' in plonista.getIconExprObject().text\n   True\n \n The listing needs to not break if a type description was stored encoded::\n@@ -411,7 +411,7 @@ using the Container base class::\n   >>> pf = getattr(portal.portal_types, \'plonista-folder\')\n   >>> pf.klass\n   \'plone.dexterity.content.Container\'\n-  >>> \'document_icon\' in pf.getIconExprObject().text\n+  >>> \'file-earmark-text\' in pf.getIconExprObject().text\n   True\n \n We can configure the plonista-folder to allow contained content types::\n'

