Repository: plone.app.textfield


Branch: refs/heads/master
Date: 2019-09-04T15:31:02+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.textfield/commit/7e51d94b3e245e11b9fa49b5a410f82d7f13ca63

Check if transform output is actual string on Python 2.

Files changed:
M plone/app/textfield/transform.py

b'diff --git a/plone/app/textfield/transform.py b/plone/app/textfield/transform.py\nindex eb2ecc7..e64f162 100644\n--- a/plone/app/textfield/transform.py\n+++ b/plone/app/textfield/transform.py\n@@ -76,7 +76,7 @@ def __call__(self, value, mimeType):\n \n             else:\n                 output = data.getData()\n-                if six.PY2:\n+                if six.PY2 and isinstance(output, str):\n                     return output.decode(value.encoding)\n                 return output\n         except ConflictError:\n'

Repository: plone.app.textfield


Branch: refs/heads/master
Date: 2019-09-04T15:34:09+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.textfield/commit/3ed942b3f96ed5ef2501dc46f7f0a4891ac55802

add news entry

Files changed:
A news/37.bugfix

b'diff --git a/news/37.bugfix b/news/37.bugfix\nnew file mode 100644\nindex 0000000..84eaee2\n--- /dev/null\n+++ b/news/37.bugfix\n@@ -0,0 +1,2 @@\n+Check if transform output is actual string on Python 2.\n+[agitator]\n\\ No newline at end of file\n'

Repository: plone.app.textfield


Branch: refs/heads/master
Date: 2019-09-04T19:43:04+03:00
Author: Maik Derstappen (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.textfield/commit/577faa764537245aa42bb5db26a852b7b42028bd

Merge pull request #37 from plone/check-if-string-in-py2

Check if transform output is actual string on Python 2.

Files changed:
A news/37.bugfix
M plone/app/textfield/transform.py

b'diff --git a/news/37.bugfix b/news/37.bugfix\nnew file mode 100644\nindex 0000000..84eaee2\n--- /dev/null\n+++ b/news/37.bugfix\n@@ -0,0 +1,2 @@\n+Check if transform output is actual string on Python 2.\n+[agitator]\n\\ No newline at end of file\ndiff --git a/plone/app/textfield/transform.py b/plone/app/textfield/transform.py\nindex eb2ecc7..e64f162 100644\n--- a/plone/app/textfield/transform.py\n+++ b/plone/app/textfield/transform.py\n@@ -76,7 +76,7 @@ def __call__(self, value, mimeType):\n \n             else:\n                 output = data.getData()\n-                if six.PY2:\n+                if six.PY2 and isinstance(output, str):\n                     return output.decode(value.encoding)\n                 return output\n         except ConflictError:\n'

