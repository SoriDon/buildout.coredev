Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2017-02-20T21:46:15Z
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plone.app.iterate/commit/061b7025900a14469eeb0dee2684742ca0c3b240

Add each field label for the diff view, fix visual diff link and add break

Files changed:
M CHANGES.rst
M plone/app/iterate/browser/diff.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 701375c..fa0bc9e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add each field label for the diff view, fix visual diff link and add break
+  [frapell]
 
 Bug fixes:
 
diff --git a/plone/app/iterate/browser/diff.pt b/plone/app/iterate/browser/diff.pt
index dc795c9..b81e5be 100644
--- a/plone/app/iterate/browser/diff.pt
+++ b/plone/app/iterate/browser/diff.pt
@@ -38,12 +38,14 @@
                   tal:repeat="d diffs/getDiffs">
               <div class="field"
                    tal:condition="not:d/same"
-                   tal:define="unified exists:d/unified_diff;
+                   tal:define="field_label d/label;
+                               unified exists:d/unified_diff;
                                html exists:d/html_diff;
                                inline exists:d/inline_diff;
                                ndiff exists:d/ndiff;
                                inline python: inline and not request.get('no_inline', 0);
                                html python: html and not request.get('show_unified', 0)">
+                <label tal:content="field_label" />
 
                 <tal:html condition="inline">
                     <br />
@@ -58,7 +60,7 @@
                     <br />
                     <tal:visual-only tal:condition="exists:d/inline_diff">
                         <a href="#"
-                           tal:attributes="href string:">Show visual differences</a>
+                           tal:attributes="href string:${diff_url}">Show visual differences</a>
                         <br />
                     </tal:visual-only>
                     <a href="#"
@@ -66,6 +68,7 @@
                     <pre tal:content="structure d/html_diff">[html diff]</pre>
                 </tal:html>
                 <tal:unified condition="python:unified and not html">
+                    <br />
                     <a href="#"
                         tal:condition="exists:d/inline_diff"
                         tal:attributes="href string:${diff_url}">Show visual differences</a>


Repository: plone.app.iterate


Branch: refs/heads/master
Date: 2017-02-21T07:21:50+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.iterate/commit/5af9137778568370443dd4cf6deefe0bba6f7d2e

Merge pull request #41 from plone/diff_view

Minor aesthetic changes for the diff view

Files changed:
M CHANGES.rst
M plone/app/iterate/browser/diff.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 701375c..fa0bc9e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Add each field label for the diff view, fix visual diff link and add break
+  [frapell]
 
 Bug fixes:
 
diff --git a/plone/app/iterate/browser/diff.pt b/plone/app/iterate/browser/diff.pt
index dc795c9..b81e5be 100644
--- a/plone/app/iterate/browser/diff.pt
+++ b/plone/app/iterate/browser/diff.pt
@@ -38,12 +38,14 @@
                   tal:repeat="d diffs/getDiffs">
               <div class="field"
                    tal:condition="not:d/same"
-                   tal:define="unified exists:d/unified_diff;
+                   tal:define="field_label d/label;
+                               unified exists:d/unified_diff;
                                html exists:d/html_diff;
                                inline exists:d/inline_diff;
                                ndiff exists:d/ndiff;
                                inline python: inline and not request.get('no_inline', 0);
                                html python: html and not request.get('show_unified', 0)">
+                <label tal:content="field_label" />
 
                 <tal:html condition="inline">
                     <br />
@@ -58,7 +60,7 @@
                     <br />
                     <tal:visual-only tal:condition="exists:d/inline_diff">
                         <a href="#"
-                           tal:attributes="href string:">Show visual differences</a>
+                           tal:attributes="href string:${diff_url}">Show visual differences</a>
                         <br />
                     </tal:visual-only>
                     <a href="#"
@@ -66,6 +68,7 @@
                     <pre tal:content="structure d/html_diff">[html diff]</pre>
                 </tal:html>
                 <tal:unified condition="python:unified and not html">
+                    <br />
                     <a href="#"
                         tal:condition="exists:d/inline_diff"
                         tal:attributes="href string:${diff_url}">Show visual differences</a>


