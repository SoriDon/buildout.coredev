Repository: plone.dexterity


Branch: refs/heads/master
Date: 2022-05-17T21:22:12+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.dexterity/commit/12bb2bba0ad21701fb5b95587a451b53b8afff9e

Add icon_expr to default actions

Files changed:
M plone/dexterity/fti.py

b'diff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py\nindex 818cbbf..16bcd1e 100644\n--- a/plone/dexterity/fti.py\n+++ b/plone/dexterity/fti.py\n@@ -134,12 +134,14 @@ class DexterityFTI(base.DynamicViewTypeInformation):\n         {\n             "id": "view",\n             "title": "View",\n+            "icon_expr": "string:toolbar-action/view",\n             "action": "string:${object_url}",\n             "permissions": ("View",),\n         },\n         {\n             "id": "edit",\n             "title": "Edit",\n+            "icon_expr": "string:toolbar-action/edit",\n             "action": "string:${object_url}/edit",\n             "permissions": ("Modify portal content",),\n         },\n@@ -171,6 +173,7 @@ def __init__(self, *args, **kwargs):\n                 self.addAction(\n                     id=action["id"],\n                     name=action["title"],\n+                    icon_expr=action["icon_expr"],\n                     action=action["action"],\n                     condition=action.get("condition"),\n                     permission=action.get("permissions", ()),\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2022-05-17T21:24:47+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.dexterity/commit/650d90e4585761b2329ea11e15a5e83db3e567d2

add news

Files changed:
A news/167.bugfix

b'diff --git a/news/167.bugfix b/news/167.bugfix\nnew file mode 100644\nindex 00000000..17eca9bb\n--- /dev/null\n+++ b/news/167.bugfix\n@@ -0,0 +1,2 @@\n+Added missing icon_expr to default actions.\n+[agitator]\n\\ No newline at end of file\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2022-05-18T14:45:03+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.dexterity/commit/931d54fa1a27ec668f57ef103c668168612c7091

Merge pull request #167 from plone/addiconexpr

Add icon_expr to default actions

Files changed:
A news/167.bugfix
M plone/dexterity/fti.py

b'diff --git a/news/167.bugfix b/news/167.bugfix\nnew file mode 100644\nindex 00000000..17eca9bb\n--- /dev/null\n+++ b/news/167.bugfix\n@@ -0,0 +1,2 @@\n+Added missing icon_expr to default actions.\n+[agitator]\n\\ No newline at end of file\ndiff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py\nindex 818cbbfc..16bcd1e8 100644\n--- a/plone/dexterity/fti.py\n+++ b/plone/dexterity/fti.py\n@@ -134,12 +134,14 @@ class DexterityFTI(base.DynamicViewTypeInformation):\n         {\n             "id": "view",\n             "title": "View",\n+            "icon_expr": "string:toolbar-action/view",\n             "action": "string:${object_url}",\n             "permissions": ("View",),\n         },\n         {\n             "id": "edit",\n             "title": "Edit",\n+            "icon_expr": "string:toolbar-action/edit",\n             "action": "string:${object_url}/edit",\n             "permissions": ("Modify portal content",),\n         },\n@@ -171,6 +173,7 @@ def __init__(self, *args, **kwargs):\n                 self.addAction(\n                     id=action["id"],\n                     name=action["title"],\n+                    icon_expr=action["icon_expr"],\n                     action=action["action"],\n                     condition=action.get("condition"),\n                     permission=action.get("permissions", ()),\n'

