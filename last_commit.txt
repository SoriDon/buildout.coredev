Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T10:43:38+02:00
Author: ksuess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/42a3d02da1e894c844bb7c448194e612daa83088

Add UsersGroupsSettings to set of control panels.

Files changed:
M src/plone/restapi/controlpanels/registry.py
M src/plone/restapi/services/controlpanels/configure.zcml

b'diff --git a/src/plone/restapi/controlpanels/registry.py b/src/plone/restapi/controlpanels/registry.py\nindex e7adaffa2..767dfcc60 100644\n--- a/src/plone/restapi/controlpanels/registry.py\n+++ b/src/plone/restapi/controlpanels/registry.py\n@@ -10,6 +10,7 @@\n from Products.CMFPlone.interfaces.controlpanel import ISecuritySchema\n from Products.CMFPlone.interfaces.controlpanel import ISiteSchema\n from Products.CMFPlone.interfaces.controlpanel import ISocialMediaSchema\n+from plone.base.interfaces.controlpanel import IUserGroupsSettingsSchema\n from plone.restapi.controlpanels import RegistryConfigletPanel\n \n try:\n@@ -100,3 +101,12 @@ class SecurityControlpanel(RegistryConfigletPanel):\n     schema = ISecuritySchema\n     configlet_id = "SecuritySettings"\n     configlet_category_id = "plone-security"\n+\n+\n+# Users and groups\n+\n+@adapter(Interface, Interface)\n+class UserGroupControlpanel(RegistryConfigletPanel):\n+    schema = IUserGroupsSettingsSchema\n+    configlet_id = "UsersGroupsSettings"\n+    configlet_category_id = "plone-users"\ndiff --git a/src/plone/restapi/services/controlpanels/configure.zcml b/src/plone/restapi/services/controlpanels/configure.zcml\nindex fa746bcd8..be384f87f 100644\n--- a/src/plone/restapi/services/controlpanels/configure.zcml\n+++ b/src/plone/restapi/services/controlpanels/configure.zcml\n@@ -116,6 +116,13 @@\n         name="security"\n         />\n \n+\n+    <!-- Users and Groups -->\n+    <adapter\n+        factory="plone.restapi.controlpanels.registry.UserGroupControlpanel"\n+        name="usergroup"\n+        />\n+\n   </configure>\n \n </configure>\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T10:43:38+02:00
Author: ksuess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/9cd551ed0afcca05b8cb49647196bb05827790d0

changelog

Files changed:
A news/1436.feature
M src/plone/restapi/controlpanels/registry.py

b'diff --git a/news/1436.feature b/news/1436.feature\nnew file mode 100644\nindex 000000000..ee49250b0\n--- /dev/null\n+++ b/news/1436.feature\n@@ -0,0 +1 @@\n+Add UsersGroupsSettings to set of control panels. [ksuess]\ndiff --git a/src/plone/restapi/controlpanels/registry.py b/src/plone/restapi/controlpanels/registry.py\nindex 767dfcc60..c43905406 100644\n--- a/src/plone/restapi/controlpanels/registry.py\n+++ b/src/plone/restapi/controlpanels/registry.py\n@@ -105,6 +105,7 @@ class SecurityControlpanel(RegistryConfigletPanel):\n \n # Users and groups\n \n+\n @adapter(Interface, Interface)\n class UserGroupControlpanel(RegistryConfigletPanel):\n     schema = IUserGroupsSettingsSchema\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T10:43:38+02:00
Author: ksuess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/428e77069f15ff1457bc70aa97e96fd5991f4b23

Update registry.py: import from Products.CMFPlone.interfaces.controlpanel

Files changed:
M src/plone/restapi/controlpanels/registry.py

b'diff --git a/src/plone/restapi/controlpanels/registry.py b/src/plone/restapi/controlpanels/registry.py\nindex c43905406..56d9b5e61 100644\n--- a/src/plone/restapi/controlpanels/registry.py\n+++ b/src/plone/restapi/controlpanels/registry.py\n@@ -10,7 +10,7 @@\n from Products.CMFPlone.interfaces.controlpanel import ISecuritySchema\n from Products.CMFPlone.interfaces.controlpanel import ISiteSchema\n from Products.CMFPlone.interfaces.controlpanel import ISocialMediaSchema\n-from plone.base.interfaces.controlpanel import IUserGroupsSettingsSchema\n+from Products.CMFPlone.interfaces.controlpanel import IUserGroupsSettingsSchema\n from plone.restapi.controlpanels import RegistryConfigletPanel\n \n try:\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T10:43:38+02:00
Author: ksuess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/6c0ba559560e18b35de6b3a6289f3ba9762ee091

Update controlpanels_get.resp

Files changed:
M src/plone/restapi/tests/http-examples/controlpanels_get.resp

b'diff --git a/src/plone/restapi/tests/http-examples/controlpanels_get.resp b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\nindex 8aee73df0..31649d2e3 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n@@ -57,6 +57,11 @@ Content-Type: application/json\n         "group": "Content",\n         "title": "Markup"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@controlpanels/usergroup",\n+        "group": "Users",\n+        "title": "User and Group Settings"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@controlpanels/security",\n         "group": "Security",\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T10:43:38+02:00
Author: ksuess (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/9e2c632edbbf2a256f0958294819c63b92ad21a6

Revert "Update controlpanels_get.resp"

This reverts commit 4100814c6d62c60f1be642115ba345acb3045de6.

Files changed:
M src/plone/restapi/tests/http-examples/controlpanels_get.resp

b'diff --git a/src/plone/restapi/tests/http-examples/controlpanels_get.resp b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\nindex 31649d2e3..8aee73df0 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n@@ -57,11 +57,6 @@ Content-Type: application/json\n         "group": "Content",\n         "title": "Markup"\n     },\n-    {\n-        "@id": "http://localhost:55001/plone/@controlpanels/usergroup",\n-        "group": "Users",\n-        "title": "User and Group Settings"\n-    },\n     {\n         "@id": "http://localhost:55001/plone/@controlpanels/security",\n         "group": "Security",\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-06-02T11:12:55+02:00
Author: Katja SÃ¼ss (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/41ed2cc5778e5506640621adb4f76829dac30877

Merge pull request #1435 from plone/controlpanels

Add UsersGroupsSettings to set of control panels.

Files changed:
A news/1436.feature
M src/plone/restapi/controlpanels/registry.py
M src/plone/restapi/services/controlpanels/configure.zcml

b'diff --git a/news/1436.feature b/news/1436.feature\nnew file mode 100644\nindex 000000000..ee49250b0\n--- /dev/null\n+++ b/news/1436.feature\n@@ -0,0 +1 @@\n+Add UsersGroupsSettings to set of control panels. [ksuess]\ndiff --git a/src/plone/restapi/controlpanels/registry.py b/src/plone/restapi/controlpanels/registry.py\nindex e7adaffa2..56d9b5e61 100644\n--- a/src/plone/restapi/controlpanels/registry.py\n+++ b/src/plone/restapi/controlpanels/registry.py\n@@ -10,6 +10,7 @@\n from Products.CMFPlone.interfaces.controlpanel import ISecuritySchema\n from Products.CMFPlone.interfaces.controlpanel import ISiteSchema\n from Products.CMFPlone.interfaces.controlpanel import ISocialMediaSchema\n+from Products.CMFPlone.interfaces.controlpanel import IUserGroupsSettingsSchema\n from plone.restapi.controlpanels import RegistryConfigletPanel\n \n try:\n@@ -100,3 +101,13 @@ class SecurityControlpanel(RegistryConfigletPanel):\n     schema = ISecuritySchema\n     configlet_id = "SecuritySettings"\n     configlet_category_id = "plone-security"\n+\n+\n+# Users and groups\n+\n+\n+@adapter(Interface, Interface)\n+class UserGroupControlpanel(RegistryConfigletPanel):\n+    schema = IUserGroupsSettingsSchema\n+    configlet_id = "UsersGroupsSettings"\n+    configlet_category_id = "plone-users"\ndiff --git a/src/plone/restapi/services/controlpanels/configure.zcml b/src/plone/restapi/services/controlpanels/configure.zcml\nindex fa746bcd8..be384f87f 100644\n--- a/src/plone/restapi/services/controlpanels/configure.zcml\n+++ b/src/plone/restapi/services/controlpanels/configure.zcml\n@@ -116,6 +116,13 @@\n         name="security"\n         />\n \n+\n+    <!-- Users and Groups -->\n+    <adapter\n+        factory="plone.restapi.controlpanels.registry.UserGroupControlpanel"\n+        name="usergroup"\n+        />\n+\n   </configure>\n \n </configure>\n'

