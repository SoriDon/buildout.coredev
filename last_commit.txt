Repository: plone.restapi


Branch: refs/heads/master
Date: 2021-07-06T10:57:57+02:00
Author: Katja SÃ¼ss (ksuess) <k.suess@rohberg.ch>
Commit: https://github.com/plone/plone.restapi/commit/0bec58d33b9fd0c2d9ca73449e158a5d7f4234f9

Fix bug: Provide value_type of plone.schema / zope.schema Dict field (#1163)

Files changed:
A news/1159.bugfix
M src/plone/restapi/types/adapters.py

b'diff --git a/news/1159.bugfix b/news/1159.bugfix\nnew file mode 100644\nindex 000000000..73aacb120\n--- /dev/null\n+++ b/news/1159.bugfix\n@@ -0,0 +1 @@\n+Provide value_type of plone.schema / zope.schema Dict field [ksuess]\n\\ No newline at end of file\ndiff --git a/src/plone/restapi/types/adapters.py b/src/plone/restapi/types/adapters.py\nindex 587c260ed..5b991b32a 100644\n--- a/src/plone/restapi/types/adapters.py\n+++ b/src/plone/restapi/types/adapters.py\n@@ -431,7 +431,7 @@ def additional(self):\n             "additional": key_type.additional(),\n         }\n         value_type = getMultiAdapter(\n-            (self.field.key_type, self.context, self.request), IJsonSchemaProvider\n+            (self.field.value_type, self.context, self.request), IJsonSchemaProvider\n         )\n         info["value_type"] = {\n             "schema": value_type.get_schema(),\n'

