Repository: plone.registry


Branch: refs/heads/master
Date: 2016-06-30T18:14:33+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.registry/commit/dcc1da32c75a06c49684374e1daa29857018affb

Give RecordsProxy a parent.

Files changed:
M CHANGES.rst
M plone/registry/recordsproxy.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 3bb1fc5..7e1aaf9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-1.0.5 (unreleased)
+1.1.0 (unreleased)
 ------------------
 
 Breaking changes:
@@ -10,7 +10,10 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Give ``RecordsProxy`` a ``__parent__`` (the registry) in order to make it a good Zope citizen.
+  This helps in context of z3cform binders and other similar situations,
+  where a records proxy is used as context.
+  [jensens]
 
 Bug fixes:
 
diff --git a/plone/registry/recordsproxy.py b/plone/registry/recordsproxy.py
index 64d591c..ddb1abc 100644
--- a/plone/registry/recordsproxy.py
+++ b/plone/registry/recordsproxy.py
@@ -28,6 +28,7 @@ def __init__(self, registry, schema, omitted=(), prefix=None):
         self.__dict__['__registry__'] = registry
         self.__dict__['__omitted__'] = omitted
         self.__dict__['__prefix__'] = prefix
+        self.__dict__['__parent__'] = registry
 
         alsoProvides(self, schema)
 
diff --git a/setup.py b/setup.py
index bd6a80f..60cb556 100644
--- a/setup.py
+++ b/setup.py
@@ -8,7 +8,7 @@
 def read(*rnames):
     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()
 
-version = '1.0.5.dev0'
+version = '1.1.0.dev0'
 
 description = "Registry for application settings (like debconf/ about:config)"
 long_description = (


Repository: plone.registry


Branch: refs/heads/master
Date: 2016-06-30T20:10:26+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.registry/commit/d89648a138fbd3293bd2d5005c21083d5fd0f007

Merge pull request #10 from plone/recordsproxy-parent

Give RecordsProxy a parent.

Files changed:
M CHANGES.rst
M plone/registry/recordsproxy.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 3bb1fc5..7e1aaf9 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-1.0.5 (unreleased)
+1.1.0 (unreleased)
 ------------------
 
 Breaking changes:
@@ -10,7 +10,10 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Give ``RecordsProxy`` a ``__parent__`` (the registry) in order to make it a good Zope citizen.
+  This helps in context of z3cform binders and other similar situations,
+  where a records proxy is used as context.
+  [jensens]
 
 Bug fixes:
 
diff --git a/plone/registry/recordsproxy.py b/plone/registry/recordsproxy.py
index 64d591c..ddb1abc 100644
--- a/plone/registry/recordsproxy.py
+++ b/plone/registry/recordsproxy.py
@@ -28,6 +28,7 @@ def __init__(self, registry, schema, omitted=(), prefix=None):
         self.__dict__['__registry__'] = registry
         self.__dict__['__omitted__'] = omitted
         self.__dict__['__prefix__'] = prefix
+        self.__dict__['__parent__'] = registry
 
         alsoProvides(self, schema)
 
diff --git a/setup.py b/setup.py
index bd6a80f..60cb556 100644
--- a/setup.py
+++ b/setup.py
@@ -8,7 +8,7 @@
 def read(*rnames):
     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()
 
-version = '1.0.5.dev0'
+version = '1.1.0.dev0'
 
 description = "Registry for application settings (like debconf/ about:config)"
 long_description = (


