Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-10-04T09:12:48-04:00
Author: David Glick (davisagli) <dglick@salesforce.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/b6a264505173fcf8a441033e7dc6a5f113dad10b

Remove view history perm (#2567)

* Don't configure View History permission which was removed from Zope

* Stop configuring View History permission

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/rolemap.xml
M Products/CMFPlone/tests/testSiteAdminRole.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 061fcbc95..a592b0367 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -27,6 +27,9 @@ Breaking changes:\n - Removed setAuthCookie.py skin script. #1801\n   [tlotze]\n \n+- Stop configuring \'View History\' permission which was removed from Zope.\n+  [davisagli]\n+\n New features:\n \n - Factored out human_readable_size method for replacing getObjSize.py. #1801\ndiff --git a/Products/CMFPlone/profiles/default/rolemap.xml b/Products/CMFPlone/profiles/default/rolemap.xml\nindex 03b69f586..54dd70182 100644\n--- a/Products/CMFPlone/profiles/default/rolemap.xml\n+++ b/Products/CMFPlone/profiles/default/rolemap.xml\n@@ -132,9 +132,6 @@\n       <role name="Member"/>\n       <role name="Owner"/>\n     </permission>\n-    <permission name="View History" acquire="True">\n-      <role name="Site Administrator"/>\n-    </permission>\n     <permission name="View management screens"\n                 acquire="True">\n       <role name="Manager"/>\ndiff --git a/Products/CMFPlone/tests/testSiteAdminRole.py b/Products/CMFPlone/tests/testSiteAdminRole.py\nindex b09e97958..218eafcdd 100644\n--- a/Products/CMFPlone/tests/testSiteAdminRole.py\n+++ b/Products/CMFPlone/tests/testSiteAdminRole.py\n@@ -196,7 +196,6 @@ def testExpectedPermissions(self):\n             \'Reply to item\':                                            0,\n             \'View\':                                                     1,\n             \'View Groups\':                                              1,\n-            \'View History\':                                             1,\n             \'View management screens\':                                  0,\n             \'WebDAV Lock items\':                                        1,\n             \'WebDAV Unlock items\':                                      1,\n'

