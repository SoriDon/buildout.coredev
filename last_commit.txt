Repository: plone.app.event


Branch: refs/heads/master
Date: 2021-10-15T15:18:11+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.event/commit/182a0598ba8f9850b4906fad22a83fe54e3139ff

Fix test for icalendar with missing VALUE for date (not date-time) of DTSTART/DTEND.

If multiple value types are allowed for a component, the value type can only be omitted if it is the default type.
The default type for DTSTART/DTEND is DATE-TIME.
See RFC5545 3.2.20, 3.8.2.2 and 3.8.2.3.
[thet]

Files changed:
A news/343.bugfix
M plone/app/event/tests/icaltest.ics
M plone/app/event/tests/icaltest2.ics

b'diff --git a/news/343.bugfix b/news/343.bugfix\nnew file mode 100644\nindex 00000000..c28f9227\n--- /dev/null\n+++ b/news/343.bugfix\n@@ -0,0 +1,6 @@\n+Fix test for icalendar with missing VALUE for date (not date-time) of DTSTART/DTEND.\n+\n+If multiple value types are allowed for a component, the value type can only be omitted if it is the default type.\n+The default type for DTSTART/DTEND is DATE-TIME.\n+See RFC5545 3.2.20, 3.8.2.2 and 3.8.2.3.\n+[thet]\ndiff --git a/plone/app/event/tests/icaltest.ics b/plone/app/event/tests/icaltest.ics\nindex 2a32793d..b1076358 100644\n--- a/plone/app/event/tests/icaltest.ics\n+++ b/plone/app/event/tests/icaltest.ics\n@@ -60,8 +60,8 @@ END:VEVENT\n BEGIN:VEVENT\n SUMMARY:e4\n DESCRIPTION:Whole day event\n-DTSTART:20130404\n-DTEND:20130404\n+DTSTART;VALUE=DATE:20130404\n+DTEND;VALUE=DATE:20130404\n UID:48f1a7ad64e847568d860cd0923449704\n LAST-MODIFIED;VALUE=DATE-TIME:20130719T105931Z\n END:VEVENT\ndiff --git a/plone/app/event/tests/icaltest2.ics b/plone/app/event/tests/icaltest2.ics\nindex b17ebdad..d6a1c007 100644\n--- a/plone/app/event/tests/icaltest2.ics\n+++ b/plone/app/event/tests/icaltest2.ics\n@@ -58,8 +58,8 @@ END:VEVENT\n BEGIN:VEVENT\n SUMMARY:e4\n DESCRIPTION:Whole day event\n-DTSTART:20130404\n-DTEND:20130404\n+DTSTART;VALUE=DATE:20130404\n+DTEND;VALUE=DATE:20130404\n UID:48f1a7ad64e847568d860cd0923449704\n LAST-MODIFIED;VALUE=DATE-TIME:20130719T105931Z\n END:VEVENT\n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2021-10-15T15:21:44+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.event/commit/be2a4ca77febb5df40971eae0835699153b82793

Merge pull request #343 from plone/fix-ical-tests-60

Fix test for icalendar with missing VALUE for date (not date-time) of DTSTART/DTEND.

Files changed:
A news/343.bugfix
M plone/app/event/tests/icaltest.ics
M plone/app/event/tests/icaltest2.ics

b'diff --git a/news/343.bugfix b/news/343.bugfix\nnew file mode 100644\nindex 00000000..c28f9227\n--- /dev/null\n+++ b/news/343.bugfix\n@@ -0,0 +1,6 @@\n+Fix test for icalendar with missing VALUE for date (not date-time) of DTSTART/DTEND.\n+\n+If multiple value types are allowed for a component, the value type can only be omitted if it is the default type.\n+The default type for DTSTART/DTEND is DATE-TIME.\n+See RFC5545 3.2.20, 3.8.2.2 and 3.8.2.3.\n+[thet]\ndiff --git a/plone/app/event/tests/icaltest.ics b/plone/app/event/tests/icaltest.ics\nindex 2a32793d..b1076358 100644\n--- a/plone/app/event/tests/icaltest.ics\n+++ b/plone/app/event/tests/icaltest.ics\n@@ -60,8 +60,8 @@ END:VEVENT\n BEGIN:VEVENT\n SUMMARY:e4\n DESCRIPTION:Whole day event\n-DTSTART:20130404\n-DTEND:20130404\n+DTSTART;VALUE=DATE:20130404\n+DTEND;VALUE=DATE:20130404\n UID:48f1a7ad64e847568d860cd0923449704\n LAST-MODIFIED;VALUE=DATE-TIME:20130719T105931Z\n END:VEVENT\ndiff --git a/plone/app/event/tests/icaltest2.ics b/plone/app/event/tests/icaltest2.ics\nindex b17ebdad..d6a1c007 100644\n--- a/plone/app/event/tests/icaltest2.ics\n+++ b/plone/app/event/tests/icaltest2.ics\n@@ -58,8 +58,8 @@ END:VEVENT\n BEGIN:VEVENT\n SUMMARY:e4\n DESCRIPTION:Whole day event\n-DTSTART:20130404\n-DTEND:20130404\n+DTSTART;VALUE=DATE:20130404\n+DTEND;VALUE=DATE:20130404\n UID:48f1a7ad64e847568d860cd0923449704\n LAST-MODIFIED;VALUE=DATE-TIME:20130719T105931Z\n END:VEVENT\n'

