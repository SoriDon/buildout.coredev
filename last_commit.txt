Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-02-26T12:57:43-06:00
Author: nathan.vangheem () <nathan.vangheem@wildcardcorp.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/494dde43be21789664b4efd7d72c4560bc9de9ed

If a bundle does not provide any resources, do not attempt to compile it

Files changed:
M CHANGES.rst
M Products/CMFPlone/resources/browser/cook.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d4d2ab7..8bb0bef 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ Changelog
 
 New:
 
+- If a bundle does not provide any resources, do not attempt to compile it
+  [vangheem]
+
 - Build resource registry JavaScript for fix in not being able to develop js/css
   [vangheem]
 
diff --git a/Products/CMFPlone/resources/browser/cook.py b/Products/CMFPlone/resources/browser/cook.py
index 362517d..3aa87de 100644
--- a/Products/CMFPlone/resources/browser/cook.py
+++ b/Products/CMFPlone/resources/browser/cook.py
@@ -37,6 +37,12 @@ def cookWhenChangingSettings(context, bundle=None):
             bundle = bundles.setdefault('plone-legacy')
             bundle.resources = []
 
+
+    if not bundle.resources:
+        # you can have a bundle without any resources defined and it's just shipped
+        # as a legacy compiled js file
+        return
+
     # Let's join all css and js
     css_file = ""
     cooked_js = """


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-02-26T15:08:01-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/85de3ca582247adf2a7cd771e5b9b9e07c977944

Merge pull request #1396 from plone/cook-no-resources

If a bundle does not provide any resources, do not attempt to compile it

Files changed:
M CHANGES.rst
M Products/CMFPlone/resources/browser/cook.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d4d2ab7..8bb0bef 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,6 +10,9 @@ Changelog
 
 New:
 
+- If a bundle does not provide any resources, do not attempt to compile it
+  [vangheem]
+
 - Build resource registry JavaScript for fix in not being able to develop js/css
   [vangheem]
 
diff --git a/Products/CMFPlone/resources/browser/cook.py b/Products/CMFPlone/resources/browser/cook.py
index 362517d..3aa87de 100644
--- a/Products/CMFPlone/resources/browser/cook.py
+++ b/Products/CMFPlone/resources/browser/cook.py
@@ -37,6 +37,12 @@ def cookWhenChangingSettings(context, bundle=None):
             bundle = bundles.setdefault('plone-legacy')
             bundle.resources = []
 
+
+    if not bundle.resources:
+        # you can have a bundle without any resources defined and it's just shipped
+        # as a legacy compiled js file
+        return
+
     # Let's join all css and js
     css_file = ""
     cooked_js = """


