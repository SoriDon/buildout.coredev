Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-11-12T22:37:34-08:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/Products.Archetypes/commit/0730de3ca05fc778881a7c28e2c86b679e25caf9

move show_id.py from CMFPlone to Archetypes

Files changed:
A Products/Archetypes/skins/archetypes/show_id.py
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 4c32fba..599cf9a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,9 +14,11 @@ New features:
   Make AnnotationStorage awareness of it optional.
   [jensens]
 
-- moved script ``date_components_support.py`` from CMFPlone over here, 
-  hence its only used here.
-  [jensens]
+- Moved scripts that are only used by Archetypes from CMFPlone
+  to Products.Archetypes:
+  - ``date_components_support.py``
+  - ``show_id.py``
+  [jensens, davisagli]
 
 Bug fixes:
 
diff --git a/Products/Archetypes/skins/archetypes/show_id.py b/Products/Archetypes/skins/archetypes/show_id.py
new file mode 100644
index 0000000..70f84fe
--- /dev/null
+++ b/Products/Archetypes/skins/archetypes/show_id.py
@@ -0,0 +1,14 @@
+## Script (Python) "show_id"
+##bind container=container
+##bind context=context
+##bind namespace=
+##bind script=script
+##bind subpath=traverse_subpath
+##parameters=
+##title=Determine whether to show an id in an edit form
+
+if context.plone_utils.isIDAutoGenerated(context.REQUEST.get('id', None) \
+        or context.getId()):
+    return not (context.portal_factory.isTemporary(context)
+                or context.CreationDate() == context.ModificationDate())
+return 1


Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-11-13T09:48:43+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/39cfa06aa272229724e5eac58031317b4a31bf79

Merge pull request #70 from plone/davisagli-cleanup-scripts

move show_id.py from CMFPlone to Archetypes

Files changed:
A Products/Archetypes/skins/archetypes/show_id.py
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 4c32fba..599cf9a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,9 +14,11 @@ New features:
   Make AnnotationStorage awareness of it optional.
   [jensens]
 
-- moved script ``date_components_support.py`` from CMFPlone over here, 
-  hence its only used here.
-  [jensens]
+- Moved scripts that are only used by Archetypes from CMFPlone
+  to Products.Archetypes:
+  - ``date_components_support.py``
+  - ``show_id.py``
+  [jensens, davisagli]
 
 Bug fixes:
 
diff --git a/Products/Archetypes/skins/archetypes/show_id.py b/Products/Archetypes/skins/archetypes/show_id.py
new file mode 100644
index 0000000..70f84fe
--- /dev/null
+++ b/Products/Archetypes/skins/archetypes/show_id.py
@@ -0,0 +1,14 @@
+## Script (Python) "show_id"
+##bind container=container
+##bind context=context
+##bind namespace=
+##bind script=script
+##bind subpath=traverse_subpath
+##parameters=
+##title=Determine whether to show an id in an edit form
+
+if context.plone_utils.isIDAutoGenerated(context.REQUEST.get('id', None) \
+        or context.getId()):
+    return not (context.portal_factory.isTemporary(context)
+                or context.CreationDate() == context.ModificationDate())
+return 1


