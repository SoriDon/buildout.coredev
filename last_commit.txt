Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-06-22T14:51:36+02:00
Author: Lukas Graf (lukasgraf) <lukas.graf@4teamwork.ch>
Commit: https://github.com/plone/plone.restapi/commit/12259fa735cb3ab9763e61dff8d2e8ddccc405cf

Docs: Make sure application/json+schema examples also get syntax highlighted.

Files changed:
A news/764.bugfix
M docs/source/conf.py

b'diff --git a/docs/source/conf.py b/docs/source/conf.py\nindex d24ad24e..05cf6d50 100644\n--- a/docs/source/conf.py\n+++ b/docs/source/conf.py\n@@ -32,6 +32,20 @@\n     \'sphinxcontrib.httpexample\',\n ]\n \n+\n+def patch_pygments_to_highlight_jsonschema():\n+    """Append \'application/json+schema\' to the list of mimetypes the\n+    Pygments JSON lexer is registered to handle.\n+    """\n+    try:\n+        from pygments.lexers._mapping import LEXERS\n+        mod, lexer_name, aliases, filenames, mimetypes = LEXERS[\'JsonLexer\']\n+        mimetypes = mimetypes + (\'application/json+schema\', )\n+        LEXERS[\'JsonLexer\'] = (mod, lexer_name, aliases, filenames, mimetypes)\n+    except:\n+        # Be defensive (don\'t fail a docs build if this doesn\'t work)\n+        pass\n+\n # Add any paths that contain templates here, relative to this directory.\n templates_path = [\'_templates\']\n \n@@ -248,3 +262,4 @@\n \n suppress_warnings = [\'image.nonlocal_uri\']\n \n+patch_pygments_to_highlight_jsonschema()\ndiff --git a/news/764.bugfix b/news/764.bugfix\nnew file mode 100644\nindex 00000000..bb8fc2e9\n--- /dev/null\n+++ b/news/764.bugfix\n@@ -0,0 +1,2 @@\n+Docs: Make sure application/json+schema examples also get syntax highlighted.\n+[lgraf]\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-06-22T17:33:08+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/1f6f72bde10cf3b6e5da20fe8614646e3fceebc0

Merge pull request #765 from plone/syntax-highlight-jsonschema

Docs: Make sure application/json+schema examples also get syntax highlighted.

Files changed:
A news/764.bugfix
M docs/source/conf.py

b'diff --git a/docs/source/conf.py b/docs/source/conf.py\nindex d24ad24e..05cf6d50 100644\n--- a/docs/source/conf.py\n+++ b/docs/source/conf.py\n@@ -32,6 +32,20 @@\n     \'sphinxcontrib.httpexample\',\n ]\n \n+\n+def patch_pygments_to_highlight_jsonschema():\n+    """Append \'application/json+schema\' to the list of mimetypes the\n+    Pygments JSON lexer is registered to handle.\n+    """\n+    try:\n+        from pygments.lexers._mapping import LEXERS\n+        mod, lexer_name, aliases, filenames, mimetypes = LEXERS[\'JsonLexer\']\n+        mimetypes = mimetypes + (\'application/json+schema\', )\n+        LEXERS[\'JsonLexer\'] = (mod, lexer_name, aliases, filenames, mimetypes)\n+    except:\n+        # Be defensive (don\'t fail a docs build if this doesn\'t work)\n+        pass\n+\n # Add any paths that contain templates here, relative to this directory.\n templates_path = [\'_templates\']\n \n@@ -248,3 +262,4 @@\n \n suppress_warnings = [\'image.nonlocal_uri\']\n \n+patch_pygments_to_highlight_jsonschema()\ndiff --git a/news/764.bugfix b/news/764.bugfix\nnew file mode 100644\nindex 00000000..bb8fc2e9\n--- /dev/null\n+++ b/news/764.bugfix\n@@ -0,0 +1,2 @@\n+Docs: Make sure application/json+schema examples also get syntax highlighted.\n+[lgraf]\n'

