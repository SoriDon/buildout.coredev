Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-06-26T12:50:48+02:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/5b8cc7c5d12f9b1dbe0ba5c75eea69907531e6a5

fix: translate image scales in patterns

Files changed:
M CHANGES.rst
M Products/CMFPlone/patterns/settings.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0a7cb49ba..feab493cd 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -38,6 +38,9 @@ New features:
 
 Bug fixes:
 
+- Translate image scales in patterns.
+  [Gagaro]
+
 - Gruntfile generation no longer fails on introspecting resourceDirectory
   configurations using a plone.browserlayer layer, by loading all layers
   configured for the site used during generation.
diff --git a/Products/CMFPlone/patterns/settings.py b/Products/CMFPlone/patterns/settings.py
index 24d3ee66d..c568c07fc 100644
--- a/Products/CMFPlone/patterns/settings.py
+++ b/Products/CMFPlone/patterns/settings.py
@@ -15,6 +15,7 @@
 from Products.CMFPlone.patterns.tinymce import TinyMCESettingsGenerator
 from Products.CMFPlone.utils import get_portal
 from zope.component import getUtility
+from zope.i18n import translate
 from zope.interface import implementer
 from zope.schema.interfaces import IVocabularyFactory
 
@@ -80,7 +81,7 @@ def image_scales(self):
             'plone.app.vocabularies.ImagesScales'
         )
         vocabulary = factory(self.context)
-        ret = [{'title': it.title, 'value': it.value} for it in vocabulary]
+        ret = [{'title': translate(it.title), 'value': it.value} for it in vocabulary]
         ret = sorted(ret, key=lambda it: it['title'])
         return json.dumps(ret)
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-06-26T18:54:47+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/c1a1a0a3d580404af5ee65178d986d6b1f98534a

Merge pull request #2086 from plone/fix-image-scales-i18n

fix: translate image scales in patterns

Files changed:
M CHANGES.rst
M Products/CMFPlone/patterns/settings.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0a7cb49ba..feab493cd 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -38,6 +38,9 @@ New features:
 
 Bug fixes:
 
+- Translate image scales in patterns.
+  [Gagaro]
+
 - Gruntfile generation no longer fails on introspecting resourceDirectory
   configurations using a plone.browserlayer layer, by loading all layers
   configured for the site used during generation.
diff --git a/Products/CMFPlone/patterns/settings.py b/Products/CMFPlone/patterns/settings.py
index 24d3ee66d..c568c07fc 100644
--- a/Products/CMFPlone/patterns/settings.py
+++ b/Products/CMFPlone/patterns/settings.py
@@ -15,6 +15,7 @@
 from Products.CMFPlone.patterns.tinymce import TinyMCESettingsGenerator
 from Products.CMFPlone.utils import get_portal
 from zope.component import getUtility
+from zope.i18n import translate
 from zope.interface import implementer
 from zope.schema.interfaces import IVocabularyFactory
 
@@ -80,7 +81,7 @@ def image_scales(self):
             'plone.app.vocabularies.ImagesScales'
         )
         vocabulary = factory(self.context)
-        ret = [{'title': it.title, 'value': it.value} for it in vocabulary]
+        ret = [{'title': translate(it.title), 'value': it.value} for it in vocabulary]
         ret = sorted(ret, key=lambda it: it['title'])
         return json.dumps(ret)
 


