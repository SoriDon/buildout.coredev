Repository: mockup


Branch: refs/heads/master
Date: 2017-03-02T14:57:19+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/72a3baedb80f51cccd1d1de238e9682ba3e38bdc

fix pat-moment: localization of default date display

Files changed:
M CHANGES.rst
M mockup/patterns/moment/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index fe9ad20..828e89e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -17,6 +17,11 @@ Bug fixes:
 - fix datepicker markup, see plone/Products.CMFPlone#1953 - removes also ugly separator and uses CSS to add space.
   [jensens]
 
+- fix pat-moment: localization of default date display.
+  This was american english only, now it uses the configured locale format LLL (see momentjs docs) which is almost the same,
+  but works in any language.
+  [jensens]
+
 
 2.4.0 (2017-02-20)
 ------------------
diff --git a/mockup/patterns/moment/pattern.js b/mockup/patterns/moment/pattern.js
index 5f801b0..7083437 100644
--- a/mockup/patterns/moment/pattern.js
+++ b/mockup/patterns/moment/pattern.js
@@ -97,7 +97,7 @@ define([
       // selector of elements to format dates for
       selector: null,
       // also available options are relative, calendar
-      format: 'MMMM Do YYYY, h:mm:ss a',
+      format: 'LLL',
       setTitle: false
     },
     convert: function($el) {
@@ -115,7 +115,7 @@ define([
         return;
       }
       if (self.options.setTitle) {
-        $el.attr('title', date.format('MMMM Do YYYY, h:mm:ss a'));
+        $el.attr('title', date.format('LLLL'));
       }
       if (self.options.format === 'relative') {
         date = date.fromNow();


Repository: mockup


Branch: refs/heads/master
Date: 2017-03-02T15:01:00+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/be15a0fc9740a50a3dcf8341979e7c21aa657972

fix structure pattern: do not use a relative date in structure pattern

Files changed:
M CHANGES.rst
M mockup/patterns/structure/js/views/table.js
M mockup/patterns/structure/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 828e89e..0183579 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -22,6 +22,10 @@ Bug fixes:
   but works in any language.
   [jensens]
 
+- fix structure pattern: do not use a relative date in structure pattern, editors are complaining and it indeed is bad UX.
+  format with date and time in localized format 'L LT'
+  [jensens]
+
 
 2.4.0 (2017-02-20)
 ------------------
diff --git a/mockup/patterns/structure/js/views/table.js b/mockup/patterns/structure/js/views/table.js
index 6c14d69..b3536af 100644
--- a/mockup/patterns/structure/js/views/table.js
+++ b/mockup/patterns/structure/js/views/table.js
@@ -11,7 +11,7 @@ define([
   'translate',
   'bootstrap-alert'
 ], function($, _, TableRowView, TableTemplate, BaseView, Sortable,
-            Moment, Result, ActionMenuView, _t) {
+            patMoment, Result, ActionMenuView, _t) {
   'use strict';
 
   var TableView = BaseView.extend({
@@ -98,7 +98,7 @@ define([
           container.append(view.el);
         });
       }
-      self.moment = new Moment(self.$el, {
+      self.moment = new patMoment(self.$el, {
         selector: '.' + self.dateColumns.join(',.'),
         format: self.options.app.momentFormat
       });
diff --git a/mockup/patterns/structure/pattern.js b/mockup/patterns/structure/pattern.js
index f691e9c..5f289c4 100644
--- a/mockup/patterns/structure/pattern.js
+++ b/mockup/patterns/structure/pattern.js
@@ -124,7 +124,7 @@ define([
       collectionConstructor:
         'mockup-patterns-structure-url/js/collections/result',
 
-      momentFormat: 'relative',
+      momentFormat: 'L LT',
       rearrange: {
         properties: {
           'id': 'ID',


