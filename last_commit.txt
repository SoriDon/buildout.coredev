Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-02-05T23:59:20+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/11029fa68c116d4c55d9019b3cf704a004332305

Remove deprecation warning, see https://github.com/plone/Products.CMFPlone/issues/2667

Files changed:
A news/2667.bugfix
M plone/dexterity/interfaces.py

b"diff --git a/news/2667.bugfix b/news/2667.bugfix\nnew file mode 100644\nindex 0000000..7228708\n--- /dev/null\n+++ b/news/2667.bugfix\n@@ -0,0 +1 @@\n+Remove deprecation warning, see https://github.com/plone/Products.CMFPlone/issues/2667\n\\ No newline at end of file\ndiff --git a/plone/dexterity/interfaces.py b/plone/dexterity/interfaces.py\nindex 6f5fdb9..395bc61 100644\n--- a/plone/dexterity/interfaces.py\n+++ b/plone/dexterity/interfaces.py\n@@ -1,16 +1,13 @@\n # -*- coding: utf-8 -*-\n from Products.CMFCore.interfaces import ITypeInformation\n from zope.component.interfaces import IFactory\n-from zope.component.interfaces import IObjectEvent\n-from zope.interface import Interface, Attribute\n+from zope.interface import Attribute\n+from zope.interface import Interface\n+from zope.interface.interfaces import IObjectEvent\n from zope.lifecycleevent.interfaces import IModificationDescription\n+\n import zope.schema\n \n-try:\n-    from zope.app.content import IContentType\n-except ImportError:\n-    class IContentType(Interface):\n-        pass\n \n # id for pseudo-resource used to expose data for folderish items over WebDAV\n DAV_FOLDER_DATA_ID = '_data'\n"

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-02-06T00:04:45+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/902476e9edd800574a94a7eef86c8b842b6084ab

isort

Files changed:
M plone/dexterity/bbb.py
M plone/dexterity/browser/add.py
M plone/dexterity/browser/base.py
M plone/dexterity/browser/edit.py
M plone/dexterity/browser/fti.py
M plone/dexterity/browser/traversal.py
M plone/dexterity/content.py
M plone/dexterity/exportimport.py
M plone/dexterity/factory.py
M plone/dexterity/filerepresentation.py
M plone/dexterity/fti.py
M plone/dexterity/i18n.py
M plone/dexterity/interfaces.py
M plone/dexterity/tests/case.py
M plone/dexterity/tests/test_behavior.py
M plone/dexterity/tests/test_content.py
M plone/dexterity/tests/test_content_integration.py
M plone/dexterity/tests/test_factory.py
M plone/dexterity/tests/test_fti.py
M plone/dexterity/tests/test_primary.py
M plone/dexterity/tests/test_schema.py
M plone/dexterity/tests/test_schema_cache.py
M plone/dexterity/tests/test_security.py
M plone/dexterity/tests/test_utils.py
M plone/dexterity/tests/test_views.py
M plone/dexterity/tests/test_webdav.py
M plone/dexterity/utils.py
M setup.cfg
M setup.py

b'diff --git a/plone/dexterity/bbb.py b/plone/dexterity/bbb.py\nindex 3d025fa..218faa4 100644\n--- a/plone/dexterity/bbb.py\n+++ b/plone/dexterity/bbb.py\n@@ -1,6 +1,7 @@\n # -*- coding: utf-8 -*-\n import pkg_resources\n \n+\n HAS_ZSERVER = True\n try:\n     dist = pkg_resources.get_distribution(\'ZServer\')\ndiff --git a/plone/dexterity/browser/add.py b/plone/dexterity/browser/add.py\nindex 5f6e9bf..6fe0750 100644\n--- a/plone/dexterity/browser/add.py\n+++ b/plone/dexterity/browser/add.py\n@@ -2,7 +2,6 @@\n from Acquisition import aq_base\n from Acquisition import aq_inner\n from Acquisition.interfaces import IAcquirer\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.dexterity.browser.base import DexterityExtensibleForm\n from plone.dexterity.events import AddBegunEvent\n from plone.dexterity.events import AddCancelledEvent\n@@ -12,14 +11,15 @@\n from plone.dexterity.utils import getAdditionalSchemata\n from plone.z3cform import layout\n from plone.z3cform.interfaces import IDeferSecurityCheck\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n from z3c.form import form\n from z3c.form.interfaces import IDataManager\n from z3c.form.interfaces import NOT_CHANGED\n from z3c.form.util import changedField\n from zope.component import createObject\n-from zope.component import getUtility\n from zope.component import getMultiAdapter\n+from zope.component import getUtility\n from zope.event import notify\n from zope.publisher.browser import BrowserPage\n \ndiff --git a/plone/dexterity/browser/base.py b/plone/dexterity/browser/base.py\nindex 29cfb1b..c88ae48 100644\n--- a/plone/dexterity/browser/base.py\n+++ b/plone/dexterity/browser/base.py\n@@ -1,9 +1,9 @@\n # -*- coding: utf-8 -*-\n from plone.autoform.form import AutoExtensibleForm\n+from plone.dexterity.i18n import MessageFactory as _\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.utils import getAdditionalSchemata\n from zope.component import getUtility\n-from plone.dexterity.i18n import MessageFactory as _\n \n \n class DexterityExtensibleForm(AutoExtensibleForm):\ndiff --git a/plone/dexterity/browser/edit.py b/plone/dexterity/browser/edit.py\nindex 29106b4..eb55971 100644\n--- a/plone/dexterity/browser/edit.py\n+++ b/plone/dexterity/browser/edit.py\n@@ -1,6 +1,4 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.utils import getToolByName\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.dexterity.browser.base import DexterityExtensibleForm\n from plone.dexterity.events import EditBegunEvent\n from plone.dexterity.events import EditCancelledEvent\n@@ -10,6 +8,8 @@\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.registry.interfaces import IRegistry\n from plone.z3cform import layout\n+from Products.CMFCore.utils import getToolByName\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n from z3c.form import form\n from zope.component import getUtility\ndiff --git a/plone/dexterity/browser/fti.py b/plone/dexterity/browser/fti.py\nindex d2c0fbc..a3844a1 100644\n--- a/plone/dexterity/browser/fti.py\n+++ b/plone/dexterity/browser/fti.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.browser.typeinfo import FactoryTypeInformationAddView\n from plone.dexterity.fti import DexterityFTI\n+from Products.CMFCore.browser.typeinfo import FactoryTypeInformationAddView\n \n \n class FTIAddView(FactoryTypeInformationAddView):\ndiff --git a/plone/dexterity/browser/traversal.py b/plone/dexterity/browser/traversal.py\nindex b8b52e5..970b305 100644\n--- a/plone/dexterity/browser/traversal.py\n+++ b/plone/dexterity/browser/traversal.py\n@@ -9,6 +9,7 @@\n from zope.component import adapter\n from zope.publisher.interfaces.browser import IBrowserRequest\n \n+\n try:\n     from repoze.zope2.publishtraverse import DefaultPublishTraverse\n except ImportError:\ndiff --git a/plone/dexterity/content.py b/plone/dexterity/content.py\nindex 25f99fb..3cb25ad 100644\n--- a/plone/dexterity/content.py\n+++ b/plone/dexterity/content.py\n@@ -1,25 +1,15 @@\n # -*- coding: utf-8 -*-\n from AccessControl import ClassSecurityInfo\n-from AccessControl import Permissions as acpermissions\n from AccessControl import getSecurityManager\n-from Acquisition import Explicit\n+from AccessControl import Permissions as acpermissions\n from Acquisition import aq_base\n from Acquisition import aq_parent\n+from Acquisition import Explicit\n+from copy import deepcopy\n from DateTime import DateTime\n from OFS.PropertyManager import PropertyManager\n from OFS.SimpleItem import PathReprProvider\n from OFS.SimpleItem import SimpleItem\n-from Products.CMFCore import permissions\n-from Products.CMFCore.CMFCatalogAware import CMFCatalogAware\n-from Products.CMFCore.PortalContent import PortalContent\n-from Products.CMFCore.PortalFolder import PortalFolderBase\n-from Products.CMFCore.interfaces import ICatalogableDublinCore\n-from Products.CMFCore.interfaces import IDublinCore\n-from Products.CMFCore.interfaces import IMutableDublinCore\n-from Products.CMFCore.interfaces import ITypeInformation\n-from Products.CMFDynamicViewFTI.browserdefault import BrowserDefaultMixin\n-from Products.CMFPlone.interfaces import IConstrainTypes\n-from copy import deepcopy\n from plone.autoform.interfaces import READ_PERMISSIONS_KEY\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.filerepresentation import DAVCollectionMixin\n@@ -36,15 +26,25 @@\n from plone.folder.ordered import CMFOrderedBTreeFolderBase\n from plone.uuid.interfaces import IAttributeUUID\n from plone.uuid.interfaces import IUUID\n+from Products.CMFCore import permissions\n+from Products.CMFCore.CMFCatalogAware import CMFCatalogAware\n+from Products.CMFCore.interfaces import ICatalogableDublinCore\n+from Products.CMFCore.interfaces import IDublinCore\n+from Products.CMFCore.interfaces import IMutableDublinCore\n+from Products.CMFCore.interfaces import ITypeInformation\n+from Products.CMFCore.PortalContent import PortalContent\n+from Products.CMFCore.PortalFolder import PortalFolderBase\n+from Products.CMFDynamicViewFTI.browserdefault import BrowserDefaultMixin\n+from Products.CMFPlone.interfaces import IConstrainTypes\n from zExceptions import Unauthorized\n from zope.annotation import IAttributeAnnotatable\n from zope.component import queryUtility\n from zope.container.contained import Contained\n from zope.interface import implementer\n-from zope.interface.declarations import Implements\n-from zope.interface.declarations import ObjectSpecificationDescriptor\n from zope.interface.declarations import getObjectSpecification\n from zope.interface.declarations import implementedBy\n+from zope.interface.declarations import Implements\n+from zope.interface.declarations import ObjectSpecificationDescriptor\n from zope.schema.interfaces import IContextAwareDefaultFactory\n from zope.security.interfaces import IPermission\n \ndiff --git a/plone/dexterity/exportimport.py b/plone/dexterity/exportimport.py\nindex d1577ec..949c0b1 100644\n--- a/plone/dexterity/exportimport.py\n+++ b/plone/dexterity/exportimport.py\n@@ -1,14 +1,14 @@\n # -*- coding: utf-8 -*-\n+from csv import reader\n+from csv import writer\n+from Products.GenericSetup.content import _globtest\n from Products.GenericSetup.content import FauxDAVRequest\n from Products.GenericSetup.content import FauxDAVResponse\n from Products.GenericSetup.content import FolderishExporterImporter\n-from Products.GenericSetup.content import _globtest\n from Products.GenericSetup.interfaces import IContentFactoryName\n from Products.GenericSetup.interfaces import IFilesystemExporter\n from Products.GenericSetup.interfaces import IFilesystemImporter\n from Products.GenericSetup.utils import _getDottedName\n-from csv import reader\n-from csv import writer\n from six import StringIO\n from zope.component import queryAdapter\n from zope.interface import implementer\ndiff --git a/plone/dexterity/factory.py b/plone/dexterity/factory.py\nindex 9ee459c..56be581 100644\n--- a/plone/dexterity/factory.py\n+++ b/plone/dexterity/factory.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from persistent import Persistent\n-from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.interfaces import IDexterityFactory\n+from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.utils import resolveDottedName\n from zope.component import getUtility\n from zope.component.factory import Factory\ndiff --git a/plone/dexterity/filerepresentation.py b/plone/dexterity/filerepresentation.py\nindex 9ebf6e5..75c318a 100644\n--- a/plone/dexterity/filerepresentation.py\n+++ b/plone/dexterity/filerepresentation.py\n@@ -36,6 +36,7 @@\n import six\n import tempfile\n \n+\n if bbb.HAS_ZSERVER:\n     from webdav.Resource import Resource\n else:\ndiff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py\nindex 3456201..ef50bd7 100644\n--- a/plone/dexterity/fti.py\n+++ b/plone/dexterity/fti.py\n@@ -1,17 +1,18 @@\n # -*- coding: utf-8 -*-\n from AccessControl import getSecurityManager\n from Acquisition import aq_base\n-from Products.CMFCore.interfaces import ISiteRoot\n-from Products.CMFDynamicViewFTI import fti as base\n from plone.dexterity import utils\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.interfaces import IDexterityFTIModificationDescription\n-from plone.dexterity.schema import SchemaInvalidatedEvent\n from plone.dexterity.schema import portalTypeToSchemaName\n-from plone.supermodel import loadString, loadFile\n+from plone.dexterity.schema import SchemaInvalidatedEvent\n+from plone.supermodel import loadFile\n+from plone.supermodel import loadString\n from plone.supermodel.model import Model\n from plone.supermodel.utils import syncSchema\n+from Products.CMFCore.interfaces import ISiteRoot\n+from Products.CMFDynamicViewFTI import fti as base\n from zope.component import getAllUtilitiesRegisteredFor\n from zope.component import getUtility\n from zope.component import queryUtility\ndiff --git a/plone/dexterity/i18n.py b/plone/dexterity/i18n.py\nindex e8d0a86..fe387f4 100644\n--- a/plone/dexterity/i18n.py\n+++ b/plone/dexterity/i18n.py\n@@ -1,3 +1,5 @@\n # -*- coding: utf-8 -*-\n import zope.i18nmessageid\n+\n+\n MessageFactory = zope.i18nmessageid.MessageFactory("plone")\ndiff --git a/plone/dexterity/interfaces.py b/plone/dexterity/interfaces.py\nindex 395bc61..e36cbe8 100644\n--- a/plone/dexterity/interfaces.py\n+++ b/plone/dexterity/interfaces.py\n@@ -9,6 +9,12 @@\n import zope.schema\n \n \n+try:\n+    from zope.app.content import IContentType\n+except ImportError:\n+    class IContentType(Interface):\n+        pass\n+\n # id for pseudo-resource used to expose data for folderish items over WebDAV\n DAV_FOLDER_DATA_ID = \'_data\'\n \ndiff --git a/plone/dexterity/tests/case.py b/plone/dexterity/tests/case.py\nindex c82dd02..b62b68d 100644\n--- a/plone/dexterity/tests/case.py\n+++ b/plone/dexterity/tests/case.py\n@@ -1,5 +1,6 @@\n # -*- coding: utf-8 -*-\n from mock import Mock\n+\n import gc\n import pkg_resources\n import six\ndiff --git a/plone/dexterity/tests/test_behavior.py b/plone/dexterity/tests/test_behavior.py\nindex 7706ade..fecad85 100644\n--- a/plone/dexterity/tests/test_behavior.py\n+++ b/plone/dexterity/tests/test_behavior.py\n@@ -1,10 +1,10 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from plone.behavior.interfaces import IBehavior\n from plone.dexterity.behavior import DexterityBehaviorAssignable\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from zope.interface import Interface\n-from .case import MockTestCase\n \n \n class IOne(Interface):\ndiff --git a/plone/dexterity/tests/test_content.py b/plone/dexterity/tests/test_content.py\nindex 6f2dd32..3bdf69f 100644\n--- a/plone/dexterity/tests/test_content.py\n+++ b/plone/dexterity/tests/test_content.py\n@@ -1,7 +1,8 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n+from datetime import date\n+from datetime import datetime\n from DateTime import DateTime\n-from Products.CMFPlone.interfaces import IConstrainTypes\n-from datetime import date, datetime\n from mock import Mock\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehavior\n@@ -17,13 +18,13 @@\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.folder.default import DefaultOrdering\n from Products.CMFCore.interfaces import ITypesTool\n+from Products.CMFPlone.interfaces import IConstrainTypes\n from pytz import timezone\n from zope.annotation.attribute import AttributeAnnotations\n from zope.component import getUtility\n from zope.component import provideAdapter\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n-from .case import MockTestCase\n+from zope.interface import Interface\n \n import six\n import zope.schema\ndiff --git a/plone/dexterity/tests/test_content_integration.py b/plone/dexterity/tests/test_content_integration.py\nindex e796107..d2cb8f3 100644\n--- a/plone/dexterity/tests/test_content_integration.py\n+++ b/plone/dexterity/tests/test_content_integration.py\n@@ -1,7 +1,9 @@\n # -*- coding: utf-8 -*-\n from plone.testing.zca import UNIT_TESTING\n+\n import unittest\n \n+\n # TODO: End to end tests that ensure components are properly wired up\n #  - for now, we have some tests in example.dexterity, but we should have\n #    more specific tests here.\ndiff --git a/plone/dexterity/tests/test_factory.py b/plone/dexterity/tests/test_factory.py\nindex dc78c8e..6656a1f 100644\n--- a/plone/dexterity/tests/test_factory.py\n+++ b/plone/dexterity/tests/test_factory.py\n@@ -1,10 +1,11 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from zope.interface import Interface\n-from .case import MockTestCase\n+\n import unittest\n \n \ndiff --git a/plone/dexterity/tests/test_fti.py b/plone/dexterity/tests/test_fti.py\nindex 1994c39..0d9e0b4 100644\n--- a/plone/dexterity/tests/test_fti.py\n+++ b/plone/dexterity/tests/test_fti.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n-from Products.CMFCore.interfaces import ISiteRoot\n from plone.dexterity import utils\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.fti import DexterityFTI\n@@ -13,9 +13,11 @@\n from plone.dexterity.schema import DexteritySchemaPolicy\n from plone.dexterity.tests.schemata import ITestSchema\n from plone.supermodel.model import Model\n+from Products.CMFCore.interfaces import ISiteRoot\n from zope.component import getGlobalSiteManager\n from zope.component import queryUtility\n-from zope.component.hooks import setSite, setHooks\n+from zope.component.hooks import setHooks\n+from zope.component.hooks import setSite\n from zope.component.interfaces import IFactory\n from zope.component.persistentregistry import PersistentComponents\n from zope.container.contained import ObjectAddedEvent\n@@ -25,7 +27,6 @@\n from zope.lifecycleevent import ObjectModifiedEvent\n from zope.lifecycleevent.interfaces import IObjectModifiedEvent\n from zope.security.interfaces import IPermission\n-from .case import MockTestCase\n \n import os.path\n import plone.dexterity.schema.generated\ndiff --git a/plone/dexterity/tests/test_primary.py b/plone/dexterity/tests/test_primary.py\nindex a9d6831..03a3c83 100644\n--- a/plone/dexterity/tests/test_primary.py\n+++ b/plone/dexterity/tests/test_primary.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.content import Item\n from plone.dexterity.fti import DexterityFTI\n@@ -6,9 +7,8 @@\n from plone.dexterity.primary import PrimaryFieldInfo\n from plone.rfc822.interfaces import IPrimaryField\n from zope import schema\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n-from .case import MockTestCase\n+from zope.interface import Interface\n \n \n class PrimaryFieldInfoTestCase(MockTestCase):\ndiff --git a/plone/dexterity/tests/test_schema.py b/plone/dexterity/tests/test_schema.py\nindex c3ff822..e032a7a 100644\n--- a/plone/dexterity/tests/test_schema.py\n+++ b/plone/dexterity/tests/test_schema.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity import schema\n from plone.dexterity.fti import DexterityFTI\n@@ -11,7 +12,6 @@\n from Products.CMFCore.interfaces import ISiteRoot\n from zope.interface import Interface\n from zope.interface.interface import InterfaceClass\n-from .case import MockTestCase\n \n import zope.schema\n \ndiff --git a/plone/dexterity/tests/test_schema_cache.py b/plone/dexterity/tests/test_schema_cache.py\nindex d326781..5429b31 100644\n--- a/plone/dexterity/tests/test_schema_cache.py\n+++ b/plone/dexterity/tests/test_schema_cache.py\n@@ -1,10 +1,10 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.schema import SCHEMA_CACHE\n from zope.interface import Interface\n-from .case import MockTestCase\n \n import unittest\n \ndiff --git a/plone/dexterity/tests/test_security.py b/plone/dexterity/tests/test_security.py\nindex 852bfb8..ef40774 100644\n--- a/plone/dexterity/tests/test_security.py\n+++ b/plone/dexterity/tests/test_security.py\n@@ -1,8 +1,9 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.autoform.interfaces import READ_PERMISSIONS_KEY\n-from plone.dexterity.content import Item\n from plone.dexterity.content import Container\n+from plone.dexterity.content import Item\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.schema import SCHEMA_CACHE\n@@ -10,7 +11,6 @@\n from zope.interface import provider\n from zope.security.interfaces import IPermission\n from zope.security.permission import Permission\n-from .case import MockTestCase\n \n import zope.schema\n \ndiff --git a/plone/dexterity/tests/test_utils.py b/plone/dexterity/tests/test_utils.py\nindex 24f1a86..aa9443c 100644\n--- a/plone/dexterity/tests/test_utils.py\n+++ b/plone/dexterity/tests/test_utils.py\n@@ -1,8 +1,8 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity import utils\n from plone.dexterity.fti import DexterityFTI\n-from .case import MockTestCase\n \n \n class TestUtils(MockTestCase):\ndiff --git a/plone/dexterity/tests/test_views.py b/plone/dexterity/tests/test_views.py\nindex 83f3e3c..852c437 100644\n--- a/plone/dexterity/tests/test_views.py\n+++ b/plone/dexterity/tests/test_views.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from AccessControl import Unauthorized\n from mock import Mock\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.browser.add import DefaultAddForm\n@@ -20,22 +20,22 @@\n from plone.dexterity.interfaces import IEditFinishedEvent\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.z3cform.interfaces import IDeferSecurityCheck\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form.action import Actions\n from z3c.form.datamanager import AttributeField\n from z3c.form.field import Fields\n from z3c.form.field import FieldWidgets\n from z3c.form.interfaces import IActions\n from z3c.form.interfaces import IWidgets\n+from zope import schema\n from zope.component import adapter\n from zope.component import provideAdapter\n from zope.container.interfaces import INameChooser\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n from zope.interface import implementer\n+from zope.interface import Interface\n from zope.interface import provider\n from zope.publisher.browser import TestRequest as TestRequestBase\n-from .case import MockTestCase\n-from zope import schema\n \n import six\n \ndiff --git a/plone/dexterity/tests/test_webdav.py b/plone/dexterity/tests/test_webdav.py\nindex 38cec1a..8ec082c 100644\n--- a/plone/dexterity/tests/test_webdav.py\n+++ b/plone/dexterity/tests/test_webdav.py\n@@ -2,6 +2,7 @@\n from .case import HAS_ZSERVER\n from .case import MockTestCase\n \n+\n if HAS_ZSERVER:\n \n     from .case import Dummy\ndiff --git a/plone/dexterity/utils.py b/plone/dexterity/utils.py\nindex 466ad6f..87b33f9 100644\n--- a/plone/dexterity/utils.py\n+++ b/plone/dexterity/utils.py\n@@ -7,9 +7,9 @@\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.interfaces import IDexterityFTI\n+from plone.dexterity.schema import portalTypeToSchemaName  # noqa bbb\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.dexterity.schema import SchemaNameEncoder  # noqa bbb\n-from plone.dexterity.schema import portalTypeToSchemaName  # noqa bbb\n from plone.dexterity.schema import schemaNameToPortalType  # noqa bbb\n from plone.dexterity.schema import splitSchemaName  # noqa bbb\n from plone.supermodel.utils import mergedTaggedValueDict\ndiff --git a/setup.cfg b/setup.cfg\nindex 02c1587..8b8ba1e 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -34,3 +34,12 @@ ignore =\n \n [zest.releaser]\n create-wheel = yes\n+\n+[isort]\n+force_alphabetical_sort = True\n+force_single_line = True\n+lines_after_imports = 2\n+line_length = 79\n+not_skip = __init__.py\n+use_parentheses = True\n+multi_line_output = 3\ndiff --git a/setup.py b/setup.py\nindex ad54f3c..5e875ce 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n-from setuptools import setup\n from setuptools import find_packages\n+from setuptools import setup\n \n \n version = \'2.7.1.dev0\'\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-02-06T09:47:13+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/12567152b858a7c68104dc0e4c5346abb0673f74

Merge pull request #94 from plone/rm-deprecation

Rm deprecation

Files changed:
A news/2667.bugfix
M plone/dexterity/bbb.py
M plone/dexterity/browser/add.py
M plone/dexterity/browser/base.py
M plone/dexterity/browser/edit.py
M plone/dexterity/browser/fti.py
M plone/dexterity/browser/traversal.py
M plone/dexterity/content.py
M plone/dexterity/exportimport.py
M plone/dexterity/factory.py
M plone/dexterity/filerepresentation.py
M plone/dexterity/fti.py
M plone/dexterity/i18n.py
M plone/dexterity/interfaces.py
M plone/dexterity/tests/case.py
M plone/dexterity/tests/test_behavior.py
M plone/dexterity/tests/test_content.py
M plone/dexterity/tests/test_content_integration.py
M plone/dexterity/tests/test_factory.py
M plone/dexterity/tests/test_fti.py
M plone/dexterity/tests/test_primary.py
M plone/dexterity/tests/test_schema.py
M plone/dexterity/tests/test_schema_cache.py
M plone/dexterity/tests/test_security.py
M plone/dexterity/tests/test_utils.py
M plone/dexterity/tests/test_views.py
M plone/dexterity/tests/test_webdav.py
M plone/dexterity/utils.py
M setup.cfg
M setup.py

b'diff --git a/news/2667.bugfix b/news/2667.bugfix\nnew file mode 100644\nindex 0000000..7228708\n--- /dev/null\n+++ b/news/2667.bugfix\n@@ -0,0 +1 @@\n+Remove deprecation warning, see https://github.com/plone/Products.CMFPlone/issues/2667\n\\ No newline at end of file\ndiff --git a/plone/dexterity/bbb.py b/plone/dexterity/bbb.py\nindex 3d025fa..218faa4 100644\n--- a/plone/dexterity/bbb.py\n+++ b/plone/dexterity/bbb.py\n@@ -1,6 +1,7 @@\n # -*- coding: utf-8 -*-\n import pkg_resources\n \n+\n HAS_ZSERVER = True\n try:\n     dist = pkg_resources.get_distribution(\'ZServer\')\ndiff --git a/plone/dexterity/browser/add.py b/plone/dexterity/browser/add.py\nindex 5f6e9bf..6fe0750 100644\n--- a/plone/dexterity/browser/add.py\n+++ b/plone/dexterity/browser/add.py\n@@ -2,7 +2,6 @@\n from Acquisition import aq_base\n from Acquisition import aq_inner\n from Acquisition.interfaces import IAcquirer\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.dexterity.browser.base import DexterityExtensibleForm\n from plone.dexterity.events import AddBegunEvent\n from plone.dexterity.events import AddCancelledEvent\n@@ -12,14 +11,15 @@\n from plone.dexterity.utils import getAdditionalSchemata\n from plone.z3cform import layout\n from plone.z3cform.interfaces import IDeferSecurityCheck\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n from z3c.form import form\n from z3c.form.interfaces import IDataManager\n from z3c.form.interfaces import NOT_CHANGED\n from z3c.form.util import changedField\n from zope.component import createObject\n-from zope.component import getUtility\n from zope.component import getMultiAdapter\n+from zope.component import getUtility\n from zope.event import notify\n from zope.publisher.browser import BrowserPage\n \ndiff --git a/plone/dexterity/browser/base.py b/plone/dexterity/browser/base.py\nindex 29cfb1b..c88ae48 100644\n--- a/plone/dexterity/browser/base.py\n+++ b/plone/dexterity/browser/base.py\n@@ -1,9 +1,9 @@\n # -*- coding: utf-8 -*-\n from plone.autoform.form import AutoExtensibleForm\n+from plone.dexterity.i18n import MessageFactory as _\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.utils import getAdditionalSchemata\n from zope.component import getUtility\n-from plone.dexterity.i18n import MessageFactory as _\n \n \n class DexterityExtensibleForm(AutoExtensibleForm):\ndiff --git a/plone/dexterity/browser/edit.py b/plone/dexterity/browser/edit.py\nindex 29106b4..eb55971 100644\n--- a/plone/dexterity/browser/edit.py\n+++ b/plone/dexterity/browser/edit.py\n@@ -1,6 +1,4 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.utils import getToolByName\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.dexterity.browser.base import DexterityExtensibleForm\n from plone.dexterity.events import EditBegunEvent\n from plone.dexterity.events import EditCancelledEvent\n@@ -10,6 +8,8 @@\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.registry.interfaces import IRegistry\n from plone.z3cform import layout\n+from Products.CMFCore.utils import getToolByName\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n from z3c.form import form\n from zope.component import getUtility\ndiff --git a/plone/dexterity/browser/fti.py b/plone/dexterity/browser/fti.py\nindex d2c0fbc..a3844a1 100644\n--- a/plone/dexterity/browser/fti.py\n+++ b/plone/dexterity/browser/fti.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n-from Products.CMFCore.browser.typeinfo import FactoryTypeInformationAddView\n from plone.dexterity.fti import DexterityFTI\n+from Products.CMFCore.browser.typeinfo import FactoryTypeInformationAddView\n \n \n class FTIAddView(FactoryTypeInformationAddView):\ndiff --git a/plone/dexterity/browser/traversal.py b/plone/dexterity/browser/traversal.py\nindex b8b52e5..970b305 100644\n--- a/plone/dexterity/browser/traversal.py\n+++ b/plone/dexterity/browser/traversal.py\n@@ -9,6 +9,7 @@\n from zope.component import adapter\n from zope.publisher.interfaces.browser import IBrowserRequest\n \n+\n try:\n     from repoze.zope2.publishtraverse import DefaultPublishTraverse\n except ImportError:\ndiff --git a/plone/dexterity/content.py b/plone/dexterity/content.py\nindex 25f99fb..3cb25ad 100644\n--- a/plone/dexterity/content.py\n+++ b/plone/dexterity/content.py\n@@ -1,25 +1,15 @@\n # -*- coding: utf-8 -*-\n from AccessControl import ClassSecurityInfo\n-from AccessControl import Permissions as acpermissions\n from AccessControl import getSecurityManager\n-from Acquisition import Explicit\n+from AccessControl import Permissions as acpermissions\n from Acquisition import aq_base\n from Acquisition import aq_parent\n+from Acquisition import Explicit\n+from copy import deepcopy\n from DateTime import DateTime\n from OFS.PropertyManager import PropertyManager\n from OFS.SimpleItem import PathReprProvider\n from OFS.SimpleItem import SimpleItem\n-from Products.CMFCore import permissions\n-from Products.CMFCore.CMFCatalogAware import CMFCatalogAware\n-from Products.CMFCore.PortalContent import PortalContent\n-from Products.CMFCore.PortalFolder import PortalFolderBase\n-from Products.CMFCore.interfaces import ICatalogableDublinCore\n-from Products.CMFCore.interfaces import IDublinCore\n-from Products.CMFCore.interfaces import IMutableDublinCore\n-from Products.CMFCore.interfaces import ITypeInformation\n-from Products.CMFDynamicViewFTI.browserdefault import BrowserDefaultMixin\n-from Products.CMFPlone.interfaces import IConstrainTypes\n-from copy import deepcopy\n from plone.autoform.interfaces import READ_PERMISSIONS_KEY\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.filerepresentation import DAVCollectionMixin\n@@ -36,15 +26,25 @@\n from plone.folder.ordered import CMFOrderedBTreeFolderBase\n from plone.uuid.interfaces import IAttributeUUID\n from plone.uuid.interfaces import IUUID\n+from Products.CMFCore import permissions\n+from Products.CMFCore.CMFCatalogAware import CMFCatalogAware\n+from Products.CMFCore.interfaces import ICatalogableDublinCore\n+from Products.CMFCore.interfaces import IDublinCore\n+from Products.CMFCore.interfaces import IMutableDublinCore\n+from Products.CMFCore.interfaces import ITypeInformation\n+from Products.CMFCore.PortalContent import PortalContent\n+from Products.CMFCore.PortalFolder import PortalFolderBase\n+from Products.CMFDynamicViewFTI.browserdefault import BrowserDefaultMixin\n+from Products.CMFPlone.interfaces import IConstrainTypes\n from zExceptions import Unauthorized\n from zope.annotation import IAttributeAnnotatable\n from zope.component import queryUtility\n from zope.container.contained import Contained\n from zope.interface import implementer\n-from zope.interface.declarations import Implements\n-from zope.interface.declarations import ObjectSpecificationDescriptor\n from zope.interface.declarations import getObjectSpecification\n from zope.interface.declarations import implementedBy\n+from zope.interface.declarations import Implements\n+from zope.interface.declarations import ObjectSpecificationDescriptor\n from zope.schema.interfaces import IContextAwareDefaultFactory\n from zope.security.interfaces import IPermission\n \ndiff --git a/plone/dexterity/exportimport.py b/plone/dexterity/exportimport.py\nindex d1577ec..949c0b1 100644\n--- a/plone/dexterity/exportimport.py\n+++ b/plone/dexterity/exportimport.py\n@@ -1,14 +1,14 @@\n # -*- coding: utf-8 -*-\n+from csv import reader\n+from csv import writer\n+from Products.GenericSetup.content import _globtest\n from Products.GenericSetup.content import FauxDAVRequest\n from Products.GenericSetup.content import FauxDAVResponse\n from Products.GenericSetup.content import FolderishExporterImporter\n-from Products.GenericSetup.content import _globtest\n from Products.GenericSetup.interfaces import IContentFactoryName\n from Products.GenericSetup.interfaces import IFilesystemExporter\n from Products.GenericSetup.interfaces import IFilesystemImporter\n from Products.GenericSetup.utils import _getDottedName\n-from csv import reader\n-from csv import writer\n from six import StringIO\n from zope.component import queryAdapter\n from zope.interface import implementer\ndiff --git a/plone/dexterity/factory.py b/plone/dexterity/factory.py\nindex 9ee459c..56be581 100644\n--- a/plone/dexterity/factory.py\n+++ b/plone/dexterity/factory.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from persistent import Persistent\n-from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.interfaces import IDexterityFactory\n+from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.utils import resolveDottedName\n from zope.component import getUtility\n from zope.component.factory import Factory\ndiff --git a/plone/dexterity/filerepresentation.py b/plone/dexterity/filerepresentation.py\nindex 9ebf6e5..75c318a 100644\n--- a/plone/dexterity/filerepresentation.py\n+++ b/plone/dexterity/filerepresentation.py\n@@ -36,6 +36,7 @@\n import six\n import tempfile\n \n+\n if bbb.HAS_ZSERVER:\n     from webdav.Resource import Resource\n else:\ndiff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py\nindex 3456201..ef50bd7 100644\n--- a/plone/dexterity/fti.py\n+++ b/plone/dexterity/fti.py\n@@ -1,17 +1,18 @@\n # -*- coding: utf-8 -*-\n from AccessControl import getSecurityManager\n from Acquisition import aq_base\n-from Products.CMFCore.interfaces import ISiteRoot\n-from Products.CMFDynamicViewFTI import fti as base\n from plone.dexterity import utils\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.interfaces import IDexterityFTIModificationDescription\n-from plone.dexterity.schema import SchemaInvalidatedEvent\n from plone.dexterity.schema import portalTypeToSchemaName\n-from plone.supermodel import loadString, loadFile\n+from plone.dexterity.schema import SchemaInvalidatedEvent\n+from plone.supermodel import loadFile\n+from plone.supermodel import loadString\n from plone.supermodel.model import Model\n from plone.supermodel.utils import syncSchema\n+from Products.CMFCore.interfaces import ISiteRoot\n+from Products.CMFDynamicViewFTI import fti as base\n from zope.component import getAllUtilitiesRegisteredFor\n from zope.component import getUtility\n from zope.component import queryUtility\ndiff --git a/plone/dexterity/i18n.py b/plone/dexterity/i18n.py\nindex e8d0a86..fe387f4 100644\n--- a/plone/dexterity/i18n.py\n+++ b/plone/dexterity/i18n.py\n@@ -1,3 +1,5 @@\n # -*- coding: utf-8 -*-\n import zope.i18nmessageid\n+\n+\n MessageFactory = zope.i18nmessageid.MessageFactory("plone")\ndiff --git a/plone/dexterity/interfaces.py b/plone/dexterity/interfaces.py\nindex 6f5fdb9..e36cbe8 100644\n--- a/plone/dexterity/interfaces.py\n+++ b/plone/dexterity/interfaces.py\n@@ -1,11 +1,14 @@\n # -*- coding: utf-8 -*-\n from Products.CMFCore.interfaces import ITypeInformation\n from zope.component.interfaces import IFactory\n-from zope.component.interfaces import IObjectEvent\n-from zope.interface import Interface, Attribute\n+from zope.interface import Attribute\n+from zope.interface import Interface\n+from zope.interface.interfaces import IObjectEvent\n from zope.lifecycleevent.interfaces import IModificationDescription\n+\n import zope.schema\n \n+\n try:\n     from zope.app.content import IContentType\n except ImportError:\ndiff --git a/plone/dexterity/tests/case.py b/plone/dexterity/tests/case.py\nindex c82dd02..b62b68d 100644\n--- a/plone/dexterity/tests/case.py\n+++ b/plone/dexterity/tests/case.py\n@@ -1,5 +1,6 @@\n # -*- coding: utf-8 -*-\n from mock import Mock\n+\n import gc\n import pkg_resources\n import six\ndiff --git a/plone/dexterity/tests/test_behavior.py b/plone/dexterity/tests/test_behavior.py\nindex 7706ade..fecad85 100644\n--- a/plone/dexterity/tests/test_behavior.py\n+++ b/plone/dexterity/tests/test_behavior.py\n@@ -1,10 +1,10 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from plone.behavior.interfaces import IBehavior\n from plone.dexterity.behavior import DexterityBehaviorAssignable\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from zope.interface import Interface\n-from .case import MockTestCase\n \n \n class IOne(Interface):\ndiff --git a/plone/dexterity/tests/test_content.py b/plone/dexterity/tests/test_content.py\nindex 6f2dd32..3bdf69f 100644\n--- a/plone/dexterity/tests/test_content.py\n+++ b/plone/dexterity/tests/test_content.py\n@@ -1,7 +1,8 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n+from datetime import date\n+from datetime import datetime\n from DateTime import DateTime\n-from Products.CMFPlone.interfaces import IConstrainTypes\n-from datetime import date, datetime\n from mock import Mock\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehavior\n@@ -17,13 +18,13 @@\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.folder.default import DefaultOrdering\n from Products.CMFCore.interfaces import ITypesTool\n+from Products.CMFPlone.interfaces import IConstrainTypes\n from pytz import timezone\n from zope.annotation.attribute import AttributeAnnotations\n from zope.component import getUtility\n from zope.component import provideAdapter\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n-from .case import MockTestCase\n+from zope.interface import Interface\n \n import six\n import zope.schema\ndiff --git a/plone/dexterity/tests/test_content_integration.py b/plone/dexterity/tests/test_content_integration.py\nindex e796107..d2cb8f3 100644\n--- a/plone/dexterity/tests/test_content_integration.py\n+++ b/plone/dexterity/tests/test_content_integration.py\n@@ -1,7 +1,9 @@\n # -*- coding: utf-8 -*-\n from plone.testing.zca import UNIT_TESTING\n+\n import unittest\n \n+\n # TODO: End to end tests that ensure components are properly wired up\n #  - for now, we have some tests in example.dexterity, but we should have\n #    more specific tests here.\ndiff --git a/plone/dexterity/tests/test_factory.py b/plone/dexterity/tests/test_factory.py\nindex dc78c8e..6656a1f 100644\n--- a/plone/dexterity/tests/test_factory.py\n+++ b/plone/dexterity/tests/test_factory.py\n@@ -1,10 +1,11 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from zope.interface import Interface\n-from .case import MockTestCase\n+\n import unittest\n \n \ndiff --git a/plone/dexterity/tests/test_fti.py b/plone/dexterity/tests/test_fti.py\nindex 1994c39..0d9e0b4 100644\n--- a/plone/dexterity/tests/test_fti.py\n+++ b/plone/dexterity/tests/test_fti.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n-from Products.CMFCore.interfaces import ISiteRoot\n from plone.dexterity import utils\n from plone.dexterity.factory import DexterityFactory\n from plone.dexterity.fti import DexterityFTI\n@@ -13,9 +13,11 @@\n from plone.dexterity.schema import DexteritySchemaPolicy\n from plone.dexterity.tests.schemata import ITestSchema\n from plone.supermodel.model import Model\n+from Products.CMFCore.interfaces import ISiteRoot\n from zope.component import getGlobalSiteManager\n from zope.component import queryUtility\n-from zope.component.hooks import setSite, setHooks\n+from zope.component.hooks import setHooks\n+from zope.component.hooks import setSite\n from zope.component.interfaces import IFactory\n from zope.component.persistentregistry import PersistentComponents\n from zope.container.contained import ObjectAddedEvent\n@@ -25,7 +27,6 @@\n from zope.lifecycleevent import ObjectModifiedEvent\n from zope.lifecycleevent.interfaces import IObjectModifiedEvent\n from zope.security.interfaces import IPermission\n-from .case import MockTestCase\n \n import os.path\n import plone.dexterity.schema.generated\ndiff --git a/plone/dexterity/tests/test_primary.py b/plone/dexterity/tests/test_primary.py\nindex a9d6831..03a3c83 100644\n--- a/plone/dexterity/tests/test_primary.py\n+++ b/plone/dexterity/tests/test_primary.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.content import Item\n from plone.dexterity.fti import DexterityFTI\n@@ -6,9 +7,8 @@\n from plone.dexterity.primary import PrimaryFieldInfo\n from plone.rfc822.interfaces import IPrimaryField\n from zope import schema\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n-from .case import MockTestCase\n+from zope.interface import Interface\n \n \n class PrimaryFieldInfoTestCase(MockTestCase):\ndiff --git a/plone/dexterity/tests/test_schema.py b/plone/dexterity/tests/test_schema.py\nindex c3ff822..e032a7a 100644\n--- a/plone/dexterity/tests/test_schema.py\n+++ b/plone/dexterity/tests/test_schema.py\n@@ -1,4 +1,5 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity import schema\n from plone.dexterity.fti import DexterityFTI\n@@ -11,7 +12,6 @@\n from Products.CMFCore.interfaces import ISiteRoot\n from zope.interface import Interface\n from zope.interface.interface import InterfaceClass\n-from .case import MockTestCase\n \n import zope.schema\n \ndiff --git a/plone/dexterity/tests/test_schema_cache.py b/plone/dexterity/tests/test_schema_cache.py\nindex d326781..5429b31 100644\n--- a/plone/dexterity/tests/test_schema_cache.py\n+++ b/plone/dexterity/tests/test_schema_cache.py\n@@ -1,10 +1,10 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.schema import SCHEMA_CACHE\n from zope.interface import Interface\n-from .case import MockTestCase\n \n import unittest\n \ndiff --git a/plone/dexterity/tests/test_security.py b/plone/dexterity/tests/test_security.py\nindex 852bfb8..ef40774 100644\n--- a/plone/dexterity/tests/test_security.py\n+++ b/plone/dexterity/tests/test_security.py\n@@ -1,8 +1,9 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.autoform.interfaces import READ_PERMISSIONS_KEY\n-from plone.dexterity.content import Item\n from plone.dexterity.content import Container\n+from plone.dexterity.content import Item\n from plone.dexterity.fti import DexterityFTI\n from plone.dexterity.interfaces import IDexterityFTI\n from plone.dexterity.schema import SCHEMA_CACHE\n@@ -10,7 +11,6 @@\n from zope.interface import provider\n from zope.security.interfaces import IPermission\n from zope.security.permission import Permission\n-from .case import MockTestCase\n \n import zope.schema\n \ndiff --git a/plone/dexterity/tests/test_utils.py b/plone/dexterity/tests/test_utils.py\nindex 24f1a86..aa9443c 100644\n--- a/plone/dexterity/tests/test_utils.py\n+++ b/plone/dexterity/tests/test_utils.py\n@@ -1,8 +1,8 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from mock import Mock\n from plone.dexterity import utils\n from plone.dexterity.fti import DexterityFTI\n-from .case import MockTestCase\n \n \n class TestUtils(MockTestCase):\ndiff --git a/plone/dexterity/tests/test_views.py b/plone/dexterity/tests/test_views.py\nindex 83f3e3c..852c437 100644\n--- a/plone/dexterity/tests/test_views.py\n+++ b/plone/dexterity/tests/test_views.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n+from .case import MockTestCase\n from AccessControl import Unauthorized\n from mock import Mock\n-from Products.statusmessages.interfaces import IStatusMessage\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.browser.add import DefaultAddForm\n@@ -20,22 +20,22 @@\n from plone.dexterity.interfaces import IEditFinishedEvent\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.z3cform.interfaces import IDeferSecurityCheck\n+from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form.action import Actions\n from z3c.form.datamanager import AttributeField\n from z3c.form.field import Fields\n from z3c.form.field import FieldWidgets\n from z3c.form.interfaces import IActions\n from z3c.form.interfaces import IWidgets\n+from zope import schema\n from zope.component import adapter\n from zope.component import provideAdapter\n from zope.container.interfaces import INameChooser\n-from zope.interface import Interface\n from zope.interface import alsoProvides\n from zope.interface import implementer\n+from zope.interface import Interface\n from zope.interface import provider\n from zope.publisher.browser import TestRequest as TestRequestBase\n-from .case import MockTestCase\n-from zope import schema\n \n import six\n \ndiff --git a/plone/dexterity/tests/test_webdav.py b/plone/dexterity/tests/test_webdav.py\nindex 38cec1a..8ec082c 100644\n--- a/plone/dexterity/tests/test_webdav.py\n+++ b/plone/dexterity/tests/test_webdav.py\n@@ -2,6 +2,7 @@\n from .case import HAS_ZSERVER\n from .case import MockTestCase\n \n+\n if HAS_ZSERVER:\n \n     from .case import Dummy\ndiff --git a/plone/dexterity/utils.py b/plone/dexterity/utils.py\nindex 466ad6f..87b33f9 100644\n--- a/plone/dexterity/utils.py\n+++ b/plone/dexterity/utils.py\n@@ -7,9 +7,9 @@\n from plone.autoform.interfaces import IFormFieldProvider\n from plone.behavior.interfaces import IBehaviorAssignable\n from plone.dexterity.interfaces import IDexterityFTI\n+from plone.dexterity.schema import portalTypeToSchemaName  # noqa bbb\n from plone.dexterity.schema import SCHEMA_CACHE\n from plone.dexterity.schema import SchemaNameEncoder  # noqa bbb\n-from plone.dexterity.schema import portalTypeToSchemaName  # noqa bbb\n from plone.dexterity.schema import schemaNameToPortalType  # noqa bbb\n from plone.dexterity.schema import splitSchemaName  # noqa bbb\n from plone.supermodel.utils import mergedTaggedValueDict\ndiff --git a/setup.cfg b/setup.cfg\nindex 02c1587..8b8ba1e 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -34,3 +34,12 @@ ignore =\n \n [zest.releaser]\n create-wheel = yes\n+\n+[isort]\n+force_alphabetical_sort = True\n+force_single_line = True\n+lines_after_imports = 2\n+line_length = 79\n+not_skip = __init__.py\n+use_parentheses = True\n+multi_line_output = 3\ndiff --git a/setup.py b/setup.py\nindex ad54f3c..5e875ce 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n-from setuptools import setup\n from setuptools import find_packages\n+from setuptools import setup\n \n \n version = \'2.7.1.dev0\'\n'

