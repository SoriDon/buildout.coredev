Repository: plone.app.content


Branch: refs/heads/master
Date: 2017-06-23T18:54:05+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.content/commit/ec6705676527bbd82a84e71afa22113cea084cce

Use simplejson because it's ahead of stdlib and supports more types

Files changed:
M CHANGES.rst
M plone/app/content/utils.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 4527344..515cfa1 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -19,7 +19,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use simplejson because it's ahead of stdlib and supports more types
+  fixes https://github.com/plone/plone.app.content/issues/134
+  [agitator]
 
 
 3.4.1 (2017-05-16)
diff --git a/plone/app/content/utils.py b/plone/app/content/utils.py
index 45d3237..b6e9794 100644
--- a/plone/app/content/utils.py
+++ b/plone/app/content/utils.py
@@ -3,7 +3,8 @@
 
 import Missing
 import datetime
-import json
+# use simplejson because it's ahead of stdlib and supports more types
+import simplejson
 
 
 def custom_json_handler(obj):
@@ -20,8 +21,8 @@ def custom_json_handler(obj):
 
 
 def json_dumps(data):
-    return json.dumps(data, default=custom_json_handler)
+    return simplejson.dumps(data, default=custom_json_handler)
 
 
 # can eventually provide custom handling here if we want
-json_loads = json.loads
+json_loads = simplejson.loads
diff --git a/setup.py b/setup.py
index 349986b..662c787 100644
--- a/setup.py
+++ b/setup.py
@@ -47,6 +47,7 @@
         'Products.CMFDynamicViewFTI',  # required for cmf.ModifyViewTemplate
         'Products.CMFPlone',
         'setuptools',
+        'simplejson',
         'zope.component',
         'zope.container',
         'zope.deferredimport',


Repository: plone.app.content


Branch: refs/heads/master
Date: 2017-06-23T19:47:32+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.content/commit/553784e3c790010163f24cdf4fccfffa6df8604f

Merge pull request #135 from plone/simplejson

Use simplejson because it's ahead of stdlib and supports more types

Files changed:
M CHANGES.rst
M plone/app/content/utils.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 4527344..515cfa1 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -19,7 +19,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Use simplejson because it's ahead of stdlib and supports more types
+  fixes https://github.com/plone/plone.app.content/issues/134
+  [agitator]
 
 
 3.4.1 (2017-05-16)
diff --git a/plone/app/content/utils.py b/plone/app/content/utils.py
index 45d3237..b6e9794 100644
--- a/plone/app/content/utils.py
+++ b/plone/app/content/utils.py
@@ -3,7 +3,8 @@
 
 import Missing
 import datetime
-import json
+# use simplejson because it's ahead of stdlib and supports more types
+import simplejson
 
 
 def custom_json_handler(obj):
@@ -20,8 +21,8 @@ def custom_json_handler(obj):
 
 
 def json_dumps(data):
-    return json.dumps(data, default=custom_json_handler)
+    return simplejson.dumps(data, default=custom_json_handler)
 
 
 # can eventually provide custom handling here if we want
-json_loads = json.loads
+json_loads = simplejson.loads
diff --git a/setup.py b/setup.py
index 349986b..662c787 100644
--- a/setup.py
+++ b/setup.py
@@ -47,6 +47,7 @@
         'Products.CMFDynamicViewFTI',  # required for cmf.ModifyViewTemplate
         'Products.CMFPlone',
         'setuptools',
+        'simplejson',
         'zope.component',
         'zope.container',
         'zope.deferredimport',


