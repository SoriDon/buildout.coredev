Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2022-01-06T13:05:34+01:00
Author: Jan Mevissen (jmevissen) <mevissen@interaktiv.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/e37a9e0281fd44bc523e0c2f7fe36d011db97984

ref #3241 upgrade for controlpanel error-log-form view link

Files changed:
A plone/app/upgrade/v60/profiles/to6003/controlpanel.xml
M plone/app/upgrade/v60/configure.zcml
M plone/app/upgrade/v60/profiles.zcml

b'diff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex 6f25c87d..a7e0264b 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -70,6 +70,11 @@\n            handler=".alphas.fix_unicode_properties"\n            />\n \n+      <gs:upgradeDepends\n+           title="Run to6003 upgrade profile."\n+           import_profile="plone.app.upgrade.v60:to6003"\n+           />\n+\n     </gs:upgradeSteps>\n \n \ndiff --git a/plone/app/upgrade/v60/profiles.zcml b/plone/app/upgrade/v60/profiles.zcml\nindex 321cf793..91de1139 100644\n--- a/plone/app/upgrade/v60/profiles.zcml\n+++ b/plone/app/upgrade/v60/profiles.zcml\n@@ -11,6 +11,14 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to6003"\n+      title="Upgrade profile for Plone 5.2.x to Plone 6.0.0a3.dev0 (6003)"\n+      directory="profiles/to6003"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n   <!--\n     This is special, we want to reread the profile to create the FTI only if the old FTI\n     is not already a Dexterity one\ndiff --git a/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml b/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml\nnew file mode 100644\nindex 00000000..fdabbe27\n--- /dev/null\n+++ b/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml\n@@ -0,0 +1,14 @@\n+<?xml version="1.0"?>\n+<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n+  i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+\n+  <!-- update -->\n+  <configlet title="Errors" action_id="errorLog" appId="ErrorLog"\n+    category="plone-security" condition_expr=""\n+    icon_expr="string:exclamation-square"\n+    url_expr="string:${portal_url}/@@error-log-form" visible="True"\n+    i18n:attributes="title">\n+    <permission>Manage portal</permission>\n+  </configlet>\n+\n+</object>\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2022-01-06T13:13:19+01:00
Author: Jan Mevissen (jmevissen) <mevissen@interaktiv.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/6ffa4a37a7a06db4f5ab329aa3f0d004904e4237

ref #3241 add news file

Files changed:
A news/266.enhancement

b'diff --git a/news/266.enhancement b/news/266.enhancement\nnew file mode 100644\nindex 00000000..9ab44d66\n--- /dev/null\n+++ b/news/266.enhancement\n@@ -0,0 +1,2 @@\n+Upgrade Step for renamed error-log-form view link in ControlPanel\n+[jmevissen]\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2022-01-06T14:08:35+01:00
Author: Jan Mevissen (jmevissen) <mevissen@interaktiv.de>
Commit: https://github.com/plone/plone.app.upgrade/commit/e36ab6618293c89241ae62bfc7412deda5e31dfb

ref #3241 change after review

Files changed:
M plone/app/upgrade/v60/profiles.zcml

b'diff --git a/plone/app/upgrade/v60/profiles.zcml b/plone/app/upgrade/v60/profiles.zcml\nindex 91de1139..065a579f 100644\n--- a/plone/app/upgrade/v60/profiles.zcml\n+++ b/plone/app/upgrade/v60/profiles.zcml\n@@ -13,7 +13,7 @@\n \n   <genericsetup:registerProfile\n       name="to6003"\n-      title="Upgrade profile for Plone 5.2.x to Plone 6.0.0a3.dev0 (6003)"\n+      title="Upgrade profile to Plone 6.0.0a3 (6003)"\n       directory="profiles/to6003"\n       for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2022-01-09T00:12:11+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/b244a5377748af1e8a29a5e31ec6581716ef6bd8

Merge pull request #266 from plone/jmevissen-3241_enhance_error_log_form

ref #3241 upgrade for controlpanel error-log-form view link

Files changed:
A news/266.enhancement
A plone/app/upgrade/v60/profiles/to6003/controlpanel.xml
M plone/app/upgrade/v60/configure.zcml
M plone/app/upgrade/v60/profiles.zcml

b'diff --git a/news/266.enhancement b/news/266.enhancement\nnew file mode 100644\nindex 00000000..9ab44d66\n--- /dev/null\n+++ b/news/266.enhancement\n@@ -0,0 +1,2 @@\n+Upgrade Step for renamed error-log-form view link in ControlPanel\n+[jmevissen]\ndiff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex 6f25c87d..a7e0264b 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -70,6 +70,11 @@\n            handler=".alphas.fix_unicode_properties"\n            />\n \n+      <gs:upgradeDepends\n+           title="Run to6003 upgrade profile."\n+           import_profile="plone.app.upgrade.v60:to6003"\n+           />\n+\n     </gs:upgradeSteps>\n \n \ndiff --git a/plone/app/upgrade/v60/profiles.zcml b/plone/app/upgrade/v60/profiles.zcml\nindex 321cf793..065a579f 100644\n--- a/plone/app/upgrade/v60/profiles.zcml\n+++ b/plone/app/upgrade/v60/profiles.zcml\n@@ -11,6 +11,14 @@\n       provides="Products.GenericSetup.interfaces.EXTENSION"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to6003"\n+      title="Upgrade profile to Plone 6.0.0a3 (6003)"\n+      directory="profiles/to6003"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n   <!--\n     This is special, we want to reread the profile to create the FTI only if the old FTI\n     is not already a Dexterity one\ndiff --git a/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml b/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml\nnew file mode 100644\nindex 00000000..fdabbe27\n--- /dev/null\n+++ b/plone/app/upgrade/v60/profiles/to6003/controlpanel.xml\n@@ -0,0 +1,14 @@\n+<?xml version="1.0"?>\n+<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n+  i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+\n+  <!-- update -->\n+  <configlet title="Errors" action_id="errorLog" appId="ErrorLog"\n+    category="plone-security" condition_expr=""\n+    icon_expr="string:exclamation-square"\n+    url_expr="string:${portal_url}/@@error-log-form" visible="True"\n+    i18n:attributes="title">\n+    <permission>Manage portal</permission>\n+  </configlet>\n+\n+</object>\n'

