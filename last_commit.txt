Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-26T21:27:38-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/b92d76514b30511906161090fcb50dec3c1063f0

Use plone/code-analysis-action@v1 GitHub action

Files changed:
A .github/workflows/code-analysis.yml
D .github/workflows/black.yml
D .github/workflows/flake8.yml
D .github/workflows/pyroma.yml
D .github/workflows/zpretty.yml

b"diff --git a/.github/workflows/black.yml b/.github/workflows/black.yml\ndeleted file mode 100644\nindex 76a84b6..0000000\n--- a/.github/workflows/black.yml\n+++ /dev/null\n@@ -1,35 +0,0 @@\n-\n-name: Black\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-      # install black\n-      - name: install black\n-        run: pip install black\n-\n-      # run black\n-      - name: run black\n-        run: black src/ --check --diff\ndiff --git a/.github/workflows/code-analysis.yml b/.github/workflows/code-analysis.yml\nnew file mode 100644\nindex 0000000..1d89e57\n--- /dev/null\n+++ b/.github/workflows/code-analysis.yml\n@@ -0,0 +1,80 @@\n+name: Backend\n+on:\n+  push:\n+\n+jobs:\n+  black:\n+    name: Black\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: 'black'\n+          path: |\n+            src\n+            setup.py\n+\n+  flake8:\n+    name: flake8\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: 'flake8'\n+          path: |\n+            src\n+            setup.py\n+\n+  isort:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: 'isort'\n+          path: |\n+            src\n+            setup.py\n+\n+  pyroma:\n+    name: pyroma\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: 'pyroma'\n+          path: |\n+            ./\n+\n+  zpretty:\n+    name: zpretty\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: 'zpretty'\n+          path: |\n+            src\ndiff --git a/.github/workflows/flake8.yml b/.github/workflows/flake8.yml\ndeleted file mode 100644\nindex c49cf1f..0000000\n--- a/.github/workflows/flake8.yml\n+++ /dev/null\n@@ -1,37 +0,0 @@\n-name: Flake8\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-      # install flake8\n-      - name: install flake8\n-        run: pip install flakeheaven\n-\n-      # run black\n-      - name: run flake8\n-        run: |\n-          flakeheaven plugins\n-          flakeheaven missed\n-          flakeheaven lint src/ setup.py\ndiff --git a/.github/workflows/pyroma.yml b/.github/workflows/pyroma.yml\ndeleted file mode 100644\nindex bbad3c2..0000000\n--- a/.github/workflows/pyroma.yml\n+++ /dev/null\n@@ -1,35 +0,0 @@\n-name: Pyroma\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-\n-      # install pyroma\n-      - name: install pyroma\n-        run: pip install pyroma\n-\n-      # run pyroma\n-      - name: run pyroma\n-        run: pyroma -n 10 -d .\ndiff --git a/.github/workflows/zpretty.yml b/.github/workflows/zpretty.yml\ndeleted file mode 100644\nindex 180f0e9..0000000\n--- a/.github/workflows/zpretty.yml\n+++ /dev/null\n@@ -1,40 +0,0 @@\n-name: zpretty\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-\n-      # install zpretty\n-      - name: install zpretty\n-        run: pip install zpretty\n-\n-      # run zpretty\n-      - name: run zpretty\n-        run: find src -name '*.zcml' | xargs zpretty -i\n-\n-      # XXX: this doesn't work on gh actions (https://github.com/plone/plone.restapi/pull/1119/checks?check_run_id=2686474411)\n-      # run git diff\n-      - name: run git diff\n-        run: git diff --exit-code\n"

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-26T21:44:43-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/c8473536f8702f98d186827e55ecba49f289e4a3

Update Makefile to use the plone/code-quality docker image to run linters

Files changed:
M Makefile
M base.cfg

b'diff --git a/Makefile b/Makefile\nindex 8936b91..6d3eef5 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -18,6 +18,9 @@ YELLOW=`tput setaf 3`\n PLONE5=5.2.7\n PLONE6=6.0.0a4\n \n+CODE_QUALITY_VERSION=1.0.1\n+LINT=docker run --rm -v "$(PWD)":/github/workspace plone/code-quality:${CODE_QUALITY_VERSION} check\n+\n PACKAGE_NAME=plone.volto\n PACKAGE_PATH=src/\n CHECK_PATH=setup.py $(PACKAGE_PATH)\n@@ -35,14 +38,11 @@ bin/pip:\n \tpython3 -m venv .\n \tbin/pip install -U pip wheel\n \n-bin/black:\n-\tbin/pip install black\n-\n-bin/isort:\n-\tbin/pip install isort\n-\n-bin/flakeheaven:\n-\tbin/pip install flakeheaven\n+bin/black bin/isort bin/pyroma bin/zpretty: bin/pip\n+\t@echo "$(GREEN)==> Install Code Quality tools$(RESET)"\n+\tbin/pip install -r https://raw.githubusercontent.com/plone/code-quality/v$(CODE_QUALITY_VERSION)/requirements.txt\n+\t@echo "$(GREEN)==> Install pre-commit hook$(RESET)"\n+\techo -e \'#!/usr/bin/env bash\\nmake lint\' > .git/hooks/pre-commit && chmod ug+x .git/hooks/pre-commit\n \n .PHONY: build-plone-5.2\n build-plone-5.2: bin/pip ## Build Plone 5.2\n@@ -68,30 +68,41 @@ clean: ## Remove old virtualenv and creates a new one\n \n .PHONY: black\n black: bin/black ## Format codebase\n-\t./bin/black $(CHECK_PATH)\n+\tbin/black $(CHECK_PATH)\n \n .PHONY: isort\n isort: bin/isort ## Format imports in the codebase\n-\t./bin/isort $(CHECK_PATH)\n+\tbin/isort $(CHECK_PATH)\n+\n+zpretty: bin/zpretty ## Format xml and zcml with zpretty\n+\tfind "${PACKAGE_PATH}" -name \'*.xml\' | xargs bin/zpretty -x -i\n+\tfind "${PACKAGE_PATH}" -name \'*.zcml\' | xargs bin/zpretty -z -i\n \n .PHONY: format\n-format: black isort ## Format the codebase according to our standards\n+format: black isort zpretty ## Format the codebase according to our standards\n \n .PHONY: lint\n-lint: lint-isort lint-black lint-flake8 ## check style with flake8\n+lint: lint-isort lint-black lint-flake8 lint-zpretty ## check code style\n+\n+.PHONY: lint-black\n+lint-black: ## validate black formating\n+\t$(LINT) black "$(CHECK_PATH)"\n \n .PHONY: lint-flake8\n-lint-flake8: bin/flakeheaven ## validate black formating\n-\t./bin/flakeheaven lint $(CHECK_PATH)\n+lint-flake8: ## validate black formating\n+\t$(LINT) flake8 "$(CHECK_PATH)"\n \n+.PHONY: lint-isort\n+lint-isort: ## validate using isort\n+\t$(LINT) isort "$(CHECK_PATH)"\n \n-.PHONY: lint-black\n-lint-black: bin/black ## validate black formating\n-\t./bin/black --check --diff $(CHECK_PATH)\n+.PHONY: lint-pyroma\n+lint-pyroma: ## validate using pyroma\n+\t$(LINT) .\n \n-.PHONY: lint-isort\n-lint-isort: bin/isort ## validate using isort\n-\t./bin/isort --check-only $(CHECK_PATH)\n+.PHONY: lint-zpretty\n+lint-zpretty: ## validate ZCML/XML using zpretty\n+\t$(LINT) zpretty "$(PACKAGE_PATH)"\n \n .PHONY: test\n test: ## run tests\ndiff --git a/base.cfg b/base.cfg\nindex 8482906..1e72208 100644\n--- a/base.cfg\n+++ b/base.cfg\n@@ -3,7 +3,7 @@ index = https://pypi.org/simple/\n parts =\n     instance\n     plonesite\n-    code-analysis\n+    # code-analysis (Move to Makefile)\n     dependencies\n     zpretty\n     test\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-26T21:45:56-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/8052f2de7ad50af770ab795319efd889ac08cca1

Format xml files

Files changed:
M src/plone/volto/profiles/coresandbox/diff_tool.xml
M src/plone/volto/profiles/coresandbox/metadata.xml
M src/plone/volto/profiles/coresandbox/repositorytool.xml
M src/plone/volto/profiles/coresandbox/types.xml
M src/plone/volto/profiles/coresandbox/types/example.xml
M src/plone/volto/profiles/default/browserlayer.xml
M src/plone/volto/profiles/default/catalog.xml
M src/plone/volto/profiles/default/controlpanel.xml
M src/plone/volto/profiles/default/registry.xml
M src/plone/volto/profiles/default/types/Collection.xml
M src/plone/volto/profiles/default/types/Document.xml
M src/plone/volto/profiles/default/types/Event.xml
M src/plone/volto/profiles/default/types/Folder.xml
M src/plone/volto/profiles/default/types/LRF.xml
M src/plone/volto/profiles/default/types/News_Item.xml
M src/plone/volto/profiles/demo/metadata.xml
M src/plone/volto/profiles/demo/rolemap.xml
M src/plone/volto/profiles/homepage/metadata.xml
M src/plone/volto/profiles/multilingual/metadata.xml
M src/plone/volto/profiles/multilingual/registry.xml
M src/plone/volto/profiles/richtext/metadata.xml
M src/plone/volto/profiles/richtext/types.xml
M src/plone/volto/profiles/richtext/types/Document.xml
M src/plone/volto/profiles/uninstall/browserlayer.xml

b'diff --git a/src/plone/volto/profiles/coresandbox/diff_tool.xml b/src/plone/volto/profiles/coresandbox/diff_tool.xml\nindex fd83ec9..1245eee 100644\n--- a/src/plone/volto/profiles/coresandbox/diff_tool.xml\n+++ b/src/plone/volto/profiles/coresandbox/diff_tool.xml\n@@ -2,7 +2,9 @@\n <object>\n   <difftypes>\n     <type portal_type="example">\n-      <field name="any" difftype="Compound Diff for Dexterity types"/>\n+      <field difftype="Compound Diff for Dexterity types"\n+             name="any"\n+      />\n     </type>\n   </difftypes>\n-</object>\n\\ No newline at end of file\n+</object>\ndiff --git a/src/plone/volto/profiles/coresandbox/metadata.xml b/src/plone/volto/profiles/coresandbox/metadata.xml\nindex cae22a3..27e17a3 100644\n--- a/src/plone/volto/profiles/coresandbox/metadata.xml\n+++ b/src/plone/volto/profiles/coresandbox/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-   <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/coresandbox/repositorytool.xml b/src/plone/volto/profiles/coresandbox/repositorytool.xml\nindex 5889d93..1799d9b 100644\n--- a/src/plone/volto/profiles/coresandbox/repositorytool.xml\n+++ b/src/plone/volto/profiles/coresandbox/repositorytool.xml\n@@ -2,9 +2,8 @@\n <repositorytool>\n   <policymap>\n     <type name="example">\n-      <policy name="at_edit_autoversion"/>\n-      <policy name="version_on_revert"/>\n+      <policy name="at_edit_autoversion" />\n+      <policy name="version_on_revert" />\n     </type>\n   </policymap>\n </repositorytool>\n-\ndiff --git a/src/plone/volto/profiles/coresandbox/types.xml b/src/plone/volto/profiles/coresandbox/types.xml\nindex d7f2fba..fd3127e 100644\n--- a/src/plone/volto/profiles/coresandbox/types.xml\n+++ b/src/plone/volto/profiles/coresandbox/types.xml\n@@ -1,4 +1,8 @@\n <?xml version="1.0"?>\n-<object name="portal_types" meta_type="Plone Types Tool">\n- <object name="example" meta_type="Dexterity FTI"/>\n+<object meta_type="Plone Types Tool"\n+        name="portal_types"\n+>\n+  <object meta_type="Dexterity FTI"\n+          name="example"\n+  />\n </object>\ndiff --git a/src/plone/volto/profiles/coresandbox/types/example.xml b/src/plone/volto/profiles/coresandbox/types/example.xml\nindex 630ea2b..df795b2 100644\n--- a/src/plone/volto/profiles/coresandbox/types/example.xml\n+++ b/src/plone/volto/profiles/coresandbox/types/example.xml\n@@ -1,49 +1,78 @@\n <?xml version="1.0"?>\n-<object name="example" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n- <property name="title" i18n:translate="">Example</property>\n- <property name="description" i18n:translate=""></property>\n- <property name="icon_expr"></property>\n- <property name="factory">example</property>\n- <property name="add_view_expr">string:${folder_url}/++add++example</property>\n- <property name="link_target"></property>\n- <property name="immediate_view">view</property>\n- <property name="global_allow">True</property>\n- <property name="filter_content_types">False</property>\n- <property name="allowed_content_types" />\n- <property name="allow_discussion">False</property>\n- <property name="default_view">view</property>\n- <property name="view_methods">\n-  <element value="view"/>\n- </property>\n- <property name="default_view_fallback">False</property>\n- <property name="add_permission">cmf.AddPortalContent</property>\n- <property name="klass">plone.volto.coresandbox.example.Example</property>\n- <property name="schema">plone.volto.coresandbox.example.IExample</property>\n- <property name="behaviors">\n-  <element value="plone.namefromtitle" />\n-  <element value="plone.allowdiscussion" />\n-  <element value="plone.excludefromnavigation" />\n-  <element value="plone.shortname" />\n-  <element value="plone.versioning" />\n-  <element value="plone.tableofcontents" />\n-  <element value="plone.locking" />\n- </property>\n- <property name="model_source"></property>\n- <property name="model_file"></property>\n- <property name="schema_policy">dexterity</property>\n- <alias from="(Default)" to="(dynamic view)"/>\n- <alias from="edit" to="@@edit"/>\n- <alias from="sharing" to="@@sharing"/>\n- <alias from="view" to="(selected layout)"/>\n- <action title="View" action_id="view" category="object" condition_expr=""\n-    description="" icon_expr="" link_target="" url_expr="string:${object_url}"\n-    visible="True">\n-  <permission value="View"/>\n- </action>\n- <action title="Edit" action_id="edit" category="object" condition_expr=""\n-    description="" icon_expr="" link_target=""\n-    url_expr="string:${object_url}/edit" visible="True">\n-  <permission value="Modify portal content"/>\n- </action>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="example"\n+        i18n:domain="plone"\n+>\n+  <property name="title"\n+            i18n:translate=""\n+  >Example</property>\n+  <property name="description"\n+            i18n:translate=""\n+  />\n+  <property name="icon_expr" />\n+  <property name="factory">example</property>\n+  <property name="add_view_expr">string:${folder_url}/++add++example</property>\n+  <property name="link_target" />\n+  <property name="immediate_view">view</property>\n+  <property name="global_allow">True</property>\n+  <property name="filter_content_types">False</property>\n+  <property name="allowed_content_types" />\n+  <property name="allow_discussion">False</property>\n+  <property name="default_view">view</property>\n+  <property name="view_methods">\n+    <element value="view" />\n+  </property>\n+  <property name="default_view_fallback">False</property>\n+  <property name="add_permission">cmf.AddPortalContent</property>\n+  <property name="klass">plone.volto.coresandbox.example.Example</property>\n+  <property name="schema">plone.volto.coresandbox.example.IExample</property>\n+  <property name="behaviors">\n+    <element value="plone.namefromtitle" />\n+    <element value="plone.allowdiscussion" />\n+    <element value="plone.excludefromnavigation" />\n+    <element value="plone.shortname" />\n+    <element value="plone.versioning" />\n+    <element value="plone.tableofcontents" />\n+    <element value="plone.locking" />\n+  </property>\n+  <property name="model_source" />\n+  <property name="model_file" />\n+  <property name="schema_policy">dexterity</property>\n+  <alias from="(Default)"\n+         to="(dynamic view)"\n+  />\n+  <alias from="edit"\n+         to="@@edit"\n+  />\n+  <alias from="sharing"\n+         to="@@sharing"\n+  />\n+  <alias from="view"\n+         to="(selected layout)"\n+  />\n+  <action action_id="view"\n+          category="object"\n+          condition_expr=""\n+          description=""\n+          icon_expr=""\n+          link_target=""\n+          title="View"\n+          url_expr="string:${object_url}"\n+          visible="True"\n+  >\n+    <permission value="View" />\n+  </action>\n+  <action action_id="edit"\n+          category="object"\n+          condition_expr=""\n+          description=""\n+          icon_expr=""\n+          link_target=""\n+          title="Edit"\n+          url_expr="string:${object_url}/edit"\n+          visible="True"\n+  >\n+    <permission value="Modify portal content" />\n+  </action>\n </object>\ndiff --git a/src/plone/volto/profiles/default/browserlayer.xml b/src/plone/volto/profiles/default/browserlayer.xml\nindex a148165..950e873 100644\n--- a/src/plone/volto/profiles/default/browserlayer.xml\n+++ b/src/plone/volto/profiles/default/browserlayer.xml\n@@ -1,7 +1,6 @@\n <?xml version="1.0" encoding="UTF-8"?>\n <layers>\n-  <layer\n-      name="plone.volto"\n-      interface="plone.volto.interfaces.IPloneVoltoCoreLayer"\n-      />\n+  <layer interface="plone.volto.interfaces.IPloneVoltoCoreLayer"\n+         name="plone.volto"\n+  />\n </layers>\ndiff --git a/src/plone/volto/profiles/default/catalog.xml b/src/plone/volto/profiles/default/catalog.xml\nindex 5394562..4c0e009 100644\n--- a/src/plone/volto/profiles/default/catalog.xml\n+++ b/src/plone/volto/profiles/default/catalog.xml\n@@ -2,6 +2,6 @@\n <object name="portal_catalog">\n   <column value="nav_title" />\n   <column value="head_title" />\n-  <column value="hasPreviewImage"/>\n-  <column value="image_field"/>\n+  <column value="hasPreviewImage" />\n+  <column value="image_field" />\n </object>\ndiff --git a/src/plone/volto/profiles/default/controlpanel.xml b/src/plone/volto/profiles/default/controlpanel.xml\nindex f58682c..42f1a79 100644\n--- a/src/plone/volto/profiles/default/controlpanel.xml\n+++ b/src/plone/volto/profiles/default/controlpanel.xml\n@@ -1,11 +1,19 @@\n <?xml version="1.0"?>\n-<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="plone">\n- <configlet title="Volto Settings" action_id="VoltoSettings" appId="VoltoSettings"\n-    category="plone-general" condition_expr=""\n-    icon_expr="string:$portal_url/product_icon.png"\n-    url_expr="string:${portal_url}/volto_settings"\n-    visible="True" i18n:attributes="title">\n-  <permission>Manage portal</permission>\n- </configlet>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Plone Control Panel Tool"\n+        name="portal_controlpanel"\n+        i18n:domain="plone"\n+>\n+  <configlet action_id="VoltoSettings"\n+             appId="VoltoSettings"\n+             category="plone-general"\n+             condition_expr=""\n+             icon_expr="string:$portal_url/product_icon.png"\n+             title="Volto Settings"\n+             url_expr="string:${portal_url}/volto_settings"\n+             visible="True"\n+             i18n:attributes="title"\n+  >\n+    <permission>Manage portal</permission>\n+  </configlet>\n </object>\ndiff --git a/src/plone/volto/profiles/default/registry.xml b/src/plone/volto/profiles/default/registry.xml\nindex 08e8f7f..5136090 100644\n--- a/src/plone/volto/profiles/default/registry.xml\n+++ b/src/plone/volto/profiles/default/registry.xml\n@@ -1,43 +1,51 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <registry>\n-  <records interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema" prefix="plone">\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema"\n+           prefix="plone"\n+  >\n     <value key="nonfolderish_tabs">False</value>\n   </records>\n \n   <!-- This is for the elements in the root, not show the current item in navigation-->\n-  <record name="plone.show_excluded_items" interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema" field="show_excluded_items">\n+  <record field="show_excluded_items"\n+          interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema"\n+          name="plone.show_excluded_items"\n+  >\n     <value>False</value>\n   </record>\n \n-  <records interface="plone.volto.interfaces.IVoltoSettings" prefix="volto">\n+  <records interface="plone.volto.interfaces.IVoltoSettings"\n+           prefix="volto"\n+  >\n   </records>\n \n-  <record \n-    name="plone.types_use_view_action_in_listings"\n-    interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema"\n-    field="types_use_view_action_in_listings"\n-    purge="true">\n-    <value></value>\n+  <record field="types_use_view_action_in_listings"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema"\n+          name="plone.types_use_view_action_in_listings"\n+          purge="true"\n+  >\n+    <value />\n   </record>\n \n   <!-- Allowed sizes -->\n-  <record \n-    name="plone.allowed_sizes" \n-    interface="Products.CMFPlone.interfaces.controlpanel.IImagingSchema" \n-    field="allowed_sizes"\n-    purge="True"> <!-- Purge the existing ones! -->\n-      <value>\n-        <element>icon 32:32</element>\n-        <element>tile 64:64</element>\n-        <element>thumb 128:128</element>\n-        <element>mini 200:65536</element>\n-        <element>preview 400:65536</element>\n-        <element>teaser 600:65536</element>\n-        <element>large 800:65536</element>\n-        <element>larger 1000:65536</element>\n-        <element>great 1200:65536</element>\n-        <element>huge 1600:65536</element>      \n-      </value>\n+  <record field="allowed_sizes"\n+          interface="Products.CMFPlone.interfaces.controlpanel.IImagingSchema"\n+          name="plone.allowed_sizes"\n+          purge="True"\n+  >\n+    <!-- Purge the existing ones! -->\n+    <value>\n+      <element>icon 32:32</element>\n+      <element>tile 64:64</element>\n+      <element>thumb 128:128</element>\n+      <element>mini 200:65536</element>\n+      <element>preview 400:65536</element>\n+      <element>teaser 600:65536</element>\n+      <element>large 800:65536</element>\n+      <element>larger 1000:65536</element>\n+      <element>great 1200:65536</element>\n+      <element>huge 1600:65536</element>\n+    </value>\n   </record>\n \n </registry>\ndiff --git a/src/plone/volto/profiles/default/types/Collection.xml b/src/plone/volto/profiles/default/types/Collection.xml\nindex c7299d5..76189b2 100644\n--- a/src/plone/volto/profiles/default/types/Collection.xml\n+++ b/src/plone/volto/profiles/default/types/Collection.xml\n@@ -1,6 +1,9 @@\n <?xml version="1.0"?>\n-<object name="Collection" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Collection"\n+        i18n:domain="plone"\n+>\n \n   <!-- Collections in Volto are disabled by default -->\n   <property name="global_allow">False</property>\ndiff --git a/src/plone/volto/profiles/default/types/Document.xml b/src/plone/volto/profiles/default/types/Document.xml\nindex 9fd8222..d7dec6e 100644\n--- a/src/plone/volto/profiles/default/types/Document.xml\n+++ b/src/plone/volto/profiles/default/types/Document.xml\n@@ -1,16 +1,16 @@\n <?xml version="1.0"?>\n-<object\n-    i18n:domain="plone"\n-    meta_type="Dexterity FTI"\n-    name="Document"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Document"\n+        i18n:domain="plone"\n+>\n \n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishDocument</property>\n \n   <!-- Enabled behaviors -->\n   <property name="behaviors">\n-    <element value="plone.constraintypes"/>\n+    <element value="plone.constraintypes" />\n     <element value="plone.namefromtitle" />\n     <element value="plone.allowdiscussion" />\n     <element value="plone.excludefromnavigation" />\ndiff --git a/src/plone/volto/profiles/default/types/Event.xml b/src/plone/volto/profiles/default/types/Event.xml\nindex 54317cd..719ed05 100644\n--- a/src/plone/volto/profiles/default/types/Event.xml\n+++ b/src/plone/volto/profiles/default/types/Event.xml\n@@ -1,10 +1,15 @@\n <?xml version="1.0"?>\n-<object name="Event" meta_type="Dexterity FTI" i18n:domain="plone"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Event"\n+        i18n:domain="plone"\n+>\n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishEvent</property>\n-  <property name="behaviors" purge="false">\n-    <element value="plone.constraintypes"/>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.constraintypes" />\n     <element value="volto.blocks" />\n     <element value="volto.preview_image" />\n   </property>\ndiff --git a/src/plone/volto/profiles/default/types/Folder.xml b/src/plone/volto/profiles/default/types/Folder.xml\nindex 61587a3..bb845aa 100644\n--- a/src/plone/volto/profiles/default/types/Folder.xml\n+++ b/src/plone/volto/profiles/default/types/Folder.xml\n@@ -1,6 +1,9 @@\n <?xml version="1.0"?>\n-<object name="Folder" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Folder"\n+        i18n:domain="plone"\n+>\n \n   <!-- Folders in Volto are disabled by default -->\n   <property name="global_allow">False</property>\ndiff --git a/src/plone/volto/profiles/default/types/LRF.xml b/src/plone/volto/profiles/default/types/LRF.xml\nindex 4046b4c..424e8cf 100644\n--- a/src/plone/volto/profiles/default/types/LRF.xml\n+++ b/src/plone/volto/profiles/default/types/LRF.xml\n@@ -1,17 +1,22 @@\n <?xml version="1.0"?>\n-<object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="LRF"\n+        i18n:domain="plone"\n+>\n \n- <property name="global_allow">False</property>\n+  <property name="global_allow">False</property>\n \n- <property name="behaviors" purge="false">\n-  <element value="plone.dublincore"/>\n-  <element value="plone.namefromtitle"/>\n-  <element value="plone.constraintypes"/>\n-  <element value="plone.translatable" />\n-  <element value="plone.excludefromnavigation"/>\n-  <element value="plone.navigationroot"/>\n-  <element value="volto.blocks" />\n- </property>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.dublincore" />\n+    <element value="plone.namefromtitle" />\n+    <element value="plone.constraintypes" />\n+    <element value="plone.translatable" />\n+    <element value="plone.excludefromnavigation" />\n+    <element value="plone.navigationroot" />\n+    <element value="volto.blocks" />\n+  </property>\n \n </object>\ndiff --git a/src/plone/volto/profiles/default/types/News_Item.xml b/src/plone/volto/profiles/default/types/News_Item.xml\nindex 66066c3..5b3d6e3 100644\n--- a/src/plone/volto/profiles/default/types/News_Item.xml\n+++ b/src/plone/volto/profiles/default/types/News_Item.xml\n@@ -1,10 +1,15 @@\n <?xml version="1.0"?>\n-<object name="News Item" meta_type="Dexterity FTI" i18n:domain="plone"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="News Item"\n+        i18n:domain="plone"\n+>\n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishNewsItem</property>\n-  <property name="behaviors" purge="false">\n-    <element value="plone.constraintypes"/>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.constraintypes" />\n     <element value="volto.blocks" />\n   </property>\n </object>\ndiff --git a/src/plone/volto/profiles/demo/metadata.xml b/src/plone/volto/profiles/demo/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/demo/metadata.xml\n+++ b/src/plone/volto/profiles/demo/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/demo/rolemap.xml b/src/plone/volto/profiles/demo/rolemap.xml\nindex 8ae156d..4ce6e3e 100644\n--- a/src/plone/volto/profiles/demo/rolemap.xml\n+++ b/src/plone/volto/profiles/demo/rolemap.xml\n@@ -1,10 +1,12 @@\n <rolemap>\n   <permissions>\n-    <permission name="Plone Site Setup: Overview" acquire="True">\n-      <role name="Anonymous"/>\n-      <role name="Member"/>\n-      <role name="Site Administrator"/>\n-      <role name="Manager"/>\n+    <permission acquire="True"\n+                name="Plone Site Setup: Overview"\n+    >\n+      <role name="Anonymous" />\n+      <role name="Member" />\n+      <role name="Site Administrator" />\n+      <role name="Manager" />\n     </permission>\n   </permissions>\n </rolemap>\ndiff --git a/src/plone/volto/profiles/homepage/metadata.xml b/src/plone/volto/profiles/homepage/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/homepage/metadata.xml\n+++ b/src/plone/volto/profiles/homepage/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/multilingual/metadata.xml b/src/plone/volto/profiles/multilingual/metadata.xml\nindex d6396c1..ffa492f 100644\n--- a/src/plone/volto/profiles/multilingual/metadata.xml\n+++ b/src/plone/volto/profiles/multilingual/metadata.xml\n@@ -1,7 +1,7 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-   <dependency>profile-plone.volto:default</dependency>\n-   <dependency>profile-plone.app.multilingual:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+    <dependency>profile-plone.app.multilingual:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/multilingual/registry.xml b/src/plone/volto/profiles/multilingual/registry.xml\nindex 229cf6a..fdb0995 100644\n--- a/src/plone/volto/profiles/multilingual/registry.xml\n+++ b/src/plone/volto/profiles/multilingual/registry.xml\n@@ -1,10 +1,16 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <registry>\n-  <record name="plone.default_language" interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema" field="default_language">\n+  <record field="default_language"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema"\n+          name="plone.default_language"\n+  >\n     <value>en</value>\n   </record>\n   <!-- Set language to it/en -->\n-  <record name="plone.available_languages" interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema" field="available_languages">\n+  <record field="available_languages"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema"\n+          name="plone.available_languages"\n+  >\n     <value>\n       <element>it</element>\n       <element>en</element>\ndiff --git a/src/plone/volto/profiles/richtext/metadata.xml b/src/plone/volto/profiles/richtext/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/richtext/metadata.xml\n+++ b/src/plone/volto/profiles/richtext/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/richtext/types.xml b/src/plone/volto/profiles/richtext/types.xml\nindex 131bc1b..885235a 100644\n--- a/src/plone/volto/profiles/richtext/types.xml\n+++ b/src/plone/volto/profiles/richtext/types.xml\n@@ -1,4 +1,8 @@\n <?xml version="1.0"?>\n-<object name="portal_types" meta_type="Plone Types Tool">\n-  <object meta_type="Dexterity FTI" name="Document" />\n+<object meta_type="Plone Types Tool"\n+        name="portal_types"\n+>\n+  <object meta_type="Dexterity FTI"\n+          name="Document"\n+  />\n </object>\ndiff --git a/src/plone/volto/profiles/richtext/types/Document.xml b/src/plone/volto/profiles/richtext/types/Document.xml\nindex c679ce7..ec0a4f8 100644\n--- a/src/plone/volto/profiles/richtext/types/Document.xml\n+++ b/src/plone/volto/profiles/richtext/types/Document.xml\n@@ -1,12 +1,14 @@\n <?xml version="1.0"?>\n-<object\n-    i18n:domain="plone"\n-    meta_type="Dexterity FTI"\n-    name="Document"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Document"\n+        i18n:domain="plone"\n+>\n \n   <!-- Enabled behaviors -->\n-  <property name="behaviors" purge="false">\n+  <property name="behaviors"\n+            purge="false"\n+  >\n     <element value="plone.richtext" />\n   </property>\n \ndiff --git a/src/plone/volto/profiles/uninstall/browserlayer.xml b/src/plone/volto/profiles/uninstall/browserlayer.xml\nindex 6f400a1..70d1c96 100644\n--- a/src/plone/volto/profiles/uninstall/browserlayer.xml\n+++ b/src/plone/volto/profiles/uninstall/browserlayer.xml\n@@ -1,7 +1,6 @@\n <?xml version="1.0" encoding="UTF-8"?>\n <layers>\n-  <layer\n-      name="plone.volto"\n-      remove="true"\n-      />\n+  <layer name="plone.volto"\n+         remove="true"\n+  />\n </layers>\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-26T21:51:00-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/dcf2e5822e00c709943fc7d809eb495b096a4c59

Update Changelog

Files changed:
A news/68.bugfix

b'diff --git a/news/68.bugfix b/news/68.bugfix\nnew file mode 100644\nindex 0000000..df415dd\n--- /dev/null\n+++ b/news/68.bugfix\n@@ -0,0 +1,2 @@\n+Use plone/code-analysis-action on GitHub Actions and plone/code-quality Docker image and versions to format code.\n+[ericof]\n\\ No newline at end of file\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-26T21:52:44-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/bd421556966e04984d6d9af57d2990b8340d706e

Rename GitHub action

Files changed:
M .github/workflows/code-analysis.yml

b'diff --git a/.github/workflows/code-analysis.yml b/.github/workflows/code-analysis.yml\nindex 1d89e57..f121eaa 100644\n--- a/.github/workflows/code-analysis.yml\n+++ b/.github/workflows/code-analysis.yml\n@@ -1,4 +1,4 @@\n-name: Backend\n+name: Code Analysis\n on:\n   push:\n \n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-27T20:21:36-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/bd17b3c79739cf88499cf584208f242a63b3b068

Always install lint tools

Files changed:
M Makefile

b'diff --git a/Makefile b/Makefile\nindex 6d3eef5..5eee094 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -45,14 +45,14 @@ bin/black bin/isort bin/pyroma bin/zpretty: bin/pip\n \techo -e \'#!/usr/bin/env bash\\nmake lint\' > .git/hooks/pre-commit && chmod ug+x .git/hooks/pre-commit\n \n .PHONY: build-plone-5.2\n-build-plone-5.2: bin/pip ## Build Plone 5.2\n+build-plone-5.2: bin/pip bin/black ## Build Plone 5.2\n \t@echo "$(GREEN)==> Build with Plone 5.2$(RESET)"\n \tbin/pip install Plone plone.app.testing -c https://dist.plone.org/release/$(PLONE5)/constraints.txt\n \tbin/pip install -e ".[test]"\n \tbin/mkwsgiinstance -d . -u admin:admin\n \n .PHONY: build-plone-6.0\n-build-plone-6.0: bin/pip ## Build Plone 6.0\n+build-plone-6.0: bin/pip bin/black ## Build Plone 6.0\n \t@echo "$(GREEN)==> Build with Plone 6.0$(RESET)"\n \tbin/pip install Plone plone.app.testing -c https://dist.plone.org/release/$(PLONE6)/constraints.txt\n \tbin/pip install -e ".[test]"\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-27T20:22:09-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/e5351a5e7aff20e65230bcb607a7a1f149c54ff7

Use Plone 6.0.0a6

Files changed:
M .github/workflows/tests.yml
M Makefile

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex a024e3c..819a166 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -7,7 +7,7 @@ jobs:\n       fail-fast: false\n       matrix:\n         python: [3.7, 3.8, 3.9]\n-        plone: ["6.0.0a2", "5.2-latest"]\n+        plone: ["6.0.0a6", "5.2-latest"]\n         exclude:\n           - plone: "5.2-latest"\n             python: 3.9\n@@ -26,7 +26,7 @@ jobs:\n       # Install plone.volto with test extras\n       - name: Install plone.volto\n         run: |\n-          pip install ".[test]" --use-deprecated legacy-resolver\n+          pip install ".[test]"\n \n       # test\n       - name: test\ndiff --git a/Makefile b/Makefile\nindex 5eee094..a3afffc 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -16,7 +16,7 @@ RESET=`tput sgr0`\n YELLOW=`tput setaf 3`\n \n PLONE5=5.2.7\n-PLONE6=6.0.0a4\n+PLONE6=6.0.0a6\n \n CODE_QUALITY_VERSION=1.0.1\n LINT=docker run --rm -v "$(PWD)":/github/workspace plone/code-quality:${CODE_QUALITY_VERSION} check\n'

Repository: plone.volto


Branch: refs/heads/main
Date: 2022-06-27T20:44:32-03:00
Author: Érico Andrei (ericof) <ericof@gmail.com>
Commit: https://github.com/plone/plone.volto/commit/558e076baa0b4e5ad2771cddafc1905c59e728d4

Merge pull request #73 from plone/plone-code-analysis-action

Use plone/code-analysis-action and plone/code-quality

Files changed:
A .github/workflows/code-analysis.yml
A news/68.bugfix
M .github/workflows/tests.yml
M Makefile
M base.cfg
M src/plone/volto/profiles/coresandbox/diff_tool.xml
M src/plone/volto/profiles/coresandbox/metadata.xml
M src/plone/volto/profiles/coresandbox/repositorytool.xml
M src/plone/volto/profiles/coresandbox/types.xml
M src/plone/volto/profiles/coresandbox/types/example.xml
M src/plone/volto/profiles/default/browserlayer.xml
M src/plone/volto/profiles/default/catalog.xml
M src/plone/volto/profiles/default/controlpanel.xml
M src/plone/volto/profiles/default/registry.xml
M src/plone/volto/profiles/default/types/Collection.xml
M src/plone/volto/profiles/default/types/Document.xml
M src/plone/volto/profiles/default/types/Event.xml
M src/plone/volto/profiles/default/types/Folder.xml
M src/plone/volto/profiles/default/types/LRF.xml
M src/plone/volto/profiles/default/types/News_Item.xml
M src/plone/volto/profiles/demo/metadata.xml
M src/plone/volto/profiles/demo/rolemap.xml
M src/plone/volto/profiles/homepage/metadata.xml
M src/plone/volto/profiles/multilingual/metadata.xml
M src/plone/volto/profiles/multilingual/registry.xml
M src/plone/volto/profiles/richtext/metadata.xml
M src/plone/volto/profiles/richtext/types.xml
M src/plone/volto/profiles/richtext/types/Document.xml
M src/plone/volto/profiles/uninstall/browserlayer.xml
D .github/workflows/black.yml
D .github/workflows/flake8.yml
D .github/workflows/pyroma.yml
D .github/workflows/zpretty.yml

b'diff --git a/.github/workflows/black.yml b/.github/workflows/black.yml\ndeleted file mode 100644\nindex 76a84b6..0000000\n--- a/.github/workflows/black.yml\n+++ /dev/null\n@@ -1,35 +0,0 @@\n-\n-name: Black\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles(\'**/requirements.txt\') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-      # install black\n-      - name: install black\n-        run: pip install black\n-\n-      # run black\n-      - name: run black\n-        run: black src/ --check --diff\ndiff --git a/.github/workflows/code-analysis.yml b/.github/workflows/code-analysis.yml\nnew file mode 100644\nindex 0000000..f121eaa\n--- /dev/null\n+++ b/.github/workflows/code-analysis.yml\n@@ -0,0 +1,80 @@\n+name: Code Analysis\n+on:\n+  push:\n+\n+jobs:\n+  black:\n+    name: Black\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: \'black\'\n+          path: |\n+            src\n+            setup.py\n+\n+  flake8:\n+    name: flake8\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: \'flake8\'\n+          path: |\n+            src\n+            setup.py\n+\n+  isort:\n+    runs-on: ubuntu-latest\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: \'isort\'\n+          path: |\n+            src\n+            setup.py\n+\n+  pyroma:\n+    name: pyroma\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: \'pyroma\'\n+          path: |\n+            ./\n+\n+  zpretty:\n+    name: zpretty\n+    runs-on: ubuntu-latest\n+\n+    steps:\n+      - name: Checkout codebase\n+        uses: actions/checkout@v2\n+\n+      - name: Run check\n+        uses: plone/code-analysis-action@v1\n+        with:\n+          check: \'zpretty\'\n+          path: |\n+            src\ndiff --git a/.github/workflows/flake8.yml b/.github/workflows/flake8.yml\ndeleted file mode 100644\nindex c49cf1f..0000000\n--- a/.github/workflows/flake8.yml\n+++ /dev/null\n@@ -1,37 +0,0 @@\n-name: Flake8\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles(\'**/requirements.txt\') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-      # install flake8\n-      - name: install flake8\n-        run: pip install flakeheaven\n-\n-      # run black\n-      - name: run flake8\n-        run: |\n-          flakeheaven plugins\n-          flakeheaven missed\n-          flakeheaven lint src/ setup.py\ndiff --git a/.github/workflows/pyroma.yml b/.github/workflows/pyroma.yml\ndeleted file mode 100644\nindex bbad3c2..0000000\n--- a/.github/workflows/pyroma.yml\n+++ /dev/null\n@@ -1,35 +0,0 @@\n-name: Pyroma\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles(\'**/requirements.txt\') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-\n-      # install pyroma\n-      - name: install pyroma\n-        run: pip install pyroma\n-\n-      # run pyroma\n-      - name: run pyroma\n-        run: pyroma -n 10 -d .\ndiff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex a024e3c..819a166 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -7,7 +7,7 @@ jobs:\n       fail-fast: false\n       matrix:\n         python: [3.7, 3.8, 3.9]\n-        plone: ["6.0.0a2", "5.2-latest"]\n+        plone: ["6.0.0a6", "5.2-latest"]\n         exclude:\n           - plone: "5.2-latest"\n             python: 3.9\n@@ -26,7 +26,7 @@ jobs:\n       # Install plone.volto with test extras\n       - name: Install plone.volto\n         run: |\n-          pip install ".[test]" --use-deprecated legacy-resolver\n+          pip install ".[test]"\n \n       # test\n       - name: test\ndiff --git a/.github/workflows/zpretty.yml b/.github/workflows/zpretty.yml\ndeleted file mode 100644\nindex 180f0e9..0000000\n--- a/.github/workflows/zpretty.yml\n+++ /dev/null\n@@ -1,40 +0,0 @@\n-name: zpretty\n-on: [push]\n-jobs:\n-  build:\n-    runs-on: ubuntu-latest\n-    strategy:\n-      fail-fast: false\n-      matrix:\n-        python-version: [3.8]\n-\n-    steps:\n-      # git checkout\n-      - uses: actions/checkout@v2\n-\n-      # python setup\n-      - name: Set up Python ${{ matrix.python-version }}\n-        uses: actions/setup-python@v1\n-        with:\n-          python-version: ${{ matrix.python-version }}\n-\n-      # python cache\n-      - uses: actions/cache@v1\n-        with:\n-          path: ~/.cache/pip\n-          key: ${{ runner.os }}-pip-${{ hashFiles(\'**/requirements.txt\') }}\n-          restore-keys: |\n-            ${{ runner.os }}-pip-\n-\n-      # install zpretty\n-      - name: install zpretty\n-        run: pip install zpretty\n-\n-      # run zpretty\n-      - name: run zpretty\n-        run: find src -name \'*.zcml\' | xargs zpretty -i\n-\n-      # XXX: this doesn\'t work on gh actions (https://github.com/plone/plone.restapi/pull/1119/checks?check_run_id=2686474411)\n-      # run git diff\n-      - name: run git diff\n-        run: git diff --exit-code\ndiff --git a/Makefile b/Makefile\nindex 8936b91..a3afffc 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -16,7 +16,10 @@ RESET=`tput sgr0`\n YELLOW=`tput setaf 3`\n \n PLONE5=5.2.7\n-PLONE6=6.0.0a4\n+PLONE6=6.0.0a6\n+\n+CODE_QUALITY_VERSION=1.0.1\n+LINT=docker run --rm -v "$(PWD)":/github/workspace plone/code-quality:${CODE_QUALITY_VERSION} check\n \n PACKAGE_NAME=plone.volto\n PACKAGE_PATH=src/\n@@ -35,24 +38,21 @@ bin/pip:\n \tpython3 -m venv .\n \tbin/pip install -U pip wheel\n \n-bin/black:\n-\tbin/pip install black\n-\n-bin/isort:\n-\tbin/pip install isort\n-\n-bin/flakeheaven:\n-\tbin/pip install flakeheaven\n+bin/black bin/isort bin/pyroma bin/zpretty: bin/pip\n+\t@echo "$(GREEN)==> Install Code Quality tools$(RESET)"\n+\tbin/pip install -r https://raw.githubusercontent.com/plone/code-quality/v$(CODE_QUALITY_VERSION)/requirements.txt\n+\t@echo "$(GREEN)==> Install pre-commit hook$(RESET)"\n+\techo -e \'#!/usr/bin/env bash\\nmake lint\' > .git/hooks/pre-commit && chmod ug+x .git/hooks/pre-commit\n \n .PHONY: build-plone-5.2\n-build-plone-5.2: bin/pip ## Build Plone 5.2\n+build-plone-5.2: bin/pip bin/black ## Build Plone 5.2\n \t@echo "$(GREEN)==> Build with Plone 5.2$(RESET)"\n \tbin/pip install Plone plone.app.testing -c https://dist.plone.org/release/$(PLONE5)/constraints.txt\n \tbin/pip install -e ".[test]"\n \tbin/mkwsgiinstance -d . -u admin:admin\n \n .PHONY: build-plone-6.0\n-build-plone-6.0: bin/pip ## Build Plone 6.0\n+build-plone-6.0: bin/pip bin/black ## Build Plone 6.0\n \t@echo "$(GREEN)==> Build with Plone 6.0$(RESET)"\n \tbin/pip install Plone plone.app.testing -c https://dist.plone.org/release/$(PLONE6)/constraints.txt\n \tbin/pip install -e ".[test]"\n@@ -68,30 +68,41 @@ clean: ## Remove old virtualenv and creates a new one\n \n .PHONY: black\n black: bin/black ## Format codebase\n-\t./bin/black $(CHECK_PATH)\n+\tbin/black $(CHECK_PATH)\n \n .PHONY: isort\n isort: bin/isort ## Format imports in the codebase\n-\t./bin/isort $(CHECK_PATH)\n+\tbin/isort $(CHECK_PATH)\n+\n+zpretty: bin/zpretty ## Format xml and zcml with zpretty\n+\tfind "${PACKAGE_PATH}" -name \'*.xml\' | xargs bin/zpretty -x -i\n+\tfind "${PACKAGE_PATH}" -name \'*.zcml\' | xargs bin/zpretty -z -i\n \n .PHONY: format\n-format: black isort ## Format the codebase according to our standards\n+format: black isort zpretty ## Format the codebase according to our standards\n \n .PHONY: lint\n-lint: lint-isort lint-black lint-flake8 ## check style with flake8\n+lint: lint-isort lint-black lint-flake8 lint-zpretty ## check code style\n+\n+.PHONY: lint-black\n+lint-black: ## validate black formating\n+\t$(LINT) black "$(CHECK_PATH)"\n \n .PHONY: lint-flake8\n-lint-flake8: bin/flakeheaven ## validate black formating\n-\t./bin/flakeheaven lint $(CHECK_PATH)\n+lint-flake8: ## validate black formating\n+\t$(LINT) flake8 "$(CHECK_PATH)"\n \n+.PHONY: lint-isort\n+lint-isort: ## validate using isort\n+\t$(LINT) isort "$(CHECK_PATH)"\n \n-.PHONY: lint-black\n-lint-black: bin/black ## validate black formating\n-\t./bin/black --check --diff $(CHECK_PATH)\n+.PHONY: lint-pyroma\n+lint-pyroma: ## validate using pyroma\n+\t$(LINT) .\n \n-.PHONY: lint-isort\n-lint-isort: bin/isort ## validate using isort\n-\t./bin/isort --check-only $(CHECK_PATH)\n+.PHONY: lint-zpretty\n+lint-zpretty: ## validate ZCML/XML using zpretty\n+\t$(LINT) zpretty "$(PACKAGE_PATH)"\n \n .PHONY: test\n test: ## run tests\ndiff --git a/base.cfg b/base.cfg\nindex 8482906..1e72208 100644\n--- a/base.cfg\n+++ b/base.cfg\n@@ -3,7 +3,7 @@ index = https://pypi.org/simple/\n parts =\n     instance\n     plonesite\n-    code-analysis\n+    # code-analysis (Move to Makefile)\n     dependencies\n     zpretty\n     test\ndiff --git a/news/68.bugfix b/news/68.bugfix\nnew file mode 100644\nindex 0000000..df415dd\n--- /dev/null\n+++ b/news/68.bugfix\n@@ -0,0 +1,2 @@\n+Use plone/code-analysis-action on GitHub Actions and plone/code-quality Docker image and versions to format code.\n+[ericof]\n\\ No newline at end of file\ndiff --git a/src/plone/volto/profiles/coresandbox/diff_tool.xml b/src/plone/volto/profiles/coresandbox/diff_tool.xml\nindex fd83ec9..1245eee 100644\n--- a/src/plone/volto/profiles/coresandbox/diff_tool.xml\n+++ b/src/plone/volto/profiles/coresandbox/diff_tool.xml\n@@ -2,7 +2,9 @@\n <object>\n   <difftypes>\n     <type portal_type="example">\n-      <field name="any" difftype="Compound Diff for Dexterity types"/>\n+      <field difftype="Compound Diff for Dexterity types"\n+             name="any"\n+      />\n     </type>\n   </difftypes>\n-</object>\n\\ No newline at end of file\n+</object>\ndiff --git a/src/plone/volto/profiles/coresandbox/metadata.xml b/src/plone/volto/profiles/coresandbox/metadata.xml\nindex cae22a3..27e17a3 100644\n--- a/src/plone/volto/profiles/coresandbox/metadata.xml\n+++ b/src/plone/volto/profiles/coresandbox/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-   <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/coresandbox/repositorytool.xml b/src/plone/volto/profiles/coresandbox/repositorytool.xml\nindex 5889d93..1799d9b 100644\n--- a/src/plone/volto/profiles/coresandbox/repositorytool.xml\n+++ b/src/plone/volto/profiles/coresandbox/repositorytool.xml\n@@ -2,9 +2,8 @@\n <repositorytool>\n   <policymap>\n     <type name="example">\n-      <policy name="at_edit_autoversion"/>\n-      <policy name="version_on_revert"/>\n+      <policy name="at_edit_autoversion" />\n+      <policy name="version_on_revert" />\n     </type>\n   </policymap>\n </repositorytool>\n-\ndiff --git a/src/plone/volto/profiles/coresandbox/types.xml b/src/plone/volto/profiles/coresandbox/types.xml\nindex d7f2fba..fd3127e 100644\n--- a/src/plone/volto/profiles/coresandbox/types.xml\n+++ b/src/plone/volto/profiles/coresandbox/types.xml\n@@ -1,4 +1,8 @@\n <?xml version="1.0"?>\n-<object name="portal_types" meta_type="Plone Types Tool">\n- <object name="example" meta_type="Dexterity FTI"/>\n+<object meta_type="Plone Types Tool"\n+        name="portal_types"\n+>\n+  <object meta_type="Dexterity FTI"\n+          name="example"\n+  />\n </object>\ndiff --git a/src/plone/volto/profiles/coresandbox/types/example.xml b/src/plone/volto/profiles/coresandbox/types/example.xml\nindex 630ea2b..df795b2 100644\n--- a/src/plone/volto/profiles/coresandbox/types/example.xml\n+++ b/src/plone/volto/profiles/coresandbox/types/example.xml\n@@ -1,49 +1,78 @@\n <?xml version="1.0"?>\n-<object name="example" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n- <property name="title" i18n:translate="">Example</property>\n- <property name="description" i18n:translate=""></property>\n- <property name="icon_expr"></property>\n- <property name="factory">example</property>\n- <property name="add_view_expr">string:${folder_url}/++add++example</property>\n- <property name="link_target"></property>\n- <property name="immediate_view">view</property>\n- <property name="global_allow">True</property>\n- <property name="filter_content_types">False</property>\n- <property name="allowed_content_types" />\n- <property name="allow_discussion">False</property>\n- <property name="default_view">view</property>\n- <property name="view_methods">\n-  <element value="view"/>\n- </property>\n- <property name="default_view_fallback">False</property>\n- <property name="add_permission">cmf.AddPortalContent</property>\n- <property name="klass">plone.volto.coresandbox.example.Example</property>\n- <property name="schema">plone.volto.coresandbox.example.IExample</property>\n- <property name="behaviors">\n-  <element value="plone.namefromtitle" />\n-  <element value="plone.allowdiscussion" />\n-  <element value="plone.excludefromnavigation" />\n-  <element value="plone.shortname" />\n-  <element value="plone.versioning" />\n-  <element value="plone.tableofcontents" />\n-  <element value="plone.locking" />\n- </property>\n- <property name="model_source"></property>\n- <property name="model_file"></property>\n- <property name="schema_policy">dexterity</property>\n- <alias from="(Default)" to="(dynamic view)"/>\n- <alias from="edit" to="@@edit"/>\n- <alias from="sharing" to="@@sharing"/>\n- <alias from="view" to="(selected layout)"/>\n- <action title="View" action_id="view" category="object" condition_expr=""\n-    description="" icon_expr="" link_target="" url_expr="string:${object_url}"\n-    visible="True">\n-  <permission value="View"/>\n- </action>\n- <action title="Edit" action_id="edit" category="object" condition_expr=""\n-    description="" icon_expr="" link_target=""\n-    url_expr="string:${object_url}/edit" visible="True">\n-  <permission value="Modify portal content"/>\n- </action>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="example"\n+        i18n:domain="plone"\n+>\n+  <property name="title"\n+            i18n:translate=""\n+  >Example</property>\n+  <property name="description"\n+            i18n:translate=""\n+  />\n+  <property name="icon_expr" />\n+  <property name="factory">example</property>\n+  <property name="add_view_expr">string:${folder_url}/++add++example</property>\n+  <property name="link_target" />\n+  <property name="immediate_view">view</property>\n+  <property name="global_allow">True</property>\n+  <property name="filter_content_types">False</property>\n+  <property name="allowed_content_types" />\n+  <property name="allow_discussion">False</property>\n+  <property name="default_view">view</property>\n+  <property name="view_methods">\n+    <element value="view" />\n+  </property>\n+  <property name="default_view_fallback">False</property>\n+  <property name="add_permission">cmf.AddPortalContent</property>\n+  <property name="klass">plone.volto.coresandbox.example.Example</property>\n+  <property name="schema">plone.volto.coresandbox.example.IExample</property>\n+  <property name="behaviors">\n+    <element value="plone.namefromtitle" />\n+    <element value="plone.allowdiscussion" />\n+    <element value="plone.excludefromnavigation" />\n+    <element value="plone.shortname" />\n+    <element value="plone.versioning" />\n+    <element value="plone.tableofcontents" />\n+    <element value="plone.locking" />\n+  </property>\n+  <property name="model_source" />\n+  <property name="model_file" />\n+  <property name="schema_policy">dexterity</property>\n+  <alias from="(Default)"\n+         to="(dynamic view)"\n+  />\n+  <alias from="edit"\n+         to="@@edit"\n+  />\n+  <alias from="sharing"\n+         to="@@sharing"\n+  />\n+  <alias from="view"\n+         to="(selected layout)"\n+  />\n+  <action action_id="view"\n+          category="object"\n+          condition_expr=""\n+          description=""\n+          icon_expr=""\n+          link_target=""\n+          title="View"\n+          url_expr="string:${object_url}"\n+          visible="True"\n+  >\n+    <permission value="View" />\n+  </action>\n+  <action action_id="edit"\n+          category="object"\n+          condition_expr=""\n+          description=""\n+          icon_expr=""\n+          link_target=""\n+          title="Edit"\n+          url_expr="string:${object_url}/edit"\n+          visible="True"\n+  >\n+    <permission value="Modify portal content" />\n+  </action>\n </object>\ndiff --git a/src/plone/volto/profiles/default/browserlayer.xml b/src/plone/volto/profiles/default/browserlayer.xml\nindex a148165..950e873 100644\n--- a/src/plone/volto/profiles/default/browserlayer.xml\n+++ b/src/plone/volto/profiles/default/browserlayer.xml\n@@ -1,7 +1,6 @@\n <?xml version="1.0" encoding="UTF-8"?>\n <layers>\n-  <layer\n-      name="plone.volto"\n-      interface="plone.volto.interfaces.IPloneVoltoCoreLayer"\n-      />\n+  <layer interface="plone.volto.interfaces.IPloneVoltoCoreLayer"\n+         name="plone.volto"\n+  />\n </layers>\ndiff --git a/src/plone/volto/profiles/default/catalog.xml b/src/plone/volto/profiles/default/catalog.xml\nindex 5394562..4c0e009 100644\n--- a/src/plone/volto/profiles/default/catalog.xml\n+++ b/src/plone/volto/profiles/default/catalog.xml\n@@ -2,6 +2,6 @@\n <object name="portal_catalog">\n   <column value="nav_title" />\n   <column value="head_title" />\n-  <column value="hasPreviewImage"/>\n-  <column value="image_field"/>\n+  <column value="hasPreviewImage" />\n+  <column value="image_field" />\n </object>\ndiff --git a/src/plone/volto/profiles/default/controlpanel.xml b/src/plone/volto/profiles/default/controlpanel.xml\nindex f58682c..42f1a79 100644\n--- a/src/plone/volto/profiles/default/controlpanel.xml\n+++ b/src/plone/volto/profiles/default/controlpanel.xml\n@@ -1,11 +1,19 @@\n <?xml version="1.0"?>\n-<object name="portal_controlpanel" meta_type="Plone Control Panel Tool"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n" i18n:domain="plone">\n- <configlet title="Volto Settings" action_id="VoltoSettings" appId="VoltoSettings"\n-    category="plone-general" condition_expr=""\n-    icon_expr="string:$portal_url/product_icon.png"\n-    url_expr="string:${portal_url}/volto_settings"\n-    visible="True" i18n:attributes="title">\n-  <permission>Manage portal</permission>\n- </configlet>\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Plone Control Panel Tool"\n+        name="portal_controlpanel"\n+        i18n:domain="plone"\n+>\n+  <configlet action_id="VoltoSettings"\n+             appId="VoltoSettings"\n+             category="plone-general"\n+             condition_expr=""\n+             icon_expr="string:$portal_url/product_icon.png"\n+             title="Volto Settings"\n+             url_expr="string:${portal_url}/volto_settings"\n+             visible="True"\n+             i18n:attributes="title"\n+  >\n+    <permission>Manage portal</permission>\n+  </configlet>\n </object>\ndiff --git a/src/plone/volto/profiles/default/registry.xml b/src/plone/volto/profiles/default/registry.xml\nindex 08e8f7f..5136090 100644\n--- a/src/plone/volto/profiles/default/registry.xml\n+++ b/src/plone/volto/profiles/default/registry.xml\n@@ -1,43 +1,51 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <registry>\n-  <records interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema" prefix="plone">\n+  <records interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema"\n+           prefix="plone"\n+  >\n     <value key="nonfolderish_tabs">False</value>\n   </records>\n \n   <!-- This is for the elements in the root, not show the current item in navigation-->\n-  <record name="plone.show_excluded_items" interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema" field="show_excluded_items">\n+  <record field="show_excluded_items"\n+          interface="Products.CMFPlone.interfaces.controlpanel.INavigationSchema"\n+          name="plone.show_excluded_items"\n+  >\n     <value>False</value>\n   </record>\n \n-  <records interface="plone.volto.interfaces.IVoltoSettings" prefix="volto">\n+  <records interface="plone.volto.interfaces.IVoltoSettings"\n+           prefix="volto"\n+  >\n   </records>\n \n-  <record \n-    name="plone.types_use_view_action_in_listings"\n-    interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema"\n-    field="types_use_view_action_in_listings"\n-    purge="true">\n-    <value></value>\n+  <record field="types_use_view_action_in_listings"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ITypesSchema"\n+          name="plone.types_use_view_action_in_listings"\n+          purge="true"\n+  >\n+    <value />\n   </record>\n \n   <!-- Allowed sizes -->\n-  <record \n-    name="plone.allowed_sizes" \n-    interface="Products.CMFPlone.interfaces.controlpanel.IImagingSchema" \n-    field="allowed_sizes"\n-    purge="True"> <!-- Purge the existing ones! -->\n-      <value>\n-        <element>icon 32:32</element>\n-        <element>tile 64:64</element>\n-        <element>thumb 128:128</element>\n-        <element>mini 200:65536</element>\n-        <element>preview 400:65536</element>\n-        <element>teaser 600:65536</element>\n-        <element>large 800:65536</element>\n-        <element>larger 1000:65536</element>\n-        <element>great 1200:65536</element>\n-        <element>huge 1600:65536</element>      \n-      </value>\n+  <record field="allowed_sizes"\n+          interface="Products.CMFPlone.interfaces.controlpanel.IImagingSchema"\n+          name="plone.allowed_sizes"\n+          purge="True"\n+  >\n+    <!-- Purge the existing ones! -->\n+    <value>\n+      <element>icon 32:32</element>\n+      <element>tile 64:64</element>\n+      <element>thumb 128:128</element>\n+      <element>mini 200:65536</element>\n+      <element>preview 400:65536</element>\n+      <element>teaser 600:65536</element>\n+      <element>large 800:65536</element>\n+      <element>larger 1000:65536</element>\n+      <element>great 1200:65536</element>\n+      <element>huge 1600:65536</element>\n+    </value>\n   </record>\n \n </registry>\ndiff --git a/src/plone/volto/profiles/default/types/Collection.xml b/src/plone/volto/profiles/default/types/Collection.xml\nindex c7299d5..76189b2 100644\n--- a/src/plone/volto/profiles/default/types/Collection.xml\n+++ b/src/plone/volto/profiles/default/types/Collection.xml\n@@ -1,6 +1,9 @@\n <?xml version="1.0"?>\n-<object name="Collection" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Collection"\n+        i18n:domain="plone"\n+>\n \n   <!-- Collections in Volto are disabled by default -->\n   <property name="global_allow">False</property>\ndiff --git a/src/plone/volto/profiles/default/types/Document.xml b/src/plone/volto/profiles/default/types/Document.xml\nindex 9fd8222..d7dec6e 100644\n--- a/src/plone/volto/profiles/default/types/Document.xml\n+++ b/src/plone/volto/profiles/default/types/Document.xml\n@@ -1,16 +1,16 @@\n <?xml version="1.0"?>\n-<object\n-    i18n:domain="plone"\n-    meta_type="Dexterity FTI"\n-    name="Document"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Document"\n+        i18n:domain="plone"\n+>\n \n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishDocument</property>\n \n   <!-- Enabled behaviors -->\n   <property name="behaviors">\n-    <element value="plone.constraintypes"/>\n+    <element value="plone.constraintypes" />\n     <element value="plone.namefromtitle" />\n     <element value="plone.allowdiscussion" />\n     <element value="plone.excludefromnavigation" />\ndiff --git a/src/plone/volto/profiles/default/types/Event.xml b/src/plone/volto/profiles/default/types/Event.xml\nindex 54317cd..719ed05 100644\n--- a/src/plone/volto/profiles/default/types/Event.xml\n+++ b/src/plone/volto/profiles/default/types/Event.xml\n@@ -1,10 +1,15 @@\n <?xml version="1.0"?>\n-<object name="Event" meta_type="Dexterity FTI" i18n:domain="plone"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Event"\n+        i18n:domain="plone"\n+>\n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishEvent</property>\n-  <property name="behaviors" purge="false">\n-    <element value="plone.constraintypes"/>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.constraintypes" />\n     <element value="volto.blocks" />\n     <element value="volto.preview_image" />\n   </property>\ndiff --git a/src/plone/volto/profiles/default/types/Folder.xml b/src/plone/volto/profiles/default/types/Folder.xml\nindex 61587a3..bb845aa 100644\n--- a/src/plone/volto/profiles/default/types/Folder.xml\n+++ b/src/plone/volto/profiles/default/types/Folder.xml\n@@ -1,6 +1,9 @@\n <?xml version="1.0"?>\n-<object name="Folder" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Folder"\n+        i18n:domain="plone"\n+>\n \n   <!-- Folders in Volto are disabled by default -->\n   <property name="global_allow">False</property>\ndiff --git a/src/plone/volto/profiles/default/types/LRF.xml b/src/plone/volto/profiles/default/types/LRF.xml\nindex 4046b4c..424e8cf 100644\n--- a/src/plone/volto/profiles/default/types/LRF.xml\n+++ b/src/plone/volto/profiles/default/types/LRF.xml\n@@ -1,17 +1,22 @@\n <?xml version="1.0"?>\n-<object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone"\n-   xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="LRF"\n+        i18n:domain="plone"\n+>\n \n- <property name="global_allow">False</property>\n+  <property name="global_allow">False</property>\n \n- <property name="behaviors" purge="false">\n-  <element value="plone.dublincore"/>\n-  <element value="plone.namefromtitle"/>\n-  <element value="plone.constraintypes"/>\n-  <element value="plone.translatable" />\n-  <element value="plone.excludefromnavigation"/>\n-  <element value="plone.navigationroot"/>\n-  <element value="volto.blocks" />\n- </property>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.dublincore" />\n+    <element value="plone.namefromtitle" />\n+    <element value="plone.constraintypes" />\n+    <element value="plone.translatable" />\n+    <element value="plone.excludefromnavigation" />\n+    <element value="plone.navigationroot" />\n+    <element value="volto.blocks" />\n+  </property>\n \n </object>\ndiff --git a/src/plone/volto/profiles/default/types/News_Item.xml b/src/plone/volto/profiles/default/types/News_Item.xml\nindex 66066c3..5b3d6e3 100644\n--- a/src/plone/volto/profiles/default/types/News_Item.xml\n+++ b/src/plone/volto/profiles/default/types/News_Item.xml\n@@ -1,10 +1,15 @@\n <?xml version="1.0"?>\n-<object name="News Item" meta_type="Dexterity FTI" i18n:domain="plone"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="News Item"\n+        i18n:domain="plone"\n+>\n   <property name="filter_content_types">False</property>\n   <property name="klass">plone.volto.content.FolderishNewsItem</property>\n-  <property name="behaviors" purge="false">\n-    <element value="plone.constraintypes"/>\n+  <property name="behaviors"\n+            purge="false"\n+  >\n+    <element value="plone.constraintypes" />\n     <element value="volto.blocks" />\n   </property>\n </object>\ndiff --git a/src/plone/volto/profiles/demo/metadata.xml b/src/plone/volto/profiles/demo/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/demo/metadata.xml\n+++ b/src/plone/volto/profiles/demo/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/demo/rolemap.xml b/src/plone/volto/profiles/demo/rolemap.xml\nindex 8ae156d..4ce6e3e 100644\n--- a/src/plone/volto/profiles/demo/rolemap.xml\n+++ b/src/plone/volto/profiles/demo/rolemap.xml\n@@ -1,10 +1,12 @@\n <rolemap>\n   <permissions>\n-    <permission name="Plone Site Setup: Overview" acquire="True">\n-      <role name="Anonymous"/>\n-      <role name="Member"/>\n-      <role name="Site Administrator"/>\n-      <role name="Manager"/>\n+    <permission acquire="True"\n+                name="Plone Site Setup: Overview"\n+    >\n+      <role name="Anonymous" />\n+      <role name="Member" />\n+      <role name="Site Administrator" />\n+      <role name="Manager" />\n     </permission>\n   </permissions>\n </rolemap>\ndiff --git a/src/plone/volto/profiles/homepage/metadata.xml b/src/plone/volto/profiles/homepage/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/homepage/metadata.xml\n+++ b/src/plone/volto/profiles/homepage/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/multilingual/metadata.xml b/src/plone/volto/profiles/multilingual/metadata.xml\nindex d6396c1..ffa492f 100644\n--- a/src/plone/volto/profiles/multilingual/metadata.xml\n+++ b/src/plone/volto/profiles/multilingual/metadata.xml\n@@ -1,7 +1,7 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-   <dependency>profile-plone.volto:default</dependency>\n-   <dependency>profile-plone.app.multilingual:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+    <dependency>profile-plone.app.multilingual:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/multilingual/registry.xml b/src/plone/volto/profiles/multilingual/registry.xml\nindex 229cf6a..fdb0995 100644\n--- a/src/plone/volto/profiles/multilingual/registry.xml\n+++ b/src/plone/volto/profiles/multilingual/registry.xml\n@@ -1,10 +1,16 @@\n <?xml version=\'1.0\' encoding=\'UTF-8\'?>\n <registry>\n-  <record name="plone.default_language" interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema" field="default_language">\n+  <record field="default_language"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema"\n+          name="plone.default_language"\n+  >\n     <value>en</value>\n   </record>\n   <!-- Set language to it/en -->\n-  <record name="plone.available_languages" interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema" field="available_languages">\n+  <record field="available_languages"\n+          interface="Products.CMFPlone.interfaces.controlpanel.ILanguageSchema"\n+          name="plone.available_languages"\n+  >\n     <value>\n       <element>it</element>\n       <element>en</element>\ndiff --git a/src/plone/volto/profiles/richtext/metadata.xml b/src/plone/volto/profiles/richtext/metadata.xml\nindex 6b94925..27e17a3 100644\n--- a/src/plone/volto/profiles/richtext/metadata.xml\n+++ b/src/plone/volto/profiles/richtext/metadata.xml\n@@ -1,6 +1,6 @@\n <metadata>\n- <version>1000</version>\n- <dependencies>\n-  <dependency>profile-plone.volto:default</dependency>\n- </dependencies>\n+  <version>1000</version>\n+  <dependencies>\n+    <dependency>profile-plone.volto:default</dependency>\n+  </dependencies>\n </metadata>\ndiff --git a/src/plone/volto/profiles/richtext/types.xml b/src/plone/volto/profiles/richtext/types.xml\nindex 131bc1b..885235a 100644\n--- a/src/plone/volto/profiles/richtext/types.xml\n+++ b/src/plone/volto/profiles/richtext/types.xml\n@@ -1,4 +1,8 @@\n <?xml version="1.0"?>\n-<object name="portal_types" meta_type="Plone Types Tool">\n-  <object meta_type="Dexterity FTI" name="Document" />\n+<object meta_type="Plone Types Tool"\n+        name="portal_types"\n+>\n+  <object meta_type="Dexterity FTI"\n+          name="Document"\n+  />\n </object>\ndiff --git a/src/plone/volto/profiles/richtext/types/Document.xml b/src/plone/volto/profiles/richtext/types/Document.xml\nindex c679ce7..ec0a4f8 100644\n--- a/src/plone/volto/profiles/richtext/types/Document.xml\n+++ b/src/plone/volto/profiles/richtext/types/Document.xml\n@@ -1,12 +1,14 @@\n <?xml version="1.0"?>\n-<object\n-    i18n:domain="plone"\n-    meta_type="Dexterity FTI"\n-    name="Document"\n-    xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+<object xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+        meta_type="Dexterity FTI"\n+        name="Document"\n+        i18n:domain="plone"\n+>\n \n   <!-- Enabled behaviors -->\n-  <property name="behaviors" purge="false">\n+  <property name="behaviors"\n+            purge="false"\n+  >\n     <element value="plone.richtext" />\n   </property>\n \ndiff --git a/src/plone/volto/profiles/uninstall/browserlayer.xml b/src/plone/volto/profiles/uninstall/browserlayer.xml\nindex 6f400a1..70d1c96 100644\n--- a/src/plone/volto/profiles/uninstall/browserlayer.xml\n+++ b/src/plone/volto/profiles/uninstall/browserlayer.xml\n@@ -1,7 +1,6 @@\n <?xml version="1.0" encoding="UTF-8"?>\n <layers>\n-  <layer\n-      name="plone.volto"\n-      remove="true"\n-      />\n+  <layer name="plone.volto"\n+         remove="true"\n+  />\n </layers>\n'

