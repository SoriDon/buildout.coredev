Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-11-12T20:54:55+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/c0672c8e61d2dbab14fd6a22ba7ace86e8111f75

Delete plone.css.py

Files changed:
D Products/CMFPlone/skins/plone_scripts/plone.css.py

diff --git a/Products/CMFPlone/skins/plone_scripts/plone.css.py b/Products/CMFPlone/skins/plone_scripts/plone.css.py
deleted file mode 100644
index fcf49c1..0000000
--- a/Products/CMFPlone/skins/plone_scripts/plone.css.py
+++ /dev/null
@@ -1,24 +0,0 @@
-## Script (Python) "plone.css"
-##bind container=container
-##bind context=context
-##bind namespace=
-##bind script=script
-##bind subpath=traverse_subpath
-##parameters=
-##title=Rendered version of the Plone CSS for use from external tools
-
-portal_css = context.portal_css
-stylesheets = portal_css.getEvaluatedResources(context)
-
-for stylesheet in stylesheets:
-    if stylesheet.getRendering() in ['import', 'inline', 'link']:
-        print portal_css.getInlineResource(stylesheet.getId(), context)
-
-duration = 1
-seconds = float(duration) * 24.0 * 3600.0
-response = context.REQUEST.RESPONSE
-#response.setHeader('Expires',rfc1123_date((DateTime() + duration).timeTime()))
-response.setHeader('Cache-Control', 'max-age=%d' % int(seconds))
-response.setHeader('Content-Type', 'text/css')
-
-return printed


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-11-12T20:55:53+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/9362862d5fbc7cf29694659dc3c5d1a9d3886713

Update CHANGES.rst

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 7214fd5..90fbcc4 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -38,6 +38,7 @@ Breaking changes:
     - ``hasIndexHtml.py`` with tests
     - ``navigationParent.py`` with test
     - ``plone_log.py``
+    - ``plone.css.py``
     - ``returnNone.py`` with occurence refactored
     - ``reverseList.py`` with test
     - ``sort_modified_ascending.py``


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-11-12T22:32:07-08:00
Author: David Glick (davisagli) <david.glick@plone.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/29642893b79a2d644bf0e67c2d512f66c35f4a0c

Merge pull request #1833 from plone/gforcada-patch-1

Remove plone.css.py

Files changed:
M CHANGES.rst
D Products/CMFPlone/skins/plone_scripts/plone.css.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 7214fd5..90fbcc4 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -38,6 +38,7 @@ Breaking changes:
     - ``hasIndexHtml.py`` with tests
     - ``navigationParent.py`` with test
     - ``plone_log.py``
+    - ``plone.css.py``
     - ``returnNone.py`` with occurence refactored
     - ``reverseList.py`` with test
     - ``sort_modified_ascending.py``
diff --git a/Products/CMFPlone/skins/plone_scripts/plone.css.py b/Products/CMFPlone/skins/plone_scripts/plone.css.py
deleted file mode 100644
index fcf49c1..0000000
--- a/Products/CMFPlone/skins/plone_scripts/plone.css.py
+++ /dev/null
@@ -1,24 +0,0 @@
-## Script (Python) "plone.css"
-##bind container=container
-##bind context=context
-##bind namespace=
-##bind script=script
-##bind subpath=traverse_subpath
-##parameters=
-##title=Rendered version of the Plone CSS for use from external tools
-
-portal_css = context.portal_css
-stylesheets = portal_css.getEvaluatedResources(context)
-
-for stylesheet in stylesheets:
-    if stylesheet.getRendering() in ['import', 'inline', 'link']:
-        print portal_css.getInlineResource(stylesheet.getId(), context)
-
-duration = 1
-seconds = float(duration) * 24.0 * 3600.0
-response = context.REQUEST.RESPONSE
-#response.setHeader('Expires',rfc1123_date((DateTime() + duration).timeTime()))
-response.setHeader('Cache-Control', 'max-age=%d' % int(seconds))
-response.setHeader('Content-Type', 'text/css')
-
-return printed


