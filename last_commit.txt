Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-04-15T22:17:01+02:00
Author: KUMAR AKSHAY (kakshay21) <k.akshay9721@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/e8c912e0c305709aeb4ff27969dd1209ba9cc1d3

Remove "change portal events" permission

Fixes https://github.com/plone/Products.CMFPlone/issues/1975

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
M Products/CMFPlone/tests/testSiteAdminRole.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d66ca1e..ea0fe99 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -47,6 +47,9 @@ Bug fixes:
   content
   [datakurre]
 
+- Removed "change portal events" permission
+  [kakshay21]
+
 5.1b3 (2017-04-03)
 ------------------
 
diff --git a/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
index afad19a..433e1f4 100644
--- a/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
@@ -12,7 +12,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -33,13 +32,6 @@
    <permission-role>Member</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -74,11 +66,6 @@
    <permission-role>Member</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -113,12 +100,6 @@
    <permission-role>Reviewer</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -150,13 +131,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -182,11 +156,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
index 407bab0..bc69900 100644
--- a/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
@@ -9,7 +9,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -21,13 +20,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
index 8d736b3..92c890f 100644
--- a/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
@@ -14,7 +14,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -30,12 +29,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -61,13 +54,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -95,11 +81,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -120,13 +101,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
index 091b0bc..fa3bb89 100644
--- a/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
@@ -12,7 +12,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -33,12 +32,6 @@
    <permission-role>Reviewer</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -71,13 +64,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -104,13 +90,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/tests/testSiteAdminRole.py b/Products/CMFPlone/tests/testSiteAdminRole.py
index f295d72..0f4b812 100644
--- a/Products/CMFPlone/tests/testSiteAdminRole.py
+++ b/Products/CMFPlone/tests/testSiteAdminRole.py
@@ -136,7 +136,6 @@ def testExpectedPermissions(self):
             'Change configuration':                                     0,
             'Change local roles':                                       1,
             'Change permissions':                                       0,
-            'Change portal events':                                     1,
             'Change portal topics':                                     1,
             'Change proxy roles':                                       0,
             'Content rules: Manage rules':                              1,


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-04-18T21:55:48+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/422c3b70cea347584904cfbcdd21b209e3d105b4

Merge pull request #2018 from plone/kakshay21-remove-change-portal-events

Remove "change portal events" permission

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
M Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
M Products/CMFPlone/tests/testSiteAdminRole.py

diff --git a/CHANGES.rst b/CHANGES.rst
index d66ca1e..ea0fe99 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -47,6 +47,9 @@ Bug fixes:
   content
   [datakurre]
 
+- Removed "change portal events" permission
+  [kakshay21]
+
 5.1b3 (2017-04-03)
 ------------------
 
diff --git a/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
index afad19a..433e1f4 100644
--- a/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/intranet_workflow/definition.xml
@@ -12,7 +12,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -33,13 +32,6 @@
    <permission-role>Member</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -74,11 +66,6 @@
    <permission-role>Member</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -113,12 +100,6 @@
    <permission-role>Reviewer</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -150,13 +131,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -182,11 +156,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
index 407bab0..bc69900 100644
--- a/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/one_state_workflow/definition.xml
@@ -9,7 +9,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -21,13 +20,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
index 8d736b3..92c890f 100644
--- a/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/plone_workflow/definition.xml
@@ -14,7 +14,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -30,12 +29,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -61,13 +54,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -95,11 +81,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -120,13 +101,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml b/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
index 091b0bc..fa3bb89 100644
--- a/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
+++ b/Products/CMFPlone/profiles/default/workflows/simple_publication_workflow/definition.xml
@@ -12,7 +12,6 @@
              i18n:attributes="title; description">
 
  <permission>Access contents information</permission>
- <permission>Change portal events</permission>
  <permission>Modify portal content</permission>
  <permission>View</permission>
 
@@ -33,12 +32,6 @@
    <permission-role>Reviewer</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Reviewer</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -71,13 +64,6 @@
    <permission-role>Contributor</permission-role>
    <permission-role>Site Administrator</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
@@ -104,13 +90,6 @@
                   acquired="False">
    <permission-role>Anonymous</permission-role>
   </permission-map>
-  <permission-map name="Change portal events"
-                  acquired="False">
-   <permission-role>Manager</permission-role>
-   <permission-role>Owner</permission-role>
-   <permission-role>Editor</permission-role>
-   <permission-role>Site Administrator</permission-role>
-  </permission-map>
   <permission-map name="Modify portal content"
                   acquired="False">
    <permission-role>Manager</permission-role>
diff --git a/Products/CMFPlone/tests/testSiteAdminRole.py b/Products/CMFPlone/tests/testSiteAdminRole.py
index f295d72..0f4b812 100644
--- a/Products/CMFPlone/tests/testSiteAdminRole.py
+++ b/Products/CMFPlone/tests/testSiteAdminRole.py
@@ -136,7 +136,6 @@ def testExpectedPermissions(self):
             'Change configuration':                                     0,
             'Change local roles':                                       1,
             'Change permissions':                                       0,
-            'Change portal events':                                     1,
             'Change portal topics':                                     1,
             'Change proxy roles':                                       0,
             'Content rules: Manage rules':                              1,


