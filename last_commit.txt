Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-05-13T07:55:04+02:00
Author: Joni Orponen (Rotonen) <joni.orponen@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/c4110bc9608a61a3dc0edb25c9ff425b5aa90c04

Avoid passing in unicode data into the WebDAV message parser.

Files changed:
A news/103.bugfix
M plone/dexterity/filerepresentation.py

b'diff --git a/news/103.bugfix b/news/103.bugfix\nnew file mode 100644\nindex 0000000..b562610\n--- /dev/null\n+++ b/news/103.bugfix\n@@ -0,0 +1,2 @@\n+- Avoid passing in unicode data into the WebDAV message parser.\n+  [Rotonen]\ndiff --git a/plone/dexterity/filerepresentation.py b/plone/dexterity/filerepresentation.py\nindex 2a6ab42..b3ee215 100644\n--- a/plone/dexterity/filerepresentation.py\n+++ b/plone/dexterity/filerepresentation.py\n@@ -836,10 +836,7 @@ def write(self, data):\n         if self._closed:\n             raise ValueError("File is closed")\n         self._written += len(data)\n-        if isinstance(data, bytes):\n-            self._parser.feed(data.decode(\'utf-8\'))\n-        else:\n-            self._parser.feed(data)\n+        self._parser.feed(data)\n \n     def writelines(self, sequence):\n         for item in sequence:\n'

