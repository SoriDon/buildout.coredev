Repository: plone.dexterity


Branch: refs/heads/master
Date: 2016-02-26T14:21:26-06:00
Author: nathan.vangheem () <nathan.vangheem@wildcardcorp.com>
Commit: https://github.com/plone/plone.dexterity/commit/035a5918303188db6476606645f0232daaec2346

addCreator should not add if a creator is already set for content

Files changed:
M CHANGES.rst
M plone/dexterity/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9e612fc..c08a8e8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,12 @@ Changelog
 2.4.1 (unreleased)
 ------------------
 
+Incompatibilities:
+
+- addCreator should not add if a creator is already set for content. This prevents every
+  editor on content from adding to the list of creators for an object.
+  [vangheem]
+
 New:
 
 - *add item here*
diff --git a/plone/dexterity/content.py b/plone/dexterity/content.py
index 88c989f..4f867af 100644
--- a/plone/dexterity/content.py
+++ b/plone/dexterity/content.py
@@ -370,6 +370,10 @@ def notifyModified(self):
     def addCreator(self, creator=None):
         """ Add creator to Dublin Core creators.
         """
+        if len(self.creators) > 0:
+            # do not add creator if one is already set
+            return
+
         if creator is None:
             user = getSecurityManager().getUser()
             creator = user and user.getId()


Repository: plone.dexterity


Branch: refs/heads/master
Date: 2016-02-26T14:21:50-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/bdb381f03c20145ab6ab217d50b7a79838291caf

Merge pull request #51 from plone/addCreator-fix

addCreator should not add if a creator is already set for content

Files changed:
M CHANGES.rst
M plone/dexterity/content.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9e612fc..c08a8e8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -5,6 +5,12 @@ Changelog
 2.4.1 (unreleased)
 ------------------
 
+Incompatibilities:
+
+- addCreator should not add if a creator is already set for content. This prevents every
+  editor on content from adding to the list of creators for an object.
+  [vangheem]
+
 New:
 
 - *add item here*
diff --git a/plone/dexterity/content.py b/plone/dexterity/content.py
index 88c989f..4f867af 100644
--- a/plone/dexterity/content.py
+++ b/plone/dexterity/content.py
@@ -370,6 +370,10 @@ def notifyModified(self):
     def addCreator(self, creator=None):
         """ Add creator to Dublin Core creators.
         """
+        if len(self.creators) > 0:
+            # do not add creator if one is already set
+            return
+
         if creator is None:
             user = getSecurityManager().getUser()
             creator = user and user.getId()


