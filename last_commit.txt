Repository: plone.rest


Branch: refs/heads/master
Date: 2022-02-12T06:27:23+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.rest/commit/e6d6df6b470e057cb4528fbfff210a0138b7bb2f

Use Black 21.12b0 (#131)

* Pin black and install version from versions.cfg

* pin black to 21.12b0 (last py2 compatible version)

* Pin black==22.1.0

* Install black from versions.cfg in Makefile

Files changed:
M .github/workflows/black.yml
M Makefile
M plone-5.2.x.cfg
M versions.cfg

b"diff --git a/.github/workflows/black.yml b/.github/workflows/black.yml\nindex 9b23c02..fa9a57e 100644\n--- a/.github/workflows/black.yml\n+++ b/.github/workflows/black.yml\n@@ -26,9 +26,9 @@ jobs:\n           restore-keys: |\n             ${{ runner.os }}-pip-\n \n-      # install black\n+      # install black (extract version from versions.cfg)\n       - name: install black\n-        run: pip install black\n+        run: pip install black==$(awk '/^black =/{print $NF}' versions.cfg)\n \n       # run black\n       - name: run black\ndiff --git a/Makefile b/Makefile\nindex 78f6e9d..fce73d8 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -36,7 +36,7 @@ update: ## Update Make and Buildout\n bin/buildout: bin/pip\n \tbin/pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n-\tbin/pip install black || true\n+\tbin/pip install pip install black==$$(awk '/^black =/{print $$NF}' versions.cfg)\n \t@touch -c $@\n \n bin/python bin/pip:\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex b810a87..cfd8f76 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -6,7 +6,7 @@ find-links += https://dist.plone.org/thirdparty/\n versions=versions\n \n [versions]\n-black = 20.8b1\n+black = 21.12b0\n \n # Error: The requirement ('virtualenv>=20.0.35') is not allowed by your [versions] constraint (20.0.26)\n virtualenv = 20.0.35\ndiff --git a/versions.cfg b/versions.cfg\nindex d47c243..226cfde 100644\n--- a/versions.cfg\n+++ b/versions.cfg\n@@ -14,6 +14,7 @@ Pygments = 2.5.1\n plone.recipe.varnish = 1.3\n \n # Code-analysis\n+black = 21.12b0\n plone.recipe.codeanalysis = 3.0.1\n coverage = 3.7.1\n pep8 = 1.7.1\n"

