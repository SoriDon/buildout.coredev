Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-04-04T09:50:18+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/be1c941d2632b3608a11a2c8a6dd7e7509fc6037

update folder contents robot test (#3478)

Files changed:
A news/3478.bugfix
M Products/CMFPlone/tests/robot/test_folder_contents.robot

b'diff --git a/Products/CMFPlone/tests/robot/test_folder_contents.robot b/Products/CMFPlone/tests/robot/test_folder_contents.robot\nindex 78092f2298..054d5f1c28 100644\n--- a/Products/CMFPlone/tests/robot/test_folder_contents.robot\n+++ b/Products/CMFPlone/tests/robot/test_folder_contents.robot\n@@ -14,6 +14,7 @@ Test Teardown  Run keywords  Plone Test Teardown\n \n *** Test cases ***************************************************************\n \n+\n Scenario: Select All items\n     Given a logged-in site administrator\n       and a folder with four pages\n@@ -23,26 +24,26 @@ Scenario: Select All items\n       and the four elements got selected\n       and the clear selection link appears\n \n-#Scenario: Clear selection\n-#    Given a site owner\n-#      And four dummy pages on test folder\n-#      And the folder contents view\n-#      And I select all the elements\n-#     When I clear the selection\n-#     Then no elements should be selected\n-\n-# XXX: This scenario only works on Firefox. In Chrome fails to do the Mouse Up\n-# and Mouse Down correctly.\n-#Scenario: Reorder Folder Contents\n-#    Given a site owner\n-#      And four dummy pages on test folder\n-#     When the folder contents view\n-#     Then the order should be 1 > 2 > 3 > 4\n-#     When I reorder the elements\n-#     Then the new order should be 4 > 3 > 2 > 1\n+Scenario: Clear selection\n+   Given a logged-in site administrator\n+     and a folder with four pages\n+     and the folder contents view\n+     And I select all the elements\n+    When I clear the selection\n+    Then no elements should be selected\n+\n+Scenario: Reorder Folder Contents\n+   Given a logged-in site administrator\n+     and a folder with four pages\n+     and the folder contents view\n+    Then The Order Should Be  1   2   3   4\n+    When I reorder the elements\n+    Then The Order Should Be  4   3   2   1\n+\n \n *** Keywords *****************************************************************\n \n+\n a folder with four pages\n     ${folder_uid}=  Create content  type=Folder  title=My Folder\n     Create content  type=Document  title=Doc1  container=${folder_uid}\n@@ -79,7 +80,7 @@ the clear selection link appears\n     Page Should Contain Element  css=a.remove-all\n \n I clear the selection\n-    Click link  id=selected\n+    Click link  id=btn-selected-items\n     Click link  css=a.remove-all\n \n no elements should be selected\n@@ -88,41 +89,17 @@ no elements should be selected\n     Checkbox Should Not Be Selected  css=tr[data-id="doc3"] input\n     Checkbox Should Not Be Selected  css=tr[data-id="doc4"] input\n \n-the order should be 1 > 2 > 3 > 4\n-    Should be above  css=tr[data-id="doc1"]  css=tr[data-id="doc2"]\n-    Should be above  css=tr[data-id="doc2"]  css=tr[data-id="doc3"]\n-    Should be above  css=tr[data-id="doc3"]  css=tr[data-id="doc4"]\n-\n I reorder the elements\n-    # Moving items could fail on a fast computer\n-    Set Selenium Speed  0.1 seconds\n-\n-    # Moves the doc2 page above the doc1 page\n-    Reorder Element  folder-contents-item-doc1  folder-contents-item-doc2\n-\n-    # Moves the doc4 page above the doc2 page\n-    Reorder Element  folder-contents-item-doc4  folder-contents-item-doc3\n-    Reorder Element  folder-contents-item-doc4  folder-contents-item-doc1\n-    Reorder Element  folder-contents-item-doc4  folder-contents-item-doc2\n-\n-    # Moves the doc3 page above the doc2 page\n-    Reorder Element  folder-contents-item-doc3  folder-contents-item-doc1\n-    Reorder Element  folder-contents-item-doc3  folder-contents-item-doc2\n-\n-    # Go back to normal speed\n-    Set Selenium Speed  0 seconds\n-\n-the new order should be 4 > 3 > 2 > 1\n-    Should be above  css=tr#folder-contents-item-doc4  css=tr#folder-contents-item-doc3\n-    Should be above  css=tr#folder-contents-item-doc3  css=tr#folder-contents-item-doc2\n-    Should be above  css=tr#folder-contents-item-doc2  css=tr#folder-contents-item-doc1\n-\n-Reorder Element\n-    [arguments]  ${element}  ${destination}\n-\n-    Mouse Down  xpath=//tr[@id=\'${element}\']/td\n-    Mouse Up    xpath=//tr[@id=\'${destination}\']/td\n-    Mouse Out   xpath=//tr[@id=\'${element}\']/td\n+    Click link  css=#btn-structure-rearrange\n+    Click element  name=reversed\n+    Click button  css=#popover-structure-rearrange .btn-primary\n+    Wait until page contains  Successfully rearranged folder\n+\n+The Order Should Be\n+    [Arguments]  ${first}  ${second}  ${third}  ${fourth}\n+    Should be above  css=tr[data-id="doc${first}"]   css=tr[data-id="doc${second}"]\n+    Should be above  css=tr[data-id="doc${second}"]  css=tr[data-id="doc${third}"]\n+    Should be above  css=tr[data-id="doc${third}"]   css=tr[data-id="doc${fourth}"]\n \n Should be above\n     [Arguments]  ${locator1}  ${locator2}\ndiff --git a/news/3478.bugfix b/news/3478.bugfix\nnew file mode 100644\nindex 0000000000..b945a17dfa\n--- /dev/null\n+++ b/news/3478.bugfix\n@@ -0,0 +1,2 @@\n+Enhanced folder_contents robot tests\n+[petschki]\n'

