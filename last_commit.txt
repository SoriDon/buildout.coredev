Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-25T10:31:38+01:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/plone.app.widgets/commit/02d740d9f06620da265759a55389f5d8a505a2f1

fix: Sort relateditems tree by sortable_title

Files changed:
M CHANGES.rst
M plone/app/widgets/utils.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e274393..a0980cc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,6 +18,8 @@ Fixes:
 - Ensure we have all content for tree query in relateditems
   [Gagaro]
 
+- Sort relateditems tree by sortable_title.
+  [Gagaro]
 
 2.0.3 (2016-02-14)
 ------------------
diff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py
index 0690721..f43bf08 100644
--- a/plone/app/widgets/utils.py
+++ b/plone/app/widgets/utils.py
@@ -140,7 +140,9 @@ def get_relateditems_options(context, value, separator, vocabulary_name,
         'treeVocabularyUrl',
         '{}/@@getVocabulary?name=plone.app.vocabularies.Catalog'.format(
             portal is not None and portal.absolute_url() or '')
-   )
+    )
+    options.setdefault('sort_on', 'sortable_title')
+    options.setdefault('sort_order', 'ascending')
 
     nav_root = getNavigationRootObject(context, get_portal())
     options['rootPath'] = (


Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2016-02-25T08:44:58-06:00
Author: Nathan Van Gheem (vangheem) <vangheem@gmail.com>
Commit: https://github.com/plone/plone.app.widgets/commit/89c00e1b7c12c8c4c3ba91a55aec7e3ac203bcf1

Merge pull request #132 from plone/fix-relateditems-sort

fix: Sort relateditems tree by sortable_title

Files changed:
M CHANGES.rst
M plone/app/widgets/utils.py

diff --git a/CHANGES.rst b/CHANGES.rst
index e274393..a0980cc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,6 +18,8 @@ Fixes:
 - Ensure we have all content for tree query in relateditems
   [Gagaro]
 
+- Sort relateditems tree by sortable_title.
+  [Gagaro]
 
 2.0.3 (2016-02-14)
 ------------------
diff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py
index 0690721..f43bf08 100644
--- a/plone/app/widgets/utils.py
+++ b/plone/app/widgets/utils.py
@@ -140,7 +140,9 @@ def get_relateditems_options(context, value, separator, vocabulary_name,
         'treeVocabularyUrl',
         '{}/@@getVocabulary?name=plone.app.vocabularies.Catalog'.format(
             portal is not None and portal.absolute_url() or '')
-   )
+    )
+    options.setdefault('sort_on', 'sortable_title')
+    options.setdefault('sort_order', 'ascending')
 
     nav_root = getNavigationRootObject(context, get_portal())
     options['rootPath'] = (


