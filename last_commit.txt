Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2022-05-05T19:32:40+03:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.widgets/commit/8e1826c564dd3b054517f38938acba39807fd17d

add logging in exception handler when loading of tinymce settings is failing

Files changed:
A news/216.bugfix
M plone/app/widgets/utils.py

b'diff --git a/news/216.bugfix b/news/216.bugfix\nnew file mode 100644\nindex 00000000..8ca8cc8a\n--- /dev/null\n+++ b/news/216.bugfix\n@@ -0,0 +1 @@\n+add logging in exception handler when loading of tinymce settings is failing [MrTango]\n\\ No newline at end of file\ndiff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py\nindex a82dc7b6..2e2dc15a 100644\n--- a/plone/app/widgets/utils.py\n+++ b/plone/app/widgets/utils.py\n@@ -20,10 +20,14 @@\n from zope.i18nmessageid import MessageFactory\n from zope.schema.interfaces import IVocabularyFactory\n \n+import logging\n import json\n import zope.deferredimport\n \n \n+logger = logging.getLogger("plone.app.widgets.utils")\n+\n+\n _ = MessageFactory(\'plone\')\n \n \n@@ -203,7 +207,7 @@ def get_tinymce_options(context, field, request):\n             name="plone_settings").tinymce()[\'data-pat-tinymce\']\n         options = json.loads(pattern_options)\n     except (ComponentLookupError, AttributeError):\n-        pass\n+        logger.warning("Can not load tinymce pattern options!", exc_info=True)\n     return options\n \n \n'

Repository: plone.app.widgets


Branch: refs/heads/master
Date: 2022-05-11T13:22:02+03:00
Author: Maik Derstappen (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.widgets/commit/48bceb6f2ec2f31619aadbec416d1e3e43e57e95

Merge pull request #216 from plone/mrtango-add-logging-to-tinymce-settings-loader

add logging in exception handler when loading of tinymce settings is â€¦

Files changed:
A news/216.bugfix
M plone/app/widgets/utils.py

b'diff --git a/news/216.bugfix b/news/216.bugfix\nnew file mode 100644\nindex 00000000..8ca8cc8a\n--- /dev/null\n+++ b/news/216.bugfix\n@@ -0,0 +1 @@\n+add logging in exception handler when loading of tinymce settings is failing [MrTango]\n\\ No newline at end of file\ndiff --git a/plone/app/widgets/utils.py b/plone/app/widgets/utils.py\nindex a82dc7b6..2e2dc15a 100644\n--- a/plone/app/widgets/utils.py\n+++ b/plone/app/widgets/utils.py\n@@ -20,10 +20,14 @@\n from zope.i18nmessageid import MessageFactory\n from zope.schema.interfaces import IVocabularyFactory\n \n+import logging\n import json\n import zope.deferredimport\n \n \n+logger = logging.getLogger("plone.app.widgets.utils")\n+\n+\n _ = MessageFactory(\'plone\')\n \n \n@@ -203,7 +207,7 @@ def get_tinymce_options(context, field, request):\n             name="plone_settings").tinymce()[\'data-pat-tinymce\']\n         options = json.loads(pattern_options)\n     except (ComponentLookupError, AttributeError):\n-        pass\n+        logger.warning("Can not load tinymce pattern options!", exc_info=True)\n     return options\n \n \n'

