Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-10-02T00:02:08+02:00
Author: Víctor Fernández de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/152d0fc8febf246c0f72cf9d73ba07e71acfd553

Plone 6 as first class citizen (#1504)

* Fix Makefile, set 6.0.x as default. Remove non-sense initial bin/buildout run of 5 before 6 that cause the build fail.

* Update GHA

* Changed documentation for 3.9 and Plone 6

* Add gitignore

* Fix for CI timezone :(

* Changelog

Co-authored-by: Timo Stollenwerk &lt;tisto@users.noreply.github.com&gt;
Co-authored-by: Timo Stollenwerk &lt;stollenwerk@kitconcept.com&gt;

Files changed:
A news/1503.feature
M .github/workflows/tests.yml
M .gitignore
M Makefile
M buildout.cfg
M src/plone/restapi/tests/http-examples/controlpanels_get.resp
M src/plone/restapi/tests/http-examples/controlpanels_get_dexterity.resp
M src/plone/restapi/tests/http-examples/controlpanels_get_dexterity_item.resp
M src/plone/restapi/tests/http-examples/controlpanels_post_dexterity_item.resp
M src/plone/restapi/tests/http-examples/expansion_expanded_full.resp
M src/plone/restapi/tests/http-examples/image.resp
M src/plone/restapi/tests/http-examples/jwt_logged_in.resp
M src/plone/restapi/tests/http-examples/newsitem.resp
M src/plone/restapi/tests/http-examples/registry_get_list.resp
M src/plone/restapi/tests/http-examples/search.resp
M src/plone/restapi/tests/http-examples/siteroot.resp
M src/plone/restapi/tests/http-examples/translated_messages_addons.resp
M src/plone/restapi/tests/http-examples/translated_messages_types_folder.resp
M src/plone/restapi/tests/http-examples/vocabularies.resp
M test-no-uncommitted-doc-changes

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 9bf1c5daf..53b87e608 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -7,18 +7,16 @@ jobs:\n       fail-fast: false\n       matrix:\n         include:\n-          - python-version: \'3.6\'\n-            plone-version: \'5.2\'\n           - python-version: \'3.7\'\n             plone-version: \'5.2\'\n           - python-version: \'3.8\'\n             plone-version: \'5.2\'\n-          - python-version: \'3.7\'\n-            plone-version: \'6.0\'\n           - python-version: \'3.8\'\n             plone-version: \'6.0\'\n           - python-version: \'3.9\'\n             plone-version: \'6.0\'\n+          - python-version: \'3.10\'\n+            plone-version: \'6.0\'\n \n     steps:\n       # git checkout\n@@ -71,4 +69,4 @@ jobs:\n \n       # test for broken links\n       - name: linkcheck\n-        run: if [ "${{ matrix.plone-version }}" == "6.0" ] && [ ${{ matrix.python-version }} == \'3.9\' ]; then make docs-linkcheckbroken; fi\n\\ No newline at end of file\n+        run: if [ "${{ matrix.plone-version }}" == "6.0" ] && [ ${{ matrix.python-version }} == \'3.9\' ]; then make docs-linkcheckbroken; fi\ndiff --git a/.gitignore b/.gitignore\nindex 88ec34563..a83f82323 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -29,6 +29,8 @@ docs/.DS_Store\n docs/_build\n docs/plone.restapi.http-examples\n docs/source/README.rst\n+docs/Makefile\n+docs/make.bat\n sphinx_build.log\n htmlcov\n npm-debug.log\ndiff --git a/Makefile b/Makefile\nindex e85aaac4e..8afd30cc7 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -39,7 +39,6 @@ update: ## Update Make and Buildout\n \twget -O versions.cfg https://raw.githubusercontent.com/kitconcept/buildout/5.2/versions.cfg\n \n .installed.cfg: bin/buildout *.cfg\n-\tbin/buildout\n \n bin/buildout: bin/pip\n \tbin/pip install --upgrade pip\n@@ -76,6 +75,11 @@ build-plone-6.0-performance: .installed.cfg  ## Build Plone 6.0\n \tbin/pip install -r requirements-6.0.txt\n \tbin/buildout -c plone-6.0.x-performance.cfg\n \n+.PHONY: start\n+start: ## Start Plone Backend\n+\t@echo "$(GREEN)==> Start Plone Backend$(RESET)"\n+\tPYTHONWARNINGS=ignore bin/instance fg\n+\n .PHONY: Test\n test:  ## Test\n \tbin/test\ndiff --git a/buildout.cfg b/buildout.cfg\nindex f45087fb1..257c82b06 100644\n--- a/buildout.cfg\n+++ b/buildout.cfg\n@@ -1,2 +1,2 @@\n [buildout]\n-extends = plone-5.2.x.cfg\n+extends = plone-6.0.x.cfg\ndiff --git a/news/1503.feature b/news/1503.feature\nnew file mode 100644\nindex 000000000..93c73c767\n--- /dev/null\n+++ b/news/1503.feature\n@@ -0,0 +1,2 @@\n+Plone 6 as first class citizen in builds and CI. Remove non-supported Python versions. Add 3.10 for Plone 6.\n+[sneridagh]\ndiff --git a/src/plone/restapi/tests/http-examples/controlpanels_get.resp b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\nindex 8aee73df0..43fb2b2fd 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_get.resp\n@@ -40,7 +40,7 @@ Content-Type: application/json\n     {\n         "@id": "http://localhost:55001/plone/@controlpanels/dexterity-types",\n         "group": "Content",\n-        "title": "Dexterity Content Types"\n+        "title": "Content Types"\n     },\n     {\n         "@id": "http://localhost:55001/plone/@controlpanels/editing",\n@@ -57,6 +57,11 @@ Content-Type: application/json\n         "group": "Content",\n         "title": "Markup"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@controlpanels/usergroup",\n+        "group": "Users",\n+        "title": "User and Group Settings"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@controlpanels/security",\n         "group": "Security",\ndiff --git a/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity.resp b/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity.resp\nindex 49f309b7e..1a2c3eeb2 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity.resp\n@@ -6,6 +6,15 @@ Content-Type: application/json\n     "data": {},\n     "group": "Content",\n     "items": [\n+        {\n+            "@id": "http://localhost:55001/plone/@controlpanels/dexterity-types/Plone Site",\n+            "@type": "Plone Site",\n+            "count": 1,\n+            "description": "",\n+            "id": "Plone Site",\n+            "meta_type": "Dexterity FTI",\n+            "title": "Plone Site"\n+        },\n         {\n             "@id": "http://localhost:55001/plone/@controlpanels/dexterity-types/Collection",\n             "@type": "Collection",\n@@ -94,5 +103,5 @@ Content-Type: application/json\n         "required": [],\n         "type": "object"\n     },\n-    "title": "Dexterity Content Types"\n+    "title": "Content Types"\n }\ndiff --git a/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity_item.resp b/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity_item.resp\nindex 4b5c5ecfd..65c729188 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity_item.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_get_dexterity_item.resp\n@@ -32,6 +32,7 @@ Content-Type: application/json\n         "plone.richtext": false,\n         "plone.shortname": false,\n         "plone.tableofcontents": false,\n+        "plone.textindexer": false,\n         "plone.thumb_icon": false,\n         "plone.translatable": false,\n         "plone.versioning": false,\n@@ -73,6 +74,7 @@ Content-Type: application/json\n                     "plone.eventrecurrence",\n                     "plone.excludefromnavigation",\n                     "plone.constraintypes",\n+                    "plone.textindexer",\n                     "plone.leadimage",\n                     "plone.locking",\n                     "plone.translatable",\n@@ -304,6 +306,12 @@ Content-Type: application/json\n                 "title": "Table of contents",\n                 "type": "boolean"\n             },\n+            "plone.textindexer": {\n+                "description": "Enables the enhanced full-text indexing for a content type (\'plone.textindexer\'). If a field is marked \'searchable\', its content gets added to the \'SearchableText\' index in the catalog.",\n+                "factory": "Yes/No",\n+                "title": "Full-Text Indexing",\n+                "type": "boolean"\n+            },\n             "plone.thumb_icon": {\n                 "description": "Options to suppress thumbs and/or icons and to override thumb size in listings, tables etc.",\n                 "factory": "Yes/No",\ndiff --git a/src/plone/restapi/tests/http-examples/controlpanels_post_dexterity_item.resp b/src/plone/restapi/tests/http-examples/controlpanels_post_dexterity_item.resp\nindex 0fc5945ee..35f5a7678 100644\n--- a/src/plone/restapi/tests/http-examples/controlpanels_post_dexterity_item.resp\n+++ b/src/plone/restapi/tests/http-examples/controlpanels_post_dexterity_item.resp\n@@ -33,6 +33,7 @@ Location: http://localhost:55001/plone/@controlpanels/dexterity-types/my_custom_\n         "plone.richtext": false,\n         "plone.shortname": false,\n         "plone.tableofcontents": false,\n+        "plone.textindexer": false,\n         "plone.thumb_icon": false,\n         "plone.translatable": false,\n         "plone.versioning": false,\n@@ -74,6 +75,7 @@ Location: http://localhost:55001/plone/@controlpanels/dexterity-types/my_custom_\n                     "plone.eventrecurrence",\n                     "plone.excludefromnavigation",\n                     "plone.constraintypes",\n+                    "plone.textindexer",\n                     "plone.leadimage",\n                     "plone.locking",\n                     "plone.translatable",\n@@ -305,6 +307,12 @@ Location: http://localhost:55001/plone/@controlpanels/dexterity-types/my_custom_\n                 "title": "Table of contents",\n                 "type": "boolean"\n             },\n+            "plone.textindexer": {\n+                "description": "Enables the enhanced full-text indexing for a content type (\'plone.textindexer\'). If a field is marked \'searchable\', its content gets added to the \'SearchableText\' index in the catalog.",\n+                "factory": "Yes/No",\n+                "title": "Full-Text Indexing",\n+                "type": "boolean"\n+            },\n             "plone.thumb_icon": {\n                 "description": "Options to suppress thumbs and/or icons and to override thumb size in listings, tables etc.",\n                 "factory": "Yes/No",\ndiff --git a/src/plone/restapi/tests/http-examples/expansion_expanded_full.resp b/src/plone/restapi/tests/http-examples/expansion_expanded_full.resp\nindex 06e69d113..356dddb78 100644\n--- a/src/plone/restapi/tests/http-examples/expansion_expanded_full.resp\n+++ b/src/plone/restapi/tests/http-examples/expansion_expanded_full.resp\n@@ -7,100 +7,100 @@ Content-Type: application/json\n             "document_actions": [],\n             "object": [\n                 {\n-                    "icon": "",\n+                    "icon": "toolbar-action/view",\n                     "id": "view",\n                     "title": "View"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "toolbar-action/edit",\n                     "id": "edit",\n                     "title": "Edit"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "toolbar-action/folderContents",\n                     "id": "folderContents",\n                     "title": "Contents"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "toolbar-action/history",\n                     "id": "history",\n                     "title": "History"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "toolbar-action/sharing",\n                     "id": "local_roles",\n                     "title": "Sharing"\n                 }\n             ],\n             "object_buttons": [\n                 {\n-                    "icon": "",\n+                    "icon": "plone-cut",\n                     "id": "cut",\n                     "title": "Cut"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-copy",\n                     "id": "copy",\n                     "title": "Copy"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-delete",\n                     "id": "delete",\n                     "title": "Delete"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-rename",\n                     "id": "rename",\n                     "title": "Rename"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-redirection",\n                     "id": "redirection",\n                     "title": "URL Management"\n                 }\n             ],\n             "portal_tabs": [\n                 {\n-                    "icon": "",\n+                    "icon": "plone-home",\n                     "id": "index_html",\n                     "title": "Home"\n                 }\n             ],\n             "site_actions": [\n                 {\n-                    "icon": "",\n+                    "icon": "plone-sitemap",\n                     "id": "sitemap",\n                     "title": "Site Map"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-accessibility",\n                     "id": "accessibility",\n                     "title": "Accessibility"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-contact-info",\n                     "id": "contact",\n                     "title": "Contact"\n                 }\n             ],\n             "user": [\n                 {\n-                    "icon": "",\n+                    "icon": "plone-user",\n                     "id": "preferences",\n                     "title": "Preferences"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-dashboard",\n                     "id": "dashboard",\n                     "title": "Dashboard"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-controlpanel",\n                     "id": "plone_setup",\n                     "title": "Site Setup"\n                 },\n                 {\n-                    "icon": "",\n+                    "icon": "plone-logout",\n                     "id": "logout",\n                     "title": "Log out"\n                 }\ndiff --git a/src/plone/restapi/tests/http-examples/image.resp b/src/plone/restapi/tests/http-examples/image.resp\nindex a0ded1891..88bd72f80 100644\n--- a/src/plone/restapi/tests/http-examples/image.resp\n+++ b/src/plone/restapi/tests/http-examples/image.resp\n@@ -45,6 +45,16 @@ Content-Type: application/json\n         "filename": "image.png",\n         "height": 56,\n         "scales": {\n+            "great": {\n+                "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n+            "huge": {\n+                "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "icon": {\n                 "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n                 "height": 8,\n@@ -55,6 +65,11 @@ Content-Type: application/json\n                 "height": 56,\n                 "width": 215\n             },\n+            "larger": {\n+                "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "listing": {\n                 "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n                 "height": 4,\n@@ -70,6 +85,11 @@ Content-Type: application/json\n                 "height": 56,\n                 "width": 215\n             },\n+            "teaser": {\n+                "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "thumb": {\n                 "download": "http://localhost:55001/plone/image/@@images/uuid1.png",\n                 "height": 33,\ndiff --git a/src/plone/restapi/tests/http-examples/jwt_logged_in.resp b/src/plone/restapi/tests/http-examples/jwt_logged_in.resp\nindex 8aa56b21d..62eea6185 100644\n--- a/src/plone/restapi/tests/http-examples/jwt_logged_in.resp\n+++ b/src/plone/restapi/tests/http-examples/jwt_logged_in.resp\n@@ -17,13 +17,25 @@ Content-Type: application/json\n         },\n         "navigation": {\n             "@id": "http://localhost:55001/plone/@navigation"\n+        },\n+        "types": {\n+            "@id": "http://localhost:55001/plone/@types"\n+        },\n+        "workflow": {\n+            "@id": "http://localhost:55001/plone/@workflow"\n         }\n     },\n     "@id": "http://localhost:55001/plone",\n     "@type": "Plone Site",\n-    "blocks": {},\n-    "blocks_layout": {},\n+    "allow_discussion": null,\n+    "contributors": [],\n+    "creators": [\n+        "admin"\n+    ],\n     "description": "",\n+    "effective": null,\n+    "exclude_from_nav": false,\n+    "expires": null,\n     "id": "plone",\n     "is_folderish": true,\n     "items": [\n@@ -36,6 +48,19 @@ Content-Type: application/json\n         }\n     ],\n     "items_total": 1,\n+    "language": {\n+        "title": "English",\n+        "token": "en"\n+    },\n+    "lock": {\n+        "locked": false,\n+        "stealable": true\n+    },\n     "parent": {},\n+    "relatedItems": [],\n+    "rights": "",\n+    "subjects": [],\n+    "table_of_contents": null,\n+    "text": null,\n     "title": "Plone site"\n }\ndiff --git a/src/plone/restapi/tests/http-examples/newsitem.resp b/src/plone/restapi/tests/http-examples/newsitem.resp\nindex a82f7e875..003f4dbbd 100644\n--- a/src/plone/restapi/tests/http-examples/newsitem.resp\n+++ b/src/plone/restapi/tests/http-examples/newsitem.resp\n@@ -46,6 +46,16 @@ Content-Type: application/json\n         "filename": "image.png",\n         "height": 56,\n         "scales": {\n+            "great": {\n+                "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n+            "huge": {\n+                "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "icon": {\n                 "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n                 "height": 8,\n@@ -56,6 +66,11 @@ Content-Type: application/json\n                 "height": 56,\n                 "width": 215\n             },\n+            "larger": {\n+                "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "listing": {\n                 "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n                 "height": 4,\n@@ -71,6 +86,11 @@ Content-Type: application/json\n                 "height": 56,\n                 "width": 215\n             },\n+            "teaser": {\n+                "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n+                "height": 56,\n+                "width": 215\n+            },\n             "thumb": {\n                 "download": "http://localhost:55001/plone/newsitem/@@images/uuid1.png",\n                 "height": 33,\ndiff --git a/src/plone/restapi/tests/http-examples/registry_get_list.resp b/src/plone/restapi/tests/http-examples/registry_get_list.resp\nindex c9228dbbb..3c8141851 100644\n--- a/src/plone/restapi/tests/http-examples/registry_get_list.resp\n+++ b/src/plone/restapi/tests/http-examples/registry_get_list.resp\n@@ -6,7 +6,7 @@ Content-Type: application/json\n     "batching": {\n         "@id": "http://localhost:55001/plone/@registry",\n         "first": "http://localhost:55001/plone/@registry?b_start=0",\n-        "last": "http://localhost:55001/plone/@registry?b_start=1850",\n+        "last": "http://localhost:55001/plone/@registry?b_start=2725",\n         "next": "http://localhost:55001/plone/@registry?b_start=25"\n     },\n     "items": [\n@@ -58,178 +58,16 @@ Content-Type: application/json\n             },\n             "value": "%H:%M"\n         },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.allowed",\n-            "schema": {\n-                "properties": {\n-                    "default": true,\n-                    "description": "Allow syndication for collections and folders on site.",\n-                    "factory": "Yes/No",\n-                    "title": "Allowed",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": true\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.allowed_feed_types",\n-            "schema": {\n-                "properties": {\n-                    "additionalItems": true,\n-                    "default": [\n-                        "RSS|RSS 1.0",\n-                        "rss.xml|RSS 2.0",\n-                        "atom.xml|Atom",\n-                        "itunes.xml|iTunes"\n-                    ],\n-                    "description": "Separate view name and title by \'|\'",\n-                    "factory": "Tuple",\n-                    "items": {\n-                        "description": "",\n-                        "factory": "Text line (String)",\n-                        "title": "",\n-                        "type": "string"\n-                    },\n-                    "title": "Allowed Feed Types",\n-                    "type": "array",\n-                    "uniqueItems": true\n-                }\n-            },\n-            "value": [\n-                "RSS|RSS 1.0",\n-                "rss.xml|RSS 2.0",\n-                "atom.xml|Atom",\n-                "itunes.xml|iTunes"\n-            ]\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.default_enabled",\n-            "schema": {\n-                "properties": {\n-                    "default": false,\n-                    "description": "If syndication should be enabled by default for all folders and collections.",\n-                    "factory": "Yes/No",\n-                    "title": "Enabled by default",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": false\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.max_items",\n-            "schema": {\n-                "properties": {\n-                    "default": 15,\n-                    "description": "Maximum number of items that will be syndicated.",\n-                    "factory": "Integer",\n-                    "minimum": 1,\n-                    "title": "Maximum items",\n-                    "type": "integer"\n-                }\n-            },\n-            "value": 15\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.render_body",\n-            "schema": {\n-                "properties": {\n-                    "default": false,\n-                    "description": "If body text available for item, render it, otherwise use description.",\n-                    "factory": "Yes/No",\n-                    "title": "Render Body",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": false\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.search_rss_enabled",\n-            "schema": {\n-                "properties": {\n-                    "default": true,\n-                    "description": "Allows users to subscribe to feeds of search results",\n-                    "factory": "Yes/No",\n-                    "title": "Search RSS enabled",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": true\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.show_author_info",\n-            "schema": {\n-                "properties": {\n-                    "default": true,\n-                    "description": "Should feeds include author information",\n-                    "factory": "Yes/No",\n-                    "title": "Show author info",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": true\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.show_syndication_button",\n-            "schema": {\n-                "properties": {\n-                    "description": "Makes it possible to customize syndication settings for particular folders and collections ",\n-                    "factory": "Yes/No",\n-                    "title": "Show settings button",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": null\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.show_syndication_link",\n-            "schema": {\n-                "properties": {\n-                    "description": "Enable RSS link document action on the syndication content item.",\n-                    "factory": "Yes/No",\n-                    "title": "Show feed link",\n-                    "type": "boolean"\n-                }\n-            },\n-            "value": null\n-        },\n-        {\n-            "name": "Products.CMFPlone.interfaces.syndication.ISiteSyndicationSettings.site_rss_items",\n-            "schema": {\n-                "properties": {\n-                    "additionalItems": true,\n-                    "default": [\n-                        "/news/aggregator"\n-                    ],\n-                    "description": "Paths to folders and collections to link to at the portal root.",\n-                    "factory": "Tuple",\n-                    "items": {\n-                        "description": "",\n-                        "factory": "Choice",\n-                        "title": "",\n-                        "type": "string",\n-                        "vocabulary": {\n-                            "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.SyndicatableFeedItems"\n-                        }\n-                    },\n-                    "title": "Site RSS",\n-                    "type": "array",\n-                    "uniqueItems": true\n-                }\n-            },\n-            "value": [\n-                "/news/aggregator"\n-            ]\n-        },\n         {\n             "name": "plone.alignment_styles",\n             "schema": {\n                 "properties": {\n                     "additionalItems": true,\n                     "default": [\n-                        "Left|alignleft|alignleft",\n-                        "Center|aligncenter|aligncenter",\n-                        "Right|alignright|alignright",\n-                        "Justify|alignjustify|alignjustify"\n+                        "Left|alignleft|align-left",\n+                        "Center|aligncenter|align-center",\n+                        "Right|alignright|align-right",\n+                        "Justify|alignjustify|align-justify"\n                     ],\n                     "description": "Name|format|icon",\n                     "factory": "List",\n@@ -245,10 +83,10 @@ Content-Type: application/json\n                 }\n             },\n             "value": [\n-                "Left|alignleft|alignleft",\n-                "Center|aligncenter|aligncenter",\n-                "Right|alignright|alignright",\n-                "Justify|alignjustify|alignjustify"\n+                "Left|alignleft|align-left",\n+                "Center|aligncenter|align-center",\n+                "Right|alignright|align-right",\n+                "Justify|alignjustify|align-justify"\n             ]\n         },\n         {\n@@ -291,9 +129,13 @@ Content-Type: application/json\n                 "properties": {\n                     "additionalItems": true,\n                     "default": [\n-                        "large 768:768",\n-                        "preview 400:400",\n-                        "mini 200:200",\n+                        "huge 1600:65536",\n+                        "great 1200:65536",\n+                        "larger 1000:65536",\n+                        "large 800:65536",\n+                        "teaser 600:65536",\n+                        "preview 400:65536",\n+                        "mini 200:65536",\n                         "thumb 128:128",\n                         "tile 64:64",\n                         "icon 32:32",\n@@ -313,9 +155,13 @@ Content-Type: application/json\n                 }\n             },\n             "value": [\n-                "large 768:768",\n-                "preview 400:400",\n-                "mini 200:200",\n+                "huge 1600:65536",\n+                "great 1200:65536",\n+                "larger 1000:65536",\n+                "large 800:65536",\n+                "teaser 600:65536",\n+                "preview 400:65536",\n+                "mini 200:65536",\n                 "thumb 128:128",\n                 "tile 64:64",\n                 "icon 32:32",\n@@ -432,7 +278,150 @@ Content-Type: application/json\n                 }\n             },\n             "value": false\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.globally_enabled",\n+            "schema": {\n+                "properties": {\n+                    "default": false,\n+                    "description": "If selected, users are able to post comments on the site. However, you will still need to enable comments for specific content types, folders or content objects before users will be able to post comments.",\n+                    "factory": "Yes/No",\n+                    "title": "Globally enable comments",\n+                    "type": "boolean"\n+                }\n+            },\n+            "value": false\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.moderation_enabled",\n+            "schema": {\n+                "properties": {\n+                    "default": false,\n+                    "description": "If selected, comments will enter a \\"Pending\\" state in which they are invisible to the public. A user with the \\"Review comments\\" permission (\\"Reviewer\\" or \\"Manager\\") can approve comments to make them visible to the public. If you want to enable a custom comment workflow, you have to go to the types control panel.",\n+                    "factory": "Yes/No",\n+                    "title": "Enable comment moderation",\n+                    "type": "boolean"\n+                }\n+            },\n+            "value": false\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.moderator_email",\n+            "schema": {\n+                "properties": {\n+                    "description": "Address to which moderator notifications will be sent.",\n+                    "factory": "Text line (String)",\n+                    "title": "Moderator Email Address",\n+                    "type": "string"\n+                }\n+            },\n+            "value": null\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.moderator_notification_enabled",\n+            "schema": {\n+                "properties": {\n+                    "default": false,\n+                    "description": "If selected, the moderator is notified if a comment needs attention. The moderator email address can be set below.",\n+                    "factory": "Yes/No",\n+                    "title": "Enable moderator email notification",\n+                    "type": "boolean"\n+                }\n+            },\n+            "value": false\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.show_commenter_image",\n+            "schema": {\n+                "properties": {\n+                    "default": true,\n+                    "description": "If selected, an image of the user is shown next to the comment.",\n+                    "factory": "Yes/No",\n+                    "title": "Show commenter image",\n+                    "type": "boolean"\n+                }\n+            },\n+            "value": true\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.text_transform",\n+            "schema": {\n+                "properties": {\n+                    "default": "text/plain",\n+                    "description": "Use this setting to choose if the comment text should be transformed in any way. You can choose between \\"Plain text\\" and \\"Intelligent text\\". \\"Intelligent text\\" converts plain text into HTML where line breaks and indentation is preserved, and web and email addresses are made into clickable links.",\n+                    "factory": "Choice",\n+                    "title": "Comment text transform",\n+                    "type": "string",\n+                    "vocabulary": {\n+                        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.discussion.vocabularies.TextTransformVocabulary"\n+                    }\n+                }\n+            },\n+            "value": "text/plain"\n+        },\n+        {\n+            "name": "plone.app.discussion.interfaces.IDiscussionSettings.user_notification_enabled",\n+            "schema": {\n+                "properties": {\n+                    "default": false,\n+                    "description": "If selected, users can choose to be notified of new comments by email.",\n+                    "factory": "Yes/No",\n+                    "title": "Enable user email notification",\n+                    "type": "boolean"\n+                }\n+            },\n+            "value": false\n+        },\n+        {\n+            "name": "plone.app.layout.globals.bodyClass.depth",\n+            "schema": {\n+                "properties": {\n+                    "description": "Depth relative the site root that body class are generated for.\\n      ",\n+                    "factory": "Integer",\n+                    "title": "Body class path depth",\n+                    "type": "integer"\n+                }\n+            },\n+            "value": 4\n+        },\n+        {\n+            "name": "plone.app.portlets.PortletManagerBlacklist",\n+            "schema": {\n+                "properties": {\n+                    "additionalItems": true,\n+                    "description": "A list of portlet manager names that will not be shown in the toolbar dropdown",\n+                    "factory": "List",\n+                    "items": {\n+                        "description": "",\n+                        "factory": "Text line (String)",\n+                        "title": "",\n+                        "type": "string"\n+                    },\n+                    "title": "Toolbar Portlet Manager Blacklist",\n+                    "type": "array",\n+                    "uniqueItems": false\n+                }\n+            },\n+            "value": [\n+                "plone.dashboard1",\n+                "plone.dashboard2",\n+                "plone.dashboard3",\n+                "plone.dashboard4"\n+            ]\n+        },\n+        {\n+            "name": "plone.app.querystring.field.Creator.description",\n+            "schema": {\n+                "properties": {\n+                    "description": "",\n+                    "factory": "Text",\n+                    "title": "Description",\n+                    "type": "string",\n+                    "widget": "textarea"\n+                }\n+            },\n+            "value": "The person that created an item"\n         }\n     ],\n-    "items_total": 1853\n+    "items_total": 2734\n }\ndiff --git a/src/plone/restapi/tests/http-examples/search.resp b/src/plone/restapi/tests/http-examples/search.resp\nindex abbb81637..f3204a37e 100644\n--- a/src/plone/restapi/tests/http-examples/search.resp\n+++ b/src/plone/restapi/tests/http-examples/search.resp\n@@ -4,6 +4,13 @@ Content-Type: application/json\n {\n     "@id": "http://localhost:55001/plone/@search",\n     "items": [\n+        {\n+            "@id": "http://localhost:55001/plone",\n+            "@type": "Plone Site",\n+            "description": "",\n+            "review_state": null,\n+            "title": "Plone site"\n+        },\n         {\n             "@id": "http://localhost:55001/plone/front-page",\n             "@type": "Document",\n@@ -12,5 +19,5 @@ Content-Type: application/json\n             "title": "Welcome to Plone"\n         }\n     ],\n-    "items_total": 1\n+    "items_total": 2\n }\ndiff --git a/src/plone/restapi/tests/http-examples/siteroot.resp b/src/plone/restapi/tests/http-examples/siteroot.resp\nindex 8aa56b21d..62eea6185 100644\n--- a/src/plone/restapi/tests/http-examples/siteroot.resp\n+++ b/src/plone/restapi/tests/http-examples/siteroot.resp\n@@ -17,13 +17,25 @@ Content-Type: application/json\n         },\n         "navigation": {\n             "@id": "http://localhost:55001/plone/@navigation"\n+        },\n+        "types": {\n+            "@id": "http://localhost:55001/plone/@types"\n+        },\n+        "workflow": {\n+            "@id": "http://localhost:55001/plone/@workflow"\n         }\n     },\n     "@id": "http://localhost:55001/plone",\n     "@type": "Plone Site",\n-    "blocks": {},\n-    "blocks_layout": {},\n+    "allow_discussion": null,\n+    "contributors": [],\n+    "creators": [\n+        "admin"\n+    ],\n     "description": "",\n+    "effective": null,\n+    "exclude_from_nav": false,\n+    "expires": null,\n     "id": "plone",\n     "is_folderish": true,\n     "items": [\n@@ -36,6 +48,19 @@ Content-Type: application/json\n         }\n     ],\n     "items_total": 1,\n+    "language": {\n+        "title": "English",\n+        "token": "en"\n+    },\n+    "lock": {\n+        "locked": false,\n+        "stealable": true\n+    },\n     "parent": {},\n+    "relatedItems": [],\n+    "rights": "",\n+    "subjects": [],\n+    "table_of_contents": null,\n+    "text": null,\n     "title": "Plone site"\n }\ndiff --git a/src/plone/restapi/tests/http-examples/translated_messages_addons.resp b/src/plone/restapi/tests/http-examples/translated_messages_addons.resp\nindex 31fdad975..50e110c98 100644\n--- a/src/plone/restapi/tests/http-examples/translated_messages_addons.resp\n+++ b/src/plone/restapi/tests/http-examples/translated_messages_addons.resp\n@@ -13,7 +13,7 @@ Content-Type: application/json\n             "title": "Soporte de Pol\\u00edtica de Flujo de trabajo (CMFPlacefulWorkflow)",\n             "uninstall_profile_id": "Products.CMFPlacefulWorkflow:uninstall",\n             "upgrade_info": {},\n-            "version": "2.0.4"\n+            "version": "3.0.0b1"\n         },\n         {\n             "@id": "http://localhost:55001/plone/@addons/collective.MockMailHost",\n@@ -55,7 +55,7 @@ Content-Type: application/json\n             "title": "Soporte Multiidioma",\n             "uninstall_profile_id": "plone.app.multilingual:uninstall",\n             "upgrade_info": {},\n-            "version": "5.6.4"\n+            "version": "6.0.0b3"\n         },\n         {\n             "@id": "http://localhost:55001/plone/@addons/plone.restapi",\n@@ -85,7 +85,7 @@ Content-Type: application/json\n             "title": "Soporte de actualizaci\\u00f3n de sesi\\u00f3n",\n             "uninstall_profile_id": "plone.session:uninstall",\n             "upgrade_info": {},\n-            "version": "3.7.5"\n+            "version": "4.0.0b2"\n         }\n     ]\n }\ndiff --git a/src/plone/restapi/tests/http-examples/translated_messages_types_folder.resp b/src/plone/restapi/tests/http-examples/translated_messages_types_folder.resp\nindex f3b29f211..7028f92d5 100644\n--- a/src/plone/restapi/tests/http-examples/translated_messages_types_folder.resp\n+++ b/src/plone/restapi/tests/http-examples/translated_messages_types_folder.resp\n@@ -55,11 +55,11 @@ Content-Type: application/json+schema\n     ],\n     "layouts": [\n         "album_view",\n-        "event_listing",\n         "full_view",\n         "listing_view",\n         "summary_view",\n-        "tabular_view"\n+        "tabular_view",\n+        "event_listing"\n     ],\n     "properties": {\n         "allow_discussion": {\n@@ -140,7 +140,7 @@ Content-Type: application/json+schema\n         },\n         "effective": {\n             "behavior": "plone.dublincore",\n-            "description": "La fecha en la que el documento ser\\u00e1 publicado. Si no selecciona ninguna fecha, el documento ser\\u00e1 publicado inmediatamente.",\n+            "description": "Si la fecha es del futuro, el contenido no se mostrar\\u00e1 en los listados y las b\\u00fasquedas hasta esa fecha.",\n             "factory": "Date/Time",\n             "title": "Fecha de Publicaci\\u00f3n",\n             "type": "string",\n@@ -156,7 +156,7 @@ Content-Type: application/json+schema\n         },\n         "expires": {\n             "behavior": "plone.dublincore",\n-            "description": "La fecha en la que expira el documento. Esto har\\u00e1 autom\\u00e1ticamente el documento invisible a otros a una fecha dada. Si no elije ninguna fecha, nunca expirar\\u00e1.",\n+            "description": "Cuando esta fecha llegue, el contenido no se mostrar\\u00e1 en los listados y b\\u00fasquedas.",\n             "factory": "Date/Time",\n             "title": "Fecha de Terminaci\\u00f3n",\n             "type": "string",\n@@ -203,7 +203,7 @@ Content-Type: application/json+schema\n                     "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.Catalog"\n                 }\n             },\n-            "title": "Contenido relacionado",\n+            "title": "Related Items",\n             "type": "array",\n             "uniqueItems": true,\n             "widgetOptions": {\ndiff --git a/src/plone/restapi/tests/http-examples/vocabularies.resp b/src/plone/restapi/tests/http-examples/vocabularies.resp\nindex 81b36923a..c8b7c4aee 100644\n--- a/src/plone/restapi/tests/http-examples/vocabularies.resp\n+++ b/src/plone/restapi/tests/http-examples/vocabularies.resp\n@@ -2,6 +2,14 @@ HTTP/1.1 200 OK\n Content-Type: application/json\n \n [\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.contentrules.events",\n+        "title": "plone.contentrules.events"\n+    },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/Behaviors",\n+        "title": "Behaviors"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.vocabularies.AvailableContentLanguages",\n         "title": "plone.app.vocabularies.AvailableContentLanguages"\n@@ -138,14 +146,6 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.content.ValidAddableTypes",\n         "title": "plone.app.content.ValidAddableTypes"\n     },\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/plone.contentrules.events",\n-        "title": "plone.contentrules.events"\n-    },\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/Behaviors",\n-        "title": "Behaviors"\n-    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/Fields",\n         "title": "Fields"\n@@ -166,6 +166,10 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.contenttypes.metadatafields",\n         "title": "plone.app.contenttypes.metadatafields"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.contenttypes.migration.changed_base_classes",\n+        "title": "plone.app.contenttypes.migration.changed_base_classes"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/Interfaces",\n         "title": "Interfaces"\n@@ -178,14 +182,6 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.discussion.vocabularies.TextTransformVocabulary",\n         "title": "plone.app.discussion.vocabularies.TextTransformVocabulary"\n     },\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.users.user_registration_fields",\n-        "title": "plone.app.users.user_registration_fields"\n-    },\n-    {\n-        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.users.group_ids",\n-        "title": "plone.app.users.group_ids"\n-    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.multilingual.vocabularies.AllContentLanguageVocabulary",\n         "title": "plone.app.multilingual.vocabularies.AllContentLanguageVocabulary"\n@@ -198,6 +194,14 @@ Content-Type: application/json\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.app.multilingual.RootCatalog",\n         "title": "plone.app.multilingual.RootCatalog"\n     },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.users.user_registration_fields",\n+        "title": "plone.app.users.user_registration_fields"\n+    },\n+    {\n+        "@id": "http://localhost:55001/plone/@vocabularies/plone.app.users.group_ids",\n+        "title": "plone.app.users.group_ids"\n+    },\n     {\n         "@id": "http://localhost:55001/plone/@vocabularies/plone.restapi.testing.context_vocabulary",\n         "title": "plone.restapi.testing.context_vocabulary"\ndiff --git a/test-no-uncommitted-doc-changes b/test-no-uncommitted-doc-changes\nindex 45252bd0e..420234a38 100755\n--- a/test-no-uncommitted-doc-changes\n+++ b/test-no-uncommitted-doc-changes\n@@ -13,12 +13,12 @@ function red {\n     echo "$RED $1 $RESET"\n }\n \n-if [ "$PLONE_VERSION" == "5.2" ] && [ "$PYTHON_VERSION" == \'3.7\' ]; then\n-    echo "Running check for undocumented changes for Plone 5.2.x on Python 3.7"\n+if [ "$PLONE_VERSION" == "6.0" ] && [ "$PYTHON_VERSION" == \'3.9\' ]; then\n+    echo "Running check for undocumented changes for Plone 6.0.x on Python 3.9"\n else\n-    # request/response dumps have known differences for Plone 5\n+    # request/response dumps have known differences for different Python/Plone combinations\n     # => skip, we can\'t have the Plone 5 build fail because of those\n-    echo "Skipping checks for undocumented changes for everything except Plone 5.2.x on Python 3.7"\n+    echo "Skipping checks for undocumented changes for everything except Plone 6.0.x on Python 3.9"\n     exit 0\n fi\n \n'

