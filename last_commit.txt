Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-02-24T15:23:15+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/b38da2b3abe34f932b30add65b570339a484c9f8

Apply Barceloneta upgrades when upgrading Plone.

An upgrade step was added in plonetheme.barceloneta in September 2022.
Also an upgrade step in plone.app.upgrade to re-apply the registry from plonetheme.barceloneta.
But in portal_setup Upgrades the package was still marked as upgradable, because its own upgrade step was not run.
Just run any upgrade automatically from now on.

Files changed:
A news/3726.bugfix
M Products/CMFPlone/MigrationTool.py

b"diff --git a/Products/CMFPlone/MigrationTool.py b/Products/CMFPlone/MigrationTool.py\nindex 37abca6e4a..98285bd0c8 100644\n--- a/Products/CMFPlone/MigrationTool.py\n+++ b/Products/CMFPlone/MigrationTool.py\n@@ -121,6 +121,7 @@ def upgrade_all(self, context):\n         profile_id='plone.volto:default',\n         check_module='plone.volto'\n     ),\n+    Addon(profile_id='plonetheme.barceloneta:default'),\n ])\n \n \ndiff --git a/news/3726.bugfix b/news/3726.bugfix\nnew file mode 100644\nindex 0000000000..b95f3ddc42\n--- /dev/null\n+++ b/news/3726.bugfix\n@@ -0,0 +1,2 @@\n+Apply Barceloneta upgrades when upgrading Plone.\n+[maurits]\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-02-24T17:42:12+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/6e5c1ba1864ebeec75f9cbd27469e504e9a31f84

Merge pull request #3726 from plone/maurits-apply-barceloneta-upgrades

Apply Barceloneta upgrades when upgrading Plone.

Files changed:
A news/3726.bugfix
M Products/CMFPlone/MigrationTool.py

b"diff --git a/Products/CMFPlone/MigrationTool.py b/Products/CMFPlone/MigrationTool.py\nindex 37abca6e4a..98285bd0c8 100644\n--- a/Products/CMFPlone/MigrationTool.py\n+++ b/Products/CMFPlone/MigrationTool.py\n@@ -121,6 +121,7 @@ def upgrade_all(self, context):\n         profile_id='plone.volto:default',\n         check_module='plone.volto'\n     ),\n+    Addon(profile_id='plonetheme.barceloneta:default'),\n ])\n \n \ndiff --git a/news/3726.bugfix b/news/3726.bugfix\nnew file mode 100644\nindex 0000000000..b95f3ddc42\n--- /dev/null\n+++ b/news/3726.bugfix\n@@ -0,0 +1,2 @@\n+Apply Barceloneta upgrades when upgrading Plone.\n+[maurits]\n"

