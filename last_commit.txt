Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2015-11-25T11:38:45+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.ATContentTypes/commit/9e760fb4d9a6b07710636012e926f47139758bb6

Create standard news/events collections with selection.any.

Issue https://github.com/plone/Products.CMFPlone/issues/1040

Files changed:
M CHANGES.rst
M Products/ATContentTypes/setuphandlers.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f5d2567..e91b29c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -13,6 +13,10 @@ Fixes:
 - Update Site Setup link in all control panels (fixes https://github.com/plone/Products.CMFPlone/issues/1255)
   [davilima6]
 
+- Create standard news/events collections with ``selection.any``.
+  Issue https://github.com/plone/Products.CMFPlone/issues/1040
+  [maurits]
+
 
 2.2.8 (2015-10-28)
 ------------------
diff --git a/Products/ATContentTypes/setuphandlers.py b/Products/ATContentTypes/setuphandlers.py
index 89059d1..f9729eb 100644
--- a/Products/ATContentTypes/setuphandlers.py
+++ b/Products/ATContentTypes/setuphandlers.py
@@ -168,10 +168,10 @@ def setupPortalContent(p):
         topic.setLanguage(language)
 
         query = [{'i': 'portal_type',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['News Item']},
                  {'i': 'review_state',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['published']}]
         topic.setQuery(query)
 
@@ -218,13 +218,13 @@ def setupPortalContent(p):
         topic.setLanguage(language)
 
         query = [{'i': 'portal_type',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['Event']},
                  {'i': 'start',
                   'o': 'plone.app.querystring.operation.date.afterToday',
                   'v': ''},
                  {'i': 'review_state',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['published']}]
         topic.setQuery(query)
         topic.setSort_on('start')


Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2015-11-25T11:41:25+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.forcada@freitag.de>
Commit: https://github.com/plone/Products.ATContentTypes/commit/00b3003f028ebece71035eabd7ec0c33473911a7

Merge pull request #27 from plone/cmfplone-issue-1040

Create standard news/events collections with selection.any.

Files changed:
M CHANGES.rst
M Products/ATContentTypes/setuphandlers.py

diff --git a/CHANGES.rst b/CHANGES.rst
index f5d2567..e91b29c 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -13,6 +13,10 @@ Fixes:
 - Update Site Setup link in all control panels (fixes https://github.com/plone/Products.CMFPlone/issues/1255)
   [davilima6]
 
+- Create standard news/events collections with ``selection.any``.
+  Issue https://github.com/plone/Products.CMFPlone/issues/1040
+  [maurits]
+
 
 2.2.8 (2015-10-28)
 ------------------
diff --git a/Products/ATContentTypes/setuphandlers.py b/Products/ATContentTypes/setuphandlers.py
index 89059d1..f9729eb 100644
--- a/Products/ATContentTypes/setuphandlers.py
+++ b/Products/ATContentTypes/setuphandlers.py
@@ -168,10 +168,10 @@ def setupPortalContent(p):
         topic.setLanguage(language)
 
         query = [{'i': 'portal_type',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['News Item']},
                  {'i': 'review_state',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['published']}]
         topic.setQuery(query)
 
@@ -218,13 +218,13 @@ def setupPortalContent(p):
         topic.setLanguage(language)
 
         query = [{'i': 'portal_type',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['Event']},
                  {'i': 'start',
                   'o': 'plone.app.querystring.operation.date.afterToday',
                   'v': ''},
                  {'i': 'review_state',
-                  'o': 'plone.app.querystring.operation.selection.is',
+                  'o': 'plone.app.querystring.operation.selection.any',
                   'v': ['published']}]
         topic.setQuery(query)
         topic.setSort_on('start')


