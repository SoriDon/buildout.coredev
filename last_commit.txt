Repository: plone.batching


Branch: refs/heads/master
Date: 2023-02-09T01:53:08+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.batching/commit/0bb0c7a21f6cb881095e3f5e4e3fa85dcdb620ee

zpretty

Files changed:
M plone/batching/batch_macros.pt
M plone/batching/batchnavigation.pt
M plone/batching/batchnavigation_bootstrap.pt

b'diff --git a/plone/batching/batch_macros.pt b/plone/batching/batch_macros.pt\nindex fa8ae95..fb4d5c3 100644\n--- a/plone/batching/batch_macros.pt\n+++ b/plone/batching/batch_macros.pt\n@@ -1,20 +1,25 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n-      xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-      i18n:domain="plone">\n-<body>\n+      xmlns:metal="http://xml.zope.org/namespaces/metal"\n+      xmlns:tal="http://xml.zope.org/namespaces/tal"\n+      i18n:domain="plone"\n+>\n+  <body>\n \n-<tal:macro\n-     metal:define-macro="navigation"\n-     tal:define="batch batch|nothing;\n-                 batchformkeys batchformkeys|nothing;">\n+    <tal:macro metal:define-macro="navigation"\n+               tal:define="\n+                 batch batch|nothing;\n+                 batchformkeys batchformkeys|nothing;\n+               "\n+    >\n \n-    <tal:batchnavigation\n-            define="batchnavigation nocall:context/@@batchnavigation"\n-            replace="structure python:batchnavigation(batch, batchformkeys)" />\n+      <tal:batchnavigation define="\n+                             batchnavigation nocall:context/@@batchnavigation;\n+                           "\n+                           replace="structure python:batchnavigation(batch, batchformkeys)"\n+      />\n \n-</tal:macro>\n+    </tal:macro>\n \n-</body>\n+  </body>\n </html>\ndiff --git a/plone/batching/batchnavigation.pt b/plone/batching/batchnavigation.pt\nindex 5190761..5d1d833 100644\n--- a/plone/batching/batchnavigation.pt\n+++ b/plone/batching/batchnavigation.pt\n@@ -1,22 +1,39 @@\n <!-- Navigation -->\n-<tal:batchnavigation define="batch view/batch|nothing"\n-    condition="batch"\n-    metal:define-macro="navigation">\n+<tal:batchnavigation metal:define-macro="navigation"\n+                     define="\n+                       batch view/batch|nothing;\n+                     "\n+                     condition="batch"\n+>\n \n   <nav class="d-flex justify-content-center"\n-      i18n:domain="plone"\n-      tal:condition="batch/multiple_pages">\n+       tal:condition="batch/multiple_pages"\n+       i18n:domain="plone"\n+  >\n \n     <ul class="pagination">\n \n       <tal:comment replace="nothing">\n         <!-- Previous page -->\n       </tal:comment>\n-      <li class="page-item previous" tal:condition="batch/has_previous">\n-        <a tal:attributes="href python:view.make_link(batch.previouspage)" class="page-link">\n+      <li class="page-item previous"\n+          tal:condition="batch/has_previous"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(batch.previouspage);\n+           "\n+        >\n           <span aria-hidden="true">&lt;</span>\n-          <span class="label" i18n:translate="batch_previous_x_items">\n-            Previous <span i18n:name="number" tal:content="batch/pagesize" tal:omit-tag="">n</span> items\n+          <span class="label"\n+                i18n:translate="batch_previous_x_items"\n+          >\n+            Previous\n+            <span tal:content="batch/pagesize"\n+                  tal:omit-tag=""\n+                  i18n:name="number"\n+            >n</span>\n+             items\n           </span>\n         </a>\n       </li>\n@@ -24,64 +41,110 @@\n       <tal:comment replace="nothing">\n         <!-- First page -->\n       </tal:comment>\n-      <li class="first page-item" tal:condition="batch/show_link_to_first">\n-        <a tal:attributes="href python:view.make_link(1)" class="page-link">1</a>\n+      <li class="first page-item"\n+          tal:condition="batch/show_link_to_first"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(1);\n+           "\n+        >1</a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Ellipsis after first item -->\n       </tal:comment>\n-      <li class="page-item disabled" tal:condition="batch/second_page_not_in_navlist">\n+      <li class="page-item disabled"\n+          tal:condition="batch/second_page_not_in_navlist"\n+      >\n         <span>...</span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Pagelist with links to previous pages for quick navigation -->\n       </tal:comment>\n-      <li tal:repeat="pagenumber batch/previous_pages" class="page-item">\n-        <a tal:content="pagenumber"\n-            tal:attributes="href python:view.make_link(pagenumber)" class="page-link"/>\n+      <li class="page-item"\n+          tal:repeat="pagenumber batch/previous_pages"\n+      >\n+        <a class="page-link"\n+           tal:content="pagenumber"\n+           tal:attributes="\n+             href python:view.make_link(pagenumber);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Active page -->\n       </tal:comment>\n-      <li class="page-item active" aria-current="page" tal:condition="batch/navlist">\n-        <span class="page-link" tal:content="batch/pagenumber" />\n-        <span class="sr-only" i18n:translate="(current)"></span>\n+      <li class="page-item active"\n+          aria-current="page"\n+          tal:condition="batch/navlist"\n+      >\n+        <span class="page-link"\n+              tal:content="batch/pagenumber"\n+        ></span>\n+        <span class="sr-only"\n+              i18n:translate="(current)"\n+        ></span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Pagelist with links to next pages for quick navigation -->\n       </tal:comment>\n-      <li tal:repeat="pagenumber batch/next_pages" class="page-item">\n-        <a tal:content="pagenumber"\n-            tal:attributes="href python:view.make_link(pagenumber)" class="page-link"/>\n+      <li class="page-item"\n+          tal:repeat="pagenumber batch/next_pages"\n+      >\n+        <a class="page-link"\n+           tal:content="pagenumber"\n+           tal:attributes="\n+             href python:view.make_link(pagenumber);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Ellipsis before last item -->\n       </tal:comment>\n-      <li class="page-item disabled" tal:condition="batch/before_last_page_not_in_navlist">\n+      <li class="page-item disabled"\n+          tal:condition="batch/before_last_page_not_in_navlist"\n+      >\n         <span class="page-link">...</span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Last page -->\n       </tal:comment>\n-      <li class="page-item last" tal:condition="batch/show_link_to_last">\n-        <a tal:attributes="href python:view.make_link(batch.lastpage)"\n-           tal:content="batch/lastpage" class="page-link" />\n+      <li class="page-item last"\n+          tal:condition="batch/show_link_to_last"\n+      >\n+        <a class="page-link"\n+           tal:content="batch/lastpage"\n+           tal:attributes="\n+             href python:view.make_link(batch.lastpage);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Next page -->\n       </tal:comment>\n-      <li class="page-item next" tal:condition="batch/has_next">\n-        <a tal:attributes="href python:view.make_link(batch.nextpage)" class="page-link">\n-          <span class="label" i18n:translate="batch_next_x_items">\n+      <li class="page-item next"\n+          tal:condition="batch/has_next"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(batch.nextpage);\n+           "\n+        >\n+          <span class="label"\n+                i18n:translate="batch_next_x_items"\n+          >\n             Next\n-            <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>\n+            <span tal:content="batch/next_item_count"\n+                  tal:omit-tag=""\n+                  i18n:name="number"\n+            >n</span>\n             items\n           </span>\n           <span aria-hidden="true">&gt;</span>\ndiff --git a/plone/batching/batchnavigation_bootstrap.pt b/plone/batching/batchnavigation_bootstrap.pt\nindex 4ea9ce0..960c7f1 100644\n--- a/plone/batching/batchnavigation_bootstrap.pt\n+++ b/plone/batching/batchnavigation_bootstrap.pt\n@@ -3,80 +3,140 @@\n      -->\n \n <div class="pagination"\n-  i18n:domain="plone"\n-  metal:define-macro="navigation"\n-  tal:define="batch view/batch|nothing;"\n-  tal:condition="batch">\n+     metal:define-macro="navigation"\n+     tal:define="\n+       batch view/batch|nothing;\n+     "\n+     tal:condition="batch"\n+     i18n:domain="plone"\n+>\n \n   <ul class="pager"\n-    tal:condition="batch/multiple_pages">\n+      tal:condition="batch/multiple_pages"\n+  >\n \n     <!-- First -->\n-    <li class="previous" tal:condition="batch/show_link_to_first">\n-      <a href="" tal:attributes="href python:view.make_link(1)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&laquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_first_item">First item</span>\n+    <li class="previous"\n+        tal:condition="batch/show_link_to_first"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(1);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&laquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_first_item"\n+        >First item</span>\n       </a>\n     </li>\n \n     <!-- Previous -->\n-    <li class="previous" tal:condition="batch/has_previous">\n-      <a href="" tal:attributes="href python:view.make_link(batch.previouspage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&lsaquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_previous_x_items">\n+    <li class="previous"\n+        tal:condition="batch/has_previous"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.previouspage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&lsaquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_previous_x_items"\n+        >\n           Previous\n-          <span i18n:name="number" tal:omit-tag=""\n-            tal:content="batch/pagesize">n</span>\n+          <span tal:content="batch/pagesize"\n+                tal:omit-tag=""\n+                i18n:name="number"\n+          >n</span>\n           items\n         </span>\n       </a>\n     </li>\n     <li tal:condition="batch/has_previous">\n       &hellip;&nbsp;\n-    </li >\n+    </li>\n \n     <!-- Pagelist with links to previous pages for quick navigation -->\n     <li tal:repeat="pagenumber batch/previous_pages">\n-      <a href="" tal:content="pagenumber"\n-        tal:attributes="href python:view.make_link(pagenumber)"/>\n+      <a href=""\n+         tal:content="pagenumber"\n+         tal:attributes="\n+           href python:view.make_link(pagenumber);\n+         "\n+      ></a>\n     </li>\n \n     <!-- Current page -->\n-    <li class="active" tal:condition="batch/navlist">\n-      <a href="#" tal:content="batch/pagenumber">Current page number</a>\n+    <li class="active"\n+        tal:condition="batch/navlist"\n+    >\n+      <a href="#"\n+         tal:content="batch/pagenumber"\n+      >Current page number</a>\n     </li>\n \n     <!-- Pagelist with links to next pages for quick navigation -->\n     <li tal:repeat="pagenumber batch/next_pages">\n-      <a href="" tal:content="pagenumber"\n-        tal:attributes="href python:view.make_link(pagenumber)"/>\n+      <a href=""\n+         tal:content="pagenumber"\n+         tal:attributes="\n+           href python:view.make_link(pagenumber);\n+         "\n+      ></a>\n     </li>\n \n     <!-- Next -->\n     <li tal:condition="batch/has_next">\n       &nbsp;&hellip;\n     </li>\n-    <li class="next" tal:condition="batch/has_next">\n-      <a href="" tal:attributes="href python:view.make_link(batch.nextpage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&rsaquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_next_x_items">\n+    <li class="next"\n+        tal:condition="batch/has_next"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.nextpage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&rsaquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_next_x_items"\n+        >\n           Next\n-          <span i18n:name="number" tal:omit-tag=""\n-            tal:content="batch/next_item_count">n</span>\n+          <span tal:content="batch/next_item_count"\n+                tal:omit-tag=""\n+                i18n:name="number"\n+          >n</span>\n           items\n         </span>\n       </a>\n     </li>\n \n     <!-- Last -->\n-    <li class="next" tal:condition="batch/show_link_to_last">\n-      <a href="" tal:attributes="href python:view.make_link(batch.lastpage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&raquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_last_item">Last item</span>\n+    <li class="next"\n+        tal:condition="batch/show_link_to_last"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.lastpage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&raquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_last_item"\n+        >Last item</span>\n       </a>\n     </li>\n \n'

Repository: plone.batching


Branch: refs/heads/master
Date: 2023-02-09T01:53:08+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.batching/commit/71e76f482eb4621402a1c8f6e28b3cc0079ad9d8

Add pre-commit config, use in tox.

I tried it out manually here, will copy it to plone/meta and try to update from there.

Files changed:
A .pre-commit-config.yaml
M .gitignore
M lint-requirements.txt
M setup.cfg
M tox.ini

b'diff --git a/.gitignore b/.gitignore\nindex 69d7f81..5370035 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -2,3 +2,4 @@\n *.pyc\n *.pyo\n _build\n+.tox\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..a27a357\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,33 @@\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/ambv/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 2.4.1\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.1"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/lint-requirements.txt b/lint-requirements.txt\nindex 2a91911..fa3036a 100644\n--- a/lint-requirements.txt\n+++ b/lint-requirements.txt\n@@ -1,12 +1,2 @@\n-# Generated from:\n-# https://github.com/plone/meta/tree/master/config/default\n-black==22.12.0\n-check-manifest==0.49\n-codespell==2.2.2\n-flake8==6.0.0\n-isort==5.11.4\n pipdeptree==2.3.3\n-pyroma==4.1\n-pyupgrade==3.3.1\n z3c.dependencychecker==2.10\n-zpretty==2.4.1\ndiff --git a/setup.cfg b/setup.cfg\nindex 2e03fa3..a73e9e1 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -19,6 +19,7 @@ ignore =\n ignore =\n     .editorconfig\n     .meta.toml\n+    .pre-commit-config.yaml\n     tox.ini\n     lint-requirements.txt\n     conf.py\ndiff --git a/tox.ini b/tox.ini\nindex 80264a3..9e1e43a 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -5,46 +5,24 @@ envlist =\n     format\n     lint\n \n-[testenv]\n-py_files = git ls-files "*.py"\n-text_files = git ls-files "*.rst" "*.md"\n-xml_files = git ls-files "*.xml"\n-zcml_files = git ls-files "*.zcml"\n-allowlist_externals =\n-    sh\n-\n [testenv:format]\n-description = automatically reformat python code\n+description = automatically reformat code\n skip_install = true\n deps =\n-    pyupgrade\n-    isort\n-    black\n-    zpretty\n-    -c lint-requirements.txt\n+    pre-commit\n commands =\n-    sh -c \'{[testenv]py_files} | xargs pyupgrade --py38-plus\'\n-    sh -c \'{[testenv]py_files} | xargs isort\'\n-    sh -c \'{[testenv]py_files} | xargs black\'\n-    sh -c \'{[testenv]xml_files} | xargs zpretty -x -i || true\'\n-    sh -c \'{[testenv]zcml_files} | xargs zpretty -z -i || true\'\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n \n [testenv:lint]\n description = run linters that will help improve the code style\n skip_install = true\n deps =\n-    flake8\n-    codespell\n-    tomli  # needed for codespell to read pyproject.toml\n-    check-manifest\n-    pyroma\n-    -c lint-requirements.txt\n+    pre-commit\n commands =\n-    sh -c \'{[testenv]py_files} | xargs flake8\'\n-    sh -c \'{[testenv]py_files} | xargs codespell\'\n-    sh -c \'{[testenv]text_files} | xargs codespell\'\n-    check-manifest\n-    pyroma -n 10 .\n+    pre-commit run -a\n \n [testenv:dependencies]\n description = check if the package defines all its dependencies\n'

Repository: plone.batching


Branch: refs/heads/master
Date: 2023-02-09T01:59:34+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.batching/commit/e03d59ce0cabfedf8e9f0e855f6c84de7c6cee03

Configuring with plone/meta

Files changed:
A news/2.internal
M .meta.toml
M .pre-commit-config.yaml
M lint-requirements.txt

b'diff --git a/.meta.toml b/.meta.toml\nindex ec695e4..edb485d 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -7,7 +7,7 @@ additional-ignores = [\n \n [meta]\n template = "default"\n-commit-id = "e2d8e55c"\n+commit-id = "80b6e76b"\n \n [dependencies]\n mappings = [\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex a27a357..2e006b1 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -1,3 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n repos:\n -   repo: https://github.com/asottile/pyupgrade\n     rev: v3.3.1\ndiff --git a/lint-requirements.txt b/lint-requirements.txt\nindex fa3036a..ab818af 100644\n--- a/lint-requirements.txt\n+++ b/lint-requirements.txt\n@@ -1,2 +1,4 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n pipdeptree==2.3.3\n z3c.dependencychecker==2.10\ndiff --git a/news/2.internal b/news/2.internal\nnew file mode 100644\nindex 0000000..41f61b5\n--- /dev/null\n+++ b/news/2.internal\n@@ -0,0 +1,2 @@\n+Update package config to use pre-commit.\n+[maurits]\n'

Repository: plone.batching


Branch: refs/heads/master
Date: 2023-02-09T09:47:37+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.batching/commit/9f435919dd7ad686ee0b6832619e377171e0169d

Merge pull request #39 from plone/config-with-default-template-71e76f48

Config with default template 71e76f48

Files changed:
A .pre-commit-config.yaml
A news/2.internal
M .gitignore
M .meta.toml
M lint-requirements.txt
M plone/batching/batch_macros.pt
M plone/batching/batchnavigation.pt
M plone/batching/batchnavigation_bootstrap.pt
M setup.cfg
M tox.ini

b'diff --git a/.gitignore b/.gitignore\nindex 69d7f81..5370035 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -2,3 +2,4 @@\n *.pyc\n *.pyo\n _build\n+.tox\ndiff --git a/.meta.toml b/.meta.toml\nindex ec695e4..edb485d 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -7,7 +7,7 @@ additional-ignores = [\n \n [meta]\n template = "default"\n-commit-id = "e2d8e55c"\n+commit-id = "80b6e76b"\n \n [dependencies]\n mappings = [\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..2e006b1\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,35 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/ambv/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 2.4.1\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.1"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/lint-requirements.txt b/lint-requirements.txt\nindex 2a91911..ab818af 100644\n--- a/lint-requirements.txt\n+++ b/lint-requirements.txt\n@@ -1,12 +1,4 @@\n # Generated from:\n # https://github.com/plone/meta/tree/master/config/default\n-black==22.12.0\n-check-manifest==0.49\n-codespell==2.2.2\n-flake8==6.0.0\n-isort==5.11.4\n pipdeptree==2.3.3\n-pyroma==4.1\n-pyupgrade==3.3.1\n z3c.dependencychecker==2.10\n-zpretty==2.4.1\ndiff --git a/news/2.internal b/news/2.internal\nnew file mode 100644\nindex 0000000..41f61b5\n--- /dev/null\n+++ b/news/2.internal\n@@ -0,0 +1,2 @@\n+Update package config to use pre-commit.\n+[maurits]\ndiff --git a/plone/batching/batch_macros.pt b/plone/batching/batch_macros.pt\nindex fa8ae95..fb4d5c3 100644\n--- a/plone/batching/batch_macros.pt\n+++ b/plone/batching/batch_macros.pt\n@@ -1,20 +1,25 @@\n <html xmlns="http://www.w3.org/1999/xhtml"\n-      xmlns:tal="http://xml.zope.org/namespaces/tal"\n-      xmlns:metal="http://xml.zope.org/namespaces/metal"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-      i18n:domain="plone">\n-<body>\n+      xmlns:metal="http://xml.zope.org/namespaces/metal"\n+      xmlns:tal="http://xml.zope.org/namespaces/tal"\n+      i18n:domain="plone"\n+>\n+  <body>\n \n-<tal:macro\n-     metal:define-macro="navigation"\n-     tal:define="batch batch|nothing;\n-                 batchformkeys batchformkeys|nothing;">\n+    <tal:macro metal:define-macro="navigation"\n+               tal:define="\n+                 batch batch|nothing;\n+                 batchformkeys batchformkeys|nothing;\n+               "\n+    >\n \n-    <tal:batchnavigation\n-            define="batchnavigation nocall:context/@@batchnavigation"\n-            replace="structure python:batchnavigation(batch, batchformkeys)" />\n+      <tal:batchnavigation define="\n+                             batchnavigation nocall:context/@@batchnavigation;\n+                           "\n+                           replace="structure python:batchnavigation(batch, batchformkeys)"\n+      />\n \n-</tal:macro>\n+    </tal:macro>\n \n-</body>\n+  </body>\n </html>\ndiff --git a/plone/batching/batchnavigation.pt b/plone/batching/batchnavigation.pt\nindex 5190761..5d1d833 100644\n--- a/plone/batching/batchnavigation.pt\n+++ b/plone/batching/batchnavigation.pt\n@@ -1,22 +1,39 @@\n <!-- Navigation -->\n-<tal:batchnavigation define="batch view/batch|nothing"\n-    condition="batch"\n-    metal:define-macro="navigation">\n+<tal:batchnavigation metal:define-macro="navigation"\n+                     define="\n+                       batch view/batch|nothing;\n+                     "\n+                     condition="batch"\n+>\n \n   <nav class="d-flex justify-content-center"\n-      i18n:domain="plone"\n-      tal:condition="batch/multiple_pages">\n+       tal:condition="batch/multiple_pages"\n+       i18n:domain="plone"\n+  >\n \n     <ul class="pagination">\n \n       <tal:comment replace="nothing">\n         <!-- Previous page -->\n       </tal:comment>\n-      <li class="page-item previous" tal:condition="batch/has_previous">\n-        <a tal:attributes="href python:view.make_link(batch.previouspage)" class="page-link">\n+      <li class="page-item previous"\n+          tal:condition="batch/has_previous"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(batch.previouspage);\n+           "\n+        >\n           <span aria-hidden="true">&lt;</span>\n-          <span class="label" i18n:translate="batch_previous_x_items">\n-            Previous <span i18n:name="number" tal:content="batch/pagesize" tal:omit-tag="">n</span> items\n+          <span class="label"\n+                i18n:translate="batch_previous_x_items"\n+          >\n+            Previous\n+            <span tal:content="batch/pagesize"\n+                  tal:omit-tag=""\n+                  i18n:name="number"\n+            >n</span>\n+             items\n           </span>\n         </a>\n       </li>\n@@ -24,64 +41,110 @@\n       <tal:comment replace="nothing">\n         <!-- First page -->\n       </tal:comment>\n-      <li class="first page-item" tal:condition="batch/show_link_to_first">\n-        <a tal:attributes="href python:view.make_link(1)" class="page-link">1</a>\n+      <li class="first page-item"\n+          tal:condition="batch/show_link_to_first"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(1);\n+           "\n+        >1</a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Ellipsis after first item -->\n       </tal:comment>\n-      <li class="page-item disabled" tal:condition="batch/second_page_not_in_navlist">\n+      <li class="page-item disabled"\n+          tal:condition="batch/second_page_not_in_navlist"\n+      >\n         <span>...</span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Pagelist with links to previous pages for quick navigation -->\n       </tal:comment>\n-      <li tal:repeat="pagenumber batch/previous_pages" class="page-item">\n-        <a tal:content="pagenumber"\n-            tal:attributes="href python:view.make_link(pagenumber)" class="page-link"/>\n+      <li class="page-item"\n+          tal:repeat="pagenumber batch/previous_pages"\n+      >\n+        <a class="page-link"\n+           tal:content="pagenumber"\n+           tal:attributes="\n+             href python:view.make_link(pagenumber);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Active page -->\n       </tal:comment>\n-      <li class="page-item active" aria-current="page" tal:condition="batch/navlist">\n-        <span class="page-link" tal:content="batch/pagenumber" />\n-        <span class="sr-only" i18n:translate="(current)"></span>\n+      <li class="page-item active"\n+          aria-current="page"\n+          tal:condition="batch/navlist"\n+      >\n+        <span class="page-link"\n+              tal:content="batch/pagenumber"\n+        ></span>\n+        <span class="sr-only"\n+              i18n:translate="(current)"\n+        ></span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Pagelist with links to next pages for quick navigation -->\n       </tal:comment>\n-      <li tal:repeat="pagenumber batch/next_pages" class="page-item">\n-        <a tal:content="pagenumber"\n-            tal:attributes="href python:view.make_link(pagenumber)" class="page-link"/>\n+      <li class="page-item"\n+          tal:repeat="pagenumber batch/next_pages"\n+      >\n+        <a class="page-link"\n+           tal:content="pagenumber"\n+           tal:attributes="\n+             href python:view.make_link(pagenumber);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Ellipsis before last item -->\n       </tal:comment>\n-      <li class="page-item disabled" tal:condition="batch/before_last_page_not_in_navlist">\n+      <li class="page-item disabled"\n+          tal:condition="batch/before_last_page_not_in_navlist"\n+      >\n         <span class="page-link">...</span>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Last page -->\n       </tal:comment>\n-      <li class="page-item last" tal:condition="batch/show_link_to_last">\n-        <a tal:attributes="href python:view.make_link(batch.lastpage)"\n-           tal:content="batch/lastpage" class="page-link" />\n+      <li class="page-item last"\n+          tal:condition="batch/show_link_to_last"\n+      >\n+        <a class="page-link"\n+           tal:content="batch/lastpage"\n+           tal:attributes="\n+             href python:view.make_link(batch.lastpage);\n+           "\n+        ></a>\n       </li>\n \n       <tal:comment replace="nothing">\n         <!-- Next page -->\n       </tal:comment>\n-      <li class="page-item next" tal:condition="batch/has_next">\n-        <a tal:attributes="href python:view.make_link(batch.nextpage)" class="page-link">\n-          <span class="label" i18n:translate="batch_next_x_items">\n+      <li class="page-item next"\n+          tal:condition="batch/has_next"\n+      >\n+        <a class="page-link"\n+           tal:attributes="\n+             href python:view.make_link(batch.nextpage);\n+           "\n+        >\n+          <span class="label"\n+                i18n:translate="batch_next_x_items"\n+          >\n             Next\n-            <span i18n:name="number" tal:omit-tag="" tal:content="batch/next_item_count">n</span>\n+            <span tal:content="batch/next_item_count"\n+                  tal:omit-tag=""\n+                  i18n:name="number"\n+            >n</span>\n             items\n           </span>\n           <span aria-hidden="true">&gt;</span>\ndiff --git a/plone/batching/batchnavigation_bootstrap.pt b/plone/batching/batchnavigation_bootstrap.pt\nindex 4ea9ce0..960c7f1 100644\n--- a/plone/batching/batchnavigation_bootstrap.pt\n+++ b/plone/batching/batchnavigation_bootstrap.pt\n@@ -3,80 +3,140 @@\n      -->\n \n <div class="pagination"\n-  i18n:domain="plone"\n-  metal:define-macro="navigation"\n-  tal:define="batch view/batch|nothing;"\n-  tal:condition="batch">\n+     metal:define-macro="navigation"\n+     tal:define="\n+       batch view/batch|nothing;\n+     "\n+     tal:condition="batch"\n+     i18n:domain="plone"\n+>\n \n   <ul class="pager"\n-    tal:condition="batch/multiple_pages">\n+      tal:condition="batch/multiple_pages"\n+  >\n \n     <!-- First -->\n-    <li class="previous" tal:condition="batch/show_link_to_first">\n-      <a href="" tal:attributes="href python:view.make_link(1)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&laquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_first_item">First item</span>\n+    <li class="previous"\n+        tal:condition="batch/show_link_to_first"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(1);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&laquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_first_item"\n+        >First item</span>\n       </a>\n     </li>\n \n     <!-- Previous -->\n-    <li class="previous" tal:condition="batch/has_previous">\n-      <a href="" tal:attributes="href python:view.make_link(batch.previouspage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&lsaquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_previous_x_items">\n+    <li class="previous"\n+        tal:condition="batch/has_previous"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.previouspage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&lsaquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_previous_x_items"\n+        >\n           Previous\n-          <span i18n:name="number" tal:omit-tag=""\n-            tal:content="batch/pagesize">n</span>\n+          <span tal:content="batch/pagesize"\n+                tal:omit-tag=""\n+                i18n:name="number"\n+          >n</span>\n           items\n         </span>\n       </a>\n     </li>\n     <li tal:condition="batch/has_previous">\n       &hellip;&nbsp;\n-    </li >\n+    </li>\n \n     <!-- Pagelist with links to previous pages for quick navigation -->\n     <li tal:repeat="pagenumber batch/previous_pages">\n-      <a href="" tal:content="pagenumber"\n-        tal:attributes="href python:view.make_link(pagenumber)"/>\n+      <a href=""\n+         tal:content="pagenumber"\n+         tal:attributes="\n+           href python:view.make_link(pagenumber);\n+         "\n+      ></a>\n     </li>\n \n     <!-- Current page -->\n-    <li class="active" tal:condition="batch/navlist">\n-      <a href="#" tal:content="batch/pagenumber">Current page number</a>\n+    <li class="active"\n+        tal:condition="batch/navlist"\n+    >\n+      <a href="#"\n+         tal:content="batch/pagenumber"\n+      >Current page number</a>\n     </li>\n \n     <!-- Pagelist with links to next pages for quick navigation -->\n     <li tal:repeat="pagenumber batch/next_pages">\n-      <a href="" tal:content="pagenumber"\n-        tal:attributes="href python:view.make_link(pagenumber)"/>\n+      <a href=""\n+         tal:content="pagenumber"\n+         tal:attributes="\n+           href python:view.make_link(pagenumber);\n+         "\n+      ></a>\n     </li>\n \n     <!-- Next -->\n     <li tal:condition="batch/has_next">\n       &nbsp;&hellip;\n     </li>\n-    <li class="next" tal:condition="batch/has_next">\n-      <a href="" tal:attributes="href python:view.make_link(batch.nextpage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&rsaquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_next_x_items">\n+    <li class="next"\n+        tal:condition="batch/has_next"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.nextpage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&rsaquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_next_x_items"\n+        >\n           Next\n-          <span i18n:name="number" tal:omit-tag=""\n-            tal:content="batch/next_item_count">n</span>\n+          <span tal:content="batch/next_item_count"\n+                tal:omit-tag=""\n+                i18n:name="number"\n+          >n</span>\n           items\n         </span>\n       </a>\n     </li>\n \n     <!-- Last -->\n-    <li class="next" tal:condition="batch/show_link_to_last">\n-      <a href="" tal:attributes="href python:view.make_link(batch.lastpage)">\n-        <span tal:condition="view/minimal_navigation" tal:omit-tag="">&raquo;</span>\n-        <span tal:condition="not:view/minimal_navigation" tal:omit-tag=""\n-          i18n:translate="batch_last_item">Last item</span>\n+    <li class="next"\n+        tal:condition="batch/show_link_to_last"\n+    >\n+      <a href=""\n+         tal:attributes="\n+           href python:view.make_link(batch.lastpage);\n+         "\n+      >\n+        <span tal:condition="view/minimal_navigation"\n+              tal:omit-tag=""\n+        >&raquo;</span>\n+        <span tal:condition="not:view/minimal_navigation"\n+              tal:omit-tag=""\n+              i18n:translate="batch_last_item"\n+        >Last item</span>\n       </a>\n     </li>\n \ndiff --git a/setup.cfg b/setup.cfg\nindex 2e03fa3..a73e9e1 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -19,6 +19,7 @@ ignore =\n ignore =\n     .editorconfig\n     .meta.toml\n+    .pre-commit-config.yaml\n     tox.ini\n     lint-requirements.txt\n     conf.py\ndiff --git a/tox.ini b/tox.ini\nindex 80264a3..9e1e43a 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -5,46 +5,24 @@ envlist =\n     format\n     lint\n \n-[testenv]\n-py_files = git ls-files "*.py"\n-text_files = git ls-files "*.rst" "*.md"\n-xml_files = git ls-files "*.xml"\n-zcml_files = git ls-files "*.zcml"\n-allowlist_externals =\n-    sh\n-\n [testenv:format]\n-description = automatically reformat python code\n+description = automatically reformat code\n skip_install = true\n deps =\n-    pyupgrade\n-    isort\n-    black\n-    zpretty\n-    -c lint-requirements.txt\n+    pre-commit\n commands =\n-    sh -c \'{[testenv]py_files} | xargs pyupgrade --py38-plus\'\n-    sh -c \'{[testenv]py_files} | xargs isort\'\n-    sh -c \'{[testenv]py_files} | xargs black\'\n-    sh -c \'{[testenv]xml_files} | xargs zpretty -x -i || true\'\n-    sh -c \'{[testenv]zcml_files} | xargs zpretty -z -i || true\'\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n \n [testenv:lint]\n description = run linters that will help improve the code style\n skip_install = true\n deps =\n-    flake8\n-    codespell\n-    tomli  # needed for codespell to read pyproject.toml\n-    check-manifest\n-    pyroma\n-    -c lint-requirements.txt\n+    pre-commit\n commands =\n-    sh -c \'{[testenv]py_files} | xargs flake8\'\n-    sh -c \'{[testenv]py_files} | xargs codespell\'\n-    sh -c \'{[testenv]text_files} | xargs codespell\'\n-    check-manifest\n-    pyroma -n 10 .\n+    pre-commit run -a\n \n [testenv:dependencies]\n description = check if the package defines all its dependencies\n'

