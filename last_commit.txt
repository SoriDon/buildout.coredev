Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-10-03T12:18:55+02:00
Author: Thomas Lotze (tlotze) <thomas@thomas-lotze.net>
Commit: https://github.com/plone/plone.app.layout/commit/778aa4800b96415cf81dbbbae7ad00a6a8acf437

re #1801: Reimplement enable_http_compression to replace skin script.

Actually, it might be possible to delete the enable_compression method
entirely, it doesn't seem to be used by Plone. I'm just not sure whether
3rd-party code might rely on it even though I think it's unlikely.

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/httpheaders.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2333f74..66479c6 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -13,6 +13,9 @@ New features:\n - Add test for Revert to Revision action in History Viewlet\n   [davilima6]\n \n+- Reimplement enable_http_compression to replace skin script. #1801\n+  [tlotze]\n+\n Bug fixes:\n \n - Show document byline for logged-in users. Fixes #160\ndiff --git a/plone/app/layout/viewlets/httpheaders.py b/plone/app/layout/viewlets/httpheaders.py\nindex 0f39afa..9e52ff1 100644\n--- a/plone/app/layout/viewlets/httpheaders.py\n+++ b/plone/app/layout/viewlets/httpheaders.py\n@@ -24,7 +24,7 @@ class HTTPCachingHeaders(HeaderViewlet):\n \n     def enable_compression(self):\n         """Call to activate gzip"""\n-        self.context.enableHTTPCompression(request=self.request, enable=1)\n+        self.request.RESPONSE.enableHTTPCompression(REQUEST=self.request)\n \n     def getHeaders(self):\n         lang = getattr(self.context, \'Language\', None)\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-10-03T14:06:50+02:00
Author: Thomas Lotze (tlotze) <thomas@thomas-lotze.net>
Commit: https://github.com/plone/plone.app.layout/commit/4420a7a90bf252739fb426f48b5b6cc34bf0f966

re #1801: remove enable_compression completely as it isn't used in Plone

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/httpheaders.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 66479c6..a1e9a72 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -13,7 +13,7 @@ New features:\n - Add test for Revert to Revision action in History Viewlet\n   [davilima6]\n \n-- Reimplement enable_http_compression to replace skin script. #1801\n+- Remove ``enable_compression`` method that isn\'t used in Plone. #1801\n   [tlotze]\n \n Bug fixes:\ndiff --git a/plone/app/layout/viewlets/httpheaders.py b/plone/app/layout/viewlets/httpheaders.py\nindex 9e52ff1..d6fe6dc 100644\n--- a/plone/app/layout/viewlets/httpheaders.py\n+++ b/plone/app/layout/viewlets/httpheaders.py\n@@ -22,10 +22,6 @@ class HTTPCachingHeaders(HeaderViewlet):\n     """Replace the old global_cache_settings/macros/cacheheaders\n     """\n \n-    def enable_compression(self):\n-        """Call to activate gzip"""\n-        self.request.RESPONSE.enableHTTPCompression(REQUEST=self.request)\n-\n     def getHeaders(self):\n         lang = getattr(self.context, \'Language\', None)\n         if callable(lang):\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-10-03T15:50:14+02:00
Author: Thomas Lotze (tlotze) <thomas@thomas-lotze.net>
Commit: https://github.com/plone/plone.app.layout/commit/ab97cb1f5ee32fa77800960d76a99ab8021a1a67

Merge pull request #163 from plone/1801-remove-enableHTTPCompression

re #1801: Remove enable_compression while removing skin script.

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/httpheaders.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 2333f74..a1e9a72 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -13,6 +13,9 @@ New features:\n - Add test for Revert to Revision action in History Viewlet\n   [davilima6]\n \n+- Remove ``enable_compression`` method that isn\'t used in Plone. #1801\n+  [tlotze]\n+\n Bug fixes:\n \n - Show document byline for logged-in users. Fixes #160\ndiff --git a/plone/app/layout/viewlets/httpheaders.py b/plone/app/layout/viewlets/httpheaders.py\nindex 0f39afa..d6fe6dc 100644\n--- a/plone/app/layout/viewlets/httpheaders.py\n+++ b/plone/app/layout/viewlets/httpheaders.py\n@@ -22,10 +22,6 @@ class HTTPCachingHeaders(HeaderViewlet):\n     """Replace the old global_cache_settings/macros/cacheheaders\n     """\n \n-    def enable_compression(self):\n-        """Call to activate gzip"""\n-        self.context.enableHTTPCompression(request=self.request, enable=1)\n-\n     def getHeaders(self):\n         lang = getattr(self.context, \'Language\', None)\n         if callable(lang):\n'

