Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-01T01:51:41-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/d55475c8d40c726f4b3a480b71593846289fda69

Update submodules/volto tip

Files changed:
M submodules/volto

b'diff --git a/submodules/volto b/submodules/volto\nindex 9fd82030..ed2b4522 160000\n--- a/submodules/volto\n+++ b/submodules/volto\n@@ -1 +1 @@\n-Subproject commit 9fd82030f5b1296d739e2b95557cf0148421e6b4\n+Subproject commit ed2b452242787d83474937d05be0ba1676d5cf73\n'

Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-04T00:40:38-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/c2bc2212ef77a9e25a6fd1f4dc6422f113c218d6

Merge branch '6-dev' of github.com:plone/documentation into 6-dev

Files changed:
A requirements-netlify.txt
A submodules/plone.api
M .gitignore
M .gitmodules
M Makefile
M docs/_static/custom.css
M docs/_static/searchtools.js
M docs/_templates/search.html
M docs/backend/index.md
M docs/conf.py
M docs/contributing/index.md
M submodules/volto
D docs/backend/plone-api.md

b'diff --git a/.gitignore b/.gitignore\nindex b426eb02..a0e87fdf 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -11,3 +11,4 @@ pyvenv.cfg\n # symlinked from submodule\n docs/volto\n docs/plone.restapi\n+docs/plone.api\ndiff --git a/.gitmodules b/.gitmodules\nindex 2bfb26c3..2ff4cfd8 100644\n--- a/.gitmodules\n+++ b/.gitmodules\n@@ -6,3 +6,7 @@\n \tpath = submodules/plone.restapi\n \turl = https://github.com/plone/plone.restapi.git\n \tbranch = master\n+[submodule "submodules/plone.api"]\n+\tpath = submodules/plone.api\n+\turl = https://github.com/plone/plone.api.git\n+\tbranch = integration-in-plone-docs-6\ndiff --git a/Makefile b/Makefile\nindex 757e9eca..51cd87b0 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -33,23 +33,33 @@ distclean:  ## Clean docs build directory and Python virtual environment\n \tcd $(DOCS_DIR) && rm -rf $(BUILDDIR)/\n \trm -rf ./bin/ ./lib/ ./lib64 ./include ./pyvenv.cfg\n \n+\n bin/python:\n \tpython3 -m venv . || virtualenv --clear --python=python3 .\n \tbin/python -m pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n \n-docs/volto:\n+docs/plone.api:\n \tgit submodule init; \\\n \tgit submodule update; \\\n-\tln -s ../submodules/volto/docs/source ./docs/volto\n+\tbin/pip install -e submodules/plone.api[test]; \\\n+\tln -s ../submodules/plone.api/docs ./docs/plone.api\n+\t@echo\n+\t@echo "Documentation of plone.api initialized."\n+\n+docs/plone.restapi:\n+\tgit submodule init; \\\n+\tgit submodule update; \\\n+\tln -s ../submodules/plone.restapi ./docs/plone.restapi\n \n-docs/restapi:\n+docs/volto:\n \tgit submodule init; \\\n \tgit submodule update; \\\n-\tln -s "../submodules/plone.restapi" "./docs/plone.restapi"\n+\tln -s ../submodules/volto/docs/source ./docs/volto\n \n .PHONY: deps\n-deps: bin/python docs/volto docs/restapi  ## Create Python virtual environment, install requirements, initialize or update the volto and plone.restapi submodules, and finally create symlinks to the documentation source.\n+deps: bin/python docs/volto docs/plone.restapi docs/plone.api ## Create Python virtual environment, install requirements, initialize or update the volto, plone.restapi, and plone.api submodules, and finally create symlinks to the source files.\n+\n \n .PHONY: html\n html: deps  ## Build html\n@@ -212,10 +222,13 @@ livehtml: deps  ## Rebuild Sphinx documentation on changes, with live-reload in\n .PHONY: netlify\n netlify:\n \tpip install -r requirements.txt\n+\tpip install -r requirements-netlify.txt\n \tgit submodule init; \\\n \tgit submodule update; \\\n+\tpip install -e submodules/plone.api[test]; \\\n \tln -s ../submodules/volto/docs/source ./docs/volto\n-\tln -s "../submodules/plone.restapi" "./docs/plone.restapi"\n+\tln -s ../submodules/plone.restapi ./docs/plone.restapi\n+\tln -s ../submodules/plone.api/docs ./docs/plone.api\n \tcd $(DOCS_DIR) && sphinx-build -b html $(ALLSPHINXOPTS) $(BUILDDIR)/html\n \tmake storybook\n \ndiff --git a/docs/_static/custom.css b/docs/_static/custom.css\nindex 74327f69..d3c69b39 100644\n--- a/docs/_static/custom.css\n+++ b/docs/_static/custom.css\n@@ -3,6 +3,8 @@\n   --pst-icon-clipboard-list: \'\\f46d\';\n   --pst-icon-admonition-todo: var(--pst-icon-clipboard-list);\n   --pst-color-admonition-todo:  161 , 46, 233;\n+  --target-color: #b9ee9e;\n+  --codeblock-color: #aad993;\n }\n \n .visuallyhidden {\n@@ -54,7 +56,7 @@ p.ploneorglink img {\n dt:target,\n span.highlighted,\n ul.search li span.highlighted {\n-  background-color: #7ddf4493;\n+  background-color: var(--target-color);\n }\n \n .bd-sidebar .nav ul {\n@@ -125,6 +127,9 @@ div.admonition.admonition-todo > .admonition-title::before {\n   color: rgba(var(--pst-color-admonition-todo),1);\n   content: var(--pst-icon-admonition-todo);\n }\n+.admonition-github-only.admonition {\n+  display: none;\n+}\n \n \n .topic {\n@@ -299,3 +304,31 @@ span.guilabel, span.menuselection {\n   font-style: italic;\n   white-space: nowrap;\n }\n+\n+\n+/*\n+ * extensions\n+ */\n+\n+/* definitions */\n+dl.py.function {\n+  margin-bottom: 5rem;\n+}\n+dl.py.function > dt {\n+  background-color: var(--codeblock-color);\n+  padding: 4px 5px;\n+}\n+dl.py.function > dt:target {\n+  background-color: var(--target-color);  \n+}\n+dl.field-list > dt {\n+  padding-left: 0;\n+}\n+\n+/* code blocks */\n+div.viewcode-block:target {\n+  padding: 10px 10px;\n+  background-color: var(--codeblock-color);\n+  border-top: 1px solid var(--codeblock-color);\n+  border-bottom: 1px solid var(--codeblock-color);\n+}\n\\ No newline at end of file\ndiff --git a/docs/_static/searchtools.js b/docs/_static/searchtools.js\nindex 835e47a2..d760109e 100644\n--- a/docs/_static/searchtools.js\n+++ b/docs/_static/searchtools.js\n@@ -254,6 +254,12 @@ var Search = {\n \n     function _getBreadcrumbs(item, linkUrl) {\n       let parentTitles = item[6];\n+      let ploneApiTitles = [\n+        "A Plone API",\n+        "List of all API methods with descriptions"\n+      ];\n+      // ugly hack for plone.api documentation integrated via git submodule\n+      parentTitles = Array.isArray(parentTitles) ? parentTitles : ploneApiTitles;      \n       let path = item[0].split(\'/\')\n         .slice(0, -1);\n       path = path.map((el, index) => {\ndiff --git a/docs/_templates/search.html b/docs/_templates/search.html\nindex bc19ae04..ee7f8de2 100644\n--- a/docs/_templates/search.html\n+++ b/docs/_templates/search.html\n@@ -78,6 +78,7 @@ <h1 id="search-documentation">{{ _(\'Search\') }}</h1>\n           {% for id, title in\n             [\n               ["backend","Backend"],\n+              ["plone.api","plone.api"],\n               ["classic-ui","Classic UI"],\n               ["volto","Frontend"],\n               ["contributing","Contributing"],\ndiff --git a/docs/backend/index.md b/docs/backend/index.md\nindex 2f5d041d..46acf531 100644\n--- a/docs/backend/index.md\n+++ b/docs/backend/index.md\n@@ -26,7 +26,7 @@ security\n workflows\n search\n zodb\n-plone-api\n+../plone.api/index.rst\n plone-restapi\n sending-email\n upgrading/index\ndiff --git a/docs/backend/plone-api.md b/docs/backend/plone-api.md\ndeleted file mode 100644\nindex ab26587b..00000000\n--- a/docs/backend/plone-api.md\n+++ /dev/null\n@@ -1,12 +0,0 @@\n----\n-html_meta:\n-  "description": ""\n-  "property=og:description": ""\n-  "property=og:title": ""\n-  "keywords": ""\n----\n-\n-(backend-plone.api-label)=\n-\n-# plone.api\n-\ndiff --git a/docs/conf.py b/docs/conf.py\nindex ee17ef7e..a154ee0d 100644\n--- a/docs/conf.py\n+++ b/docs/conf.py\n@@ -52,6 +52,9 @@\n     "sphinxcontrib.httpexample",\n     "sphinxcontrib.spelling",\n     "sphinxext.opengraph",\n+    # plone.api\n+    \'sphinx.ext.viewcode\',\n+    \'sphinx.ext.autosummary\',\n ]\n \n \ndiff --git a/docs/contributing/index.md b/docs/contributing/index.md\nindex 0dd836cb..6c27a401 100644\n--- a/docs/contributing/index.md\n+++ b/docs/contributing/index.md\n@@ -63,14 +63,15 @@ See {doc}`setup-build` for instructions for how to set up and build the document\n Contributions are managed through git repositories on GitHub.\n \n - [documentation](https://github.com/plone/documentation)\n+- [plone.api](https://github.com/plone/plone.api)\n - [plone.restapi](https://github.com/plone/plone.restapi)\n - [volto](https://github.com/plone/volto)\n \n First discuss whether you should perform any work.\n Any method below is acceptable, but are listed in order of most likely to get a response.\n \n-- Search for open issues in [`documentation`](https://github.com/plone/documentation/issues), [`plone.restapi`](https://github.com/plone/plone.restapi/issues), or [`volto`](https://github.com/plone/volto/issues) and comment on them.\n-- Create a new issue in [`documentation`](https://github.com/plone/documentation/issues), [`plone.restapi`](https://github.com/plone/plone.restapi/issues), or [`volto`](https://github.com/plone/volto/issues).\n+- Search for open issues in [`documentation`](https://github.com/plone/documentation/issues), [`plone.api`](https://github.com/plone/plone.api/issues), [`plone.restapi`](https://github.com/plone/plone.restapi/issues), or [`volto`](https://github.com/plone/volto/issues) and comment on them.\n+- Create a new issue in [`documentation`](https://github.com/plone/documentation/issues), [`plone.api`](https://github.com/plone/plone.api/issues), [`plone.restapi`](https://github.com/plone/plone.restapi/issues), or [`volto`](https://github.com/plone/volto/issues).\n - Discuss during conferences, trainings, and other Plone events.\n - Ask on the [Plone Community Forum, Documentation topic](https://community.plone.org/c/documentation/13).\n - Ask in the [Plone chat on Discord](https://discord.com/invite/zFY3EBbjaj).\n@@ -111,14 +112,14 @@ Quick edits for minor issues, such as typographical errors, misspellings, and En\n For large edits, first follow the instructions in {doc}`setup-build`.\n \n Once you have your environment set up, then you can follow the standard practice for making a pull request.\n-This practice differs depending on whether you are making contributions to only the core `documentation` files, or `plone.restapi` and `volto` files as well.\n+This practice differs depending on whether you are making contributions to only the core `documentation` files, or `plone.api`, `plone.restapi` and `volto` files as well.\n \n \n (contributing-documentation-only-label)=\n \n ### Working with only the `plone/documentation` repository\n \n-This section describes how to make contributions to files in the `plone/documentation` repository only, and excludes files in `submodules/plone.restapi/docs` and `submodules/volto/docs`.\n+This section describes how to make contributions to files in the `plone/documentation` repository only, and excludes files in `submodules/plone.api/docs`, `submodules/plone.restapi/docs` and `submodules/volto/docs`.\n \n 1.  From the project root directory, sync your local `6-dev` branch with its remote.\n     You might need to resolve conflicts.\n@@ -176,11 +177,11 @@ This section describes how to make contributions to files in the `plone/document\n ### Editing external package documentation\n \n If you want to edit documentation of imported external packages, the process is slightly different.\n-We use git submodules to manage multiple repositories.\n+We use `git submodules` to manage multiple repositories.\n We imported the external repositories the `plone/documentation` repository as described in {doc}`setup-build`.\n \n ```{important}\n-We currently use the branches `plone/documentation@6-dev`, `plone/plone.restapi@master`, and `plone/volto@master` as the main branches for developing Plone 6 Documentation.\n+We currently use the branches `plone/documentation@6-dev`, `plone/plone.api@integration-in-plone-docs-6`, `plone/plone.restapi@master`, and `plone/volto@master` as the main branches for developing Plone 6 Documentation.\n These branches may change as we get closer to a production release.\n ```\n \n@@ -195,7 +196,8 @@ These branches may change as we get closer to a production release.\n 1.  Change your working directory to the imported package\'s directory under `submodules/`.\n \n     ```shell\n-    # choose one\n+    # Choose one.\n+    cd submodules/plone.api\n     cd submodules/plone.restapi\n     cd submodules/volto\n     ```\n@@ -206,10 +208,13 @@ These branches may change as we get closer to a production release.\n     ```shell\n     git submodule update\n \n-    # For plone.restapi\n+    # for plone.api\n+    git checkout integration-in-plone-docs-6\n+\n+    # for plone.restapi\n     git checkout master\n \n-    # For volto\n+    # for volto\n     git checkout master\n \n     git pull\n@@ -246,11 +251,15 @@ These branches may change as we get closer to a production release.\n     ```shell\n     cd ../..\n \n-    # For plone.restapi\n+    # for plone.api\n+    git add submodules/plone.api\n+    git commit -m "Update submodules/plone.api tip"\n+\n+    # for plone.restapi\n     git add submodules/plone.restapi\n     git commit -m "Update submodules/plone.restapi tip"\n \n-    # For volto\n+    # for Volto\n     git add submodules/volto\n     git commit -m "Update submodules/volto tip"\n \ndiff --git a/requirements-netlify.txt b/requirements-netlify.txt\nnew file mode 100644\nindex 00000000..4b7c5ccc\n--- /dev/null\n+++ b/requirements-netlify.txt\n@@ -0,0 +1 @@\n+plone-autoform<=1.99\n\\ No newline at end of file\ndiff --git a/submodules/plone.api b/submodules/plone.api\nnew file mode 160000\nindex 00000000..be400503\n--- /dev/null\n+++ b/submodules/plone.api\n@@ -0,0 +1 @@\n+Subproject commit be4005032e68a7711b8bb12f84a8252dbf0fbd5c\ndiff --git a/submodules/volto b/submodules/volto\nindex ed2b4522..13e90f1f 160000\n--- a/submodules/volto\n+++ b/submodules/volto\n@@ -1 +1 @@\n-Subproject commit ed2b452242787d83474937d05be0ba1676d5cf73\n+Subproject commit 13e90f1f29e94b449c1e38ab811bf43392796148\n'

Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-04T01:58:36-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/38605965412f5d9fbc64fce1b04a1e1721cddb09

The requirements must be surrounded by double quote marks on some shells

Files changed:
M Makefile

b'diff --git a/Makefile b/Makefile\nindex 51cd87b0..5c5afec0 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -42,7 +42,7 @@ bin/python:\n docs/plone.api:\n \tgit submodule init; \\\n \tgit submodule update; \\\n-\tbin/pip install -e submodules/plone.api[test]; \\\n+\tbin/pip install -e submodules/plone.api/"[test]"; \\\n \tln -s ../submodules/plone.api/docs ./docs/plone.api\n \t@echo\n \t@echo "Documentation of plone.api initialized."\n'

Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-04T01:59:06-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/1a6540267adcea983d012f5a9f5706f9ac4f4016

Add helpful echo statements for plone.restapi and volto initialization

Files changed:
M Makefile

b'diff --git a/Makefile b/Makefile\nindex 5c5afec0..3bc78234 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -51,11 +51,15 @@ docs/plone.restapi:\n \tgit submodule init; \\\n \tgit submodule update; \\\n \tln -s ../submodules/plone.restapi ./docs/plone.restapi\n+\t@echo\n+\t@echo "Documentation of plone.restapi initialized."\n \n docs/volto:\n \tgit submodule init; \\\n \tgit submodule update; \\\n \tln -s ../submodules/volto/docs/source ./docs/volto\n+\t@echo\n+\t@echo "Documentation of volto initialized."\n \n .PHONY: deps\n deps: bin/python docs/volto docs/plone.restapi docs/plone.api ## Create Python virtual environment, install requirements, initialize or update the volto, plone.restapi, and plone.api submodules, and finally create symlinks to the source files.\n'

Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-04T02:01:21-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/684fad40283c431824711d709ba602a85eaea293

Add plone.restapi search filter

Files changed:
M docs/_templates/search.html

b'diff --git a/docs/_templates/search.html b/docs/_templates/search.html\nindex ee7f8de2..3bede8f8 100644\n--- a/docs/_templates/search.html\n+++ b/docs/_templates/search.html\n@@ -79,6 +79,7 @@ <h1 id="search-documentation">{{ _(\'Search\') }}</h1>\n             [\n               ["backend","Backend"],\n               ["plone.api","plone.api"],\n+              ["plone.restapi","plone.restapi"],\n               ["classic-ui","Classic UI"],\n               ["volto","Frontend"],\n               ["contributing","Contributing"],\n'

Repository: documentation


Branch: refs/heads/6-dev
Date: 2022-04-05T00:43:17-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/documentation/commit/e1e3f06c1e99e8156e8efca355031151fc1368c2

Merge pull request #1217 from plone/fix-make-docs-search

Fix make and docs search

Files changed:
M Makefile
M docs/_templates/search.html

b'diff --git a/Makefile b/Makefile\nindex 51cd87b0..3bc78234 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -42,7 +42,7 @@ bin/python:\n docs/plone.api:\n \tgit submodule init; \\\n \tgit submodule update; \\\n-\tbin/pip install -e submodules/plone.api[test]; \\\n+\tbin/pip install -e submodules/plone.api/"[test]"; \\\n \tln -s ../submodules/plone.api/docs ./docs/plone.api\n \t@echo\n \t@echo "Documentation of plone.api initialized."\n@@ -51,11 +51,15 @@ docs/plone.restapi:\n \tgit submodule init; \\\n \tgit submodule update; \\\n \tln -s ../submodules/plone.restapi ./docs/plone.restapi\n+\t@echo\n+\t@echo "Documentation of plone.restapi initialized."\n \n docs/volto:\n \tgit submodule init; \\\n \tgit submodule update; \\\n \tln -s ../submodules/volto/docs/source ./docs/volto\n+\t@echo\n+\t@echo "Documentation of volto initialized."\n \n .PHONY: deps\n deps: bin/python docs/volto docs/plone.restapi docs/plone.api ## Create Python virtual environment, install requirements, initialize or update the volto, plone.restapi, and plone.api submodules, and finally create symlinks to the source files.\ndiff --git a/docs/_templates/search.html b/docs/_templates/search.html\nindex ee7f8de2..3bede8f8 100644\n--- a/docs/_templates/search.html\n+++ b/docs/_templates/search.html\n@@ -79,6 +79,7 @@ <h1 id="search-documentation">{{ _(\'Search\') }}</h1>\n             [\n               ["backend","Backend"],\n               ["plone.api","plone.api"],\n+              ["plone.restapi","plone.restapi"],\n               ["classic-ui","Classic UI"],\n               ["volto","Frontend"],\n               ["contributing","Contributing"],\n'

