Repository: plone.app.users


Branch: refs/heads/master
Date: 2019-10-18T13:00:01+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.users/commit/bc0699f70edf8beadebb1b612354327359e2d548

fix default value for email msgid

Files changed:
A news/88.bugfix
M plone/app/users/browser/membersearch.py
M plone/app/users/schema.py

b"diff --git a/news/88.bugfix b/news/88.bugfix\nnew file mode 100644\nindex 0000000..ada64f9\n--- /dev/null\n+++ b/news/88.bugfix\n@@ -0,0 +1,2 @@\n+Fix default value for label_msgid\n+[erral]\ndiff --git a/plone/app/users/browser/membersearch.py b/plone/app/users/browser/membersearch.py\nindex f589168..35b606b 100644\n--- a/plone/app/users/browser/membersearch.py\n+++ b/plone/app/users/browser/membersearch.py\n@@ -26,7 +26,7 @@ class IMemberSearchSchema(model.Schema):\n         required=False,\n     )\n     email = schema.TextLine(\n-        title=_(u'label_email', default=u'E-mail'),\n+        title=_(u'label_email', default=u'Email'),\n         description=_(\n             u'help_search_email',\n             default=u'Find users whose email address contain'),\ndiff --git a/plone/app/users/schema.py b/plone/app/users/schema.py\nindex a28d75a..a842b8c 100644\n--- a/plone/app/users/schema.py\n+++ b/plone/app/users/schema.py\n@@ -64,7 +64,7 @@ def protected(self, field):\n \n EmailFieldFactory = NotEditableFieldFactory(\n     ProtectedEmail,\n-    _(u'label_email', default=u'E-mail'),\n+    _(u'label_email', default=u'Email'),\n )\n \n \n@@ -79,7 +79,7 @@ class IUserDataSchema(Interface):\n         required=False)\n \n     email = ProtectedEmail(\n-        title=_(u'label_email', default=u'E-mail'),\n+        title=_(u'label_email', default=u'Email'),\n         description=u'We will use this address if you need to recover your '\n                     u'password',\n         required=True,\n"

Repository: plone.app.users


Branch: refs/heads/master
Date: 2019-10-19T16:38:38+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/plone.app.users/commit/aa03cb1dcfb720ae4cf0ec507e41429761dcfd01

fix tests

Files changed:
M plone/app/users/tests/duplicate_email.rst
M plone/app/users/tests/email_login.rst
M plone/app/users/tests/flexible_user_registration.rst
M plone/app/users/tests/member_search.rst
M plone/app/users/tests/registration_forms.rst
M plone/app/users/tests/test_new_user.py
M plone/app/users/tests/test_schema_types.py
M plone/app/users/tests/userdata.rst
M plone/app/users/tests/userdata_prefs_user_details.rst

b'diff --git a/plone/app/users/tests/duplicate_email.rst b/plone/app/users/tests/duplicate_email.rst\nindex e4b5e2e..8278c36 100644\n--- a/plone/app/users/tests/duplicate_email.rst\n+++ b/plone/app/users/tests/duplicate_email.rst\n@@ -48,7 +48,7 @@ Now we should be able to access the user data panel:\n \n Setting the e-mail address to an existing one should give an error message:\n \n-    >>> browser.getControl(\'E-mail\').value = \'userone@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'userone@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'The email address you selected is already in use\' in browser.contents\n     True\ndiff --git a/plone/app/users/tests/email_login.rst b/plone/app/users/tests/email_login.rst\nindex 19f28e2..907fd7a 100644\n--- a/plone/app/users/tests/email_login.rst\n+++ b/plone/app/users/tests/email_login.rst\n@@ -60,7 +60,7 @@ The form should be using CSRF protection.\n Fill out the form, using an odd email address that should not give problems.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -117,7 +117,7 @@ Fill out the form.\n Use the same full name as before, to test that we get a different user id.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/flexible_user_registration.rst b/plone/app/users/tests/flexible_user_registration.rst\nindex 1027aaa..7594c80 100644\n--- a/plone/app/users/tests/flexible_user_registration.rst\n+++ b/plone/app/users/tests/flexible_user_registration.rst\n@@ -137,10 +137,10 @@ Log out. Assert that we now have the home_page in the join form.\n     >>> \'User Name\' in browser.contents\n     True\n     >>> browser.contents\n-    \'...E-mail...Password...Confirm password...\'\n+    \'...Email...Password...Confirm password...\'\n     >>> browser.getControl(\'User Name\').value = \'test1\'\n     >>> browser.getControl(\'Full Name\').value = \'Mister test1\'\n-    >>> browser.getControl(\'E-mail\').value = \'test1@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'test1@example.com\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword\'\n     >>> browser.getControl(\'Register\').click()\n@@ -175,7 +175,7 @@ Check register form with portrait field.\n     >>> portrait_file = resource_stream("plone.app.users.tests", \'onepixel.jpg\')\n     >>> browser.getControl(name=\'form.widgets.portrait\').add_file(portrait_file, "image/jpg", "onepixel.jpg")\n     >>> browser.getControl(\'User Name\').value = \'testuser\'\n-    >>> browser.getControl(\'E-mail\').value = \'test@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'test@example.com\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword\'\n     >>> browser.getControl(\'Register\').click()\n@@ -188,7 +188,7 @@ email, and reserved user name validations:\n     >>> \'Registration form\' in browser.contents\n     True\n     >>> browser.getControl(\'User Name\').value = \'plone\'\n-    >>> browser.getControl(\'E-mail\').value = \'invalid email\'\n+    >>> browser.getControl(\'Email\').value = \'invalid email\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword2\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/member_search.rst b/plone/app/users/tests/member_search.rst\nindex 13e3585..8c86630 100644\n--- a/plone/app/users/tests/member_search.rst\n+++ b/plone/app/users/tests/member_search.rst\n@@ -41,7 +41,7 @@ Fill out the form.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n     >>> browser.getControl(\'User Name\').value = \'bob-jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -67,7 +67,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(name=\'form.widgets.login\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n     >>> browser.getControl(\'Full Name\').value\n     \'\'\ndiff --git a/plone/app/users/tests/registration_forms.rst b/plone/app/users/tests/registration_forms.rst\nindex 79116af..0370ac6 100644\n--- a/plone/app/users/tests/registration_forms.rst\n+++ b/plone/app/users/tests/registration_forms.rst\n@@ -78,19 +78,19 @@ Testing the flexible user registration\n     >>> browser.contents\n     \'...There were errors...User Name...Required input is missing...\'\n     >>> browser.contents\n-    \'...There were errors...E-mail...Required input is missing...\'\n+    \'...There were errors...Email...Required input is missing...\'\n \n     We have to provide a valid email address\n     >>> browser.open(\'http://nohost/plone/@@register\')\n     >>> browser.getControl(\'User Name\').value = \'user1\'\n-    >>> browser.getControl(\'E-mail\').value = \'user1-AT-example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user1-AT-example.com\'\n     >>> browser.getControl(\'Register\').click()\n     >>> browser.contents\n     \'...There were errors...Invalid email address...\'\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user1\'\n-    >>> browser.getControl(\'E-mail\').value = \'user1@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user1@example.com\'\n     >>> browser.getControl(\'Register\').click()\n     >>> \'Failed to create your account\' not in browser.contents\n     True\n@@ -131,7 +131,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user2\'\n-    >>> browser.getControl(\'E-mail\').value = \'user2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'bigf\xc3\xafsh\'\n     >>> browser.getControl(\'Confirm password\').value = \'bigf\xc3\xafsh\'\n     >>> browser.getControl(\'Register\').click()\n@@ -154,7 +154,7 @@ Testing the flexible user registration\n     >>> browser.handleErrors = False\n     >>> browser.open(\'http://nohost/plone/@@register?came_from=http://nohost/plone/news\')\n     >>> browser.getControl(\'User Name\').value = \'user5\'\n-    >>> browser.getControl(\'E-mail\').value = \'user5@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user5@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -205,7 +205,7 @@ Testing the flexible user registration\n     We have to provide a valid email address\n     >>> browser.open(\'http://nohost/plone/@@new-user\')\n     >>> browser.getControl(\'User Name\').value = \'user2a\'\n-    >>> browser.getControl(\'E-mail\').value = \'user2a-AT-example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2a-AT-example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -215,7 +215,7 @@ Testing the flexible user registration\n     Fill out the form.\n     >>> browser.open(\'http://nohost/plone/@@new-user\')\n     >>> browser.getControl(\'User Name\').value = \'user3\'\n-    >>> browser.getControl(\'E-mail\').value = \'user3@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user3@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -256,7 +256,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user4\'\n-    >>> browser.getControl(\'E-mail\').value = \'user4@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user4@example.com\'\n     >>> browser.getControl(\'Reviewers\').selected = True\n \n     But, at first, let\'s try to check form validation a bit. Do not set \'mail me\' and \'password\' fields.\n@@ -335,7 +335,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user5pas\'\n-    >>> browser.getControl(\'E-mail\').value = \'user5@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user5@example.com\'\n     >>> browser.getControl(\'Password\').value = \'dead parrot\'\n     >>> browser.getControl(\'Confirm password\').value = \'dead parrot\'\n     >>> browser.getControl(\'Register\').click()\n@@ -386,7 +386,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user6pas\'\n-    >>> browser.getControl(\'E-mail\').value = \'user6@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user6@example.com\'\n     >>> browser.getControl(\'Password\').value = \'dead\'\n     >>> browser.getControl(\'Confirm password\').value = \'dead\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/test_new_user.py b/plone/app/users/tests/test_new_user.py\nindex 4bc3c5f..743befe 100644\n--- a/plone/app/users/tests/test_new_user.py\n+++ b/plone/app/users/tests/test_new_user.py\n@@ -18,7 +18,7 @@ def test_new_user_as_site_administrator(self):\n         self.browser.addHeader(\'Authorization\', \'Basic siteadmin:secret\')\n         self.browser.open(\'http://nohost/plone/new-user\')\n         self.browser.getControl(\'User Name\').value = \'newuser\'\n-        self.browser.getControl(\'E-mail\').value = \'newuser@example.com\'\n+        self.browser.getControl(\'Email\').value = \'newuser@example.com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Site Administrators\').selected = True\n@@ -54,7 +54,7 @@ def test_uuid_disabled_email_as_login_disabled(self):\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n         self.browser.getControl(\'User Name\').value = \'newie\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -73,7 +73,7 @@ def test_uuid_disabled_email_as_login_enabled_no_full_name(self):\n \n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n-        self.browser.getControl(\'E-mail\').value = \'newuser@example.com\'\n+        self.browser.getControl(\'Email\').value = \'newuser@example.com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -94,7 +94,7 @@ def test_uuid_disabled_email_as_login_enabled_no_full_name_uppercase(self):\n \n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -115,7 +115,7 @@ def test_uuid_disabled_email_as_login_enabled_has_full_name(self):\n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -138,7 +138,7 @@ def test_uuid_enabled_email_as_login_disabled(self):\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n         self.browser.getControl(\'User Name\').value = \'newie\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -161,7 +161,7 @@ def test_uuid_enabled_email_as_login_enabled(self):\n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/test_schema_types.py b/plone/app/users/tests/test_schema_types.py\nindex 0218816..869911c 100644\n--- a/plone/app/users/tests/test_schema_types.py\n+++ b/plone/app/users/tests/test_schema_types.py\n@@ -115,7 +115,7 @@ def test_schema_types(self):\n         self.browser.getControl(\'Log in\').click()\n         self.browser.open("http://nohost/plone/@@personal-information")\n         self.browser.getControl(\'Full Name\').value = \'Isaac Newton\'\n-        self.browser.getControl(\'E-mail\').value = \'isaac@cambridge.com\'\n+        self.browser.getControl(\'Email\').value = \'isaac@cambridge.com\'\n         self.browser.getControl(\'Home Page\').value = \'http://gravity.org\'\n         self.browser.getControl(\'Biography\').value = \'I like apples\'\n         self.browser.getControl(\'Location\').value = \'Cambridge\'\ndiff --git a/plone/app/users/tests/userdata.rst b/plone/app/users/tests/userdata.rst\nindex a0385f2..92b1bc3 100644\n--- a/plone/app/users/tests/userdata.rst\n+++ b/plone/app/users/tests/userdata.rst\n@@ -53,7 +53,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(\'Full Name\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n \n The form should be using CSRF protection:\n@@ -90,7 +90,7 @@ If we do set an e-mail address, we should be able to save the form.\n     >>> browser.getControl(\'Full Name\').value = full_name\n \n     >>> email_address = \'person@example.com\'\n-    >>> browser.getControl(\'E-mail\').value = email_address\n+    >>> browser.getControl(\'Email\').value = email_address\n \n     >>> browser.getControl(\'Save\').click()\n     >>> \'Required input is missing.\' in browser.contents\n@@ -173,7 +173,7 @@ Let\'s switch to using Email as Login Name\n \n Update our email and see if login name was synced:\n \n-    >>> browser.getControl(\'E-mail\').value = \'my.new.email@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'my.new.email@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'Changes saved.\' in browser.contents\n     True\n@@ -189,7 +189,7 @@ should fail with validation errors.\n     >>> transaction.commit()\n \n     >>> browser.open(view_url)\n-    >>> browser.getControl(\'E-mail\').value = \'user2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'The email address you selected is already in use or is not valid as login name. Please choose another\' in browser.contents\n     True\ndiff --git a/plone/app/users/tests/userdata_prefs_user_details.rst b/plone/app/users/tests/userdata_prefs_user_details.rst\nindex 8a7e563..2ffee65 100644\n--- a/plone/app/users/tests/userdata_prefs_user_details.rst\n+++ b/plone/app/users/tests/userdata_prefs_user_details.rst\n@@ -44,7 +44,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(\'Full Name\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n \n The form should be using CSRF protection:\n@@ -60,7 +60,7 @@ Modifying user data\n     >>> browser.getControl(\'Full Name\').value = full_name\n \n     >>> email_address = \'person@example.com\'\n-    >>> browser.getControl(\'E-mail\').value = email_address\n+    >>> browser.getControl(\'Email\').value = email_address\n \n     >>> browser.getControl(\'Save\').click()\n     >>> \'Required input is missing.\' in browser.contents\n'

Repository: plone.app.users


Branch: refs/heads/master
Date: 2019-10-20T09:53:45+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.users/commit/9faa9be1937c0bf79b987fb9fd939bc0d22bfc92

Merge pull request #90 from plone/erral-issue-133

fix default value for email msgid

Files changed:
A news/88.bugfix
M plone/app/users/browser/membersearch.py
M plone/app/users/schema.py
M plone/app/users/tests/duplicate_email.rst
M plone/app/users/tests/email_login.rst
M plone/app/users/tests/flexible_user_registration.rst
M plone/app/users/tests/member_search.rst
M plone/app/users/tests/registration_forms.rst
M plone/app/users/tests/test_new_user.py
M plone/app/users/tests/test_schema_types.py
M plone/app/users/tests/userdata.rst
M plone/app/users/tests/userdata_prefs_user_details.rst

b'diff --git a/news/88.bugfix b/news/88.bugfix\nnew file mode 100644\nindex 0000000..ada64f9\n--- /dev/null\n+++ b/news/88.bugfix\n@@ -0,0 +1,2 @@\n+Fix default value for label_msgid\n+[erral]\ndiff --git a/plone/app/users/browser/membersearch.py b/plone/app/users/browser/membersearch.py\nindex f589168..35b606b 100644\n--- a/plone/app/users/browser/membersearch.py\n+++ b/plone/app/users/browser/membersearch.py\n@@ -26,7 +26,7 @@ class IMemberSearchSchema(model.Schema):\n         required=False,\n     )\n     email = schema.TextLine(\n-        title=_(u\'label_email\', default=u\'E-mail\'),\n+        title=_(u\'label_email\', default=u\'Email\'),\n         description=_(\n             u\'help_search_email\',\n             default=u\'Find users whose email address contain\'),\ndiff --git a/plone/app/users/schema.py b/plone/app/users/schema.py\nindex a28d75a..a842b8c 100644\n--- a/plone/app/users/schema.py\n+++ b/plone/app/users/schema.py\n@@ -64,7 +64,7 @@ def protected(self, field):\n \n EmailFieldFactory = NotEditableFieldFactory(\n     ProtectedEmail,\n-    _(u\'label_email\', default=u\'E-mail\'),\n+    _(u\'label_email\', default=u\'Email\'),\n )\n \n \n@@ -79,7 +79,7 @@ class IUserDataSchema(Interface):\n         required=False)\n \n     email = ProtectedEmail(\n-        title=_(u\'label_email\', default=u\'E-mail\'),\n+        title=_(u\'label_email\', default=u\'Email\'),\n         description=u\'We will use this address if you need to recover your \'\n                     u\'password\',\n         required=True,\ndiff --git a/plone/app/users/tests/duplicate_email.rst b/plone/app/users/tests/duplicate_email.rst\nindex e4b5e2e..8278c36 100644\n--- a/plone/app/users/tests/duplicate_email.rst\n+++ b/plone/app/users/tests/duplicate_email.rst\n@@ -48,7 +48,7 @@ Now we should be able to access the user data panel:\n \n Setting the e-mail address to an existing one should give an error message:\n \n-    >>> browser.getControl(\'E-mail\').value = \'userone@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'userone@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'The email address you selected is already in use\' in browser.contents\n     True\ndiff --git a/plone/app/users/tests/email_login.rst b/plone/app/users/tests/email_login.rst\nindex 19f28e2..907fd7a 100644\n--- a/plone/app/users/tests/email_login.rst\n+++ b/plone/app/users/tests/email_login.rst\n@@ -60,7 +60,7 @@ The form should be using CSRF protection.\n Fill out the form, using an odd email address that should not give problems.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -117,7 +117,7 @@ Fill out the form.\n Use the same full name as before, to test that we get a different user id.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/flexible_user_registration.rst b/plone/app/users/tests/flexible_user_registration.rst\nindex 1027aaa..7594c80 100644\n--- a/plone/app/users/tests/flexible_user_registration.rst\n+++ b/plone/app/users/tests/flexible_user_registration.rst\n@@ -137,10 +137,10 @@ Log out. Assert that we now have the home_page in the join form.\n     >>> \'User Name\' in browser.contents\n     True\n     >>> browser.contents\n-    \'...E-mail...Password...Confirm password...\'\n+    \'...Email...Password...Confirm password...\'\n     >>> browser.getControl(\'User Name\').value = \'test1\'\n     >>> browser.getControl(\'Full Name\').value = \'Mister test1\'\n-    >>> browser.getControl(\'E-mail\').value = \'test1@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'test1@example.com\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword\'\n     >>> browser.getControl(\'Register\').click()\n@@ -175,7 +175,7 @@ Check register form with portrait field.\n     >>> portrait_file = resource_stream("plone.app.users.tests", \'onepixel.jpg\')\n     >>> browser.getControl(name=\'form.widgets.portrait\').add_file(portrait_file, "image/jpg", "onepixel.jpg")\n     >>> browser.getControl(\'User Name\').value = \'testuser\'\n-    >>> browser.getControl(\'E-mail\').value = \'test@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'test@example.com\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword\'\n     >>> browser.getControl(\'Register\').click()\n@@ -188,7 +188,7 @@ email, and reserved user name validations:\n     >>> \'Registration form\' in browser.contents\n     True\n     >>> browser.getControl(\'User Name\').value = \'plone\'\n-    >>> browser.getControl(\'E-mail\').value = \'invalid email\'\n+    >>> browser.getControl(\'Email\').value = \'invalid email\'\n     >>> browser.getControl(\'Password\').value = \'testpassword\'\n     >>> browser.getControl(\'Confirm password\').value = \'testpassword2\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/member_search.rst b/plone/app/users/tests/member_search.rst\nindex 13e3585..8c86630 100644\n--- a/plone/app/users/tests/member_search.rst\n+++ b/plone/app/users/tests/member_search.rst\n@@ -41,7 +41,7 @@ Fill out the form.\n \n     >>> browser.getControl(\'Full Name\').value = \'Bob Jones\'\n     >>> browser.getControl(\'User Name\').value = \'bob-jones\'\n-    >>> browser.getControl(\'E-mail\').value = \'bob-jones+test2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'bob-jones+test2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -67,7 +67,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(name=\'form.widgets.login\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n     >>> browser.getControl(\'Full Name\').value\n     \'\'\ndiff --git a/plone/app/users/tests/registration_forms.rst b/plone/app/users/tests/registration_forms.rst\nindex 79116af..0370ac6 100644\n--- a/plone/app/users/tests/registration_forms.rst\n+++ b/plone/app/users/tests/registration_forms.rst\n@@ -78,19 +78,19 @@ Testing the flexible user registration\n     >>> browser.contents\n     \'...There were errors...User Name...Required input is missing...\'\n     >>> browser.contents\n-    \'...There were errors...E-mail...Required input is missing...\'\n+    \'...There were errors...Email...Required input is missing...\'\n \n     We have to provide a valid email address\n     >>> browser.open(\'http://nohost/plone/@@register\')\n     >>> browser.getControl(\'User Name\').value = \'user1\'\n-    >>> browser.getControl(\'E-mail\').value = \'user1-AT-example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user1-AT-example.com\'\n     >>> browser.getControl(\'Register\').click()\n     >>> browser.contents\n     \'...There were errors...Invalid email address...\'\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user1\'\n-    >>> browser.getControl(\'E-mail\').value = \'user1@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user1@example.com\'\n     >>> browser.getControl(\'Register\').click()\n     >>> \'Failed to create your account\' not in browser.contents\n     True\n@@ -131,7 +131,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user2\'\n-    >>> browser.getControl(\'E-mail\').value = \'user2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2@example.com\'\n     >>> browser.getControl(\'Password\').value = \'bigf\xc3\xafsh\'\n     >>> browser.getControl(\'Confirm password\').value = \'bigf\xc3\xafsh\'\n     >>> browser.getControl(\'Register\').click()\n@@ -154,7 +154,7 @@ Testing the flexible user registration\n     >>> browser.handleErrors = False\n     >>> browser.open(\'http://nohost/plone/@@register?came_from=http://nohost/plone/news\')\n     >>> browser.getControl(\'User Name\').value = \'user5\'\n-    >>> browser.getControl(\'E-mail\').value = \'user5@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user5@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -205,7 +205,7 @@ Testing the flexible user registration\n     We have to provide a valid email address\n     >>> browser.open(\'http://nohost/plone/@@new-user\')\n     >>> browser.getControl(\'User Name\').value = \'user2a\'\n-    >>> browser.getControl(\'E-mail\').value = \'user2a-AT-example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2a-AT-example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -215,7 +215,7 @@ Testing the flexible user registration\n     Fill out the form.\n     >>> browser.open(\'http://nohost/plone/@@new-user\')\n     >>> browser.getControl(\'User Name\').value = \'user3\'\n-    >>> browser.getControl(\'E-mail\').value = \'user3@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user3@example.com\'\n     >>> browser.getControl(\'Password\').value = \'secret\'\n     >>> browser.getControl(\'Confirm password\').value = \'secret\'\n     >>> browser.getControl(\'Register\').click()\n@@ -256,7 +256,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user4\'\n-    >>> browser.getControl(\'E-mail\').value = \'user4@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user4@example.com\'\n     >>> browser.getControl(\'Reviewers\').selected = True\n \n     But, at first, let\'s try to check form validation a bit. Do not set \'mail me\' and \'password\' fields.\n@@ -335,7 +335,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user5pas\'\n-    >>> browser.getControl(\'E-mail\').value = \'user5@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user5@example.com\'\n     >>> browser.getControl(\'Password\').value = \'dead parrot\'\n     >>> browser.getControl(\'Confirm password\').value = \'dead parrot\'\n     >>> browser.getControl(\'Register\').click()\n@@ -386,7 +386,7 @@ Testing the flexible user registration\n \n     Fill out the form.\n     >>> browser.getControl(\'User Name\').value = \'user6pas\'\n-    >>> browser.getControl(\'E-mail\').value = \'user6@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user6@example.com\'\n     >>> browser.getControl(\'Password\').value = \'dead\'\n     >>> browser.getControl(\'Confirm password\').value = \'dead\'\n     >>> browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/test_new_user.py b/plone/app/users/tests/test_new_user.py\nindex 4bc3c5f..743befe 100644\n--- a/plone/app/users/tests/test_new_user.py\n+++ b/plone/app/users/tests/test_new_user.py\n@@ -18,7 +18,7 @@ def test_new_user_as_site_administrator(self):\n         self.browser.addHeader(\'Authorization\', \'Basic siteadmin:secret\')\n         self.browser.open(\'http://nohost/plone/new-user\')\n         self.browser.getControl(\'User Name\').value = \'newuser\'\n-        self.browser.getControl(\'E-mail\').value = \'newuser@example.com\'\n+        self.browser.getControl(\'Email\').value = \'newuser@example.com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Site Administrators\').selected = True\n@@ -54,7 +54,7 @@ def test_uuid_disabled_email_as_login_disabled(self):\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n         self.browser.getControl(\'User Name\').value = \'newie\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -73,7 +73,7 @@ def test_uuid_disabled_email_as_login_enabled_no_full_name(self):\n \n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n-        self.browser.getControl(\'E-mail\').value = \'newuser@example.com\'\n+        self.browser.getControl(\'Email\').value = \'newuser@example.com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -94,7 +94,7 @@ def test_uuid_disabled_email_as_login_enabled_no_full_name_uppercase(self):\n \n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -115,7 +115,7 @@ def test_uuid_disabled_email_as_login_enabled_has_full_name(self):\n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -138,7 +138,7 @@ def test_uuid_enabled_email_as_login_disabled(self):\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n         self.browser.getControl(\'User Name\').value = \'newie\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\n@@ -161,7 +161,7 @@ def test_uuid_enabled_email_as_login_enabled(self):\n         # create a user\n         self.browser.open(\'http://nohost/plone/@@new-user\')\n         self.browser.getControl(\'Full Name\').value = \'New User\'\n-        self.browser.getControl(\'E-mail\').value = \'NewUser@Example.Com\'\n+        self.browser.getControl(\'Email\').value = \'NewUser@Example.Com\'\n         self.browser.getControl(\'Password\').value = \'foobar\'\n         self.browser.getControl(\'Confirm password\').value = \'foobar\'\n         self.browser.getControl(\'Register\').click()\ndiff --git a/plone/app/users/tests/test_schema_types.py b/plone/app/users/tests/test_schema_types.py\nindex 0218816..869911c 100644\n--- a/plone/app/users/tests/test_schema_types.py\n+++ b/plone/app/users/tests/test_schema_types.py\n@@ -115,7 +115,7 @@ def test_schema_types(self):\n         self.browser.getControl(\'Log in\').click()\n         self.browser.open("http://nohost/plone/@@personal-information")\n         self.browser.getControl(\'Full Name\').value = \'Isaac Newton\'\n-        self.browser.getControl(\'E-mail\').value = \'isaac@cambridge.com\'\n+        self.browser.getControl(\'Email\').value = \'isaac@cambridge.com\'\n         self.browser.getControl(\'Home Page\').value = \'http://gravity.org\'\n         self.browser.getControl(\'Biography\').value = \'I like apples\'\n         self.browser.getControl(\'Location\').value = \'Cambridge\'\ndiff --git a/plone/app/users/tests/userdata.rst b/plone/app/users/tests/userdata.rst\nindex a0385f2..92b1bc3 100644\n--- a/plone/app/users/tests/userdata.rst\n+++ b/plone/app/users/tests/userdata.rst\n@@ -53,7 +53,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(\'Full Name\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n \n The form should be using CSRF protection:\n@@ -90,7 +90,7 @@ If we do set an e-mail address, we should be able to save the form.\n     >>> browser.getControl(\'Full Name\').value = full_name\n \n     >>> email_address = \'person@example.com\'\n-    >>> browser.getControl(\'E-mail\').value = email_address\n+    >>> browser.getControl(\'Email\').value = email_address\n \n     >>> browser.getControl(\'Save\').click()\n     >>> \'Required input is missing.\' in browser.contents\n@@ -173,7 +173,7 @@ Let\'s switch to using Email as Login Name\n \n Update our email and see if login name was synced:\n \n-    >>> browser.getControl(\'E-mail\').value = \'my.new.email@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'my.new.email@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'Changes saved.\' in browser.contents\n     True\n@@ -189,7 +189,7 @@ should fail with validation errors.\n     >>> transaction.commit()\n \n     >>> browser.open(view_url)\n-    >>> browser.getControl(\'E-mail\').value = \'user2@example.com\'\n+    >>> browser.getControl(\'Email\').value = \'user2@example.com\'\n     >>> browser.getControl(\'Save\').click()\n     >>> \'The email address you selected is already in use or is not valid as login name. Please choose another\' in browser.contents\n     True\ndiff --git a/plone/app/users/tests/userdata_prefs_user_details.rst b/plone/app/users/tests/userdata_prefs_user_details.rst\nindex 8a7e563..2ffee65 100644\n--- a/plone/app/users/tests/userdata_prefs_user_details.rst\n+++ b/plone/app/users/tests/userdata_prefs_user_details.rst\n@@ -44,7 +44,7 @@ We have these controls in the form:\n \n     >>> browser.getControl(\'Full Name\').value\n     \'\'\n-    >>> browser.getControl(\'E-mail\').value\n+    >>> browser.getControl(\'Email\').value\n     \'\'\n \n The form should be using CSRF protection:\n@@ -60,7 +60,7 @@ Modifying user data\n     >>> browser.getControl(\'Full Name\').value = full_name\n \n     >>> email_address = \'person@example.com\'\n-    >>> browser.getControl(\'E-mail\').value = email_address\n+    >>> browser.getControl(\'Email\').value = email_address\n \n     >>> browser.getControl(\'Save\').click()\n     >>> \'Required input is missing.\' in browser.contents\n'

