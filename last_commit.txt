Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-02-05T23:10:48+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.collection/commit/42fad5285b8a2f7d11fabbcf247796206fe63799

Remove existing FTI (FTI) from portal_types when installing.

This might be a dexterity FTI, which would give an error when
installing: ValueError: undefined property content_meta_type.

Files changed:
M CHANGES.rst
M plone/app/collection/profiles/default/types.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 5f14f07..77d0f36 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,11 @@ Changelog
 
 Fixes:
 
+- Remove existing type information object (FTI) from portal_types when
+  installing.  This might be a dexterity FTI, which would give an
+  error when installing: ValueError: undefined property
+  ``content_meta_type``.  [maurits]
+
 - Pull typesUseViewActionInListings value from portal_registry.
   [esteele]
 
diff --git a/plone/app/collection/profiles/default/types.xml b/plone/app/collection/profiles/default/types.xml
index 5b7e345..e4f2f9d 100644
--- a/plone/app/collection/profiles/default/types.xml
+++ b/plone/app/collection/profiles/default/types.xml
@@ -1,5 +1,9 @@
 <?xml version="1.0"?>
 <object name="portal_types">
+   <!-- We remove the existing FTI since itcould be Dexterity-based and would
+        not be compatible in that case.  You get this error when installing:
+        ValueError: undefined property 'content_meta_type' -->
+  <object name="Collection" remove="True"/>
   <object name="Collection"
           meta_type="Factory-based Type Information with dynamic views" />
 </object>


Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-02-09T23:11:36+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.collection/commit/a99f17444341ade3d0a2c7a8136e6a087993a019

Used https in pypi url.

[ci skip]

Files changed:
M setup.py

diff --git a/setup.py b/setup.py
index 761caae..d1946d9 100644
--- a/setup.py
+++ b/setup.py
@@ -19,7 +19,7 @@
       keywords='plone collection topic smartfolder saved search',
       author='Plone Foundation',
       author_email='plone-developers@lists.sourceforge.net',
-      url='http://pypi.python.org/pypi/plone.app.collection',
+      url='https://pypi.python.org/pypi/plone.app.collection',
       license='GPL version 2',
       packages=find_packages(exclude=['ez_setup']),
       namespace_packages=['plone', 'plone.app'],


