Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2022-05-24T11:46:34+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.portlet.collection/commit/bcf1266ba12f29a25fbc632fcf40ee32a8aeba0f

minor py3 leftovers

Files changed:
M plone/portlet/collection/collection.py
M plone/portlet/collection/testing.py
M plone/portlet/collection/tests/test_functional_doctest.py
M plone/portlet/collection/tests/test_portlet_collection.py
M setup.py

b'diff --git a/plone/portlet/collection/collection.py b/plone/portlet/collection/collection.py\nindex b41105d..60eac21 100644\n--- a/plone/portlet/collection/collection.py\n+++ b/plone/portlet/collection/collection.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n from ComputedAttribute import ComputedAttribute\n from plone.app.layout.navigation.root import getNavigationRoot\n from plone.app.portlets.browser import formhelper\ndiff --git a/plone/portlet/collection/testing.py b/plone/portlet/collection/testing.py\nindex f845c4c..c75d68b 100644\n--- a/plone/portlet/collection/testing.py\n+++ b/plone/portlet/collection/testing.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n from plone.app.contenttypes.testing import PLONE_FIXTURE\n from plone.app.testing import applyProfile\n from plone.app.testing import FunctionalTesting\ndiff --git a/plone/portlet/collection/tests/test_functional_doctest.py b/plone/portlet/collection/tests/test_functional_doctest.py\nindex 8eecfe6..985e7a9 100644\n--- a/plone/portlet/collection/tests/test_functional_doctest.py\n+++ b/plone/portlet/collection/tests/test_functional_doctest.py\n@@ -1,4 +1,3 @@\n-# -*- coding: utf-8 -*-\n """Functional Doctests for plone.portlet.collection.\n \n    These test are only triggered when Plone 4 (and plone.testing) is installed.\ndiff --git a/plone/portlet/collection/tests/test_portlet_collection.py b/plone/portlet/collection/tests/test_portlet_collection.py\nindex 732b142..cb90c76 100644\n--- a/plone/portlet/collection/tests/test_portlet_collection.py\n+++ b/plone/portlet/collection/tests/test_portlet_collection.py\n@@ -310,9 +310,7 @@ def test_exclude_context(self):\n         The exclude context field controls including self in the results.\n         """\n         for idx in range(4):\n-            self._createType(\n-                self.folder, "News Item", "foo-news-item-title-{0}".format(idx)\n-            )\n+            self._createType(self.folder, "News Item", f"foo-news-item-title-{idx}")\n         self.folder.collection.query = [\n             {\n                 "i": "portal_type",\n@@ -323,8 +321,7 @@ def test_exclude_context(self):\n         self.folder.collection.sort_on = "id"\n         context = self.folder["foo-news-item-title-1"]\n         included = [\n-            self.folder["foo-news-item-title-{0}".format(idx)].absolute_url()\n-            for idx in (0, 2)\n+            self.folder[f"foo-news-item-title-{idx}"].absolute_url() for idx in (0, 2)\n         ]\n         limited = self.folder["foo-news-item-title-3"].absolute_url()\n \ndiff --git a/setup.py b/setup.py\nindex 6075604..592b5c0 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -40,9 +40,6 @@\n         "plone.app.vocabularies",\n     ],\n     extras_require={\n-        "test": [\n-            "plone.app.testing",\n-            "plone.app.contenttypes"\n-        ],\n+        "test": ["plone.app.testing", "plone.app.contenttypes"],\n     },\n )\n'

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2022-05-24T11:48:17+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.portlet.collection/commit/74be3c0bb0ecc02f391ffb439f8a128afb5bb78a

fix test

Files changed:
M plone/portlet/collection/tests/functional.txt

b'diff --git a/plone/portlet/collection/tests/functional.txt b/plone/portlet/collection/tests/functional.txt\nindex 734684a..c600e59 100644\n--- a/plone/portlet/collection/tests/functional.txt\n+++ b/plone/portlet/collection/tests/functional.txt\n@@ -93,10 +93,7 @@ Go to the home page and see if the portlet looks OK.\n     <ul>\n     <li class="portletItem odd">\n     <a href="http://nohost/plone/test-document" class="tile contenttype-document state-private" title="">\n-    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="plone-icon  bi bi-file-earmark-text" viewbox="0 0 16 16" aria-labelledby="title">\n-    <path d="M5.5 7a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM5 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5z"/>\n-    <path d="M9.5 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V4.5L9.5 0zm0 1v2A1.5 1.5 0 0 0 11 4.5h2V14a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h5.5z"/>\n-    <title/></svg>\n+    <svg .../svg>\n     Test Document\n     </a>\n     </li>\n'

