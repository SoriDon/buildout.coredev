Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2016-01-30T21:34:20+01:00
Author: Rene Jochum (pcdummy) <rene@jochums.at>
Commit: https://github.com/plone/Products.PortalTransforms/commit/5d129cb51132b336fb7555f39099e849981eea8a

Add the fenced_code_blocks extension for Markdown Transformations.

Signed-off-by: Rene Jochum &lt;rene@jochums.at&gt;

Files changed:
M CHANGES.rst
M Products/PortalTransforms/transforms/markdown_to_html.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ab03714..ca732d5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -9,10 +9,15 @@ New:
 - Depend on ``Pillow>=3.1.0``.
   [jensens]
 
+- Add the fenced_code_blocks extension for Markdown Transformations
+  and depend on Markdown >=2.6.5.
+  https://pythonhosted.org/Markdown/extensions/fenced_code_blocks.html
+  [pcdummy]
+
 Fixes:
 
 - Fix: After using ``Pillow>=3.1.0`` fix TIFF test output for this new
-  version of Pillow writing a ``dword`` instead of a ``word`` as type in 
+  version of Pillow writing a ``dword`` instead of a ``word`` as type in
   the IFD header for the width.
   [jensens]
 
diff --git a/Products/PortalTransforms/transforms/markdown_to_html.py b/Products/PortalTransforms/transforms/markdown_to_html.py
index 9121f10..7a9075e 100644
--- a/Products/PortalTransforms/transforms/markdown_to_html.py
+++ b/Products/PortalTransforms/transforms/markdown_to_html.py
@@ -35,7 +35,9 @@ def convert(self, orig, data, **kwargs):
             orig = unicode(orig.decode('utf-8'))
             # PortalTransforms, however expects a string as result,
             # so we encode the unicode result back to UTF8:
-            html = markdown_transformer.markdown(orig).encode('utf-8')
+            html = markdown_transformer \
+                .markdown(orig, extensions=['fenced_code']) \
+                .encode('utf-8')
         else:
             html = orig
         data.setData(html)
diff --git a/setup.py b/setup.py
index c0264d9..4eb26f9 100644
--- a/setup.py
+++ b/setup.py
@@ -42,6 +42,6 @@
           'Acquisition',
           'ZODB3',
           'Zope2',
-          'Markdown>=1.7',
+          'Markdown>=2.6.5',
       ],
 )


Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2016-01-31T12:09:39+01:00
Author: Rene Jochum (pcdummy) <rene@jochums.at>
Commit: https://github.com/plone/Products.PortalTransforms/commit/747644d445215b2fb2f0dc4fcb747ac2d0fb6b23

Use the full path for fenced_code.

Signed-off-by: Rene Jochum &lt;rene@jochums.at&gt;

Files changed:
M Products/PortalTransforms/transforms/markdown_to_html.py

diff --git a/Products/PortalTransforms/transforms/markdown_to_html.py b/Products/PortalTransforms/transforms/markdown_to_html.py
index 7a9075e..6854794 100644
--- a/Products/PortalTransforms/transforms/markdown_to_html.py
+++ b/Products/PortalTransforms/transforms/markdown_to_html.py
@@ -36,7 +36,7 @@ def convert(self, orig, data, **kwargs):
             # PortalTransforms, however expects a string as result,
             # so we encode the unicode result back to UTF8:
             html = markdown_transformer \
-                .markdown(orig, extensions=['fenced_code']) \
+                .markdown(orig, extensions=['markdown.extensions.fenced_code']) \
                 .encode('utf-8')
         else:
             html = orig


Repository: Products.PortalTransforms


Branch: refs/heads/master
Date: 2016-01-31T23:24:42+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.PortalTransforms/commit/f2f984c78fd56b62594f7cf396da41e58e50c9e0

Merge pull request #12 from webmeisterei/fenced_code_blocks

Add the fenced_code_blocks extension for Markdown Transformations.

Files changed:
M CHANGES.rst
M Products/PortalTransforms/transforms/markdown_to_html.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index ab03714..ca732d5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -9,10 +9,15 @@ New:
 - Depend on ``Pillow>=3.1.0``.
   [jensens]
 
+- Add the fenced_code_blocks extension for Markdown Transformations
+  and depend on Markdown >=2.6.5.
+  https://pythonhosted.org/Markdown/extensions/fenced_code_blocks.html
+  [pcdummy]
+
 Fixes:
 
 - Fix: After using ``Pillow>=3.1.0`` fix TIFF test output for this new
-  version of Pillow writing a ``dword`` instead of a ``word`` as type in 
+  version of Pillow writing a ``dword`` instead of a ``word`` as type in
   the IFD header for the width.
   [jensens]
 
diff --git a/Products/PortalTransforms/transforms/markdown_to_html.py b/Products/PortalTransforms/transforms/markdown_to_html.py
index 9121f10..6854794 100644
--- a/Products/PortalTransforms/transforms/markdown_to_html.py
+++ b/Products/PortalTransforms/transforms/markdown_to_html.py
@@ -35,7 +35,9 @@ def convert(self, orig, data, **kwargs):
             orig = unicode(orig.decode('utf-8'))
             # PortalTransforms, however expects a string as result,
             # so we encode the unicode result back to UTF8:
-            html = markdown_transformer.markdown(orig).encode('utf-8')
+            html = markdown_transformer \
+                .markdown(orig, extensions=['markdown.extensions.fenced_code']) \
+                .encode('utf-8')
         else:
             html = orig
         data.setData(html)
diff --git a/setup.py b/setup.py
index c0264d9..4eb26f9 100644
--- a/setup.py
+++ b/setup.py
@@ -42,6 +42,6 @@
           'Acquisition',
           'ZODB3',
           'Zope2',
-          'Markdown>=1.7',
+          'Markdown>=2.6.5',
       ],
 )


