Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-10-13T14:17:48+02:00
Author: Malthe Borch (malthe) <mborch@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/2ed6aeb21edb2809cfc08506f32d251f35e25618

Use HTML5 meta charset

Using http-equiv is no longer the only way to specify the character set of an HTML document.

Files changed:
A news/2025.bugfix
M Products/CMFPlone/browser/templates/ajax_main_template.pt
M Products/CMFPlone/browser/templates/main_template.pt
M Products/CMFPlone/browser/templates/plone-frontpage.pt

b'diff --git a/Products/CMFPlone/browser/templates/ajax_main_template.pt b/Products/CMFPlone/browser/templates/ajax_main_template.pt\nindex 279d53c10e..3f8ef8bc10 100644\n--- a/Products/CMFPlone/browser/templates/ajax_main_template.pt\n+++ b/Products/CMFPlone/browser/templates/ajax_main_template.pt\n@@ -24,7 +24,7 @@\n     <metal:cache tal:replace="structure provider:plone.httpheaders" />\n \n <head>\n-    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n+    <meta charset="utf-8" />\n \n     <tal:ajaxhead condition="ajax_include_head">\n     <div tal:replace="structure provider:plone.htmlhead" />\ndiff --git a/Products/CMFPlone/browser/templates/main_template.pt b/Products/CMFPlone/browser/templates/main_template.pt\nindex 333ee0a205..dac3b37cd9 100644\n--- a/Products/CMFPlone/browser/templates/main_template.pt\n+++ b/Products/CMFPlone/browser/templates/main_template.pt\n@@ -24,7 +24,7 @@\n     <metal:cache tal:replace="structure provider:plone.httpheaders" />\n \n   <head>\n-    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n+    <meta charset="utf-8" />\n \n     <div tal:replace="structure provider:plone.htmlhead" />\n \ndiff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt\nindex d04d845f15..d4bc06ba80 100644\n--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt\n+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt\n@@ -4,7 +4,7 @@\n       i18n:domain="plonefrontpage">\n \n <head>\n-    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />\n+    <meta charset="utf-8" />\n </head>\n \n <body i18n:translate="front-text">\ndiff --git a/news/2025.bugfix b/news/2025.bugfix\nnew file mode 100644\nindex 0000000000..2a4cfaf3df\n--- /dev/null\n+++ b/news/2025.bugfix\n@@ -0,0 +1,2 @@\n+Use HTML5 meta charset.\n+[malthe]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-10-13T14:17:48+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/75a45a2ca50df8900a4203c3bb9220dec1eb220f

Define doctype where it isn't.

Files changed:
M Products/CMFPlone/browser/templates/plone-frontpage.pt
M Products/CMFPlone/www/addPropertySheet.zpt

b'diff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt\nindex d4bc06ba80..badf8795fe 100644\n--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt\n+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt\n@@ -1,3 +1,4 @@\n+<tal:doctype tal:replace="structure string:&lt;!DOCTYPE html&gt;" />\n <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"\n       xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n       lang="en"\ndiff --git a/Products/CMFPlone/www/addPropertySheet.zpt b/Products/CMFPlone/www/addPropertySheet.zpt\nindex 33287009f0..2d01f3bcda 100644\n--- a/Products/CMFPlone/www/addPropertySheet.zpt\n+++ b/Products/CMFPlone/www/addPropertySheet.zpt\n@@ -1,4 +1,4 @@\n-<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">\n+<tal:doctype tal:replace="structure string:&lt;!DOCTYPE html&gt;" />\n <html>\n <head>\n <meta http-equiv="content-type" content="text/html;charset=utf-8"\n'

