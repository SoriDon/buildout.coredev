Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-08-18T12:52:52+02:00
Author: Nicolas Demonte (daggelpop) <nicolas@affinitic.be>
Commit: https://github.com/plone/Products.CMFPlone/commit/9485e323157f4bf2f0a06ed988f5e3ae3a7bdafc

Fix TypeError when adding a portlet

Files changed:
M Products/CMFPlone/browser/navigation.py

b"diff --git a/Products/CMFPlone/browser/navigation.py b/Products/CMFPlone/browser/navigation.py\nindex 2c57508c21..6a86610057 100644\n--- a/Products/CMFPlone/browser/navigation.py\n+++ b/Products/CMFPlone/browser/navigation.py\n@@ -45,7 +45,7 @@ def get_view_url(context):\n     item_url = get_url(context)\n     name = get_id(context)\n \n-    if getattr(context, 'portal_type', {}) in view_action_types:\n+    if item_url and getattr(context, 'portal_type', {}) in view_action_types:\n         item_url += '/view'\n         name += '/view'\n \n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-08-19T10:57:53+02:00
Author: Nicolas Demonte (daggelpop) <nicolas@affinitic.be>
Commit: https://github.com/plone/Products.CMFPlone/commit/e260f2c12d9632284cb15ca31dd240a00ad12cf2

Add changelog

Files changed:
A news/3303.bugfix

b'diff --git a/news/3303.bugfix b/news/3303.bugfix\nnew file mode 100644\nindex 0000000000..7ee79ba704\n--- /dev/null\n+++ b/news/3303.bugfix\n@@ -0,0 +1 @@\n+Fix TypeError when adding a portlet. [daggelpop]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2021-08-20T12:06:34+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/20330e5fbe70c85087ea676ca66e4f03a64c483a

Merge pull request #3303 from plone/fix_file_portlet_addition

Fix TypeError when adding a portlet

Files changed:
A news/3303.bugfix
M Products/CMFPlone/browser/navigation.py

b"diff --git a/Products/CMFPlone/browser/navigation.py b/Products/CMFPlone/browser/navigation.py\nindex 2c57508c21..6a86610057 100644\n--- a/Products/CMFPlone/browser/navigation.py\n+++ b/Products/CMFPlone/browser/navigation.py\n@@ -45,7 +45,7 @@ def get_view_url(context):\n     item_url = get_url(context)\n     name = get_id(context)\n \n-    if getattr(context, 'portal_type', {}) in view_action_types:\n+    if item_url and getattr(context, 'portal_type', {}) in view_action_types:\n         item_url += '/view'\n         name += '/view'\n \ndiff --git a/news/3303.bugfix b/news/3303.bugfix\nnew file mode 100644\nindex 0000000000..7ee79ba704\n--- /dev/null\n+++ b/news/3303.bugfix\n@@ -0,0 +1 @@\n+Fix TypeError when adding a portlet. [daggelpop]\n"

