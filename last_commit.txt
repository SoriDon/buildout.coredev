Repository: plone.app.event


Branch: refs/heads/master
Date: 2015-12-21T00:59:29+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.event/commit/ed5b5d4395a9521ef09e6cf0cb7a46d2933cffec

Change the behaviors text getter to use output_relative_to with the current context. This correctly transforms relative links. See: https://github.com/plone/plone.app.textfield/pull/17

Files changed:
M CHANGES.rst
M plone/app/event/dx/behaviors.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 30d0829..dcede53 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,10 @@ New:
 
 Fixes:
 
-- *add item here*
+- Change the behaviors text getter to use ``output_relative_to`` with the
+  current context. This correctly transforms relative links. See:
+  https://github.com/plone/plone.app.textfield/pull/17
+  [thet]
 
 
 2.0.5 (2015-11-25)
diff --git a/plone/app/event/dx/behaviors.py b/plone/app/event/dx/behaviors.py
index adc8688..f30c365 100644
--- a/plone/app/event/dx/behaviors.py
+++ b/plone/app/event/dx/behaviors.py
@@ -503,7 +503,7 @@ def text(self):
         textvalue = getattr(self.context, 'text', None)
         if textvalue is None:
             return u''
-        return safe_unicode(textvalue.output)
+        return safe_unicode(textvalue.output_relative_to(self.context))
 
     @text.setter
     def text(self, value):


