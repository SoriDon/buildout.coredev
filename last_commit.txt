Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-01-19T09:15:26+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/c87c3c202fe3d2768916a8449c8a44f9c3abc019

Fix test that picks up the footer-portlets link instead of a document

Files changed:
M Products/CMFPlacefulWorkflow/tests/policy_form.txt

b"diff --git a/Products/CMFPlacefulWorkflow/tests/policy_form.txt b/Products/CMFPlacefulWorkflow/tests/policy_form.txt\nindex b327c7b..b423f57 100644\n--- a/Products/CMFPlacefulWorkflow/tests/policy_form.txt\n+++ b/Products/CMFPlacefulWorkflow/tests/policy_form.txt\n@@ -55,25 +55,25 @@ Open the policy form for the front-page and for the folder.\n \n The policy form also works for pages that aren't the default page.\n \n-    >>> page = folder[folder.invokeFactory(type_name='Document', id='foo')]\n+    >>> page = folder[folder.invokeFactory(type_name='Document', id='doc1')]\n     >>> commit()\n     >>> browser.open(page.absolute_url())\n     >>> browser.getLink('Policy').click()\n     >>> browser.url\n-    'http://nohost/plone/f1/foo/placeful_workflow_configuration'\n+    'http://nohost/plone/f1/doc1/placeful_workflow_configuration'\n     >>> print(browser.contents)\n     <...\n     <h1>...Workflow policies' local configuration management...</h1>\n     ...\n \n-Without a local policy document 'foo', contained inside '/f1' is in review state visible:\n+Without a local policy document 'doc1', contained inside '/f1' is in review state visible:\n \n     >>> browser.open(folder.absolute_url())\n     >>> browser.url\n     'http://nohost/plone/f1'\n \n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-private' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-private' in doc1_link.attrs['class']\n     True\n \n Now we will add a local policy on the user folder. Old Plone Publication for the folder, Intranet below it:\n@@ -115,8 +115,8 @@ We validate policy settings were saved:\n And mappings were not updated:\n \n     >>> browser.open(folder.absolute_url())\n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-private' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-private' in doc1_link.attrs['class']\n     True\n \n If we are sure, or willing to wait, it is possible to update role mappings:\n@@ -127,10 +127,10 @@ If we are sure, or willing to wait, it is possible to update role mappings:\n     >>> 'Changed policies' in browser.contents\n     True\n \n-Foo document review state must be 'Internal Draft' in the portlet:\n+doc1 document review state must be 'Internal Draft' in the portlet:\n \n     >>> browser.open(folder.absolute_url())\n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-internal' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-internal' in doc1_link.attrs['class']\n     True\n \n"

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-01-19T09:19:23+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/422db07335a20160efd0ff2d61ea445343f3866f

add changenote

Files changed:
A news/36.bugfix

b'diff --git a/news/36.bugfix b/news/36.bugfix\nnew file mode 100644\nindex 0000000..2576214\n--- /dev/null\n+++ b/news/36.bugfix\n@@ -0,0 +1 @@\n+Fix a test that picks up the footer-portlets link instead of a document.\n\\ No newline at end of file\n'

Repository: Products.CMFPlacefulWorkflow


Branch: refs/heads/master
Date: 2022-01-19T10:30:19+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlacefulWorkflow/commit/f42a52c429cbbd0162cda5a2cf171ed3d428b0f2

Merge pull request #36 from plone/fix_test_with_es6

Fix test that picks up the footer-portlets link instead of a document

Files changed:
A news/36.bugfix
M Products/CMFPlacefulWorkflow/tests/policy_form.txt

b"diff --git a/Products/CMFPlacefulWorkflow/tests/policy_form.txt b/Products/CMFPlacefulWorkflow/tests/policy_form.txt\nindex b327c7b..b423f57 100644\n--- a/Products/CMFPlacefulWorkflow/tests/policy_form.txt\n+++ b/Products/CMFPlacefulWorkflow/tests/policy_form.txt\n@@ -55,25 +55,25 @@ Open the policy form for the front-page and for the folder.\n \n The policy form also works for pages that aren't the default page.\n \n-    >>> page = folder[folder.invokeFactory(type_name='Document', id='foo')]\n+    >>> page = folder[folder.invokeFactory(type_name='Document', id='doc1')]\n     >>> commit()\n     >>> browser.open(page.absolute_url())\n     >>> browser.getLink('Policy').click()\n     >>> browser.url\n-    'http://nohost/plone/f1/foo/placeful_workflow_configuration'\n+    'http://nohost/plone/f1/doc1/placeful_workflow_configuration'\n     >>> print(browser.contents)\n     <...\n     <h1>...Workflow policies' local configuration management...</h1>\n     ...\n \n-Without a local policy document 'foo', contained inside '/f1' is in review state visible:\n+Without a local policy document 'doc1', contained inside '/f1' is in review state visible:\n \n     >>> browser.open(folder.absolute_url())\n     >>> browser.url\n     'http://nohost/plone/f1'\n \n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-private' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-private' in doc1_link.attrs['class']\n     True\n \n Now we will add a local policy on the user folder. Old Plone Publication for the folder, Intranet below it:\n@@ -115,8 +115,8 @@ We validate policy settings were saved:\n And mappings were not updated:\n \n     >>> browser.open(folder.absolute_url())\n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-private' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-private' in doc1_link.attrs['class']\n     True\n \n If we are sure, or willing to wait, it is possible to update role mappings:\n@@ -127,10 +127,10 @@ If we are sure, or willing to wait, it is possible to update role mappings:\n     >>> 'Changed policies' in browser.contents\n     True\n \n-Foo document review state must be 'Internal Draft' in the portlet:\n+doc1 document review state must be 'Internal Draft' in the portlet:\n \n     >>> browser.open(folder.absolute_url())\n-    >>> foo_link = browser.getLink('foo')\n-    >>> 'state-internal' in foo_link.attrs['class']\n+    >>> doc1_link = browser.getLink('doc1')\n+    >>> 'state-internal' in doc1_link.attrs['class']\n     True\n \ndiff --git a/news/36.bugfix b/news/36.bugfix\nnew file mode 100644\nindex 0000000..2576214\n--- /dev/null\n+++ b/news/36.bugfix\n@@ -0,0 +1 @@\n+Fix a test that picks up the footer-portlets link instead of a document.\n\\ No newline at end of file\n"

