Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-02-19T14:18:01-08:00
Author: Alec Mitchell (alecpm) <alecpm@gmail.com>
Commit: https://github.com/plone/Products.Archetypes/commit/6ef4a03d6193660546380c7cfb6d5f7bea5f0b8d

Fix tinymce options merging to be compatible with change in p.a.widgets and p.a.z3cform.

Files changed:
M CHANGES.rst
M Products/Archetypes/Widget.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 38c87c1..50414fe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,10 @@ New:
 
 Fixes:
 
-- *add item here*
+- Fix tinymce pattern-options merging to be compatible with change in
+  p.a.widgets and p.a.z3cform.
+  [alecm]
+
 
 
 1.10.12 (2016-02-15)
diff --git a/Products/Archetypes/Widget.py b/Products/Archetypes/Widget.py
index 7c9b196..1dba93f 100644
--- a/Products/Archetypes/Widget.py
+++ b/Products/Archetypes/Widget.py
@@ -1396,10 +1396,10 @@ def _base_args(self, context, field, request):
                          ).decode('utf-8')
 
         args.setdefault('pattern_options', {})
-        merged = base_widgets.dict_merge(
+        options = base_widgets.dict_merge(
             utils.get_tinymce_options(context, field, request),
             args['pattern_options'])
-        args['pattern_options'] = merged['pattern_options']
+        args['pattern_options'] = options
         return args
 
     def edit(self, context, field, request):


Repository: Products.Archetypes


Branch: refs/heads/master
Date: 2016-02-22T15:59:21+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.Archetypes/commit/1d90faf1ba3e20c61d3e47919a22fc1daa6b3fa6

Merge pull request #52 from plone/navroot-fixes

Fix tinymce options merging to be compatible with change in p.a.widgets and p.a.z3cform.

Files changed:
M CHANGES.rst
M Products/Archetypes/Widget.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 38c87c1..50414fe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,10 @@ New:
 
 Fixes:
 
-- *add item here*
+- Fix tinymce pattern-options merging to be compatible with change in
+  p.a.widgets and p.a.z3cform.
+  [alecm]
+
 
 
 1.10.12 (2016-02-15)
diff --git a/Products/Archetypes/Widget.py b/Products/Archetypes/Widget.py
index 7c9b196..1dba93f 100644
--- a/Products/Archetypes/Widget.py
+++ b/Products/Archetypes/Widget.py
@@ -1396,10 +1396,10 @@ def _base_args(self, context, field, request):
                          ).decode('utf-8')
 
         args.setdefault('pattern_options', {})
-        merged = base_widgets.dict_merge(
+        options = base_widgets.dict_merge(
             utils.get_tinymce_options(context, field, request),
             args['pattern_options'])
-        args['pattern_options'] = merged['pattern_options']
+        args['pattern_options'] = options
         return args
 
     def edit(self, context, field, request):


