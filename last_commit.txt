Repository: mockup


Branch: refs/heads/master
Date: 2017-04-21T13:07:50+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/13b0d2ffbd715574f0c4e5a4bad80a7252a58ab9

Fix issue where 'One level up' in relateditems was not translated

Files changed:
M mockup/patterns/relateditems/pattern.js

diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 9b6af2b..34b3da1 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -257,7 +257,7 @@ define([
           ) {
             results = [{
               'oneLevelUp': true,
-              'Title': _('One level up'),
+              'Title': _t('One level up'),
               'path': path.slice(0, path.length - 1).join('/') || '/',
               'portal_type': 'Folder',
               'is_folderish': true,


Repository: mockup


Branch: refs/heads/master
Date: 2017-04-21T13:07:58+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/ff2554274cc6332a405549641ec81ea135047737

Fix issue where 'Open folder' in relateditems was not translated

Files changed:
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/relateditems/templates/result.xml

diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 34b3da1..24ec109 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -176,7 +176,10 @@ define([
         template = self.options[tpl + 'Template'];
       }
       // let's give all the options possible to the template generation
-      var options = $.extend(true, {}, self.options, item, {'browsing': self.browsing});
+      var options = $.extend(true, {}, self.options, item, {
+        'browsing': self.browsing,
+        'open_folder': _t('Open folder')
+      });
       options._item = item;
       return _.template(template)(options);
     },
diff --git a/mockup/patterns/relateditems/templates/result.xml b/mockup/patterns/relateditems/templates/result.xml
index 86b472f..b35546c 100644
--- a/mockup/patterns/relateditems/templates/result.xml
+++ b/mockup/patterns/relateditems/templates/result.xml
@@ -1,7 +1,7 @@
 <div class="pattern-relateditems-result">
   <span class="pattern-relateditems-buttons">
   <% if (is_folderish) { %>
-    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="Open folder"></a>
+    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>
   <% } %>
   </span>
   <a class="pattern-relateditems-result-select<% if (selectable) { %> selectable<% } else if (browsing && is_folderish) { %> pattern-relateditems-result-browse<% } %><% if (typeof oneLevelUp !== 'undefined' && oneLevelUp) { %> one-level-up<% } %>" data-path="<%- path %>">


Repository: mockup


Branch: refs/heads/master
Date: 2017-04-21T13:08:05+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/ad613a71a25bee39ffa2fefc48264997577738bf

Add 'one-level-up'-class for result item node to allow custom styling

Files changed:
M mockup/patterns/relateditems/templates/result.xml

diff --git a/mockup/patterns/relateditems/templates/result.xml b/mockup/patterns/relateditems/templates/result.xml
index b35546c..04b7644 100644
--- a/mockup/patterns/relateditems/templates/result.xml
+++ b/mockup/patterns/relateditems/templates/result.xml
@@ -1,4 +1,4 @@
-<div class="pattern-relateditems-result">
+<div class="pattern-relateditems-result<% if (typeof oneLevelUp !== 'undefined' && oneLevelUp) { %> one-level-up<% } %>">
   <span class="pattern-relateditems-buttons">
   <% if (is_folderish) { %>
     <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>


Repository: mockup


Branch: refs/heads/master
Date: 2017-04-21T13:09:09+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/6f5edfd8d9d1d0b309be02ac7c80b31fd480913e

Update changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 381ac16..c4287a5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -81,6 +81,9 @@ Bug fixes:
 - fix structure pattern: if title is empty then show items ID.
   [jensens]
 
+- fix localization of "Open folder" link title in related items pattern
+  [datakurre]
+
 
 2.4.0 (2017-02-20)
 ------------------


Repository: mockup


Branch: refs/heads/master
Date: 2017-04-25T12:00:08+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/332664d2737fcd98b7cceb1f265fd93d320fe988

Merge pull request #758 from plone/datakurre-one-level-up

Make "One level up"-item customizable

Files changed:
M CHANGES.rst
M mockup/patterns/relateditems/pattern.js
M mockup/patterns/relateditems/templates/result.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 381ac16..c4287a5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -81,6 +81,9 @@ Bug fixes:
 - fix structure pattern: if title is empty then show items ID.
   [jensens]
 
+- fix localization of "Open folder" link title in related items pattern
+  [datakurre]
+
 
 2.4.0 (2017-02-20)
 ------------------
diff --git a/mockup/patterns/relateditems/pattern.js b/mockup/patterns/relateditems/pattern.js
index 9b6af2b..24ec109 100644
--- a/mockup/patterns/relateditems/pattern.js
+++ b/mockup/patterns/relateditems/pattern.js
@@ -176,7 +176,10 @@ define([
         template = self.options[tpl + 'Template'];
       }
       // let's give all the options possible to the template generation
-      var options = $.extend(true, {}, self.options, item, {'browsing': self.browsing});
+      var options = $.extend(true, {}, self.options, item, {
+        'browsing': self.browsing,
+        'open_folder': _t('Open folder')
+      });
       options._item = item;
       return _.template(template)(options);
     },
@@ -257,7 +260,7 @@ define([
           ) {
             results = [{
               'oneLevelUp': true,
-              'Title': _('One level up'),
+              'Title': _t('One level up'),
               'path': path.slice(0, path.length - 1).join('/') || '/',
               'portal_type': 'Folder',
               'is_folderish': true,
diff --git a/mockup/patterns/relateditems/templates/result.xml b/mockup/patterns/relateditems/templates/result.xml
index 86b472f..04b7644 100644
--- a/mockup/patterns/relateditems/templates/result.xml
+++ b/mockup/patterns/relateditems/templates/result.xml
@@ -1,7 +1,7 @@
-<div class="pattern-relateditems-result">
+<div class="pattern-relateditems-result<% if (typeof oneLevelUp !== 'undefined' && oneLevelUp) { %> one-level-up<% } %>">
   <span class="pattern-relateditems-buttons">
   <% if (is_folderish) { %>
-    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="Open folder"></a>
+    <a class="pattern-relateditems-result-browse" data-path="<%- path %>" title="<%- open_folder %>"></a>
   <% } %>
   </span>
   <a class="pattern-relateditems-result-select<% if (selectable) { %> selectable<% } else if (browsing && is_folderish) { %> pattern-relateditems-result-browse<% } %><% if (typeof oneLevelUp !== 'undefined' && oneLevelUp) { %> one-level-up<% } %>" data-path="<%- path %>">


