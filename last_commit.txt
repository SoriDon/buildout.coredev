Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-04-18T21:19:53+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/f0f438c9b81be1e4c3b4f656de7184fee7a9226d

performance.jmx: fix testfolder -&gt; testfolder-read

Files changed:
M performance.jmx

b'diff --git a/performance.jmx b/performance.jmx\nindex d36fcccd3..4a8175698 100644\n--- a/performance.jmx\n+++ b/performance.jmx\n@@ -72,7 +72,6 @@\n               <stringProp name="Header.value">Basic YWRtaW46YWRtaW4=</stringProp>\n             </elementProp>\n           </collectionProp>\n-          <stringProp name="TestPlan.comments">: Bearer</stringProp>\n         </HeaderManager>\n         <hashTree/>\n         <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Create Document" enabled="true">\n@@ -924,7 +923,7 @@\n           <stringProp name="HTTPSampler.port">12345</stringProp>\n           <stringProp name="HTTPSampler.protocol">http</stringProp>\n           <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n-          <stringProp name="HTTPSampler.path">/Plone/${testfolder}/</stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/</stringProp>\n           <stringProp name="HTTPSampler.concurrentPool">4</stringProp>\n           <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n           <stringProp name="HTTPSampler.response_timeout"></stringProp>\n@@ -936,14 +935,10 @@\n               <stringProp name="Header.name">Accept</stringProp>\n               <stringProp name="Header.value">application/json</stringProp>\n             </elementProp>\n-            <elementProp name="" elementType="Header">\n-              <stringProp name="Header.name">Content-Type</stringProp>\n-              <stringProp name="Header.value">application/json</stringProp>\n-            </elementProp>\n           </collectionProp>\n         </HeaderManager>\n         <hashTree/>\n-        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Document (fullobjects)" enabled="true">\n+        <HTTPSamplerProxy guiclass="HttpTestSampleGui" testclass="HTTPSamplerProxy" testname="Document" enabled="true">\n           <elementProp name="HTTPsampler.Arguments" elementType="Arguments" guiclass="HTTPArgumentsPanel" testclass="Arguments" testname="Benutzer definierte Variablen" enabled="true">\n             <collectionProp name="Arguments.arguments">\n               <elementProp name="Accept" elementType="HTTPArgument">\n@@ -959,7 +954,7 @@\n           <stringProp name="HTTPSampler.port"></stringProp>\n           <stringProp name="HTTPSampler.protocol"></stringProp>\n           <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n-          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/document?fullobjects</stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/document</stringProp>\n           <stringProp name="HTTPSampler.method">GET</stringProp>\n           <boolProp name="HTTPSampler.follow_redirects">true</boolProp>\n           <boolProp name="HTTPSampler.auto_redirects">false</boolProp>\n@@ -1446,7 +1441,7 @@\n           <stringProp name="HTTPSampler.port">12345</stringProp>\n           <stringProp name="HTTPSampler.protocol">http</stringProp>\n           <stringProp name="HTTPSampler.contentEncoding"></stringProp>\n-          <stringProp name="HTTPSampler.path">/Plone/${testfolder}/</stringProp>\n+          <stringProp name="HTTPSampler.path">/Plone/${testfolder-read}/</stringProp>\n           <stringProp name="HTTPSampler.concurrentPool">4</stringProp>\n           <stringProp name="HTTPSampler.connect_timeout"></stringProp>\n           <stringProp name="HTTPSampler.response_timeout"></stringProp>\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-04-18T21:20:01+02:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/plone.restapi/commit/730e76fcefad17ec4b701b6588846dd23226b033

Merge branch 'master' of github.com:plone/plone.restapi

Files changed:
M src/plone/restapi/tests/performance.py

b'diff --git a/src/plone/restapi/tests/performance.py b/src/plone/restapi/tests/performance.py\nindex 758271a8b..ca9ab58ce 100644\n--- a/src/plone/restapi/tests/performance.py\n+++ b/src/plone/restapi/tests/performance.py\n@@ -169,7 +169,14 @@ def step_setup_content(context):\n         publish(folder10np[f"doc{i}"])\n \n     # Collection\n-    portal.invokeFactory("Collection", id="collection", title="Collection")\n+    query = [\n+        {\n+            "i": "portal_type",\n+            "o": "plone.app.querystring.operation.string.is",\n+            "v": ["Document"],\n+        }\n+    ]\n+    portal.invokeFactory("Collection", id="collection", title="Collection", query=query)\n     set_description(portal.collection)\n     set_text(portal.collection)\n     publish(portal.collection)\n'

