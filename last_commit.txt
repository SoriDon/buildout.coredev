Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-30T18:25:21+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/7b5059899071aae2ace320e7756b6915e0f6ef96

MigrationTool: call upgradeProfile with quiet=True.

This is a new keyword I added in GenericSetup, and will land in version 2.1.6.
It makes the upgrade of (optional) core add-ons quieter, for example not logging anything when plone.session is not installed,
or when plone.app.users has no pending upgrade step.

Files changed:
M Products/CMFPlone/MigrationTool.py

b"diff --git a/Products/CMFPlone/MigrationTool.py b/Products/CMFPlone/MigrationTool.py\nindex 2697706dca..95dfaff1d8 100644\n--- a/Products/CMFPlone/MigrationTool.py\n+++ b/Products/CMFPlone/MigrationTool.py\n@@ -79,7 +79,7 @@ def upgrade_all(self, context):\n         setup = getToolByName(context, 'portal_setup')\n         for addon in self:\n             if addon.safe():\n-                setup.upgradeProfile(addon.profile_id)\n+                setup.upgradeProfile(addon.profile_id, quiet=True)\n \n \n # List of upgradeable packages.  Obvious items to add here, are all\n"

