Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-10T23:48:21+01:00
Author: T. Kim Nguyen (tkimnguyen) <tkimnguyen@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/35dd4b7880c9c0ce58e7c4ef875d7ae3291d3db1

contact-info form: do not encode reply-to address

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/contact_info.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 60c0f7c..838da46 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -33,6 +33,9 @@ New:
 - Remove Zope mention in logout form 
   [tkimnguyen]
 
+- Do not encode reply-to email address for contact-info form
+  [tkimnguyen]
+
 Fixes:
 
 - *add item here*
diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index b03c461..dbc6440 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -68,7 +68,7 @@ def send_message(self, data):
         data['url'] = portal.absolute_url()
         message = self.generate_mail(data, encoding)
         message = MIMEText(message, 'plain', encoding)
-        message['Reply-To'] = Header(data['sender_from_address'], encoding)
+        message['Reply-To'] = data['sender_from_address']
 
         try:
             # This actually sends out the mail


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-13T21:51:31+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/95524596c2913208bb934d15a0cf6bb398d1bac0

Merge pull request #1456 from plone/tkimnguyen-contact-form-fix

contact form fix

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/contact_info.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 357088c..02f37f5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -41,6 +41,9 @@ New:
 - Remove Zope mention in logout form
   [tkimnguyen]
 
+- Do not encode reply-to email address for contact-info form
+  [tkimnguyen]
+
 Fixes:
 
 - Do not break background images relative urls in CSS when concatening bundles
diff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py
index b03c461..dbc6440 100644
--- a/Products/CMFPlone/browser/contact_info.py
+++ b/Products/CMFPlone/browser/contact_info.py
@@ -68,7 +68,7 @@ def send_message(self, data):
         data['url'] = portal.absolute_url()
         message = self.generate_mail(data, encoding)
         message = MIMEText(message, 'plain', encoding)
-        message['Reply-To'] = Header(data['sender_from_address'], encoding)
+        message['Reply-To'] = data['sender_from_address']
 
         try:
             # This actually sends out the mail


