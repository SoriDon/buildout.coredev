Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-04-21T10:00:00-05:00
Author: Jens Vagelpohl (dataflake) <jens@netz.ooo>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/9f78894d802425bccb29936ed2d345b43e53871f

Enable socket reuse to prevent startup errors when running in the foreground

Files changed:
A news/86.bugfix
M src/plone/recipe/zope2instance/ctl.py

b"diff --git a/news/86.bugfix b/news/86.bugfix\nnew file mode 100644\nindex 0000000..2948899\n--- /dev/null\n+++ b/news/86.bugfix\n@@ -0,0 +1 @@\n+Enable socket reuse to prevent startup errors when running in the foreground\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex caacd77..be22154 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -905,6 +905,7 @@ def server_factory(global_conf, **kws):\n         host, port = kws['fast-listen'].split(':')\n         prebound = dispatcher()\n         prebound.create_socket(socket.AF_INET, socket.SOCK_STREAM)\n+        prebound.set_reuse_addr()\n         prebound.bind((host, int(port)))\n         prebound.listen(5)\n         while not prebound.readable():\n"

Repository: plone.recipe.zope2instance


Branch: refs/heads/master
Date: 2019-04-22T01:09:41+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.recipe.zope2instance/commit/1e5fefe184be63ec1f17ebaffb0ecbb830737ee0

Merge pull request #94 from plone/issue_86

Enable socket reuse to prevent startup errors when running in foreground

Files changed:
A news/86.bugfix
M src/plone/recipe/zope2instance/ctl.py

b"diff --git a/news/86.bugfix b/news/86.bugfix\nnew file mode 100644\nindex 0000000..2948899\n--- /dev/null\n+++ b/news/86.bugfix\n@@ -0,0 +1 @@\n+Enable socket reuse to prevent startup errors when running in the foreground\ndiff --git a/src/plone/recipe/zope2instance/ctl.py b/src/plone/recipe/zope2instance/ctl.py\nindex caacd77..be22154 100644\n--- a/src/plone/recipe/zope2instance/ctl.py\n+++ b/src/plone/recipe/zope2instance/ctl.py\n@@ -905,6 +905,7 @@ def server_factory(global_conf, **kws):\n         host, port = kws['fast-listen'].split(':')\n         prebound = dispatcher()\n         prebound.create_socket(socket.AF_INET, socket.SOCK_STREAM)\n+        prebound.set_reuse_addr()\n         prebound.bind((host, int(port)))\n         prebound.listen(5)\n         while not prebound.readable():\n"

