Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2021-10-27T10:30:10+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.upgrade/commit/8fc76a027cfcd93c9074508c6be3d8c78eef293f

Index the Plone site root

Files changed:
A news/264.bugfix
M plone/app/upgrade/v60/alphas.py
M plone/app/upgrade/v60/configure.zcml

b'diff --git a/news/264.bugfix b/news/264.bugfix\nnew file mode 100644\nindex 00000000..241d8803\n--- /dev/null\n+++ b/news/264.bugfix\n@@ -0,0 +1 @@\n+Index the Plone site root\ndiff --git a/plone/app/upgrade/v60/alphas.py b/plone/app/upgrade/v60/alphas.py\nindex 58f9e552..7b2cc6c1 100644\n--- a/plone/app/upgrade/v60/alphas.py\n+++ b/plone/app/upgrade/v60/alphas.py\n@@ -111,4 +111,9 @@ def add_uuid_to_dxsiteroot(context):\n     if not uuid:\n         return\n     setattr(portal, ATTRIBUTE_NAME, uuid)\n+\n+\n+def index_siteroot(context):\n+    """Index the Plone Site"""\n+    portal = getSite()\n     portal.reindexObject()\ndiff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex ea190d13..51af93ba 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -45,6 +45,12 @@\n            handler=".alphas.add_uuid_to_dxsiteroot"\n            />\n \n+       <gs:upgradeStep\n+           title="Index the Site Root"\n+           description=""\n+           handler=".alphas.index_siteroot"\n+           />\n+\n     </gs:upgradeSteps>\n \n \n'

Repository: plone.app.upgrade


Branch: refs/heads/master
Date: 2021-10-30T12:05:53+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.upgrade/commit/ef4aef834c561f7a634e819571b7c3bfb48cf314

Merge pull request #264 from plone/portal-in-the-catalog

Index the site root

Files changed:
A news/264.bugfix
M plone/app/upgrade/v60/alphas.py
M plone/app/upgrade/v60/configure.zcml

b'diff --git a/news/264.bugfix b/news/264.bugfix\nnew file mode 100644\nindex 00000000..241d8803\n--- /dev/null\n+++ b/news/264.bugfix\n@@ -0,0 +1 @@\n+Index the Plone site root\ndiff --git a/plone/app/upgrade/v60/alphas.py b/plone/app/upgrade/v60/alphas.py\nindex 58f9e552..7b2cc6c1 100644\n--- a/plone/app/upgrade/v60/alphas.py\n+++ b/plone/app/upgrade/v60/alphas.py\n@@ -111,4 +111,9 @@ def add_uuid_to_dxsiteroot(context):\n     if not uuid:\n         return\n     setattr(portal, ATTRIBUTE_NAME, uuid)\n+\n+\n+def index_siteroot(context):\n+    """Index the Plone Site"""\n+    portal = getSite()\n     portal.reindexObject()\ndiff --git a/plone/app/upgrade/v60/configure.zcml b/plone/app/upgrade/v60/configure.zcml\nindex ea190d13..51af93ba 100644\n--- a/plone/app/upgrade/v60/configure.zcml\n+++ b/plone/app/upgrade/v60/configure.zcml\n@@ -45,6 +45,12 @@\n            handler=".alphas.add_uuid_to_dxsiteroot"\n            />\n \n+       <gs:upgradeStep\n+           title="Index the Site Root"\n+           description=""\n+           handler=".alphas.index_siteroot"\n+           />\n+\n     </gs:upgradeSteps>\n \n \n'

