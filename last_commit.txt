Repository: plone.app.content


Branch: refs/heads/master
Date: 2017-06-12T18:25:23+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/262e7ffa5e08bdf2368cf5039a60584cef3a2e28

Cleanup of PLIP #1734

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 4062906..f178cc8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,10 +11,9 @@ Breaking changes:
 
 New features:
 
-- make thumbsize in folder contents listing adjustable/supressable 
-  (uses site control panel settings: thumb_size_tables ...)
-  clean up deprecated icon related code
-  replace paperclip icon with mime type icons
+- Make thumb_scale in folder contents listing adjustable/supressable (uses site control panel settings: thumb_scale_tables ...).
+  Clean up deprecated icon related code.
+  Replace paperclip icon with mime type icons.
   https://github.com/plone/Products.CMFPlone/issues/1734
   [fgrcon]
 
@@ -44,7 +43,7 @@ Bug fixes:
 
 - removed unittest2 dependency.
   [kakshay21]
-  
+
 3.4 (2017-04-01)
 ----------------
 
diff --git a/plone/app/content/browser/contents/__init__.py b/plone/app/content/browser/contents/__init__.py
index 55cb807..4055ac8 100644
--- a/plone/app/content/browser/contents/__init__.py
+++ b/plone/app/content/browser/contents/__init__.py
@@ -219,15 +219,15 @@ def get_columns(self):
                 columns[column] = translate(_(column), context=self.request)
         return columns
 
-    def get_thumbSize(self):
+    def get_thumb_scale(self):
         registry = getUtility(IRegistry)
         settings = registry.forInterface(
             ISiteSchema, prefix="plone", check=False)
         if settings.no_thumbs_tables:
             # thumbs to be supressed
-            return 'none'
-        thumb_size_table = settings.thumb_size_table
-        return thumb_size_table
+            return None
+        thumb_scale_table = settings.thumb_scale_table
+        return thumb_scale_table
 
     @property
     def ignored_indexes(self):
@@ -316,7 +316,7 @@ def get_options(self):
                 'initialFolder': IUUID(self.context, None),
                 'useTus': TUS_ENABLED
             },
-            'thumbSize' : self.get_thumbSize(),
+            'thumb_scale': self.get_thumb_scale(),
         }
         return options
 


Repository: plone.app.content


Branch: refs/heads/master
Date: 2017-06-14T14:41:34+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/490be502002de62e71db9f5b790fb4a748c7a048

Merge pull request #131 from plone/thet-1734-cleanup

Cleanup of PLIP #1734

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/__init__.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 4062906..f178cc8 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,10 +11,9 @@ Breaking changes:
 
 New features:
 
-- make thumbsize in folder contents listing adjustable/supressable 
-  (uses site control panel settings: thumb_size_tables ...)
-  clean up deprecated icon related code
-  replace paperclip icon with mime type icons
+- Make thumb_scale in folder contents listing adjustable/supressable (uses site control panel settings: thumb_scale_tables ...).
+  Clean up deprecated icon related code.
+  Replace paperclip icon with mime type icons.
   https://github.com/plone/Products.CMFPlone/issues/1734
   [fgrcon]
 
@@ -44,7 +43,7 @@ Bug fixes:
 
 - removed unittest2 dependency.
   [kakshay21]
-  
+
 3.4 (2017-04-01)
 ----------------
 
diff --git a/plone/app/content/browser/contents/__init__.py b/plone/app/content/browser/contents/__init__.py
index 55cb807..4055ac8 100644
--- a/plone/app/content/browser/contents/__init__.py
+++ b/plone/app/content/browser/contents/__init__.py
@@ -219,15 +219,15 @@ def get_columns(self):
                 columns[column] = translate(_(column), context=self.request)
         return columns
 
-    def get_thumbSize(self):
+    def get_thumb_scale(self):
         registry = getUtility(IRegistry)
         settings = registry.forInterface(
             ISiteSchema, prefix="plone", check=False)
         if settings.no_thumbs_tables:
             # thumbs to be supressed
-            return 'none'
-        thumb_size_table = settings.thumb_size_table
-        return thumb_size_table
+            return None
+        thumb_scale_table = settings.thumb_scale_table
+        return thumb_scale_table
 
     @property
     def ignored_indexes(self):
@@ -316,7 +316,7 @@ def get_options(self):
                 'initialFolder': IUUID(self.context, None),
                 'useTus': TUS_ENABLED
             },
-            'thumbSize' : self.get_thumbSize(),
+            'thumb_scale': self.get_thumb_scale(),
         }
         return options
 


