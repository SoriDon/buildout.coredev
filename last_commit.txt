Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-05-27T07:54:35+02:00
Author: Fulvio Casali (fulv) <fulviocasali@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/e851a9a6d87aaf626f34a29e6cd58f9444095a04

Fixes #1602 (#1605)

* Fixes #1602

Make the modal dialog pattern for login follow any redirects set while logging in.

* Update CHANGES.rst

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/actions.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 41145bd..c485a37 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -18,6 +18,9 @@ Incompatibilities:
 
 New:
 
+- Make login modal dialog follow any redirects set while processing the login request.
+  [fulv]
+  
 - Add link to training.plone.org
   [svx]
 
diff --git a/Products/CMFPlone/profiles/default/actions.xml b/Products/CMFPlone/profiles/default/actions.xml
index 673740e..babfe58 100644
--- a/Products/CMFPlone/profiles/default/actions.xml
+++ b/Products/CMFPlone/profiles/default/actions.xml
@@ -245,7 +245,7 @@
     <element value="View"/>
    </property>
    <property name="visible">True</property>
-   <property name="modal" type="text">{"prependContent": ".portalMessage", "title": "Log in", "width": "26em"}</property>
+   <property name="modal" type="text">{"prependContent": ".portalMessage", "title": "Log in", "width": "26em", "actionOptions": {"redirectOnResponse": true}}</property>
   </object>
   <object name="join" meta_type="CMF Action" i18n:domain="plone">
    <property name="title" i18n:translate="">Register</property>


