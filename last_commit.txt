Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2016-02-18T23:14:26+01:00
Author: Gil Forcada (gforcada) <gforcada@gnome.org>
Commit: https://github.com/plone/plone.app.contenttypes/commit/756c1a4d42aca0b5d09c984c60122e810ae6c3d1

Fix test isolation problems

Doing transaction commits on integration layers breaks test isolation.

Fixes:
https://github.com/plone/plone.app.contenttypes/issues/326

Files changed:
M plone/app/contenttypes/tests/test_document.py

diff --git a/plone/app/contenttypes/tests/test_document.py b/plone/app/contenttypes/tests/test_document.py
index 947c531..e1e6f77 100644
--- a/plone/app/contenttypes/tests/test_document.py
+++ b/plone/app/contenttypes/tests/test_document.py
@@ -15,7 +15,6 @@
 from zope.component import queryUtility
 from zope.interface import alsoProvides
 
-import transaction
 import unittest2 as unittest
 
 
@@ -83,7 +82,6 @@ def test_view(self):
     def tearDown(self):
         if 'document' in self.portal.objectIds():
             self.portal.manage_delObjects(ids='document')
-            transaction.commit()
 
 
 class DocumentFunctionalTest(unittest.TestCase):


Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2016-02-19T01:27:30+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.forcada@freitag.de>
Commit: https://github.com/plone/plone.app.contenttypes/commit/7c269554fee14fd2d978614916d295e7a50016be

Merge pull request #327 from plone/gforcada-patch-1

Fix test isolation problems

Files changed:
M plone/app/contenttypes/tests/test_document.py

diff --git a/plone/app/contenttypes/tests/test_document.py b/plone/app/contenttypes/tests/test_document.py
index 947c531..e1e6f77 100644
--- a/plone/app/contenttypes/tests/test_document.py
+++ b/plone/app/contenttypes/tests/test_document.py
@@ -15,7 +15,6 @@
 from zope.component import queryUtility
 from zope.interface import alsoProvides
 
-import transaction
 import unittest2 as unittest
 
 
@@ -83,7 +82,6 @@ def test_view(self):
     def tearDown(self):
         if 'document' in self.portal.objectIds():
             self.portal.manage_delObjects(ids='document')
-            transaction.commit()
 
 
 class DocumentFunctionalTest(unittest.TestCase):


