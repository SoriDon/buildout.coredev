Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T01:57:49+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/378525ae723263b1ee7949db012579afe373fd32

Configuring with plone/meta

Files changed:
A .editorconfig
A .meta.toml
A .pre-commit-config.yaml
A news/a533099d.internal
A tox.ini
M pyproject.toml
M setup.cfg

b'diff --git a/.editorconfig b/.editorconfig\nnew file mode 100644\nindex 0000000..b4158b8\n--- /dev/null\n+++ b/.editorconfig\n@@ -0,0 +1,39 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+#\n+# EditorConfig Configuration file, for more details see:\n+# http://EditorConfig.org\n+# EditorConfig is a convention description, that could be interpreted\n+# by multiple editors to enforce common coding conventions for specific\n+# file types\n+\n+# top-most EditorConfig file:\n+# Will ignore other EditorConfig files in Home directory or upper tree level.\n+root = true\n+\n+\n+[*]  # For All Files\n+# Unix-style newlines with a newline ending every file\n+end_of_line = lf\n+insert_final_newline = true\n+trim_trailing_whitespace = true\n+# Set default charset\n+charset = utf-8\n+# Indent style default\n+indent_style = space\n+# Max Line Length - a hard line wrap, should be disabled\n+max_line_length = off\n+\n+[*.{py,cfg,ini}]\n+# 4 space indentation\n+indent_size = 4\n+\n+[*.{yml,zpt,pt,dtml,zcml}]\n+# 2 space indentation\n+indent_size = 2\n+\n+[{Makefile,.gitmodules}]\n+# Tab indentation (no size specified, but view as 4 spaces)\n+indent_style = tab\n+indent_size = unset\n+tab_width = unset\ndiff --git a/.meta.toml b/.meta.toml\nnew file mode 100644\nindex 0000000..0df002c\n--- /dev/null\n+++ b/.meta.toml\n@@ -0,0 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[meta]\n+template = "default"\n+commit-id = "a533099d"\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..582f8ac\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,42 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+ci:\n+    autofix_prs: false\n+    autoupdate_schedule: monthly\n+\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+        args: [--py38-plus]\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/psf/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 3.0.2\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+        additional_dependencies:\n+          - tomli\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.2"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/news/a533099d.internal b/news/a533099d.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/a533099d.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 8f2dfd2..9d0c563 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -1,3 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [tool.towncrier]\n filename = "CHANGES.rst"\n directory = "news/"\n@@ -19,5 +21,42 @@ directory = "bugfix"\n name = "Bug fixes:"\n showcontent = true\n \n+[[tool.towncrier.type]]\n+directory = "internal"\n+name = "Internal:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "documentation"\n+name = "Documentation:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "tests"\n+name = "Tests"\n+showcontent = true\n+\n [tool.isort]\n profile = "plone"\n+\n+[tool.black]\n+target-version = ["py38"]\n+\n+[tool.dependencychecker]\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # Zope dependencies\n+  \'Acquisition\', \'DateTime\', \'transaction\', \'zExceptions\', \'ZODB\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.deferredimport\', \'zope.event\',\n+  \'zope.exceptions\', \'zope.globalrequest\', \'zope.i18n\', \'zope.i18nmessageid\',\n+  \'zope.interface\', \'zope.lifecycleevent\', \'zope.location\', \'zope.publisher\',\n+  \'zope.schema\', \'zope.security\', \'zope.site\', \'zope.traversing\', \'AccessControl\',\n+]\n+\'plone.base\' = [\n+  \'setuptools\', \'AccessControl\', \'Products.BTreeFolder2\', \'Products.CMFCore\',\n+  \'Products.CMFDynamicViewFTI\', \'zope.deprecation\',\n+]\n+python-dateutil = [\'dateutil\']\ndiff --git a/setup.cfg b/setup.cfg\nindex 526aeb2..0da8f8f 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -1,2 +1,23 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [bdist_wheel]\n universal = 0\n+\n+[flake8]\n+doctests = 1\n+ignore =\n+    # black takes care of line length\n+    E501,\n+    # black takes care of where to break lines\n+    W503,\n+    # black takes care of spaces within slicing (list[:])\n+    E203,\n+    # black takes care of spaces after commas\n+    E231,\n+\n+[check-manifest]\n+ignore =\n+    .editorconfig\n+    .meta.toml\n+    .pre-commit-config.yaml\n+    tox.ini\ndiff --git a/tox.ini b/tox.ini\nnew file mode 100644\nindex 0000000..520ebf8\n--- /dev/null\n+++ b/tox.ini\n@@ -0,0 +1,50 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[tox]\n+envlist =\n+    format\n+    lint\n+    test\n+\n+[testenv]\n+allowlist_externals =\n+    sh\n+\n+[testenv:format]\n+description = automatically reformat code\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n+\n+[testenv:lint]\n+description = run linters that will help improve the code style\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a\n+\n+[testenv:dependencies]\n+description = check if the package defines all its dependencies and generate a graph out of them\n+deps =\n+    z3c.dependencychecker==2.11\n+    pipdeptree==2.5.1\n+    graphviz  # optional dependency of pipdeptree\n+commands =\n+    dependencychecker\n+    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+\n+[testenv:test]\n+usedevelop = true\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --test-path={toxinidir} -s plone.app.querystring\n+extras =\n+    test\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T01:59:05+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/418272197b6060b58b3ceb0c2cd70118b9df640a

chore: black

Files changed:
M plone/app/querystring/registryreader.py

b'diff --git a/plone/app/querystring/registryreader.py b/plone/app/querystring/registryreader.py\nindex 4817f07..83e85ce 100644\n--- a/plone/app/querystring/registryreader.py\n+++ b/plone/app/querystring/registryreader.py\n@@ -93,9 +93,7 @@ def getVocabularyValues(self, values):\n                 else:\n                     title = item.title\n                 translated.append((title, item.value))\n-            translated = sorted(\n-                translated, key=lambda x: id_normalize(safe_text(x[0]))\n-            )\n+            translated = sorted(translated, key=lambda x: id_normalize(safe_text(x[0])))\n             for title, value in translated:\n                 field["values"][value] = {"title": title}\n \n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:15:16+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/a89bd2ea9f9b11e23a6658cd84f87a7e3c4e4985

chore: zpretty

Files changed:
M plone/app/querystring/configure.zcml
M plone/app/querystring/indexmodifiers/configure.zcml
M plone/app/querystring/profiles.zcml
M plone/app/querystring/profiles/default/metadata.xml
M plone/app/querystring/profiles/default/registry.xml
M plone/app/querystring/profiles/upgrades/to_10/registry.xml
M plone/app/querystring/profiles/upgrades/to_11/registry.xml
M plone/app/querystring/profiles/upgrades/to_14/registry.xml
M plone/app/querystring/profiles/upgrades/to_3/registry.xml
M plone/app/querystring/profiles/upgrades/to_5/registry.xml
M plone/app/querystring/profiles/upgrades/to_6/registry.xml
M plone/app/querystring/profiles/upgrades/to_7/registry.xml
M plone/app/querystring/profiles/upgrades/to_8/registry.xml
M plone/app/querystring/profiles/upgrades/to_9/registry.xml
M plone/app/querystring/results.pt
M plone/app/querystring/tests/configure.zcml
M plone/app/querystring/tests/profiles/registry/metadata.xml
M plone/app/querystring/tests/profiles/registry/registry.xml
M plone/app/querystring/tests/registry_minimal_correct.xml
M plone/app/querystring/tests/registry_test_missing_operator.xml
M plone/app/querystring/tests/registry_test_vocabulary.xml
M plone/app/querystring/upgrades.zcml

b'diff --git a/plone/app/querystring/configure.zcml b/plone/app/querystring/configure.zcml\nindex c9b8f79..92ee3ee 100644\n--- a/plone/app/querystring/configure.zcml\n+++ b/plone/app/querystring/configure.zcml\n@@ -1,8 +1,9 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n     xmlns:browser="http://namespaces.zope.org/browser"\n-    i18n_domain="plone">\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone"\n+    >\n \n   <include file="profiles.zcml" />\n   <include file="upgrades.zcml" />\n@@ -12,55 +13,55 @@\n   <include package=".indexmodifiers" />\n \n   <adapter\n-    for="plone.registry.interfaces.IRegistry"\n-    factory=".registryreader.QuerystringRegistryReader"\n-    />\n+      factory=".registryreader.QuerystringRegistryReader"\n+      for="plone.registry.interfaces.IRegistry"\n+      />\n \n   <adapter\n-    for="plone.registry.interfaces.IRegistry\n-         zope.publisher.interfaces.http.IHTTPRequest"\n-    factory=".registryreader.QuerystringRegistryReader"\n-    />\n+      factory=".registryreader.QuerystringRegistryReader"\n+      for="plone.registry.interfaces.IRegistry\n+           zope.publisher.interfaces.http.IHTTPRequest"\n+      />\n \n   <browser:page\n-    name="display_query_results"\n-    class=".querybuilder.ContentListingView"\n-    permission="zope2.View"\n-    for="*"\n-    template="results.pt"\n-    />\n+      name="display_query_results"\n+      for="*"\n+      class=".querybuilder.ContentListingView"\n+      template="results.pt"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilderresults"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    for="*"\n-    />\n+      name="querybuilderresults"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilder_html_results"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    attribute="html_results"\n-    for="*"\n-    />\n+      name="querybuilder_html_results"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      attribute="html_results"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuildernumberofresults"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    for="*"\n-    attribute="number_of_results"\n-    />\n+      name="querybuildernumberofresults"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      attribute="number_of_results"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilderjsonconfig"\n-    class=".querybuilder.RegistryConfiguration"\n-    permission="zope2.View"\n-    for="*"\n-    />\n+      name="querybuilderjsonconfig"\n+      for="*"\n+      class=".querybuilder.RegistryConfiguration"\n+      permission="zope2.View"\n+      />\n   <utility\n-    component=".querymodifiers.modify_query_to_enforce_navigation_root"\n-    name="1000"\n-    />\n+      name="1000"\n+      component=".querymodifiers.modify_query_to_enforce_navigation_root"\n+      />\n </configure>\ndiff --git a/plone/app/querystring/indexmodifiers/configure.zcml b/plone/app/querystring/indexmodifiers/configure.zcml\nindex b17480f..f17ef7c 100644\n--- a/plone/app/querystring/indexmodifiers/configure.zcml\n+++ b/plone/app/querystring/indexmodifiers/configure.zcml\n@@ -1,46 +1,47 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-    <utility\n-        factory=".query_index_modifiers.Subject"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="Subject"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.Date"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="Date"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.created"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="created"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.effective"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="effective"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.end"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="end"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.expires"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="expires"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.modified"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="modified"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.start"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="start"\n-        />\n+  <utility\n+      factory=".query_index_modifiers.Subject"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="Subject"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.Date"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="Date"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.created"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="created"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.effective"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="effective"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.end"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="end"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.expires"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="expires"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.modified"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="modified"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.start"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="start"\n+      />\n \n </configure>\ndiff --git a/plone/app/querystring/profiles.zcml b/plone/app/querystring/profiles.zcml\nindex 7a559ee..f042058 100644\n--- a/plone/app/querystring/profiles.zcml\n+++ b/plone/app/querystring/profiles.zcml\n@@ -1,92 +1,93 @@\n <configure\n-        xmlns="http://namespaces.zope.org/zope"\n-        xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-        i18n_domain="plone">\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone"\n+    >\n \n-    <utility\n-        factory=".hiddenprofiles.HiddenProfiles"\n-        name="plone.app.querystring"\n-        provides="plone.base.interfaces.INonInstallable"\n-        />\n+  <utility\n+      factory=".hiddenprofiles.HiddenProfiles"\n+      provides="plone.base.interfaces.INonInstallable"\n+      name="plone.app.querystring"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="default"\n-        title="Querystring parser/builder"\n-        directory="profiles/default"\n-        description="Querystring parser and builder, building block and transformer for the new style collections"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="default"\n+      title="Querystring parser/builder"\n+      description="Querystring parser and builder, building block and transformer for the new style collections"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/default"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_3"\n-        title="Querystring Upgrade profile to v3"\n-        description=""\n-        directory="profiles/upgrades/to_3"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_3"\n+      title="Querystring Upgrade profile to v3"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_3"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_5"\n-        title="Querystring Upgrade profile to v5"\n-        description=""\n-        directory="profiles/upgrades/to_5"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_5"\n+      title="Querystring Upgrade profile to v5"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_5"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_6"\n-        title="Querystring Upgrade profile to v6"\n-        description=""\n-        directory="profiles/upgrades/to_6"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_6"\n+      title="Querystring Upgrade profile to v6"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_6"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_7"\n-        title="Querystring Upgrade profile to v7"\n-        description=""\n-        directory="profiles/upgrades/to_7"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_7"\n+      title="Querystring Upgrade profile to v7"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_7"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_8"\n-        title="Querystring Upgrade profile to v8"\n-        description=""\n-        directory="profiles/upgrades/to_8"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_8"\n+      title="Querystring Upgrade profile to v8"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_8"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_9"\n-        title="Querystring Upgrade profile to v9"\n-        description=""\n-        directory="profiles/upgrades/to_9"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_9"\n+      title="Querystring Upgrade profile to v9"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_9"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_10"\n-        title="Querystring Upgrade profile to v10"\n-        description=""\n-        directory="profiles/upgrades/to_10"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_10"\n+      title="Querystring Upgrade profile to v10"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_10"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_11"\n-        title="Querystring Upgrade profile to v11"\n-        description=""\n-        directory="profiles/upgrades/to_11"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_11"\n+      title="Querystring Upgrade profile to v11"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_11"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_14"\n-        title="Querystring Upgrade profile to v14"\n-        description=""\n-        directory="profiles/upgrades/to_14"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_14"\n+      title="Querystring Upgrade profile to v14"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_14"\n+      />\n \n- </configure>\n+</configure>\ndiff --git a/plone/app/querystring/profiles/default/metadata.xml b/plone/app/querystring/profiles/default/metadata.xml\nindex 610f8d1..3949c2a 100644\n--- a/plone/app/querystring/profiles/default/metadata.xml\n+++ b/plone/app/querystring/profiles/default/metadata.xml\n@@ -1,7 +1,7 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>14</version>\n   <dependencies>\n-      <dependency>profile-plone.app.registry:default</dependency>\n+    <dependency>profile-plone.app.registry:default</dependency>\n   </dependencies>\n </metadata>\ndiff --git a/plone/app/querystring/profiles/default/registry.xml b/plone/app/querystring/profiles/default/registry.xml\nindex db23b80..24b3873 100644\n--- a/plone/app/querystring/profiles/default/registry.xml\n+++ b/plone/app/querystring/profiles/default/registry.xml\n@@ -1,599 +1,894 @@\n-<!-- Operation Definitions -->\n-<registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.boolean.isTrue">\n-        <value key="title" i18n:translate="">Yes</value>\n-        <value key="description" i18n:translate=""></value>\n-        <value key="operation">plone.app.querystring.queryparser._isTrue</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.boolean.isFalse">\n-        <value key="title" i18n:translate="">No</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._isFalse</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.lessThan">\n-        <value key="title" i18n:translate="">Less than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.largerThan">\n-        <value key="title" i18n:translate="">Larger than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title" i18n:translate="">Before date</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget">DateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThan">\n-        <value key="title" i18n:translate="">After date</value>\n-        <value key="description" i18n:translate="">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n-        <value key="widget">DateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.between">\n-        <value key="title" i18n:translate="">Between dates</value>\n-        <value key="description" i18n:translate="">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._between</value>\n-        <value key="widget">DateRangeWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThanRelativeDate">\n-        <value key="title" i18n:translate="">Within next</value>\n-        <value key="description" i18n:translate="">Please enter the number in days.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThanRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThanRelativeDate">\n-        <value key="title" i18n:translate="">Within last</value>\n-        <value key="description" i18n:translate="">Please enter the number in days.</value>\n-        <value key="operation">plone.app.querystring.queryparser._moreThanRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.today">\n-        <value key="title" i18n:translate="">Today</value>\n-        <value key="description" i18n:translate="">The current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._today</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterToday">\n-        <value key="title" i18n:translate="">After today</value>\n-        <value key="description" i18n:translate="">After the current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterToday</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeToday">\n-        <value key="title" i18n:translate="">Before today</value>\n-        <value key="description" i18n:translate="">Before the current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeToday</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeRelativeDate">\n-        <value key="title" i18n:translate="">Before relative Date</value>\n-        <value key="description" i18n:translate="">Before N days in the past</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterRelativeDate">\n-        <value key="title" i18n:translate="">After relative Date</value>\n-        <value key="description" i18n:translate="">After N days in the future</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.list.contains">\n-        <value key="title" i18n:translate="">Contains</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.path.isWithin">\n-        <value key="title" i18n:translate="">Is within</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._pathContains</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.path.isWithinRelative">\n-        <value key="title" i18n:translate="">Is within (relative)</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._pathContainsRelative</value>\n-        <value key="widget">RelativePathWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.reference.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._referenceIs</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.contains">\n-        <value key="title" i18n:translate="">Contains</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.currentUser">\n-        <value key="title" i18n:translate="">Current logged in user</value>\n-        <value key="description" i18n:translate="">The user viewing the querystring results</value>\n-        <value key="operation">plone.app.querystring.queryparser._currentUser</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.showInactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">The user roles which are allowed to see inactive content</value>\n-        <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.isNot">\n-        <value key="title" i18n:translate="">Is not</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.intselection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.absolutePath">\n-        <value key="title" i18n:translate="">Absolute path</value>\n-        <value key="description" i18n:translate="">Location in the site structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.path">\n-        <value key="title" i18n:translate="">Navigation path</value>\n-        <value key="description" i18n:translate="">Location in the navigation structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.relativePath">\n-        <value key="title" i18n:translate="">Relative path</value>\n-        <value key="description" i18n:translate="">Use \'../\' to navigate to parent objects.</value>\n-        <value key="operation">plone.app.querystring.queryparser._relativePath</value>\n-        <value key="widget">RelativePathWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.any">\n-        <value key="title" i18n:translate="">Matches any of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.none">\n-        <value key="title" i18n:translate="">Matches none of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.all">\n-        <value key="title" i18n:translate="">Matches all of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._all</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-<!-- QueryField declarations  -->\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.path">\n-       <value key="title" i18n:translate="">Location</value>\n-       <value key="description" i18n:translate="">The location of an item </value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.absolutePath</element>\n-            <element>plone.app.querystring.operation.string.path</element>\n-            <element>plone.app.querystring.operation.string.relativePath</element>\n-       </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title" i18n:translate="">Short name (id)</value>\n-       <value key="description" i18n:translate="">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-       </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title" i18n:translate="">Creation date</value>\n-       <value key="description" i18n:translate="">The date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-           <element>plone.app.querystring.operation.date.between</element>\n-           <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.today</element>\n-           <element>plone.app.querystring.operation.date.beforeToday</element>\n-           <element>plone.app.querystring.operation.date.afterToday</element>\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="title" i18n:translate="">Creator</value>\n-        <value key="description" i18n:translate="">The person that created an item</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Users</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Description">\n-        <value key="title" i18n:translate="">Description</value>\n-        <value key="description" i18n:translate="">An item\'s description</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effective">\n-        <value key="title" i18n:translate="">Effective date</value>\n-        <value key="description" i18n:translate="">The time and date an item was first published</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effectiveRange">\n-        <value key="title" i18n:translate="">Effective range</value>\n-        <value key="description" i18n:translate="">Querying this is undefined</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.end">\n-        <value key="title" i18n:translate="">Event end date</value>\n-        <value key="description" i18n:translate="">The end date and time of an event</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getObjPositionInParent">\n-        <value key="title" i18n:translate="">Order in folder</value>\n-        <value key="description" i18n:translate="">The order of an item in its parent folder</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.int.is</element>\n-            <element>plone.app.querystring.operation.int.lessThan</element>\n-            <element>plone.app.querystring.operation.int.largerThan</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getRawRelatedItems">\n-        <value key="title" i18n:translate="">Related To</value>\n-        <value key="description" i18n:translate="">Find items related to the selected items</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.reference.is</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.isDefaultPage">\n-        <value key="title" i18n:translate="">Default Page</value>\n-        <value key="description" i18n:translate="">Find items that are the default view for their containing folder.</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.boolean.isTrue</element>\n-            <element>plone.app.querystring.operation.boolean.isFalse</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.isFolderish">\n-        <value key="title" i18n:translate="">Folder-like</value>\n-        <value key="description" i18n:translate="">Find items that can contain other objects</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.boolean.isTrue</element>\n-            <element>plone.app.querystring.operation.boolean.isFalse</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.modified">\n-        <value key="title" i18n:translate="">Modification date</value>\n-        <value key="description" i18n:translate="">The time and date an item was last modified</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.expires">\n-        <value key="title" i18n:translate="">Expiration date</value>\n-        <value key="description" i18n:translate="">The time and date an item was expired</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type">\n-        <value key="title" i18n:translate="">Type</value>\n-        <value key="description" i18n:translate="">An item\'s type (e.g. Event)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.ReallyUserFriendlyTypes</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.show_inactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">Select which roles have the permission to view inactive objects</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.showInactive</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Roles</value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state">\n-        <value key="title" i18n:translate="">Review state</value>\n-        <value key="description" i18n:translate="">An item\'s workflow state (e.g.published)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.WorkflowStates</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.SearchableText">\n-        <value key="title" i18n:translate="">Searchable text</value>\n-        <value key="description" i18n:translate="">Text search of an item\'s contents</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.sortable_title">\n-        <value key="title" i18n:translate="">Sortable Title</value>\n-        <value key="description" i18n:translate="">The item\'s title, transformed for sorting</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.start">\n-        <value key="title" i18n:translate="">Event start date</value>\n-        <value key="description" i18n:translate="">The start date and time of an event</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject">\n-        <value key="title" i18n:translate="">Tag</value>\n-        <value key="description" i18n:translate="">Tags are used for organization of content</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.all</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-       <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Title">\n-        <value key="title" i18n:translate="">Title</value>\n-        <value key="description" i18n:translate="">Text search of an item\'s title</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n+<?xml version="1.0" encoding="utf-8"?>\n+<!-- Operation Definitions --><registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+          i18n:domain="plone"\n+>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.boolean.isTrue"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Yes</value>\n+    <value key="description"\n+           i18n:translate=""\n+    />\n+    <value key="operation">plone.app.querystring.queryparser._isTrue</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.boolean.isFalse"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >No</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._isFalse</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Less than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Larger than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before date</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget">DateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n+    <value key="widget">DateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.between"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Between dates</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._between</value>\n+    <value key="widget">DateRangeWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThanRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Within next</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please enter the number in days.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThanRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThanRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Within last</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please enter the number in days.</value>\n+    <value key="operation">plone.app.querystring.queryparser._moreThanRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.today"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._today</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterToday"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After the current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterToday</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeToday"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before the current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeToday</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before N days in the past</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After N days in the future</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.list.contains"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Contains</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.path.isWithin"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is within</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._pathContains</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.path.isWithinRelative"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is within (relative)</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._pathContainsRelative</value>\n+    <value key="widget">RelativePathWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.reference.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._referenceIs</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.contains"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Contains</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.currentUser"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Current logged in user</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user viewing the querystring results</value>\n+    <value key="operation">plone.app.querystring.queryparser._currentUser</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.showInactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user roles which are allowed to see inactive content</value>\n+    <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.isNot"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is not</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.intselection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.absolutePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Absolute path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the site structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Navigation path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the navigation structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.relativePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Relative path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Use \'../\' to navigate to parent objects.</value>\n+    <value key="operation">plone.app.querystring.queryparser._relativePath</value>\n+    <value key="widget">RelativePathWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.any"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches any of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.none"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches none of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.all"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches all of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._all</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <!-- QueryField declarations  -->\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Location</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The location of an item </value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.absolutePath</element>\n+      <element>plone.app.querystring.operation.string.path</element>\n+      <element>plone.app.querystring.operation.string.relativePath</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Short name (id)</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Creation date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Creator</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The person that created an item</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Users</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Description"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Description</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s description</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effective"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Effective date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was first published</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effectiveRange"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Effective range</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Querying this is undefined</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.end"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Event end date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The end date and time of an event</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getObjPositionInParent"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Order in folder</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The order of an item in its parent folder</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.int.is</element>\n+      <element>plone.app.querystring.operation.int.lessThan</element>\n+      <element>plone.app.querystring.operation.int.largerThan</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getRawRelatedItems"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Related To</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items related to the selected items</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.reference.is</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.isDefaultPage"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Default Page</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items that are the default view for their containing folder.</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.boolean.isTrue</element>\n+      <element>plone.app.querystring.operation.boolean.isFalse</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.isFolderish"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Folder-like</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items that can contain other objects</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.boolean.isTrue</element>\n+      <element>plone.app.querystring.operation.boolean.isFalse</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.modified"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Modification date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was last modified</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.expires"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Expiration date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was expired</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Type</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s type (e.g. Event)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.ReallyUserFriendlyTypes</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.show_inactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Select which roles have the permission to view inactive objects</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.showInactive</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Roles</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Review state</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s workflow state (e.g.published)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.WorkflowStates</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.SearchableText"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Searchable text</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Text search of an item\'s contents</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.sortable_title"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Sortable Title</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The item\'s title, transformed for sorting</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.start"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Event start date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The start date and time of an event</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Tag</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tags are used for organization of content</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.all</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Title"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Title</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Text search of an item\'s title</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_10/registry.xml b/plone/app/querystring/profiles/upgrades/to_10/registry.xml\nindex f4e40e6..b13c2aa 100644\n--- a/plone/app/querystring/profiles/upgrades/to_10/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_10/registry.xml\n@@ -1,13 +1,16 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Users</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Users</value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_11/registry.xml b/plone/app/querystring/profiles/upgrades/to_11/registry.xml\nindex 4f230a0..45a70b7 100644\n--- a/plone/app/querystring/profiles/upgrades/to_11/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_11/registry.xml\n@@ -1,68 +1,98 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeRelativeDate">\n-        <value key="title" i18n:translate="">Before relative Date</value>\n-        <value key="description" i18n:translate="">Before N days in the past</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before N days in the past</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterRelativeDate">\n-        <value key="title" i18n:translate="">After relative Date</value>\n-        <value key="description" i18n:translate="">After N days in the future</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After N days in the future</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.modified">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.modified"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.start">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.start"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.end">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.end"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effective">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effective"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.expires">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.expires"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_14/registry.xml b/plone/app/querystring/profiles/upgrades/to_14/registry.xml\nindex 1c4d6c7..b5b158b 100644\n--- a/plone/app/querystring/profiles/upgrades/to_14/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_14/registry.xml\n@@ -1,72 +1,102 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.isNot">\n-        <value key="title" i18n:translate="">Is not</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.isNot"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is not</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.none">\n-        <value key="title" i18n:translate="">Matches none of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.none"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches none of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId"\n-             purge="False">\n-       <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.sortable_title"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.sortable_title"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_3/registry.xml b/plone/app/querystring/profiles/upgrades/to_3/registry.xml\nindex 23bebf7..6c0ef9e 100644\n--- a/plone/app/querystring/profiles/upgrades/to_3/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_3/registry.xml\n@@ -1,27 +1,41 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-<!-- Operation Definitions -->\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.showInactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">The user roles which are allowed to see inactive content</value>\n-        <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <!-- Operation Definitions -->\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.showInactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user roles which are allowed to see inactive content</value>\n+    <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-<!-- Field Definitions -->\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.show_inactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">Select which roles have the permission to view inactive objects</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.showInactive</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Roles</value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n+  <!-- Field Definitions -->\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.show_inactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Select which roles have the permission to view inactive objects</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.showInactive</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Roles</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_5/registry.xml b/plone/app/querystring/profiles/upgrades/to_5/registry.xml\nindex 7b4c3dd..2ed5c6d 100644\n--- a/plone/app/querystring/profiles/upgrades/to_5/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_5/registry.xml\n@@ -1,34 +1,53 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.absolutePath">\n-        <value key="title" i18n:translate="">Absolute path</value>\n-        <value key="description" i18n:translate="">Location in the site structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.absolutePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Absolute path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the site structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.path">\n-        <value key="title" i18n:translate="">Navigation path</value>\n-        <value key="description" i18n:translate="">Location in the navigation structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Navigation path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the navigation structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.path">\n-        <value key="title" i18n:translate="">Location</value>\n-        <value key="description" i18n:translate="">The location of an item </value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.absolutePath</element>\n-            <element>plone.app.querystring.operation.string.path</element>\n-            <element>plone.app.querystring.operation.string.relativePath</element>\n-        </value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Location</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The location of an item </value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.absolutePath</element>\n+      <element>plone.app.querystring.operation.string.path</element>\n+      <element>plone.app.querystring.operation.string.relativePath</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_6/registry.xml b/plone/app/querystring/profiles/upgrades/to_6/registry.xml\nindex 35779b9..e1eeab4 100644\n--- a/plone/app/querystring/profiles/upgrades/to_6/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_6/registry.xml\n@@ -1,36 +1,52 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.lessThan">\n-        <value key="title" i18n:translate="">Less than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Less than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.largerThan">\n-        <value key="title" i18n:translate="">Larger than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Larger than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.intselection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.intselection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_7/registry.xml b/plone/app/querystring/profiles/upgrades/to_7/registry.xml\nindex 525800f..231345e 100644\n--- a/plone/app/querystring/profiles/upgrades/to_7/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_7/registry.xml\n@@ -1,9 +1,12 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getObjPositionInParent">\n-        <value key="sortable">True</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getObjPositionInParent"\n+  >\n+    <value key="sortable">True</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_8/registry.xml b/plone/app/querystring/profiles/upgrades/to_8/registry.xml\nindex b009b4d..a124940 100644\n--- a/plone/app/querystring/profiles/upgrades/to_8/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_8/registry.xml\n@@ -1,35 +1,54 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.any">\n-        <value key="title" i18n:translate="">Matches any of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.any"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches any of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.all">\n-        <value key="title" i18n:translate="">Matches all of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._all</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.all"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches all of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._all</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject">\n-        <value key="title" i18n:translate="">Tag</value>\n-        <value key="description" i18n:translate="">Tags are used for organization of content</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.all</element>\n-        </value>\n-       <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Tag</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tags are used for organization of content</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.all</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n \n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_9/registry.xml b/plone/app/querystring/profiles/upgrades/to_9/registry.xml\nindex 5ccb7a7..0bc5cae 100644\n--- a/plone/app/querystring/profiles/upgrades/to_9/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_9/registry.xml\n@@ -1,27 +1,32 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+    </value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/results.pt b/plone/app/querystring/results.pt\nindex c96711a..dc6ef19 100644\n--- a/plone/app/querystring/results.pt\n+++ b/plone/app/querystring/results.pt\n@@ -3,99 +3,130 @@\n     the selection screen). the html snippet is loaded in directly so that is why\n     there are no html and body tags\n </tal:comment>\n-<div tal:define="results context;\n-                 limited_results python:context[:25];\n-                 original_context nocall:options/original_context|nocall:context;\n-                 toLocalizedTime nocall:original_context/@@plone/toLocalizedTime;\n-                 pas_member original_context/@@pas_member;\n-                 normalize nocall: context/@@plone/normalizeString;"\n-    i18n:domain="plone">\n+<div tal:define="\n+       results context;\n+       limited_results python:context[:25];\n+       original_context nocall:options/original_context|nocall:context;\n+       toLocalizedTime nocall:original_context/@@plone/toLocalizedTime;\n+       pas_member original_context/@@pas_member;\n+       normalize nocall: context/@@plone/normalizeString;\n+     "\n+     i18n:domain="plone"\n+>\n \n-    <span i18n:translate="batch_x_items_matching_your_criteria">\n-        <strong i18n:name="number" id="search-results-number"\n-                tal:content="results/actual_result_count">234</strong>\n+  <span i18n:translate="batch_x_items_matching_your_criteria">\n+    <strong id="search-results-number"\n+            tal:content="results/actual_result_count"\n+            i18n:name="number"\n+    >234</strong>\n         items matching your search terms.\n-    </span>\n+  </span>\n \n-    <div id="search-results">\n-        <p tal:condition="not: results">\n-            <strong i18n:translate="description_no_results_found">\n+  <div id="search-results">\n+    <p tal:condition="not: results">\n+      <strong i18n:translate="description_no_results_found">\n                 No results were found.\n-            </strong>\n-        </p>\n+      </strong>\n+    </p>\n \n-        <dl class="searchResults" tal:condition="limited_results">\n-            <tal:results repeat="item limited_results">\n-                <tal:entry tal:define="author python:pas_member.info(item.Creator());\n-                \t                   item_state python:\'state-\'+item.review_state();\n-                \t                   item_type python:\'contenttype-\'+normalize(item.portal_type)">\n-                    <dt>\n+    <dl class="searchResults"\n+        tal:condition="limited_results"\n+    >\n+      <tal:results repeat="item limited_results">\n+        <tal:entry tal:define="\n+                     author python:pas_member.info(item.Creator());\n+                     item_state python:\'state-\'+item.review_state();\n+                     item_type python:\'contenttype-\'+normalize(item.portal_type);\n+                   ">\n+          <dt>\n \n-                      <img tal:define="getIcon python:item.getURL()+\'/@@images/image/icon\'"\n-                           tal:condition="item/getIcon"\n-                           tal:attributes="href item/getURL;\n-                                           src  string:$getIcon" />\n-                       <a\n-                         href="#"\n-                         tal:attributes="href item/getURL;\n-                                         class  string:$item_state $item_type"\n-                         tal:content="item/Title" />\n+            <img tal:define="\n+                   getIcon python:item.getURL()+\'/@@images/image/icon\';\n+                 "\n+                 tal:condition="item/getIcon"\n+                 tal:attributes="\n+                   href item/getURL;\n+                   src  string:$getIcon;\n+                 "\n+            />\n+            <a href="#"\n+               tal:content="item/Title"\n+               tal:attributes="\n+                 href item/getURL;\n+                 class  string:$item_state $item_type;\n+               "\n+            ></a>\n \n-                        <span class="documentByLine">\n-                            <span class="documentAuthor"\n-                                i18n:translate="label_by_author" tal:condition="author/fullname">\n+            <span class="documentByLine">\n+              <span class="documentAuthor"\n+                    tal:condition="author/fullname"\n+                    i18n:translate="label_by_author"\n+              >\n                             by\n-                                  <a href="#"\n-                                     tal:content="author/fullname"\n-                                     tal:omit-tag="not:item/Creator"\n-                                     tal:attributes="href string:${original_context/@@plone_portal_state/navigation_root_url}/author/${author/username}"\n-                                     i18n:name="author">\n+                <a href="#"\n+                   tal:content="author/fullname"\n+                   tal:omit-tag="not:item/Creator"\n+                   tal:attributes="\n+                     href string:${original_context/@@plone_portal_state/navigation_root_url}/author/${author/username};\n+                   "\n+                   i18n:name="author"\n+                >\n                                     Bob Dobalina\n-                                  </a>\n-                            </span>\n+                </a>\n+              </span>\n \n-                            <span class="documentModified">\n+              <span class="documentModified">\n                               &mdash;\n-                                <span i18n:translate="box_last_modified">\n+                <span i18n:translate="box_last_modified">\n                                 last modified\n-                                </span>\n-                                <span tal:replace="python:toLocalizedTime(item.ModificationDate())"\n-                                      tal:on-error="string:?">\n+                </span>\n+                <span tal:replace="python:toLocalizedTime(item.ModificationDate())"\n+                      tal:on-error="string:?"\n+                >\n                                 August 16, 2001 at 23:35:59\n-                                </span>\n-                            </span>\n+                </span>\n+              </span>\n \n-                            <span tal:define="categories item/Subject|nothing"\n-                                  tal:condition="categories">\n+              <span tal:define="\n+                      categories item/Subject|nothing;\n+                    "\n+                    tal:condition="categories"\n+              >\n                                 &mdash;\n-                                <tal:filedunder i18n:translate="">filed under:</tal:filedunder>\n-                                    <span tal:repeat="category categories">\n-                                        <a href=""\n-                                           class="link-category"\n-                                           rel="tag"\n-                                           tal:content="category"\n-                                           tal:attributes="href string:${original_context/@@plone_portal_state/navigation_root_url}/search?Subject%3Alist=${category}">\n+                <tal:filedunder i18n:translate="">filed under:</tal:filedunder>\n+                <span tal:repeat="category categories">\n+                  <a class="link-category"\n+                     href=""\n+                     rel="tag"\n+                     tal:content="category"\n+                     tal:attributes="\n+                       href string:${original_context/@@plone_portal_state/navigation_root_url}/search?Subject%3Alist=${category};\n+                     "\n+                  >\n                                            Category\n-                                        </a><tal:separator condition="not: repeat/category/end">,</tal:separator>\n-                                    </span>\n-                            </span>\n-                        </span>\n-                    </dt>\n-                    <dd>\n-                        <span tal:replace="item/Description">\n+                  </a><tal:separator condition="not: repeat/category/end">,</tal:separator>\n+                </span>\n+              </span>\n+            </span>\n+          </dt>\n+          <dd>\n+            <span tal:replace="item/Description">\n                             Cropped description\n-                        </span>\n-                        <span class="documentLocation">\n-                            <a href=""\n-                               class="link-location"\n-                               tal:content="item/getPath"\n-                               tal:attributes="href item/getURL">\n+            </span>\n+            <span class="documentLocation">\n+              <a class="link-location"\n+                 href=""\n+                 tal:content="item/getPath"\n+                 tal:attributes="\n+                   href item/getURL;\n+                 "\n+              >\n                                 Location\n-                            </a>\n-                        </span>\n-                   </dd>\n-                </tal:entry>\n-            </tal:results>\n-        </dl>\n-    </div>\n+              </a>\n+            </span>\n+          </dd>\n+        </tal:entry>\n+      </tal:results>\n+    </dl>\n+  </div>\n </div>\ndiff --git a/plone/app/querystring/tests/configure.zcml b/plone/app/querystring/tests/configure.zcml\nindex afe68fe..4a1b804 100644\n--- a/plone/app/querystring/tests/configure.zcml\n+++ b/plone/app/querystring/tests/configure.zcml\n@@ -1,16 +1,17 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-    <include package="plone.app.registry" />\n+  <include package="plone.app.registry" />\n \n-    <genericsetup:registerProfile\n-        name="registry"\n-        title="Tests for plone.app.querystring"\n-        directory="profiles/registry"\n-        description="Test values for the registry integration tests"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="registry"\n+      title="Tests for plone.app.querystring"\n+      description="Test values for the registry integration tests"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/registry"\n+      />\n \n </configure>\ndiff --git a/plone/app/querystring/tests/profiles/registry/metadata.xml b/plone/app/querystring/tests/profiles/registry/metadata.xml\nindex 06dcbf7..564c42f 100644\n--- a/plone/app/querystring/tests/profiles/registry/metadata.xml\n+++ b/plone/app/querystring/tests/profiles/registry/metadata.xml\n@@ -1,7 +1,7 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1</version>\n   <dependencies>\n-      <dependency>profile-plone.app.registry:default</dependency>\n+    <dependency>profile-plone.app.registry:default</dependency>\n   </dependencies>\n </metadata>\ndiff --git a/plone/app/querystring/tests/profiles/registry/registry.xml b/plone/app/querystring/tests/profiles/registry/registry.xml\nindex a02eac2..75bf59d 100644\n--- a/plone/app/querystring/tests/profiles/registry/registry.xml\n+++ b/plone/app/querystring/tests/profiles/registry/registry.xml\n@@ -1,31 +1,34 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">Is</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">Is</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">Before date</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">Before date</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title">Short name (id)</value>\n-       <value key="description">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-       </value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title">Short name (id)</value>\n+    <value key="description">The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="group">Metadata</value>\n+  </records>\n \n </registry>\n-\ndiff --git a/plone/app/querystring/tests/registry_minimal_correct.xml b/plone/app/querystring/tests/registry_minimal_correct.xml\nindex 207bed6..e213695 100644\n--- a/plone/app/querystring/tests/registry_minimal_correct.xml\n+++ b/plone/app/querystring/tests/registry_minimal_correct.xml\n@@ -1,50 +1,56 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">equals</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">equals</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">before</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">before</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThan">\n-        <value key="title">after</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThan"\n+  >\n+    <value key="title">after</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title">Short Name</value>\n-       <value key="description">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-       </value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title">Short Name</value>\n+    <value key="description">The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="group">Metadata</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title">Creation Date</value>\n-       <value key="description">The time and date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-       </value>\n-       <value key="group">Dates</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title">Creation Date</value>\n+    <value key="description">The time and date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+    </value>\n+    <value key="group">Dates</value>\n+  </records>\n </registry>\ndiff --git a/plone/app/querystring/tests/registry_test_missing_operator.xml b/plone/app/querystring/tests/registry_test_missing_operator.xml\nindex 81de888..763bc73 100644\n--- a/plone/app/querystring/tests/registry_test_missing_operator.xml\n+++ b/plone/app/querystring/tests/registry_test_missing_operator.xml\n@@ -1,22 +1,25 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">before</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser:_lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">before</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser:_lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title">Creation Date</value>\n-       <value key="description">The time and date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-       </value>\n-       <value key="group">Dates</value>\n-    </records>\n-</registry>\n\\ No newline at end of file\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title">Creation Date</value>\n+    <value key="description">The time and date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+    </value>\n+    <value key="group">Dates</value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/querystring/tests/registry_test_vocabulary.xml b/plone/app/querystring/tests/registry_test_vocabulary.xml\nindex 407524d..529d420 100644\n--- a/plone/app/querystring/tests/registry_test_vocabulary.xml\n+++ b/plone/app/querystring/tests/registry_test_vocabulary.xml\n@@ -1,22 +1,25 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">equals</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">equals</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.reviewState">\n-        <value key="title">Review state</value>\n-        <value key="description">An item\'s workflow state (e.g.published)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-        </value>\n-        <value key="vocabulary">plone.app.querystring.tests.testvocabulary</value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.reviewState"\n+  >\n+    <value key="title">Review state</value>\n+    <value key="description">An item\'s workflow state (e.g.published)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="vocabulary">plone.app.querystring.tests.testvocabulary</value>\n+    <value key="group">Metadata</value>\n+  </records>\n </registry>\ndiff --git a/plone/app/querystring/upgrades.zcml b/plone/app/querystring/upgrades.zcml\nindex dfd40f4..07c2e23 100644\n--- a/plone/app/querystring/upgrades.zcml\n+++ b/plone/app/querystring/upgrades.zcml\n@@ -1,20 +1,22 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup">\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    >\n \n   <genericsetup:upgradeStep\n-      source="1"\n-      destination="2"\n       title="Fix Typo in Registry"\n       description="Migrate registry to fix a typo."\n       profile="plone.app.querystring:default"\n+      source="1"\n+      destination="2"\n       handler=".upgrades.upgrade_1_to_2_typo_in_registry"\n       />\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="2"\n       destination="3"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add show inactive operation and field"\n         import_profile="plone.app.querystring:upgrade_to_3"\n@@ -22,9 +24,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="3"\n       destination="4"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix wrong vocabulary declaration of the show_inactive field"\n         import_profile="plone.app.querystring:upgrade_to_3"\n@@ -32,9 +35,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="4"\n       destination="5"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add navigation path query operation and modify referring field"\n         import_profile="plone.app.querystring:upgrade_to_5"\n@@ -42,9 +46,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="5"\n       destination="6"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix int operators"\n         import_profile="plone.app.querystring:upgrade_to_6"\n@@ -52,9 +57,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="6"\n       destination="7"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix getObjPositionInParent be sortable by default"\n         import_profile="plone.app.querystring:upgrade_to_7"\n@@ -62,9 +68,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="7"\n       destination="8"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Change subject operations to selection.any and selection.all"\n         import_profile="plone.app.querystring:upgrade_to_8"\n@@ -72,9 +79,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="8"\n       destination="9"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Use selection.any operation"\n         description="Replace selection.is with selection.any for portal_types and review_state operations, and add selection.any for Creator operations."\n@@ -88,9 +96,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="9"\n       destination="10"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Update Creator"\n         description="Add users vocabulary and remove \'is\' operator from plone.app.querystring.field.Creator"\n@@ -103,9 +112,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="10"\n       destination="11"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add new \'before/after relative Date\' operation"\n         import_profile="plone.app.querystring:upgrade_to_11"\n@@ -113,18 +123,19 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeStep\n-      source="11"\n-      destination="12"\n       title="Fix existing collections"\n-      profile="plone.app.querystring:default"\n       description="Fix indexes on existing collections by changing \'is\' operators to \'any\'"\n+      profile="plone.app.querystring:default"\n+      source="11"\n+      destination="12"\n       handler=".upgrades.fix_select_all_existing_collections"\n       />\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="12"\n       destination="13"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeStep\n         title="Fix ISyndicatableCollection objects"\n         description="Fix indexes on Dexterity objects by changing \'is\' operators to \'any\'. All objects using the Collection behavior are fixed."\n@@ -138,9 +149,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="13"\n       destination="14"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add new \'string.isNot\' and \'selection.none\' query operators."\n         import_profile="plone.app.querystring:upgrade_to_14"\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:43:54+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/c838c3255f0d2bf3f47ecf15b82c355a0592497e

feat: codespell

Files changed:
M CHANGES.rst
M plone/app/querystring/querybuilder.py
M plone/app/querystring/registryreader.py
M plone/app/querystring/tests/testQueryBuilder.py
M plone/app/querystring/tests/testQueryParser.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 963f5c4..7dd88ab 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -215,7 +215,7 @@ New features:\n - Refactor addition of criteria to stick inside ``INavigationRoot`` in querybuilder.\n   Added a simple ``IQueryModifier`` interfaces expecting a query and returning a query.\n   Iterates over all sorted utilities providing such an interfaces and calls it right before the query is parsed.\n-  Code to add the ``INavigationRoot`` stickyness was moved to such a query modifier.\n+  Code to add the ``INavigationRoot`` stickiness was moved to such a query modifier.\n   [jensens]\n \n Bug fixes:\n@@ -547,7 +547,7 @@ Fixes:\n   results not wrapped as an IContentListing.\n   [davisagli]\n \n-* Declare all dependencies in setup.py to resolve a dependeny problem in\n+* Declare all dependencies in setup.py to resolve a dependency problem in\n   test setups, where the Plone stack isn\'t fully loaded.\n   [thet]\n \ndiff --git a/plone/app/querystring/querybuilder.py b/plone/app/querystring/querybuilder.py\nindex f72226e..d9ef15b 100644\n--- a/plone/app/querystring/querybuilder.py\n+++ b/plone/app/querystring/querybuilder.py\n@@ -217,7 +217,7 @@ def _makequery(\n \n         if isinstance(custom_query, dict) and custom_query:\n             # Update the parsed query with an extra query dictionary. This may\n-            # override the parsed query. The custom_query is a dictonary of\n+            # override the parsed query. The custom_query is a dictionary of\n             # index names and their associated query values.\n             for key in custom_query:\n                 if isinstance(parsedquery.get(key), dict) and isinstance(\ndiff --git a/plone/app/querystring/registryreader.py b/plone/app/querystring/registryreader.py\nindex 83e85ce..5926a5f 100644\n--- a/plone/app/querystring/registryreader.py\n+++ b/plone/app/querystring/registryreader.py\n@@ -53,16 +53,16 @@ def parseRegistry(self):\n             if not record.startswith(self.prefix):\n                 continue\n \n-            splitted = record.split(".")\n+            split = record.split(".")\n             current = result\n-            for x in splitted[:-1]:\n+            for x in split[:-1]:\n                 # create the key if it\'s not there\n                 if x not in current:\n                     current[x] = {}\n                 current = current[x]\n \n             # store actual key/value\n-            key = splitted[-1]\n+            key = split[-1]\n             value = self.context.records[record].value\n             if isinstance(value, Message):\n                 value = translate(value, context=self.request)\ndiff --git a/plone/app/querystring/tests/testQueryBuilder.py b/plone/app/querystring/tests/testQueryBuilder.py\nindex 050e189..4c39838 100644\n--- a/plone/app/querystring/tests/testQueryBuilder.py\n+++ b/plone/app/querystring/tests/testQueryBuilder.py\n@@ -53,7 +53,7 @@ def testQueryBuilderNumberOfResults(self):\n     def testQueryBuilderNumberOfResultsView(self):\n         res = self.folder.restrictedTraverse("@@querybuildernumberofresults")\n         length_of_results = res.browserDefault(None)[0](self.query)\n-        # apparently brower travelsal is different from the traversal we get\n+        # apparently browser traversal is different from the traversal we get\n         # from restrictedTraverse. This did hurt a bit.\n         numeric = int(length_of_results.split(" ")[0])\n         self.assertEqual(numeric, 1)\ndiff --git a/plone/app/querystring/tests/testQueryParser.py b/plone/app/querystring/tests/testQueryParser.py\nindex a68239d..f2e2e04 100644\n--- a/plone/app/querystring/tests/testQueryParser.py\n+++ b/plone/app/querystring/tests/testQueryParser.py\n@@ -502,7 +502,7 @@ def test__today(self):\n         self.assertEqual(parsed, expected)\n \n     def test__path(self):\n-        # absoute path from plone site root\n+        # absolute path from plone site root\n         data = Row(index="path", operator="_path", values="/news/")\n         parsed = queryparser._absolutePath(MockSite(), data)\n         expected = {"path": {"query": ["/%s/news/" % MOCK_SITE_ID]}}\n@@ -515,7 +515,7 @@ def test__path(self):\n         self.assertEqual(parsed, expected)\n \n     def test__navigationPath(self):\n-        # absoute path from plone site root\n+        # absolute path from plone site root\n         # Search base\n         context = MockObject(uid="00000000000000001", path="/%s/foo/bar" % MOCK_SITE_ID)\n         # Nav root\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:43:54+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/51def716aef17de76e3b8e0d03b27cee9f270455

feat: flake8

Files changed:
M plone/app/querystring/testing.py
M plone/app/querystring/tests/testQueryBuilderModifiers.py

b'diff --git a/plone/app/querystring/testing.py b/plone/app/querystring/testing.py\nindex d3ff66d..17e96f3 100644\n--- a/plone/app/querystring/testing.py\n+++ b/plone/app/querystring/testing.py\n@@ -6,7 +6,6 @@\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n from plone.app.testing.layers import IntegrationTesting\n-from plone.testing import z2\n from zope.configuration import xmlconfig\n \n \ndiff --git a/plone/app/querystring/tests/testQueryBuilderModifiers.py b/plone/app/querystring/tests/testQueryBuilderModifiers.py\nindex 75a2ea2..6f2c2b5 100644\n--- a/plone/app/querystring/tests/testQueryBuilderModifiers.py\n+++ b/plone/app/querystring/tests/testQueryBuilderModifiers.py\n@@ -55,7 +55,7 @@ def testModifierNotCalled(self):\n \n         try:\n             results = self.querybuilder(query=query)\n-        except:\n+        except Exception:\n             self.fail("Unexpected: index modifier has been called")\n         self.assertEqual(len(results), 1)\n         self.assertEqual(results[0].Title(), "Collectionstestpage")\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:43:54+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/2e2f76dfc8d3570981d66b3d6ffb2cccb366622a

fix: allow tests to run

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex e0f5b5f..45e646b 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -61,6 +61,7 @@\n     extras_require={\n         "test": [\n             "plone.app.testing",\n+            "plone.app.contenttypes[test]",\n         ]\n     },\n     entry_points="""\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:43:55+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/3df4c0754d1bb7a01e613c6e2c0e80f76cd42750

feat: configure z3c.dependencychecker

Files changed:
M pyproject.toml

b"diff --git a/pyproject.toml b/pyproject.toml\nindex 9d0c563..927c79b 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -60,3 +60,4 @@ Zope = [\n   'Products.CMFDynamicViewFTI', 'zope.deprecation',\n ]\n python-dateutil = ['dateutil']\n+'Products.ZCatalog' = ['Products.ZCTextIndex']\n"

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T02:43:55+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/7daf7498fb4e89c513e9fcfb33c3fe41dfa3958f

feat: declare dependencies

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 45e646b..64f748c 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -39,24 +39,20 @@\n     zip_safe=False,\n     python_requires=">=3.8",\n     install_requires=[\n-        "DateTime",\n         "plone.app.contentlisting",\n         "plone.app.layout",\n         "plone.app.registry>=1.1",\n         "plone.base",\n         "plone.batching",\n+        "plone.i18n",\n         "plone.registry",\n-        "Products.CMFCore",\n+        "plone.uuid",\n+        "Products.GenericSetup",\n+        "Products.ZCatalog",\n         "python-dateutil",\n-        "setuptools",\n-        "zope.component",\n+        "Zope",\n         "zope.dottedname",\n         "zope.globalrequest",\n-        "zope.i18n",\n-        "zope.i18nmessageid",\n-        "zope.interface",\n-        "zope.publisher",\n-        "zope.schema",\n     ],\n     extras_require={\n         "test": [\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-13T15:05:32+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.querystring/commit/ab445040035a019ec7aa8e6c8583955fb4f01bd3

Tests: prevent ValueError: Unicode strings with encoding declaration are not supported.

Files changed:
M plone/app/querystring/tests/testRegistryReader.py

b'diff --git a/plone/app/querystring/tests/testRegistryReader.py b/plone/app/querystring/tests/testRegistryReader.py\nindex bb8a1cc..f348bcd 100644\n--- a/plone/app/querystring/tests/testRegistryReader.py\n+++ b/plone/app/querystring/tests/testRegistryReader.py\n@@ -44,6 +44,13 @@ def createRegistry(self, xml):\n         gsm.registerUtility(self.registry, IRegistry)\n \n         importer = RegistryImporter(self.registry, self)\n+        if isinstance(xml, str):\n+            # String can work, but not when it has an encoding declaration.\n+            # It would give a ValueError:\n+            # "Unicode strings with encoding declaration are not supported.\n+            # Please use bytes input or XML fragments without declaration."\n+\n+            xml = xml.encode("utf-8")\n         importer.importDocument(xml)\n         return self.registry\n \n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-03-14T02:16:38+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.querystring/commit/2374e2f072148091464d515e0505f958030acf91

Merge pull request #121 from plone/config-with-default-template-dcfc6395

Config with default template

Files changed:
A .editorconfig
A .meta.toml
A .pre-commit-config.yaml
A news/a533099d.internal
A tox.ini
M CHANGES.rst
M plone/app/querystring/configure.zcml
M plone/app/querystring/indexmodifiers/configure.zcml
M plone/app/querystring/profiles.zcml
M plone/app/querystring/profiles/default/metadata.xml
M plone/app/querystring/profiles/default/registry.xml
M plone/app/querystring/profiles/upgrades/to_10/registry.xml
M plone/app/querystring/profiles/upgrades/to_11/registry.xml
M plone/app/querystring/profiles/upgrades/to_14/registry.xml
M plone/app/querystring/profiles/upgrades/to_3/registry.xml
M plone/app/querystring/profiles/upgrades/to_5/registry.xml
M plone/app/querystring/profiles/upgrades/to_6/registry.xml
M plone/app/querystring/profiles/upgrades/to_7/registry.xml
M plone/app/querystring/profiles/upgrades/to_8/registry.xml
M plone/app/querystring/profiles/upgrades/to_9/registry.xml
M plone/app/querystring/querybuilder.py
M plone/app/querystring/registryreader.py
M plone/app/querystring/results.pt
M plone/app/querystring/testing.py
M plone/app/querystring/tests/configure.zcml
M plone/app/querystring/tests/profiles/registry/metadata.xml
M plone/app/querystring/tests/profiles/registry/registry.xml
M plone/app/querystring/tests/registry_minimal_correct.xml
M plone/app/querystring/tests/registry_test_missing_operator.xml
M plone/app/querystring/tests/registry_test_vocabulary.xml
M plone/app/querystring/tests/testQueryBuilder.py
M plone/app/querystring/tests/testQueryBuilderModifiers.py
M plone/app/querystring/tests/testQueryParser.py
M plone/app/querystring/tests/testRegistryReader.py
M plone/app/querystring/upgrades.zcml
M pyproject.toml
M setup.cfg
M setup.py

b'diff --git a/.editorconfig b/.editorconfig\nnew file mode 100644\nindex 0000000..b4158b8\n--- /dev/null\n+++ b/.editorconfig\n@@ -0,0 +1,39 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+#\n+# EditorConfig Configuration file, for more details see:\n+# http://EditorConfig.org\n+# EditorConfig is a convention description, that could be interpreted\n+# by multiple editors to enforce common coding conventions for specific\n+# file types\n+\n+# top-most EditorConfig file:\n+# Will ignore other EditorConfig files in Home directory or upper tree level.\n+root = true\n+\n+\n+[*]  # For All Files\n+# Unix-style newlines with a newline ending every file\n+end_of_line = lf\n+insert_final_newline = true\n+trim_trailing_whitespace = true\n+# Set default charset\n+charset = utf-8\n+# Indent style default\n+indent_style = space\n+# Max Line Length - a hard line wrap, should be disabled\n+max_line_length = off\n+\n+[*.{py,cfg,ini}]\n+# 4 space indentation\n+indent_size = 4\n+\n+[*.{yml,zpt,pt,dtml,zcml}]\n+# 2 space indentation\n+indent_size = 2\n+\n+[{Makefile,.gitmodules}]\n+# Tab indentation (no size specified, but view as 4 spaces)\n+indent_style = tab\n+indent_size = unset\n+tab_width = unset\ndiff --git a/.meta.toml b/.meta.toml\nnew file mode 100644\nindex 0000000..0df002c\n--- /dev/null\n+++ b/.meta.toml\n@@ -0,0 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[meta]\n+template = "default"\n+commit-id = "a533099d"\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nnew file mode 100644\nindex 0000000..582f8ac\n--- /dev/null\n+++ b/.pre-commit-config.yaml\n@@ -0,0 +1,42 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+ci:\n+    autofix_prs: false\n+    autoupdate_schedule: monthly\n+\n+repos:\n+-   repo: https://github.com/asottile/pyupgrade\n+    rev: v3.3.1\n+    hooks:\n+    -   id: pyupgrade\n+        args: [--py38-plus]\n+-   repo: https://github.com/pycqa/isort\n+    rev: 5.12.0\n+    hooks:\n+    -   id: isort\n+-   repo: https://github.com/psf/black\n+    rev: 23.1.0\n+    hooks:\n+    -   id: black\n+-   repo: https://github.com/collective/zpretty\n+    rev: 3.0.2\n+    hooks:\n+    -   id: zpretty\n+-   repo: https://github.com/PyCQA/flake8\n+    rev: 6.0.0\n+    hooks:\n+    -   id: flake8\n+-   repo: https://github.com/codespell-project/codespell\n+    rev: v2.2.2\n+    hooks:\n+    -   id: codespell\n+        additional_dependencies:\n+          - tomli\n+-   repo: https://github.com/mgedmin/check-manifest\n+    rev: "0.49"\n+    hooks:\n+    -   id: check-manifest\n+-   repo: https://github.com/regebro/pyroma\n+    rev: "4.2"\n+    hooks:\n+    -   id: pyroma\ndiff --git a/CHANGES.rst b/CHANGES.rst\nindex 963f5c4..7dd88ab 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -215,7 +215,7 @@ New features:\n - Refactor addition of criteria to stick inside ``INavigationRoot`` in querybuilder.\n   Added a simple ``IQueryModifier`` interfaces expecting a query and returning a query.\n   Iterates over all sorted utilities providing such an interfaces and calls it right before the query is parsed.\n-  Code to add the ``INavigationRoot`` stickyness was moved to such a query modifier.\n+  Code to add the ``INavigationRoot`` stickiness was moved to such a query modifier.\n   [jensens]\n \n Bug fixes:\n@@ -547,7 +547,7 @@ Fixes:\n   results not wrapped as an IContentListing.\n   [davisagli]\n \n-* Declare all dependencies in setup.py to resolve a dependeny problem in\n+* Declare all dependencies in setup.py to resolve a dependency problem in\n   test setups, where the Plone stack isn\'t fully loaded.\n   [thet]\n \ndiff --git a/news/a533099d.internal b/news/a533099d.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/a533099d.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/plone/app/querystring/configure.zcml b/plone/app/querystring/configure.zcml\nindex c9b8f79..92ee3ee 100644\n--- a/plone/app/querystring/configure.zcml\n+++ b/plone/app/querystring/configure.zcml\n@@ -1,8 +1,9 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n     xmlns:browser="http://namespaces.zope.org/browser"\n-    i18n_domain="plone">\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone"\n+    >\n \n   <include file="profiles.zcml" />\n   <include file="upgrades.zcml" />\n@@ -12,55 +13,55 @@\n   <include package=".indexmodifiers" />\n \n   <adapter\n-    for="plone.registry.interfaces.IRegistry"\n-    factory=".registryreader.QuerystringRegistryReader"\n-    />\n+      factory=".registryreader.QuerystringRegistryReader"\n+      for="plone.registry.interfaces.IRegistry"\n+      />\n \n   <adapter\n-    for="plone.registry.interfaces.IRegistry\n-         zope.publisher.interfaces.http.IHTTPRequest"\n-    factory=".registryreader.QuerystringRegistryReader"\n-    />\n+      factory=".registryreader.QuerystringRegistryReader"\n+      for="plone.registry.interfaces.IRegistry\n+           zope.publisher.interfaces.http.IHTTPRequest"\n+      />\n \n   <browser:page\n-    name="display_query_results"\n-    class=".querybuilder.ContentListingView"\n-    permission="zope2.View"\n-    for="*"\n-    template="results.pt"\n-    />\n+      name="display_query_results"\n+      for="*"\n+      class=".querybuilder.ContentListingView"\n+      template="results.pt"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilderresults"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    for="*"\n-    />\n+      name="querybuilderresults"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilder_html_results"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    attribute="html_results"\n-    for="*"\n-    />\n+      name="querybuilder_html_results"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      attribute="html_results"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuildernumberofresults"\n-    class=".querybuilder.QueryBuilder"\n-    permission="zope2.View"\n-    for="*"\n-    attribute="number_of_results"\n-    />\n+      name="querybuildernumberofresults"\n+      for="*"\n+      class=".querybuilder.QueryBuilder"\n+      attribute="number_of_results"\n+      permission="zope2.View"\n+      />\n \n   <browser:page\n-    name="querybuilderjsonconfig"\n-    class=".querybuilder.RegistryConfiguration"\n-    permission="zope2.View"\n-    for="*"\n-    />\n+      name="querybuilderjsonconfig"\n+      for="*"\n+      class=".querybuilder.RegistryConfiguration"\n+      permission="zope2.View"\n+      />\n   <utility\n-    component=".querymodifiers.modify_query_to_enforce_navigation_root"\n-    name="1000"\n-    />\n+      name="1000"\n+      component=".querymodifiers.modify_query_to_enforce_navigation_root"\n+      />\n </configure>\ndiff --git a/plone/app/querystring/indexmodifiers/configure.zcml b/plone/app/querystring/indexmodifiers/configure.zcml\nindex b17480f..f17ef7c 100644\n--- a/plone/app/querystring/indexmodifiers/configure.zcml\n+++ b/plone/app/querystring/indexmodifiers/configure.zcml\n@@ -1,46 +1,47 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-    <utility\n-        factory=".query_index_modifiers.Subject"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="Subject"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.Date"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="Date"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.created"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="created"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.effective"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="effective"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.end"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="end"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.expires"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="expires"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.modified"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="modified"\n-        />\n-    <utility\n-        factory=".query_index_modifiers.start"\n-        provides="..interfaces.IParsedQueryIndexModifier"\n-        name="start"\n-        />\n+  <utility\n+      factory=".query_index_modifiers.Subject"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="Subject"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.Date"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="Date"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.created"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="created"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.effective"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="effective"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.end"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="end"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.expires"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="expires"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.modified"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="modified"\n+      />\n+  <utility\n+      factory=".query_index_modifiers.start"\n+      provides="..interfaces.IParsedQueryIndexModifier"\n+      name="start"\n+      />\n \n </configure>\ndiff --git a/plone/app/querystring/profiles.zcml b/plone/app/querystring/profiles.zcml\nindex 7a559ee..f042058 100644\n--- a/plone/app/querystring/profiles.zcml\n+++ b/plone/app/querystring/profiles.zcml\n@@ -1,92 +1,93 @@\n <configure\n-        xmlns="http://namespaces.zope.org/zope"\n-        xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-        i18n_domain="plone">\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone"\n+    >\n \n-    <utility\n-        factory=".hiddenprofiles.HiddenProfiles"\n-        name="plone.app.querystring"\n-        provides="plone.base.interfaces.INonInstallable"\n-        />\n+  <utility\n+      factory=".hiddenprofiles.HiddenProfiles"\n+      provides="plone.base.interfaces.INonInstallable"\n+      name="plone.app.querystring"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="default"\n-        title="Querystring parser/builder"\n-        directory="profiles/default"\n-        description="Querystring parser and builder, building block and transformer for the new style collections"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="default"\n+      title="Querystring parser/builder"\n+      description="Querystring parser and builder, building block and transformer for the new style collections"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/default"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_3"\n-        title="Querystring Upgrade profile to v3"\n-        description=""\n-        directory="profiles/upgrades/to_3"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_3"\n+      title="Querystring Upgrade profile to v3"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_3"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_5"\n-        title="Querystring Upgrade profile to v5"\n-        description=""\n-        directory="profiles/upgrades/to_5"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_5"\n+      title="Querystring Upgrade profile to v5"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_5"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_6"\n-        title="Querystring Upgrade profile to v6"\n-        description=""\n-        directory="profiles/upgrades/to_6"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_6"\n+      title="Querystring Upgrade profile to v6"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_6"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_7"\n-        title="Querystring Upgrade profile to v7"\n-        description=""\n-        directory="profiles/upgrades/to_7"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_7"\n+      title="Querystring Upgrade profile to v7"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_7"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_8"\n-        title="Querystring Upgrade profile to v8"\n-        description=""\n-        directory="profiles/upgrades/to_8"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_8"\n+      title="Querystring Upgrade profile to v8"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_8"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_9"\n-        title="Querystring Upgrade profile to v9"\n-        description=""\n-        directory="profiles/upgrades/to_9"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_9"\n+      title="Querystring Upgrade profile to v9"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_9"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_10"\n-        title="Querystring Upgrade profile to v10"\n-        description=""\n-        directory="profiles/upgrades/to_10"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_10"\n+      title="Querystring Upgrade profile to v10"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_10"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_11"\n-        title="Querystring Upgrade profile to v11"\n-        description=""\n-        directory="profiles/upgrades/to_11"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_11"\n+      title="Querystring Upgrade profile to v11"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_11"\n+      />\n \n-    <genericsetup:registerProfile\n-        name="upgrade_to_14"\n-        title="Querystring Upgrade profile to v14"\n-        description=""\n-        directory="profiles/upgrades/to_14"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="upgrade_to_14"\n+      title="Querystring Upgrade profile to v14"\n+      description=""\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/upgrades/to_14"\n+      />\n \n- </configure>\n+</configure>\ndiff --git a/plone/app/querystring/profiles/default/metadata.xml b/plone/app/querystring/profiles/default/metadata.xml\nindex 610f8d1..3949c2a 100644\n--- a/plone/app/querystring/profiles/default/metadata.xml\n+++ b/plone/app/querystring/profiles/default/metadata.xml\n@@ -1,7 +1,7 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>14</version>\n   <dependencies>\n-      <dependency>profile-plone.app.registry:default</dependency>\n+    <dependency>profile-plone.app.registry:default</dependency>\n   </dependencies>\n </metadata>\ndiff --git a/plone/app/querystring/profiles/default/registry.xml b/plone/app/querystring/profiles/default/registry.xml\nindex db23b80..24b3873 100644\n--- a/plone/app/querystring/profiles/default/registry.xml\n+++ b/plone/app/querystring/profiles/default/registry.xml\n@@ -1,599 +1,894 @@\n-<!-- Operation Definitions -->\n-<registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.boolean.isTrue">\n-        <value key="title" i18n:translate="">Yes</value>\n-        <value key="description" i18n:translate=""></value>\n-        <value key="operation">plone.app.querystring.queryparser._isTrue</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.boolean.isFalse">\n-        <value key="title" i18n:translate="">No</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._isFalse</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.lessThan">\n-        <value key="title" i18n:translate="">Less than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.largerThan">\n-        <value key="title" i18n:translate="">Larger than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title" i18n:translate="">Before date</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget">DateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThan">\n-        <value key="title" i18n:translate="">After date</value>\n-        <value key="description" i18n:translate="">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n-        <value key="widget">DateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.between">\n-        <value key="title" i18n:translate="">Between dates</value>\n-        <value key="description" i18n:translate="">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._between</value>\n-        <value key="widget">DateRangeWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThanRelativeDate">\n-        <value key="title" i18n:translate="">Within next</value>\n-        <value key="description" i18n:translate="">Please enter the number in days.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThanRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThanRelativeDate">\n-        <value key="title" i18n:translate="">Within last</value>\n-        <value key="description" i18n:translate="">Please enter the number in days.</value>\n-        <value key="operation">plone.app.querystring.queryparser._moreThanRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.today">\n-        <value key="title" i18n:translate="">Today</value>\n-        <value key="description" i18n:translate="">The current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._today</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterToday">\n-        <value key="title" i18n:translate="">After today</value>\n-        <value key="description" i18n:translate="">After the current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterToday</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeToday">\n-        <value key="title" i18n:translate="">Before today</value>\n-        <value key="description" i18n:translate="">Before the current day</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeToday</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeRelativeDate">\n-        <value key="title" i18n:translate="">Before relative Date</value>\n-        <value key="description" i18n:translate="">Before N days in the past</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterRelativeDate">\n-        <value key="title" i18n:translate="">After relative Date</value>\n-        <value key="description" i18n:translate="">After N days in the future</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.list.contains">\n-        <value key="title" i18n:translate="">Contains</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.path.isWithin">\n-        <value key="title" i18n:translate="">Is within</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._pathContains</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.path.isWithinRelative">\n-        <value key="title" i18n:translate="">Is within (relative)</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._pathContainsRelative</value>\n-        <value key="widget">RelativePathWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.reference.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._referenceIs</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.contains">\n-        <value key="title" i18n:translate="">Contains</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.currentUser">\n-        <value key="title" i18n:translate="">Current logged in user</value>\n-        <value key="description" i18n:translate="">The user viewing the querystring results</value>\n-        <value key="operation">plone.app.querystring.queryparser._currentUser</value>\n-        <value key="widget"></value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.showInactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">The user roles which are allowed to see inactive content</value>\n-        <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.isNot">\n-        <value key="title" i18n:translate="">Is not</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.intselection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.absolutePath">\n-        <value key="title" i18n:translate="">Absolute path</value>\n-        <value key="description" i18n:translate="">Location in the site structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.path">\n-        <value key="title" i18n:translate="">Navigation path</value>\n-        <value key="description" i18n:translate="">Location in the navigation structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.relativePath">\n-        <value key="title" i18n:translate="">Relative path</value>\n-        <value key="description" i18n:translate="">Use \'../\' to navigate to parent objects.</value>\n-        <value key="operation">plone.app.querystring.queryparser._relativePath</value>\n-        <value key="widget">RelativePathWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.any">\n-        <value key="title" i18n:translate="">Matches any of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.none">\n-        <value key="title" i18n:translate="">Matches none of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.all">\n-        <value key="title" i18n:translate="">Matches all of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._all</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n-\n-<!-- QueryField declarations  -->\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.path">\n-       <value key="title" i18n:translate="">Location</value>\n-       <value key="description" i18n:translate="">The location of an item </value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.absolutePath</element>\n-            <element>plone.app.querystring.operation.string.path</element>\n-            <element>plone.app.querystring.operation.string.relativePath</element>\n-       </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title" i18n:translate="">Short name (id)</value>\n-       <value key="description" i18n:translate="">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-       </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title" i18n:translate="">Creation date</value>\n-       <value key="description" i18n:translate="">The date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-           <element>plone.app.querystring.operation.date.between</element>\n-           <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.today</element>\n-           <element>plone.app.querystring.operation.date.beforeToday</element>\n-           <element>plone.app.querystring.operation.date.afterToday</element>\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="title" i18n:translate="">Creator</value>\n-        <value key="description" i18n:translate="">The person that created an item</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Users</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Description">\n-        <value key="title" i18n:translate="">Description</value>\n-        <value key="description" i18n:translate="">An item\'s description</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effective">\n-        <value key="title" i18n:translate="">Effective date</value>\n-        <value key="description" i18n:translate="">The time and date an item was first published</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effectiveRange">\n-        <value key="title" i18n:translate="">Effective range</value>\n-        <value key="description" i18n:translate="">Querying this is undefined</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.end">\n-        <value key="title" i18n:translate="">Event end date</value>\n-        <value key="description" i18n:translate="">The end date and time of an event</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getObjPositionInParent">\n-        <value key="title" i18n:translate="">Order in folder</value>\n-        <value key="description" i18n:translate="">The order of an item in its parent folder</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.int.is</element>\n-            <element>plone.app.querystring.operation.int.lessThan</element>\n-            <element>plone.app.querystring.operation.int.largerThan</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getRawRelatedItems">\n-        <value key="title" i18n:translate="">Related To</value>\n-        <value key="description" i18n:translate="">Find items related to the selected items</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.reference.is</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.isDefaultPage">\n-        <value key="title" i18n:translate="">Default Page</value>\n-        <value key="description" i18n:translate="">Find items that are the default view for their containing folder.</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.boolean.isTrue</element>\n-            <element>plone.app.querystring.operation.boolean.isFalse</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.isFolderish">\n-        <value key="title" i18n:translate="">Folder-like</value>\n-        <value key="description" i18n:translate="">Find items that can contain other objects</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.boolean.isTrue</element>\n-            <element>plone.app.querystring.operation.boolean.isFalse</element>\n-        </value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.modified">\n-        <value key="title" i18n:translate="">Modification date</value>\n-        <value key="description" i18n:translate="">The time and date an item was last modified</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.expires">\n-        <value key="title" i18n:translate="">Expiration date</value>\n-        <value key="description" i18n:translate="">The time and date an item was expired</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type">\n-        <value key="title" i18n:translate="">Type</value>\n-        <value key="description" i18n:translate="">An item\'s type (e.g. Event)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.ReallyUserFriendlyTypes</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.show_inactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">Select which roles have the permission to view inactive objects</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.showInactive</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Roles</value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state">\n-        <value key="title" i18n:translate="">Review state</value>\n-        <value key="description" i18n:translate="">An item\'s workflow state (e.g.published)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.WorkflowStates</value>\n-       <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.SearchableText">\n-        <value key="title" i18n:translate="">Searchable text</value>\n-        <value key="description" i18n:translate="">Text search of an item\'s contents</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.sortable_title">\n-        <value key="title" i18n:translate="">Sortable Title</value>\n-        <value key="description" i18n:translate="">The item\'s title, transformed for sorting</value>\n-        <value key="enabled">False</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.start">\n-        <value key="title" i18n:translate="">Event start date</value>\n-        <value key="description" i18n:translate="">The start date and time of an event</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.date.lessThan</element>\n-            <element>plone.app.querystring.operation.date.largerThan</element>\n-            <element>plone.app.querystring.operation.date.between</element>\n-            <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.today</element>\n-            <element>plone.app.querystring.operation.date.beforeToday</element>\n-            <element>plone.app.querystring.operation.date.afterToday</element>\n-            <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-            <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-        </value>\n-       <value key="group" i18n:translate="">Dates</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject">\n-        <value key="title" i18n:translate="">Tag</value>\n-        <value key="description" i18n:translate="">Tags are used for organization of content</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.all</element>\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-       <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n-\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Title">\n-        <value key="title" i18n:translate="">Title</value>\n-        <value key="description" i18n:translate="">Text search of an item\'s title</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.contains</element>\n-        </value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n+<?xml version="1.0" encoding="utf-8"?>\n+<!-- Operation Definitions --><registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n+          i18n:domain="plone"\n+>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.boolean.isTrue"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Yes</value>\n+    <value key="description"\n+           i18n:translate=""\n+    />\n+    <value key="operation">plone.app.querystring.queryparser._isTrue</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.boolean.isFalse"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >No</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._isFalse</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Less than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Larger than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before date</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget">DateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n+    <value key="widget">DateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.between"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Between dates</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._between</value>\n+    <value key="widget">DateRangeWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThanRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Within next</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please enter the number in days.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThanRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThanRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Within last</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Please enter the number in days.</value>\n+    <value key="operation">plone.app.querystring.queryparser._moreThanRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.today"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._today</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterToday"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After the current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterToday</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeToday"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before today</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before the current day</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeToday</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before N days in the past</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After N days in the future</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.list.contains"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Contains</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.path.isWithin"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is within</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._pathContains</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.path.isWithinRelative"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is within (relative)</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._pathContainsRelative</value>\n+    <value key="widget">RelativePathWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.reference.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._referenceIs</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.contains"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Contains</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.currentUser"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Current logged in user</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user viewing the querystring results</value>\n+    <value key="operation">plone.app.querystring.queryparser._currentUser</value>\n+    <value key="widget" />\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.showInactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user roles which are allowed to see inactive content</value>\n+    <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.isNot"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is not</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.intselection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.absolutePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Absolute path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the site structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Navigation path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the navigation structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.relativePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Relative path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Use \'../\' to navigate to parent objects.</value>\n+    <value key="operation">plone.app.querystring.queryparser._relativePath</value>\n+    <value key="widget">RelativePathWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.any"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches any of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.none"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches none of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.all"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches all of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._all</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n+\n+  <!-- QueryField declarations  -->\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Location</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The location of an item </value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.absolutePath</element>\n+      <element>plone.app.querystring.operation.string.path</element>\n+      <element>plone.app.querystring.operation.string.relativePath</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Short name (id)</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Creation date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Creator</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The person that created an item</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Users</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Description"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Description</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s description</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effective"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Effective date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was first published</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effectiveRange"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Effective range</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Querying this is undefined</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.end"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Event end date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The end date and time of an event</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getObjPositionInParent"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Order in folder</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The order of an item in its parent folder</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.int.is</element>\n+      <element>plone.app.querystring.operation.int.lessThan</element>\n+      <element>plone.app.querystring.operation.int.largerThan</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getRawRelatedItems"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Related To</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items related to the selected items</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.reference.is</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.isDefaultPage"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Default Page</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items that are the default view for their containing folder.</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.boolean.isTrue</element>\n+      <element>plone.app.querystring.operation.boolean.isFalse</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.isFolderish"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Folder-like</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Find items that can contain other objects</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.boolean.isTrue</element>\n+      <element>plone.app.querystring.operation.boolean.isFalse</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.modified"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Modification date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was last modified</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.expires"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Expiration date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The time and date an item was expired</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Type</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s type (e.g. Event)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.ReallyUserFriendlyTypes</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.show_inactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Select which roles have the permission to view inactive objects</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.showInactive</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Roles</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Review state</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >An item\'s workflow state (e.g.published)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.WorkflowStates</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.SearchableText"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Searchable text</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Text search of an item\'s contents</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.sortable_title"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Sortable Title</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The item\'s title, transformed for sorting</value>\n+    <value key="enabled">False</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.start"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Event start date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The start date and time of an event</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+      <element>plone.app.querystring.operation.date.between</element>\n+      <element>plone.app.querystring.operation.date.lessThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.largerThanRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.today</element>\n+      <element>plone.app.querystring.operation.date.beforeToday</element>\n+      <element>plone.app.querystring.operation.date.afterToday</element>\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Dates</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Tag</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tags are used for organization of content</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.all</element>\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n+\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Title"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Title</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Text search of an item\'s title</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.contains</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_10/registry.xml b/plone/app/querystring/profiles/upgrades/to_10/registry.xml\nindex f4e40e6..b13c2aa 100644\n--- a/plone/app/querystring/profiles/upgrades/to_10/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_10/registry.xml\n@@ -1,13 +1,16 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Users</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Users</value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_11/registry.xml b/plone/app/querystring/profiles/upgrades/to_11/registry.xml\nindex 4f230a0..45a70b7 100644\n--- a/plone/app/querystring/profiles/upgrades/to_11/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_11/registry.xml\n@@ -1,68 +1,98 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.beforeRelativeDate">\n-        <value key="title" i18n:translate="">Before relative Date</value>\n-        <value key="description" i18n:translate="">Before N days in the past</value>\n-        <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.beforeRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Before relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Before N days in the past</value>\n+    <value key="operation">plone.app.querystring.queryparser._beforeRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.afterRelativeDate">\n-        <value key="title" i18n:translate="">After relative Date</value>\n-        <value key="description" i18n:translate="">After N days in the future</value>\n-        <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n-        <value key="widget">RelativeDateWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.afterRelativeDate"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >After relative Date</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >After N days in the future</value>\n+    <value key="operation">plone.app.querystring.queryparser._afterRelativeDate</value>\n+    <value key="widget">RelativeDateWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.modified">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.modified"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.start">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.start"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.end">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.end"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.effective">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.effective"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.expires">\n-       <value key="operations" purge="false">\n-           <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n-           <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.expires"\n+  >\n+    <value key="operations"\n+           purge="false"\n+    >\n+      <element>plone.app.querystring.operation.date.beforeRelativeDate</element>\n+      <element>plone.app.querystring.operation.date.afterRelativeDate</element>\n+    </value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_14/registry.xml b/plone/app/querystring/profiles/upgrades/to_14/registry.xml\nindex 1c4d6c7..b5b158b 100644\n--- a/plone/app/querystring/profiles/upgrades/to_14/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_14/registry.xml\n@@ -1,72 +1,102 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.isNot">\n-        <value key="title" i18n:translate="">Is not</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.isNot"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is not</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.none">\n-        <value key="title" i18n:translate="">Matches none of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._excludes</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.none"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches none of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._excludes</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId"\n-             purge="False">\n-       <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-       </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.sortable_title"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.string.isNot</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.sortable_title"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.string.isNot</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject"\n-             purge="False">\n-        <value key="operations" purge="False">\n-            <element>plone.app.querystring.operation.selection.none</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+           purge="False"\n+  >\n+    <value key="operations"\n+           purge="False"\n+    >\n+      <element>plone.app.querystring.operation.selection.none</element>\n+    </value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_3/registry.xml b/plone/app/querystring/profiles/upgrades/to_3/registry.xml\nindex 23bebf7..6c0ef9e 100644\n--- a/plone/app/querystring/profiles/upgrades/to_3/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_3/registry.xml\n@@ -1,27 +1,41 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-<!-- Operation Definitions -->\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.showInactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">The user roles which are allowed to see inactive content</value>\n-        <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <!-- Operation Definitions -->\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.showInactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The user roles which are allowed to see inactive content</value>\n+    <value key="operation">plone.app.querystring.queryparser._showInactive</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-<!-- Field Definitions -->\n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.show_inactive">\n-        <value key="title" i18n:translate="">Show Inactive</value>\n-        <value key="description" i18n:translate="">Select which roles have the permission to view inactive objects</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.showInactive</element>\n-        </value>\n-        <value key="vocabulary">plone.app.vocabularies.Roles</value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n+  <!-- Field Definitions -->\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.show_inactive"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Show Inactive</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Select which roles have the permission to view inactive objects</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.showInactive</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Roles</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_5/registry.xml b/plone/app/querystring/profiles/upgrades/to_5/registry.xml\nindex 7b4c3dd..2ed5c6d 100644\n--- a/plone/app/querystring/profiles/upgrades/to_5/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_5/registry.xml\n@@ -1,34 +1,53 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.absolutePath">\n-        <value key="title" i18n:translate="">Absolute path</value>\n-        <value key="description" i18n:translate="">Location in the site structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.absolutePath"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Absolute path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the site structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._absolutePath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.path">\n-        <value key="title" i18n:translate="">Navigation path</value>\n-        <value key="description" i18n:translate="">Location in the navigation structure</value>\n-        <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n-        <value key="widget">ReferenceWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Navigation path</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Location in the navigation structure</value>\n+    <value key="operation">plone.app.querystring.queryparser._navigationPath</value>\n+    <value key="widget">ReferenceWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.path">\n-        <value key="title" i18n:translate="">Location</value>\n-        <value key="description" i18n:translate="">The location of an item </value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">False</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.absolutePath</element>\n-            <element>plone.app.querystring.operation.string.path</element>\n-            <element>plone.app.querystring.operation.string.relativePath</element>\n-        </value>\n-        <value key="group" i18n:translate="">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.path"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Location</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >The location of an item </value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.absolutePath</element>\n+      <element>plone.app.querystring.operation.string.path</element>\n+      <element>plone.app.querystring.operation.string.relativePath</element>\n+    </value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Metadata</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_6/registry.xml b/plone/app/querystring/profiles/upgrades/to_6/registry.xml\nindex 35779b9..e1eeab4 100644\n--- a/plone/app/querystring/profiles/upgrades/to_6/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_6/registry.xml\n@@ -1,36 +1,52 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.is">\n-        <value key="title" i18n:translate="">Equals</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Equals</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.lessThan">\n-        <value key="title" i18n:translate="">Less than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.lessThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Less than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLessThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.int.largerThan">\n-        <value key="title" i18n:translate="">Larger than</value>\n-        <value key="description"></value>\n-        <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n-        <value key="widget">StringWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.int.largerThan"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Larger than</value>\n+    <value key="description" />\n+    <value key="operation">plone.app.querystring.queryparser._intLargerThan</value>\n+    <value key="widget">StringWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.intselection.is">\n-        <value key="title" i18n:translate="">Is</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.intselection.is"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Is</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._intEqual</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_7/registry.xml b/plone/app/querystring/profiles/upgrades/to_7/registry.xml\nindex 525800f..231345e 100644\n--- a/plone/app/querystring/profiles/upgrades/to_7/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_7/registry.xml\n@@ -1,9 +1,12 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getObjPositionInParent">\n-        <value key="sortable">True</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getObjPositionInParent"\n+  >\n+    <value key="sortable">True</value>\n+  </records>\n \n </registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_8/registry.xml b/plone/app/querystring/profiles/upgrades/to_8/registry.xml\nindex b009b4d..a124940 100644\n--- a/plone/app/querystring/profiles/upgrades/to_8/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_8/registry.xml\n@@ -1,35 +1,54 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.any">\n-        <value key="title" i18n:translate="">Matches any of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._contains</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.any"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches any of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._contains</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.selection.all">\n-        <value key="title" i18n:translate="">Matches all of</value>\n-        <value key="description" i18n:translate="">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._all</value>\n-        <value key="widget">MultipleSelectionWidget</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.selection.all"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Matches all of</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._all</value>\n+    <value key="widget">MultipleSelectionWidget</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Subject">\n-        <value key="title" i18n:translate="">Tag</value>\n-        <value key="description" i18n:translate="">Tags are used for organization of content</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.selection.all</element>\n-        </value>\n-       <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n-       <value key="group" i18n:translate="">Text</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Subject"\n+  >\n+    <value key="title"\n+           i18n:translate=""\n+    >Tag</value>\n+    <value key="description"\n+           i18n:translate=""\n+    >Tags are used for organization of content</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.selection.all</element>\n+    </value>\n+    <value key="vocabulary">plone.app.vocabularies.Keywords</value>\n+    <value key="group"\n+           i18n:translate=""\n+    >Text</value>\n+  </records>\n \n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/profiles/upgrades/to_9/registry.xml b/plone/app/querystring/profiles/upgrades/to_9/registry.xml\nindex 5ccb7a7..0bc5cae 100644\n--- a/plone/app/querystring/profiles/upgrades/to_9/registry.xml\n+++ b/plone/app/querystring/profiles/upgrades/to_9/registry.xml\n@@ -1,27 +1,32 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry xmlns:i18n="http://xml.zope.org/namespaces/i18n"\n-          i18n:domain="plone">\n+          i18n:domain="plone"\n+>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.portal_type">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.portal_type"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.review_state">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.selection.any</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.review_state"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.selection.any</element>\n+    </value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.Creator">\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-            <element>plone.app.querystring.operation.selection.any</element>\n-            <element>plone.app.querystring.operation.string.currentUser</element>\n-        </value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.Creator"\n+  >\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+      <element>plone.app.querystring.operation.selection.any</element>\n+      <element>plone.app.querystring.operation.string.currentUser</element>\n+    </value>\n+  </records>\n \n-</registry>\n\\ No newline at end of file\n+</registry>\ndiff --git a/plone/app/querystring/querybuilder.py b/plone/app/querystring/querybuilder.py\nindex f72226e..d9ef15b 100644\n--- a/plone/app/querystring/querybuilder.py\n+++ b/plone/app/querystring/querybuilder.py\n@@ -217,7 +217,7 @@ def _makequery(\n \n         if isinstance(custom_query, dict) and custom_query:\n             # Update the parsed query with an extra query dictionary. This may\n-            # override the parsed query. The custom_query is a dictonary of\n+            # override the parsed query. The custom_query is a dictionary of\n             # index names and their associated query values.\n             for key in custom_query:\n                 if isinstance(parsedquery.get(key), dict) and isinstance(\ndiff --git a/plone/app/querystring/registryreader.py b/plone/app/querystring/registryreader.py\nindex 4817f07..5926a5f 100644\n--- a/plone/app/querystring/registryreader.py\n+++ b/plone/app/querystring/registryreader.py\n@@ -53,16 +53,16 @@ def parseRegistry(self):\n             if not record.startswith(self.prefix):\n                 continue\n \n-            splitted = record.split(".")\n+            split = record.split(".")\n             current = result\n-            for x in splitted[:-1]:\n+            for x in split[:-1]:\n                 # create the key if it\'s not there\n                 if x not in current:\n                     current[x] = {}\n                 current = current[x]\n \n             # store actual key/value\n-            key = splitted[-1]\n+            key = split[-1]\n             value = self.context.records[record].value\n             if isinstance(value, Message):\n                 value = translate(value, context=self.request)\n@@ -93,9 +93,7 @@ def getVocabularyValues(self, values):\n                 else:\n                     title = item.title\n                 translated.append((title, item.value))\n-            translated = sorted(\n-                translated, key=lambda x: id_normalize(safe_text(x[0]))\n-            )\n+            translated = sorted(translated, key=lambda x: id_normalize(safe_text(x[0])))\n             for title, value in translated:\n                 field["values"][value] = {"title": title}\n \ndiff --git a/plone/app/querystring/results.pt b/plone/app/querystring/results.pt\nindex c96711a..dc6ef19 100644\n--- a/plone/app/querystring/results.pt\n+++ b/plone/app/querystring/results.pt\n@@ -3,99 +3,130 @@\n     the selection screen). the html snippet is loaded in directly so that is why\n     there are no html and body tags\n </tal:comment>\n-<div tal:define="results context;\n-                 limited_results python:context[:25];\n-                 original_context nocall:options/original_context|nocall:context;\n-                 toLocalizedTime nocall:original_context/@@plone/toLocalizedTime;\n-                 pas_member original_context/@@pas_member;\n-                 normalize nocall: context/@@plone/normalizeString;"\n-    i18n:domain="plone">\n+<div tal:define="\n+       results context;\n+       limited_results python:context[:25];\n+       original_context nocall:options/original_context|nocall:context;\n+       toLocalizedTime nocall:original_context/@@plone/toLocalizedTime;\n+       pas_member original_context/@@pas_member;\n+       normalize nocall: context/@@plone/normalizeString;\n+     "\n+     i18n:domain="plone"\n+>\n \n-    <span i18n:translate="batch_x_items_matching_your_criteria">\n-        <strong i18n:name="number" id="search-results-number"\n-                tal:content="results/actual_result_count">234</strong>\n+  <span i18n:translate="batch_x_items_matching_your_criteria">\n+    <strong id="search-results-number"\n+            tal:content="results/actual_result_count"\n+            i18n:name="number"\n+    >234</strong>\n         items matching your search terms.\n-    </span>\n+  </span>\n \n-    <div id="search-results">\n-        <p tal:condition="not: results">\n-            <strong i18n:translate="description_no_results_found">\n+  <div id="search-results">\n+    <p tal:condition="not: results">\n+      <strong i18n:translate="description_no_results_found">\n                 No results were found.\n-            </strong>\n-        </p>\n+      </strong>\n+    </p>\n \n-        <dl class="searchResults" tal:condition="limited_results">\n-            <tal:results repeat="item limited_results">\n-                <tal:entry tal:define="author python:pas_member.info(item.Creator());\n-                \t                   item_state python:\'state-\'+item.review_state();\n-                \t                   item_type python:\'contenttype-\'+normalize(item.portal_type)">\n-                    <dt>\n+    <dl class="searchResults"\n+        tal:condition="limited_results"\n+    >\n+      <tal:results repeat="item limited_results">\n+        <tal:entry tal:define="\n+                     author python:pas_member.info(item.Creator());\n+                     item_state python:\'state-\'+item.review_state();\n+                     item_type python:\'contenttype-\'+normalize(item.portal_type);\n+                   ">\n+          <dt>\n \n-                      <img tal:define="getIcon python:item.getURL()+\'/@@images/image/icon\'"\n-                           tal:condition="item/getIcon"\n-                           tal:attributes="href item/getURL;\n-                                           src  string:$getIcon" />\n-                       <a\n-                         href="#"\n-                         tal:attributes="href item/getURL;\n-                                         class  string:$item_state $item_type"\n-                         tal:content="item/Title" />\n+            <img tal:define="\n+                   getIcon python:item.getURL()+\'/@@images/image/icon\';\n+                 "\n+                 tal:condition="item/getIcon"\n+                 tal:attributes="\n+                   href item/getURL;\n+                   src  string:$getIcon;\n+                 "\n+            />\n+            <a href="#"\n+               tal:content="item/Title"\n+               tal:attributes="\n+                 href item/getURL;\n+                 class  string:$item_state $item_type;\n+               "\n+            ></a>\n \n-                        <span class="documentByLine">\n-                            <span class="documentAuthor"\n-                                i18n:translate="label_by_author" tal:condition="author/fullname">\n+            <span class="documentByLine">\n+              <span class="documentAuthor"\n+                    tal:condition="author/fullname"\n+                    i18n:translate="label_by_author"\n+              >\n                             by\n-                                  <a href="#"\n-                                     tal:content="author/fullname"\n-                                     tal:omit-tag="not:item/Creator"\n-                                     tal:attributes="href string:${original_context/@@plone_portal_state/navigation_root_url}/author/${author/username}"\n-                                     i18n:name="author">\n+                <a href="#"\n+                   tal:content="author/fullname"\n+                   tal:omit-tag="not:item/Creator"\n+                   tal:attributes="\n+                     href string:${original_context/@@plone_portal_state/navigation_root_url}/author/${author/username};\n+                   "\n+                   i18n:name="author"\n+                >\n                                     Bob Dobalina\n-                                  </a>\n-                            </span>\n+                </a>\n+              </span>\n \n-                            <span class="documentModified">\n+              <span class="documentModified">\n                               &mdash;\n-                                <span i18n:translate="box_last_modified">\n+                <span i18n:translate="box_last_modified">\n                                 last modified\n-                                </span>\n-                                <span tal:replace="python:toLocalizedTime(item.ModificationDate())"\n-                                      tal:on-error="string:?">\n+                </span>\n+                <span tal:replace="python:toLocalizedTime(item.ModificationDate())"\n+                      tal:on-error="string:?"\n+                >\n                                 August 16, 2001 at 23:35:59\n-                                </span>\n-                            </span>\n+                </span>\n+              </span>\n \n-                            <span tal:define="categories item/Subject|nothing"\n-                                  tal:condition="categories">\n+              <span tal:define="\n+                      categories item/Subject|nothing;\n+                    "\n+                    tal:condition="categories"\n+              >\n                                 &mdash;\n-                                <tal:filedunder i18n:translate="">filed under:</tal:filedunder>\n-                                    <span tal:repeat="category categories">\n-                                        <a href=""\n-                                           class="link-category"\n-                                           rel="tag"\n-                                           tal:content="category"\n-                                           tal:attributes="href string:${original_context/@@plone_portal_state/navigation_root_url}/search?Subject%3Alist=${category}">\n+                <tal:filedunder i18n:translate="">filed under:</tal:filedunder>\n+                <span tal:repeat="category categories">\n+                  <a class="link-category"\n+                     href=""\n+                     rel="tag"\n+                     tal:content="category"\n+                     tal:attributes="\n+                       href string:${original_context/@@plone_portal_state/navigation_root_url}/search?Subject%3Alist=${category};\n+                     "\n+                  >\n                                            Category\n-                                        </a><tal:separator condition="not: repeat/category/end">,</tal:separator>\n-                                    </span>\n-                            </span>\n-                        </span>\n-                    </dt>\n-                    <dd>\n-                        <span tal:replace="item/Description">\n+                  </a><tal:separator condition="not: repeat/category/end">,</tal:separator>\n+                </span>\n+              </span>\n+            </span>\n+          </dt>\n+          <dd>\n+            <span tal:replace="item/Description">\n                             Cropped description\n-                        </span>\n-                        <span class="documentLocation">\n-                            <a href=""\n-                               class="link-location"\n-                               tal:content="item/getPath"\n-                               tal:attributes="href item/getURL">\n+            </span>\n+            <span class="documentLocation">\n+              <a class="link-location"\n+                 href=""\n+                 tal:content="item/getPath"\n+                 tal:attributes="\n+                   href item/getURL;\n+                 "\n+              >\n                                 Location\n-                            </a>\n-                        </span>\n-                   </dd>\n-                </tal:entry>\n-            </tal:results>\n-        </dl>\n-    </div>\n+              </a>\n+            </span>\n+          </dd>\n+        </tal:entry>\n+      </tal:results>\n+    </dl>\n+  </div>\n </div>\ndiff --git a/plone/app/querystring/testing.py b/plone/app/querystring/testing.py\nindex d3ff66d..17e96f3 100644\n--- a/plone/app/querystring/testing.py\n+++ b/plone/app/querystring/testing.py\n@@ -6,7 +6,6 @@\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n from plone.app.testing.layers import IntegrationTesting\n-from plone.testing import z2\n from zope.configuration import xmlconfig\n \n \ndiff --git a/plone/app/querystring/tests/configure.zcml b/plone/app/querystring/tests/configure.zcml\nindex afe68fe..4a1b804 100644\n--- a/plone/app/querystring/tests/configure.zcml\n+++ b/plone/app/querystring/tests/configure.zcml\n@@ -1,16 +1,17 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n-    i18n_domain="plone">\n+    i18n_domain="plone"\n+    >\n \n-    <include package="plone.app.registry" />\n+  <include package="plone.app.registry" />\n \n-    <genericsetup:registerProfile\n-        name="registry"\n-        title="Tests for plone.app.querystring"\n-        directory="profiles/registry"\n-        description="Test values for the registry integration tests"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n+  <genericsetup:registerProfile\n+      name="registry"\n+      title="Tests for plone.app.querystring"\n+      description="Test values for the registry integration tests"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      directory="profiles/registry"\n+      />\n \n </configure>\ndiff --git a/plone/app/querystring/tests/profiles/registry/metadata.xml b/plone/app/querystring/tests/profiles/registry/metadata.xml\nindex 06dcbf7..564c42f 100644\n--- a/plone/app/querystring/tests/profiles/registry/metadata.xml\n+++ b/plone/app/querystring/tests/profiles/registry/metadata.xml\n@@ -1,7 +1,7 @@\n-<?xml version="1.0"?>\n+<?xml version="1.0" encoding="utf-8"?>\n <metadata>\n   <version>1</version>\n   <dependencies>\n-      <dependency>profile-plone.app.registry:default</dependency>\n+    <dependency>profile-plone.app.registry:default</dependency>\n   </dependencies>\n </metadata>\ndiff --git a/plone/app/querystring/tests/profiles/registry/registry.xml b/plone/app/querystring/tests/profiles/registry/registry.xml\nindex a02eac2..75bf59d 100644\n--- a/plone/app/querystring/tests/profiles/registry/registry.xml\n+++ b/plone/app/querystring/tests/profiles/registry/registry.xml\n@@ -1,31 +1,34 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">Is</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">Is</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">Before date</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">Before date</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title">Short name (id)</value>\n-       <value key="description">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-       </value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title">Short name (id)</value>\n+    <value key="description">The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="group">Metadata</value>\n+  </records>\n \n </registry>\n-\ndiff --git a/plone/app/querystring/tests/registry_minimal_correct.xml b/plone/app/querystring/tests/registry_minimal_correct.xml\nindex 207bed6..e213695 100644\n--- a/plone/app/querystring/tests/registry_minimal_correct.xml\n+++ b/plone/app/querystring/tests/registry_minimal_correct.xml\n@@ -1,50 +1,56 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">equals</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">equals</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">before</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">before</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.largerThan">\n-        <value key="title">after</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.largerThan"\n+  >\n+    <value key="title">after</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser._largerThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.getId">\n-       <value key="title">Short Name</value>\n-       <value key="description">The short name of an item (used in the url)</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">True</value>\n-       <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-       </value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.getId"\n+  >\n+    <value key="title">Short Name</value>\n+    <value key="description">The short name of an item (used in the url)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="group">Metadata</value>\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title">Creation Date</value>\n-       <value key="description">The time and date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-       </value>\n-       <value key="group">Dates</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title">Creation Date</value>\n+    <value key="description">The time and date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+    </value>\n+    <value key="group">Dates</value>\n+  </records>\n </registry>\ndiff --git a/plone/app/querystring/tests/registry_test_missing_operator.xml b/plone/app/querystring/tests/registry_test_missing_operator.xml\nindex 81de888..763bc73 100644\n--- a/plone/app/querystring/tests/registry_test_missing_operator.xml\n+++ b/plone/app/querystring/tests/registry_test_missing_operator.xml\n@@ -1,22 +1,25 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.date.lessThan">\n-        <value key="title">before</value>\n-        <value key="description">Please use YYYY/MM/DD.</value>\n-        <value key="operation">plone.app.querystring.queryparser:_lessThan</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.date.lessThan"\n+  >\n+    <value key="title">before</value>\n+    <value key="description">Please use YYYY/MM/DD.</value>\n+    <value key="operation">plone.app.querystring.queryparser:_lessThan</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.created">\n-       <value key="title">Creation Date</value>\n-       <value key="description">The time and date an item was created</value>\n-       <value key="enabled">True</value>\n-       <value key="sortable">False</value>\n-       <value key="operations">\n-           <element>plone.app.querystring.operation.date.lessThan</element>\n-           <element>plone.app.querystring.operation.date.largerThan</element>\n-       </value>\n-       <value key="group">Dates</value>\n-    </records>\n-</registry>\n\\ No newline at end of file\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.created"\n+  >\n+    <value key="title">Creation Date</value>\n+    <value key="description">The time and date an item was created</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">False</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.date.lessThan</element>\n+      <element>plone.app.querystring.operation.date.largerThan</element>\n+    </value>\n+    <value key="group">Dates</value>\n+  </records>\n+</registry>\ndiff --git a/plone/app/querystring/tests/registry_test_vocabulary.xml b/plone/app/querystring/tests/registry_test_vocabulary.xml\nindex 407524d..529d420 100644\n--- a/plone/app/querystring/tests/registry_test_vocabulary.xml\n+++ b/plone/app/querystring/tests/registry_test_vocabulary.xml\n@@ -1,22 +1,25 @@\n+<?xml version="1.0" encoding="utf-8"?>\n <registry>\n-    <records interface="plone.app.querystring.interfaces.IQueryOperation"\n-             prefix="plone.app.querystring.operation.string.is">\n-        <value key="title">equals</value>\n-        <value key="description">Tip: you can use * to autocomplete.</value>\n-        <value key="operation">plone.app.querystring.queryparser._equal</value>\n-        <value key="widget"></value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryOperation"\n+           prefix="plone.app.querystring.operation.string.is"\n+  >\n+    <value key="title">equals</value>\n+    <value key="description">Tip: you can use * to autocomplete.</value>\n+    <value key="operation">plone.app.querystring.queryparser._equal</value>\n+    <value key="widget" />\n+  </records>\n \n-    <records interface="plone.app.querystring.interfaces.IQueryField"\n-             prefix="plone.app.querystring.field.reviewState">\n-        <value key="title">Review state</value>\n-        <value key="description">An item\'s workflow state (e.g.published)</value>\n-        <value key="enabled">True</value>\n-        <value key="sortable">True</value>\n-        <value key="operations">\n-            <element>plone.app.querystring.operation.string.is</element>\n-        </value>\n-        <value key="vocabulary">plone.app.querystring.tests.testvocabulary</value>\n-       <value key="group">Metadata</value>\n-    </records>\n+  <records interface="plone.app.querystring.interfaces.IQueryField"\n+           prefix="plone.app.querystring.field.reviewState"\n+  >\n+    <value key="title">Review state</value>\n+    <value key="description">An item\'s workflow state (e.g.published)</value>\n+    <value key="enabled">True</value>\n+    <value key="sortable">True</value>\n+    <value key="operations">\n+      <element>plone.app.querystring.operation.string.is</element>\n+    </value>\n+    <value key="vocabulary">plone.app.querystring.tests.testvocabulary</value>\n+    <value key="group">Metadata</value>\n+  </records>\n </registry>\ndiff --git a/plone/app/querystring/tests/testQueryBuilder.py b/plone/app/querystring/tests/testQueryBuilder.py\nindex 050e189..4c39838 100644\n--- a/plone/app/querystring/tests/testQueryBuilder.py\n+++ b/plone/app/querystring/tests/testQueryBuilder.py\n@@ -53,7 +53,7 @@ def testQueryBuilderNumberOfResults(self):\n     def testQueryBuilderNumberOfResultsView(self):\n         res = self.folder.restrictedTraverse("@@querybuildernumberofresults")\n         length_of_results = res.browserDefault(None)[0](self.query)\n-        # apparently brower travelsal is different from the traversal we get\n+        # apparently browser traversal is different from the traversal we get\n         # from restrictedTraverse. This did hurt a bit.\n         numeric = int(length_of_results.split(" ")[0])\n         self.assertEqual(numeric, 1)\ndiff --git a/plone/app/querystring/tests/testQueryBuilderModifiers.py b/plone/app/querystring/tests/testQueryBuilderModifiers.py\nindex 75a2ea2..6f2c2b5 100644\n--- a/plone/app/querystring/tests/testQueryBuilderModifiers.py\n+++ b/plone/app/querystring/tests/testQueryBuilderModifiers.py\n@@ -55,7 +55,7 @@ def testModifierNotCalled(self):\n \n         try:\n             results = self.querybuilder(query=query)\n-        except:\n+        except Exception:\n             self.fail("Unexpected: index modifier has been called")\n         self.assertEqual(len(results), 1)\n         self.assertEqual(results[0].Title(), "Collectionstestpage")\ndiff --git a/plone/app/querystring/tests/testQueryParser.py b/plone/app/querystring/tests/testQueryParser.py\nindex a68239d..f2e2e04 100644\n--- a/plone/app/querystring/tests/testQueryParser.py\n+++ b/plone/app/querystring/tests/testQueryParser.py\n@@ -502,7 +502,7 @@ def test__today(self):\n         self.assertEqual(parsed, expected)\n \n     def test__path(self):\n-        # absoute path from plone site root\n+        # absolute path from plone site root\n         data = Row(index="path", operator="_path", values="/news/")\n         parsed = queryparser._absolutePath(MockSite(), data)\n         expected = {"path": {"query": ["/%s/news/" % MOCK_SITE_ID]}}\n@@ -515,7 +515,7 @@ def test__path(self):\n         self.assertEqual(parsed, expected)\n \n     def test__navigationPath(self):\n-        # absoute path from plone site root\n+        # absolute path from plone site root\n         # Search base\n         context = MockObject(uid="00000000000000001", path="/%s/foo/bar" % MOCK_SITE_ID)\n         # Nav root\ndiff --git a/plone/app/querystring/tests/testRegistryReader.py b/plone/app/querystring/tests/testRegistryReader.py\nindex bb8a1cc..f348bcd 100644\n--- a/plone/app/querystring/tests/testRegistryReader.py\n+++ b/plone/app/querystring/tests/testRegistryReader.py\n@@ -44,6 +44,13 @@ def createRegistry(self, xml):\n         gsm.registerUtility(self.registry, IRegistry)\n \n         importer = RegistryImporter(self.registry, self)\n+        if isinstance(xml, str):\n+            # String can work, but not when it has an encoding declaration.\n+            # It would give a ValueError:\n+            # "Unicode strings with encoding declaration are not supported.\n+            # Please use bytes input or XML fragments without declaration."\n+\n+            xml = xml.encode("utf-8")\n         importer.importDocument(xml)\n         return self.registry\n \ndiff --git a/plone/app/querystring/upgrades.zcml b/plone/app/querystring/upgrades.zcml\nindex dfd40f4..07c2e23 100644\n--- a/plone/app/querystring/upgrades.zcml\n+++ b/plone/app/querystring/upgrades.zcml\n@@ -1,20 +1,22 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup">\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    >\n \n   <genericsetup:upgradeStep\n-      source="1"\n-      destination="2"\n       title="Fix Typo in Registry"\n       description="Migrate registry to fix a typo."\n       profile="plone.app.querystring:default"\n+      source="1"\n+      destination="2"\n       handler=".upgrades.upgrade_1_to_2_typo_in_registry"\n       />\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="2"\n       destination="3"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add show inactive operation and field"\n         import_profile="plone.app.querystring:upgrade_to_3"\n@@ -22,9 +24,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="3"\n       destination="4"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix wrong vocabulary declaration of the show_inactive field"\n         import_profile="plone.app.querystring:upgrade_to_3"\n@@ -32,9 +35,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="4"\n       destination="5"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add navigation path query operation and modify referring field"\n         import_profile="plone.app.querystring:upgrade_to_5"\n@@ -42,9 +46,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="5"\n       destination="6"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix int operators"\n         import_profile="plone.app.querystring:upgrade_to_6"\n@@ -52,9 +57,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="6"\n       destination="7"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Fix getObjPositionInParent be sortable by default"\n         import_profile="plone.app.querystring:upgrade_to_7"\n@@ -62,9 +68,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="7"\n       destination="8"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Change subject operations to selection.any and selection.all"\n         import_profile="plone.app.querystring:upgrade_to_8"\n@@ -72,9 +79,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="8"\n       destination="9"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Use selection.any operation"\n         description="Replace selection.is with selection.any for portal_types and review_state operations, and add selection.any for Creator operations."\n@@ -88,9 +96,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="9"\n       destination="10"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Update Creator"\n         description="Add users vocabulary and remove \'is\' operator from plone.app.querystring.field.Creator"\n@@ -103,9 +112,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="10"\n       destination="11"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add new \'before/after relative Date\' operation"\n         import_profile="plone.app.querystring:upgrade_to_11"\n@@ -113,18 +123,19 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeStep\n-      source="11"\n-      destination="12"\n       title="Fix existing collections"\n-      profile="plone.app.querystring:default"\n       description="Fix indexes on existing collections by changing \'is\' operators to \'any\'"\n+      profile="plone.app.querystring:default"\n+      source="11"\n+      destination="12"\n       handler=".upgrades.fix_select_all_existing_collections"\n       />\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="12"\n       destination="13"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeStep\n         title="Fix ISyndicatableCollection objects"\n         description="Fix indexes on Dexterity objects by changing \'is\' operators to \'any\'. All objects using the Collection behavior are fixed."\n@@ -138,9 +149,10 @@\n   </genericsetup:upgradeSteps>\n \n   <genericsetup:upgradeSteps\n+      profile="plone.app.querystring:default"\n       source="13"\n       destination="14"\n-      profile="plone.app.querystring:default">\n+      >\n     <genericsetup:upgradeDepends\n         title="Add new \'string.isNot\' and \'selection.none\' query operators."\n         import_profile="plone.app.querystring:upgrade_to_14"\ndiff --git a/pyproject.toml b/pyproject.toml\nindex 8f2dfd2..927c79b 100644\n--- a/pyproject.toml\n+++ b/pyproject.toml\n@@ -1,3 +1,5 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [tool.towncrier]\n filename = "CHANGES.rst"\n directory = "news/"\n@@ -19,5 +21,43 @@ directory = "bugfix"\n name = "Bug fixes:"\n showcontent = true\n \n+[[tool.towncrier.type]]\n+directory = "internal"\n+name = "Internal:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "documentation"\n+name = "Documentation:"\n+showcontent = true\n+\n+[[tool.towncrier.type]]\n+directory = "tests"\n+name = "Tests"\n+showcontent = true\n+\n [tool.isort]\n profile = "plone"\n+\n+[tool.black]\n+target-version = ["py38"]\n+\n+[tool.dependencychecker]\n+Zope = [\n+  # Zope own provided namespaces\n+  \'App\', \'OFS\', \'Products.Five\', \'Products.OFSP\', \'Products.PageTemplates\',\n+  \'Products.SiteAccess\', \'Shared\', \'Testing\', \'ZPublisher\', \'ZTUtils\',\n+  \'Zope2\', \'webdav\', \'zmi\',\n+  # Zope dependencies\n+  \'Acquisition\', \'DateTime\', \'transaction\', \'zExceptions\', \'ZODB\', \'zope.component\',\n+  \'zope.configuration\', \'zope.container\', \'zope.deferredimport\', \'zope.event\',\n+  \'zope.exceptions\', \'zope.globalrequest\', \'zope.i18n\', \'zope.i18nmessageid\',\n+  \'zope.interface\', \'zope.lifecycleevent\', \'zope.location\', \'zope.publisher\',\n+  \'zope.schema\', \'zope.security\', \'zope.site\', \'zope.traversing\', \'AccessControl\',\n+]\n+\'plone.base\' = [\n+  \'setuptools\', \'AccessControl\', \'Products.BTreeFolder2\', \'Products.CMFCore\',\n+  \'Products.CMFDynamicViewFTI\', \'zope.deprecation\',\n+]\n+python-dateutil = [\'dateutil\']\n+\'Products.ZCatalog\' = [\'Products.ZCTextIndex\']\ndiff --git a/setup.cfg b/setup.cfg\nindex 526aeb2..0da8f8f 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -1,2 +1,23 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n [bdist_wheel]\n universal = 0\n+\n+[flake8]\n+doctests = 1\n+ignore =\n+    # black takes care of line length\n+    E501,\n+    # black takes care of where to break lines\n+    W503,\n+    # black takes care of spaces within slicing (list[:])\n+    E203,\n+    # black takes care of spaces after commas\n+    E231,\n+\n+[check-manifest]\n+ignore =\n+    .editorconfig\n+    .meta.toml\n+    .pre-commit-config.yaml\n+    tox.ini\ndiff --git a/setup.py b/setup.py\nindex e0f5b5f..64f748c 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -39,28 +39,25 @@\n     zip_safe=False,\n     python_requires=">=3.8",\n     install_requires=[\n-        "DateTime",\n         "plone.app.contentlisting",\n         "plone.app.layout",\n         "plone.app.registry>=1.1",\n         "plone.base",\n         "plone.batching",\n+        "plone.i18n",\n         "plone.registry",\n-        "Products.CMFCore",\n+        "plone.uuid",\n+        "Products.GenericSetup",\n+        "Products.ZCatalog",\n         "python-dateutil",\n-        "setuptools",\n-        "zope.component",\n+        "Zope",\n         "zope.dottedname",\n         "zope.globalrequest",\n-        "zope.i18n",\n-        "zope.i18nmessageid",\n-        "zope.interface",\n-        "zope.publisher",\n-        "zope.schema",\n     ],\n     extras_require={\n         "test": [\n             "plone.app.testing",\n+            "plone.app.contenttypes[test]",\n         ]\n     },\n     entry_points="""\ndiff --git a/tox.ini b/tox.ini\nnew file mode 100644\nindex 0000000..520ebf8\n--- /dev/null\n+++ b/tox.ini\n@@ -0,0 +1,50 @@\n+# Generated from:\n+# https://github.com/plone/meta/tree/master/config/default\n+[tox]\n+envlist =\n+    format\n+    lint\n+    test\n+\n+[testenv]\n+allowlist_externals =\n+    sh\n+\n+[testenv:format]\n+description = automatically reformat code\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a pyupgrade\n+    pre-commit run -a isort\n+    pre-commit run -a black\n+    pre-commit run -a zpretty\n+\n+[testenv:lint]\n+description = run linters that will help improve the code style\n+skip_install = true\n+deps =\n+    pre-commit\n+commands =\n+    pre-commit run -a\n+\n+[testenv:dependencies]\n+description = check if the package defines all its dependencies and generate a graph out of them\n+deps =\n+    z3c.dependencychecker==2.11\n+    pipdeptree==2.5.1\n+    graphviz  # optional dependency of pipdeptree\n+commands =\n+    dependencychecker\n+    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+\n+[testenv:test]\n+usedevelop = true\n+deps =\n+    zope.testrunner\n+    -c https://dist.plone.org/release/6.0-dev/constraints.txt\n+commands =\n+    zope-testrunner --test-path={toxinidir} -s plone.app.querystring\n+extras =\n+    test\n'

