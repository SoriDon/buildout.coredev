Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-09-18T19:37:08-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.layout/commit/cb6a5dcbe1def8fee73880b100618aed83385bfa

Use longer password in tests

Files changed:
M plone/app/layout/testing.py
M plone/app/layout/viewlets/tests/history.txt
M plone/app/layout/viewlets/tests/test_content.py
M plone/app/layout/viewlets/tests/test_history.py

b'diff --git a/plone/app/layout/testing.py b/plone/app/layout/testing.py\nindex 3974d941..0c95f1cd 100644\n--- a/plone/app/layout/testing.py\n+++ b/plone/app/layout/testing.py\n@@ -3,6 +3,7 @@\n from plone.app.testing import IntegrationTesting\n from plone.app.testing import PloneSandboxLayer\n from plone.app.testing import TEST_USER_ID\n+from plone.app.testing import TEST_USER_PASSWORD\n from Products.CMFPlone.utils import _createObjectByType\n \n \ndiff --git a/plone/app/layout/viewlets/tests/history.txt b/plone/app/layout/viewlets/tests/history.txt\nindex b195c103..bc7eaf3d 100644\n--- a/plone/app/layout/viewlets/tests/history.txt\n+++ b/plone/app/layout/viewlets/tests/history.txt\n@@ -11,9 +11,10 @@ Open a browser logged in as a Manager.\n \n     >>> app = layer[\'app\']\n     >>> from plone.testing.zope import Browser\n+    >>> from plone.app.testing import TEST_USER_PASSWORD\n     >>> browser = Browser(app)\n     >>> browser.handleErrors = False\n-    >>> browser.addHeader(\'Authorization\', \'Basic admin:secret\')\n+    >>> browser.addHeader(\'Authorization\', f\'Basic admin:{TEST_USER_PASSWORD}\')\n     >>> portal_url = \'http://nohost/plone\'\n \n By default, only HTTP error codes (e.g. 500 Server Side Error) are shown when an\ndiff --git a/plone/app/layout/viewlets/tests/test_content.py b/plone/app/layout/viewlets/tests/test_content.py\nindex cb8f6201..eae647f5 100644\n--- a/plone/app/layout/viewlets/tests/test_content.py\n+++ b/plone/app/layout/viewlets/tests/test_content.py\n@@ -6,6 +6,7 @@\n from plone.app.testing import logout\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n+from plone.app.testing import TEST_USER_PASSWORD\n from plone.locking.interfaces import ILockable\n from plone.registry.interfaces import IRegistry\n from plone.base.interfaces import ISecuritySchema\n@@ -70,7 +71,7 @@ def test_get_url_path(self):\n \n         # users with a slash in the userid will have a different URL\n         portal_membership = getToolByName(self.portal, "portal_membership")\n-        portal_membership.addMember("foo/bar", "secret", ["Member"], "")\n+        portal_membership.addMember("foo/bar", TEST_USER_PASSWORD, ["Member"], "")\n         self.assertEqual(viewlet.get_url_path("foo/bar"), "author/?author=foo%2Fbar")\n \n     def test_get_fullname(self):\n@@ -83,7 +84,7 @@ def test_get_fullname(self):\n         # otherwise we will return the fullname property\n         portal_membership = getToolByName(self.portal, "portal_membership")\n         portal_membership.addMember(\n-            "foo/bar", "secret", ["Member"], "", properties={"fullname": "Foo Bar"}\n+            "foo/bar", TEST_USER_PASSWORD, ["Member"], "", properties={"fullname": "Foo Bar"}\n         )\n         self.assertEqual(viewlet.get_fullname("foo/bar"), "Foo Bar")\n \ndiff --git a/plone/app/layout/viewlets/tests/test_history.py b/plone/app/layout/viewlets/tests/test_history.py\nindex cf81fcfc..9add9c8c 100644\n--- a/plone/app/layout/viewlets/tests/test_history.py\n+++ b/plone/app/layout/viewlets/tests/test_history.py\n@@ -6,6 +6,7 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n+from plone.app.testing import TEST_USER_PASSWORD\n \n \n class TestWorkflowHistoryViewlet(ViewletsFunctionalTestCase):\n@@ -16,7 +17,7 @@ def setUp(self):\n         self.folder.invokeFactory("Document", "d1")\n \n     def addMember(self, username, roles=("Member",)):\n-        self.portal.portal_membership.addMember(username, "secret", roles, [])\n+        self.portal.portal_membership.addMember(username, TEST_USER_PASSWORD, roles, [])\n \n     def delMember(self, username):\n         self.portal.portal_membership.deleteMembers([username])\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-09-18T19:37:48-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/plone.app.layout/commit/53c1f368db42cd4613d554c56a29348697048c18

changelog

Files changed:
A news/327.bugfix

b'diff --git a/news/327.bugfix b/news/327.bugfix\nnew file mode 100644\nindex 00000000..2d767944\n--- /dev/null\n+++ b/news/327.bugfix\n@@ -0,0 +1 @@\n+- Use longer password in tests. [davisagli]\n'

Repository: plone.app.layout


Branch: refs/heads/master
Date: 2022-09-19T11:15:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.layout/commit/9b86781b480c8a1fb4f868c03dba4b3106701a8f

Merge pull request #327 from plone/pw-length

Use longer password in tests

Files changed:
A news/327.bugfix
M plone/app/layout/testing.py
M plone/app/layout/viewlets/tests/history.txt
M plone/app/layout/viewlets/tests/test_content.py
M plone/app/layout/viewlets/tests/test_history.py

b'diff --git a/news/327.bugfix b/news/327.bugfix\nnew file mode 100644\nindex 00000000..2d767944\n--- /dev/null\n+++ b/news/327.bugfix\n@@ -0,0 +1 @@\n+- Use longer password in tests. [davisagli]\ndiff --git a/plone/app/layout/testing.py b/plone/app/layout/testing.py\nindex 3974d941..0c95f1cd 100644\n--- a/plone/app/layout/testing.py\n+++ b/plone/app/layout/testing.py\n@@ -3,6 +3,7 @@\n from plone.app.testing import IntegrationTesting\n from plone.app.testing import PloneSandboxLayer\n from plone.app.testing import TEST_USER_ID\n+from plone.app.testing import TEST_USER_PASSWORD\n from Products.CMFPlone.utils import _createObjectByType\n \n \ndiff --git a/plone/app/layout/viewlets/tests/history.txt b/plone/app/layout/viewlets/tests/history.txt\nindex b195c103..bc7eaf3d 100644\n--- a/plone/app/layout/viewlets/tests/history.txt\n+++ b/plone/app/layout/viewlets/tests/history.txt\n@@ -11,9 +11,10 @@ Open a browser logged in as a Manager.\n \n     >>> app = layer[\'app\']\n     >>> from plone.testing.zope import Browser\n+    >>> from plone.app.testing import TEST_USER_PASSWORD\n     >>> browser = Browser(app)\n     >>> browser.handleErrors = False\n-    >>> browser.addHeader(\'Authorization\', \'Basic admin:secret\')\n+    >>> browser.addHeader(\'Authorization\', f\'Basic admin:{TEST_USER_PASSWORD}\')\n     >>> portal_url = \'http://nohost/plone\'\n \n By default, only HTTP error codes (e.g. 500 Server Side Error) are shown when an\ndiff --git a/plone/app/layout/viewlets/tests/test_content.py b/plone/app/layout/viewlets/tests/test_content.py\nindex cb8f6201..eae647f5 100644\n--- a/plone/app/layout/viewlets/tests/test_content.py\n+++ b/plone/app/layout/viewlets/tests/test_content.py\n@@ -6,6 +6,7 @@\n from plone.app.testing import logout\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n+from plone.app.testing import TEST_USER_PASSWORD\n from plone.locking.interfaces import ILockable\n from plone.registry.interfaces import IRegistry\n from plone.base.interfaces import ISecuritySchema\n@@ -70,7 +71,7 @@ def test_get_url_path(self):\n \n         # users with a slash in the userid will have a different URL\n         portal_membership = getToolByName(self.portal, "portal_membership")\n-        portal_membership.addMember("foo/bar", "secret", ["Member"], "")\n+        portal_membership.addMember("foo/bar", TEST_USER_PASSWORD, ["Member"], "")\n         self.assertEqual(viewlet.get_url_path("foo/bar"), "author/?author=foo%2Fbar")\n \n     def test_get_fullname(self):\n@@ -83,7 +84,7 @@ def test_get_fullname(self):\n         # otherwise we will return the fullname property\n         portal_membership = getToolByName(self.portal, "portal_membership")\n         portal_membership.addMember(\n-            "foo/bar", "secret", ["Member"], "", properties={"fullname": "Foo Bar"}\n+            "foo/bar", TEST_USER_PASSWORD, ["Member"], "", properties={"fullname": "Foo Bar"}\n         )\n         self.assertEqual(viewlet.get_fullname("foo/bar"), "Foo Bar")\n \ndiff --git a/plone/app/layout/viewlets/tests/test_history.py b/plone/app/layout/viewlets/tests/test_history.py\nindex cf81fcfc..9add9c8c 100644\n--- a/plone/app/layout/viewlets/tests/test_history.py\n+++ b/plone/app/layout/viewlets/tests/test_history.py\n@@ -6,6 +6,7 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n+from plone.app.testing import TEST_USER_PASSWORD\n \n \n class TestWorkflowHistoryViewlet(ViewletsFunctionalTestCase):\n@@ -16,7 +17,7 @@ def setUp(self):\n         self.folder.invokeFactory("Document", "d1")\n \n     def addMember(self, username, roles=("Member",)):\n-        self.portal.portal_membership.addMember(username, "secret", roles, [])\n+        self.portal.portal_membership.addMember(username, TEST_USER_PASSWORD, roles, [])\n \n     def delMember(self, username):\n         self.portal.portal_membership.deleteMembers([username])\n'

