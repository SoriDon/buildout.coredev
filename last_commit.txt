Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2019-09-16T02:17:00+02:00
Author: mauro (mamico) <mauro.amico@unibo.it>
Commit: https://github.com/plone/plone.app.z3cform/commit/9eff0e151a76f9c70f04061de8c0122553d215af

LinkWidget selected tab on edit #108

Files changed:
M plone/app/z3cform/templates/link_input.pt

b'diff --git a/plone/app/z3cform/templates/link_input.pt b/plone/app/z3cform/templates/link_input.pt\nindex fa1ed93..ed30f01 100644\n--- a/plone/app/z3cform/templates/link_input.pt\n+++ b/plone/app/z3cform/templates/link_input.pt\n@@ -4,37 +4,43 @@\n     <div class="linkTypes pat-autotoc autotabs"\n          data-pat-autotoc="section:span.linkType;levels:span.linkLabel;">\n \n-      <span class="linkType internal" data-linkType="internal">\n+      <span class="linkType internal" data-linkType="internal"\n+            tal:define="value view/value/internal | nothing"\n+            tal:attributes="python:\'linkType internal\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_internal_url">Internal</span>\n         <div>\n           <div class="form-group main">\n             <!-- this gives the name to the "linkType" -->\n             <input type="text" name="internal" class="pat-relateditems"\n                     tal:attributes="data-pat-relateditems view/pattern_data;\n-                                    value view/value/internal | nothing;\n+                                    value value;\n                                     name string:${view/name}.internal" />\n           </div>\n         </div>\n       </span>\n \n-      <span class="linkType external" data-linkType="external">\n+      <span class="linkType external" data-linkType="external"\n+            tal:define="value view/value/external | nothing"\n+            tal:attributes="python:\'linkType external\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_external_url">External</span>\n         <div class="form-group main">\n           <label for="external" i18n:translate="help_external_url">External URL (can be relative within this site or absolute if it starts with http:// or https://)</label>\n           <input type="text" name="external" placeholder="https://domain.com"\n                  tal:attributes="name string:${view/name}.external;\n-                                 value view/value/external | nothing" />\n+                                 value value" />\n         </div>\n       </span>\n \n-      <span class="linkType email" data-linkType="email">\n+      <span class="linkType email" data-linkType="email"\n+            tal:define="value view/value/email | nothing"\n+            tal:attributes="python:\'linkType email\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_email_url">Email</span>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label i18n:translate="help_email_url">Email Address</label>\n             <input type="text" name="email" placeholder="name@domain.com"\n                    tal:attributes="name string:${view/name}.email;\n-                                   value view/value/email | nothing" />\n+                                   value value" />\n           </div>\n           <div class="form-group">\n             <label i18n:translate="help_email_url_subject">Email Subject (optional)</label>\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2019-09-16T09:34:27+02:00
Author: mauro (mamico) <mauro.amico@unibo.it>
Commit: https://github.com/plone/plone.app.z3cform/commit/624640ada5872125a229a177af811e8df2fce4e1

changelog

Files changed:
A news/108.bugfix

b'diff --git a/news/108.bugfix b/news/108.bugfix\nnew file mode 100644\nindex 0000000..ec5d4c4\n--- /dev/null\n+++ b/news/108.bugfix\n@@ -0,0 +1,2 @@\n+- Fix LinkWidget selected tab on edit #108\n+  [mamico]\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2019-09-16T09:34:39+02:00
Author: mauro (mamico) <mauro.amico@unibo.it>
Commit: https://github.com/plone/plone.app.z3cform/commit/51ae7b7c76a058131ae81c0eff11004c1e067b0e

Merge branch 'master' of github.com:mamico/plone.app.z3cform

Files changed:
M CHANGES.rst
M plone/app/z3cform/templates/link_input.pt
M setup.py
D news/107.bugfix

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 7d62bc3..2e4493d 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -8,6 +8,16 @@ Changelog\n \n .. towncrier release notes start\n \n+3.1.2 (2019-08-29)\n+------------------\n+\n+Bug fixes:\n+\n+\n+- Fix wrong default for method attribute in pt\n+  [mamico] (#107)\n+\n+\n 3.1.1 (2019-06-27)\n ------------------\n \ndiff --git a/news/107.bugfix b/news/107.bugfix\ndeleted file mode 100644\nindex 57140fc..0000000\n--- a/news/107.bugfix\n+++ /dev/null\n@@ -1,2 +0,0 @@\n-- Fix wrong default for method attribute in pt\n-  [mamico]\ndiff --git a/plone/app/z3cform/templates/link_input.pt b/plone/app/z3cform/templates/link_input.pt\nindex fa1ed93..ed30f01 100644\n--- a/plone/app/z3cform/templates/link_input.pt\n+++ b/plone/app/z3cform/templates/link_input.pt\n@@ -4,37 +4,43 @@\n     <div class="linkTypes pat-autotoc autotabs"\n          data-pat-autotoc="section:span.linkType;levels:span.linkLabel;">\n \n-      <span class="linkType internal" data-linkType="internal">\n+      <span class="linkType internal" data-linkType="internal"\n+            tal:define="value view/value/internal | nothing"\n+            tal:attributes="python:\'linkType internal\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_internal_url">Internal</span>\n         <div>\n           <div class="form-group main">\n             <!-- this gives the name to the "linkType" -->\n             <input type="text" name="internal" class="pat-relateditems"\n                     tal:attributes="data-pat-relateditems view/pattern_data;\n-                                    value view/value/internal | nothing;\n+                                    value value;\n                                     name string:${view/name}.internal" />\n           </div>\n         </div>\n       </span>\n \n-      <span class="linkType external" data-linkType="external">\n+      <span class="linkType external" data-linkType="external"\n+            tal:define="value view/value/external | nothing"\n+            tal:attributes="python:\'linkType external\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_external_url">External</span>\n         <div class="form-group main">\n           <label for="external" i18n:translate="help_external_url">External URL (can be relative within this site or absolute if it starts with http:// or https://)</label>\n           <input type="text" name="external" placeholder="https://domain.com"\n                  tal:attributes="name string:${view/name}.external;\n-                                 value view/value/external | nothing" />\n+                                 value value" />\n         </div>\n       </span>\n \n-      <span class="linkType email" data-linkType="email">\n+      <span class="linkType email" data-linkType="email"\n+            tal:define="value view/value/email | nothing"\n+            tal:attributes="python:\'linkType email\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_email_url">Email</span>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label i18n:translate="help_email_url">Email Address</label>\n             <input type="text" name="email" placeholder="name@domain.com"\n                    tal:attributes="name string:${view/name}.email;\n-                                   value view/value/email | nothing" />\n+                                   value value" />\n           </div>\n           <div class="form-group">\n             <label i18n:translate="help_email_url_subject">Email Subject (optional)</label>\ndiff --git a/setup.py b/setup.py\nindex 3e70df9..36788d3 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -8,7 +8,7 @@ def read(*rnames):\n     return open(os.path.join(os.path.dirname(__file__), *rnames)).read()\n \n \n-version = \'3.1.2.dev0\'\n+version = \'3.1.3.dev0\'\n \n long_description = (\n     read(\'README.rst\') +\n@@ -28,6 +28,7 @@ def read(*rnames):\n                 "for use with z3c.form and Plone",\n     long_description=long_description,\n     classifiers=[\n+        \'Development Status :: 6 - Mature\',\n         "Framework :: Plone",\n         "Framework :: Plone :: Core",\n         "Framework :: Plone :: 5.2",\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2019-09-16T10:18:39+02:00
Author: mauro (mamico) <mauro.amico@unibo.it>
Commit: https://github.com/plone/plone.app.z3cform/commit/9af2b9f01a769954152bf5569d918614052901a2

missing attributename

Files changed:
M plone/app/z3cform/templates/link_input.pt

b'diff --git a/plone/app/z3cform/templates/link_input.pt b/plone/app/z3cform/templates/link_input.pt\nindex ed30f01..3c87a68 100644\n--- a/plone/app/z3cform/templates/link_input.pt\n+++ b/plone/app/z3cform/templates/link_input.pt\n@@ -6,7 +6,7 @@\n \n       <span class="linkType internal" data-linkType="internal"\n             tal:define="value view/value/internal | nothing"\n-            tal:attributes="python:\'linkType internal\' + (\' active\' if value else \'\')">\n+            tal:attributes="class python:\'linkType internal\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_internal_url">Internal</span>\n         <div>\n           <div class="form-group main">\n@@ -21,7 +21,7 @@\n \n       <span class="linkType external" data-linkType="external"\n             tal:define="value view/value/external | nothing"\n-            tal:attributes="python:\'linkType external\' + (\' active\' if value else \'\')">\n+            tal:attributes="class python:\'linkType external\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_external_url">External</span>\n         <div class="form-group main">\n           <label for="external" i18n:translate="help_external_url">External URL (can be relative within this site or absolute if it starts with http:// or https://)</label>\n@@ -33,7 +33,7 @@\n \n       <span class="linkType email" data-linkType="email"\n             tal:define="value view/value/email | nothing"\n-            tal:attributes="python:\'linkType email\' + (\' active\' if value else \'\')">\n+            tal:attributes="class python:\'linkType email\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_email_url">Email</span>\n         <div class="form-inline">\n           <div class="form-group main">\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2019-09-16T12:48:44+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/966b3e6a626c71c7270519540044d0831db7a819

Merge pull request #109 from mamico/master

Fix LinkWidget selected tab on edit

Files changed:
A news/108.bugfix
M plone/app/z3cform/templates/link_input.pt

b'diff --git a/news/108.bugfix b/news/108.bugfix\nnew file mode 100644\nindex 0000000..ec5d4c4\n--- /dev/null\n+++ b/news/108.bugfix\n@@ -0,0 +1,2 @@\n+- Fix LinkWidget selected tab on edit #108\n+  [mamico]\ndiff --git a/plone/app/z3cform/templates/link_input.pt b/plone/app/z3cform/templates/link_input.pt\nindex fa1ed93..3c87a68 100644\n--- a/plone/app/z3cform/templates/link_input.pt\n+++ b/plone/app/z3cform/templates/link_input.pt\n@@ -4,37 +4,43 @@\n     <div class="linkTypes pat-autotoc autotabs"\n          data-pat-autotoc="section:span.linkType;levels:span.linkLabel;">\n \n-      <span class="linkType internal" data-linkType="internal">\n+      <span class="linkType internal" data-linkType="internal"\n+            tal:define="value view/value/internal | nothing"\n+            tal:attributes="class python:\'linkType internal\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_internal_url">Internal</span>\n         <div>\n           <div class="form-group main">\n             <!-- this gives the name to the "linkType" -->\n             <input type="text" name="internal" class="pat-relateditems"\n                     tal:attributes="data-pat-relateditems view/pattern_data;\n-                                    value view/value/internal | nothing;\n+                                    value value;\n                                     name string:${view/name}.internal" />\n           </div>\n         </div>\n       </span>\n \n-      <span class="linkType external" data-linkType="external">\n+      <span class="linkType external" data-linkType="external"\n+            tal:define="value view/value/external | nothing"\n+            tal:attributes="class python:\'linkType external\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_external_url">External</span>\n         <div class="form-group main">\n           <label for="external" i18n:translate="help_external_url">External URL (can be relative within this site or absolute if it starts with http:// or https://)</label>\n           <input type="text" name="external" placeholder="https://domain.com"\n                  tal:attributes="name string:${view/name}.external;\n-                                 value view/value/external | nothing" />\n+                                 value value" />\n         </div>\n       </span>\n \n-      <span class="linkType email" data-linkType="email">\n+      <span class="linkType email" data-linkType="email"\n+            tal:define="value view/value/email | nothing"\n+            tal:attributes="class python:\'linkType email\' + (\' active\' if value else \'\')">\n         <span class="linkLabel" i18n:translate="label_email_url">Email</span>\n         <div class="form-inline">\n           <div class="form-group main">\n             <label i18n:translate="help_email_url">Email Address</label>\n             <input type="text" name="email" placeholder="name@domain.com"\n                    tal:attributes="name string:${view/name}.email;\n-                                   value view/value/email | nothing" />\n+                                   value value" />\n           </div>\n           <div class="form-group">\n             <label i18n:translate="help_email_url_subject">Email Subject (optional)</label>\n'

