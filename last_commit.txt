Repository: plone.restapi


Branch: refs/heads/master
Date: 2023-04-18T14:11:19+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/814b7012c0ad1b430e1d75a2b24b23788ae7171d

Set query on collection to avoid warnings during performance testing (#1624)

Files changed:
M src/plone/restapi/tests/performance.py

b'diff --git a/src/plone/restapi/tests/performance.py b/src/plone/restapi/tests/performance.py\nindex 758271a8b..ca9ab58ce 100644\n--- a/src/plone/restapi/tests/performance.py\n+++ b/src/plone/restapi/tests/performance.py\n@@ -169,7 +169,14 @@ def step_setup_content(context):\n         publish(folder10np[f"doc{i}"])\n \n     # Collection\n-    portal.invokeFactory("Collection", id="collection", title="Collection")\n+    query = [\n+        {\n+            "i": "portal_type",\n+            "o": "plone.app.querystring.operation.string.is",\n+            "v": ["Document"],\n+        }\n+    ]\n+    portal.invokeFactory("Collection", id="collection", title="Collection", query=query)\n     set_description(portal.collection)\n     set_text(portal.collection)\n     publish(portal.collection)\n'

