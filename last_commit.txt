Repository: mockup


Branch: refs/heads/master
Date: 2022-03-30T18:25:43+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/mockup/commit/5f2808da38ca2b2be3dca8f94e6326d606b94bc2

remove glyphicons

Files changed:
M src/pat/structure/js/views/app.js
M src/pat/structure/js/views/selectionwell.js
M src/pat/structure/js/views/table.js
M src/pat/structure/templates/table.xml
M src/pat/upload/templates/preview.xml
D src/pat/structure/js/views/addmenu.js

b'diff --git a/src/pat/structure/js/views/addmenu.js b/src/pat/structure/js/views/addmenu.js\ndeleted file mode 100644\nindex 240f51eb9..000000000\n--- a/src/pat/structure/js/views/addmenu.js\n+++ /dev/null\n@@ -1,61 +0,0 @@\n-import $ from "jquery";\n-import ButtonGroup from "../../../../core/ui/views/buttongroup";\n-import ButtonView from "../../../../core/ui/views/button";\n-\n-export default ButtonGroup.extend({\n-    title: "Add",\n-    className: "btn-group addnew",\n-    events: {},\n-\n-    initialize: function (options) {\n-        ButtonGroup.prototype.initialize.apply(this, [options]);\n-        $("body").on("context-info-loaded", (event, data) => {\n-            this.$items.empty();\n-            for (const item of data.addButtons) {\n-                const view = new ButtonView({\n-                    id: item.id,\n-                    title: item.title,\n-                    url: item.action,\n-                });\n-                view.render();\n-                const wrap = $("<li/>");\n-                // As we are reusing the whole ButtonView for render the add content\n-                // list we should remove entirely the "btn btn-default" classes.\n-                // This element in fact, should not have any class at all, so we\n-                // remove the attribute completely\n-                view.$el.removeAttr("class");\n-\n-                wrap.append(view.el);\n-                this.$items.append(wrap);\n-                view.$el.click((e) => {\n-                    this.buttonClicked.apply(this, [e, view]);\n-                    return false;\n-                });\n-            }\n-        });\n-    },\n-\n-    buttonClicked: function (e, button) {\n-        e.preventDefault();\n-        this.app.loading.show();\n-        window.location = button.url;\n-    },\n-\n-    render: function () {\n-        this.$el.empty();\n-\n-        this.$el.append(\n-            \'<button type="button" class="btn dropdown-toggle btn-default" data-bs-toggle="dropdown">\' +\n-                \'<span class="glyphicon glyphicon-plus"></span>\' +\n-                this.title +\n-                \'<span class="caret"></span>\' +\n-                "</a>" +\n-                \'<ul class="dropdown-menu">\' +\n-                "</ul>" +\n-                "</div>"\n-        );\n-\n-        this.$items = this.$(".dropdown-menu");\n-        return this;\n-    },\n-});\ndiff --git a/src/pat/structure/js/views/app.js b/src/pat/structure/js/views/app.js\nindex 0a035a3c7..9d7e31b6a 100644\n--- a/src/pat/structure/js/views/app.js\n+++ b/src/pat/structure/js/views/app.js\n@@ -588,7 +588,7 @@ export default BaseView.extend({\n     render: async function () {\n         this.$el.append(this.toolbar.render().el);\n         if (this.wellView) {\n-            this.$el.find("#btn-" + this.wellView.id).after(this.wellView.render().el);\n+            this.$el.find("#btn-" + this.wellView.id).after((await this.wellView.render()).el);\n         }\n         for (const form of this.forms) {\n             const id = $(form).attr("id");\ndiff --git a/src/pat/structure/js/views/selectionwell.js b/src/pat/structure/js/views/selectionwell.js\nindex 37a37026b..1d88bb42b 100644\n--- a/src/pat/structure/js/views/selectionwell.js\n+++ b/src/pat/structure/js/views/selectionwell.js\n@@ -1,6 +1,7 @@\n import $ from "jquery";\n import _ from "underscore";\n import PopoverView from "../../../../core/ui/views/popover";\n+import utils from "../../../../core/utils";\n import ItemTemplate from "../../templates/selection_item.xml";\n \n export default PopoverView.extend({\n@@ -9,7 +10,7 @@ export default PopoverView.extend({\n     title: _.template(\n         \'<input type="text" class="filter" placeholder="<%- _t("Filter") %>" />\' +\n             \'<a href="#" class=" remove-all">\' +\n-            \'<span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>\'\n+            \'<%= removeIcon %> <%- _t("remove all") %></a>\'\n     ),\n \n     content: _.template(\n@@ -36,7 +37,8 @@ export default PopoverView.extend({\n         this.options["item_template"] = _.template(ItemTemplate); // jshint ignore:line\n     },\n \n-    render: function () {\n+    render: async function () {\n+        this.options["removeIcon"] = await utils.resolveIcon("x-circle");\n         PopoverView.prototype.render.call(this);\n         if (this.collection.length === 0) {\n             this.$el.removeClass("active");\ndiff --git a/src/pat/structure/js/views/table.js b/src/pat/structure/js/views/table.js\nindex 9b7ebfb4f..09ce98369 100644\n--- a/src/pat/structure/js/views/table.js\n+++ b/src/pat/structure/js/views/table.js\n@@ -9,6 +9,7 @@ import TableTemplate from "../../templates/table.xml";\n import Sortable from "../../../sortable/sortable";\n import "../../../datatables/datatables";\n import "bootstrap/js/src/alert";\n+import utils from "../../../../core/utils";\n \n export default BaseView.extend({\n     tagName: "div",\n@@ -85,6 +86,7 @@ export default BaseView.extend({\n         this.$el.html(\n             this.template({\n                 _t: _t,\n+                homeIcon: await utils.resolveIcon(\'house\'),\n                 pathParts: _.filter(\n                     this.app.getCurrentPath().split("/").slice(1),\n                     (val) => {\ndiff --git a/src/pat/structure/templates/table.xml b/src/pat/structure/templates/table.xml\nindex 81904037a..28d9d4e32 100644\n--- a/src/pat/structure/templates/table.xml\n+++ b/src/pat/structure/templates/table.xml\n@@ -1,7 +1,7 @@\n <div class="fc-breadcrumbs-container">\n   <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n     <a href="#" title="<%- _t(\'Root\') %>" aria-label="<%- _t(\'Root\') %>" data-path="/">\n-      <span class="glyphicon glyphicon-home" aria-hidden="true"></span> /\n+      <%= homeIcon %> /\n     </a>\n     <% _.each(pathParts, (part, idx, list) => {\n       if(part){\ndiff --git a/src/pat/upload/templates/preview.xml b/src/pat/upload/templates/preview.xml\nindex 91e91d5f9..50b34bb12 100644\n--- a/src/pat/upload/templates/preview.xml\n+++ b/src/pat/upload/templates/preview.xml\n@@ -1,14 +1,12 @@\n <div class="row item form-inline">\n-    <div class="col-xs-2 action">\n+    <div class="col-1 action">\n         <button\n             type="button"\n-            class="btn btn-danger btn-xs remove-item"\n+            class="btn btn-danger btn-sm remove-item"\n             data-dz-remove=""\n-            href="javascript:undefined;">\n-            <span class="glyphicon glyphicon-remove"></span>\n-        </button>\n+            href="javascript:undefined;">x</button>\n     </div>\n-    <div class="col-xs-7 title">\n+    <div class="col-8 title">\n         <div class="dz-preview">\n           <div class="dz-details">\n             <div class="dz-filename"><span data-dz-name></span></div>\n@@ -19,7 +17,7 @@\n             <span class="dz-upload" data-dz-uploadprogress></span>\n         </div>\n     </div>\n-    <div class="col-xs-3 info">\n+    <div class="col-3 info">\n         <div class="dz-size" data-dz-size></div>\n         <img data-dz-thumbnail />\n     </div>\n'

Repository: mockup


Branch: refs/heads/master
Date: 2022-03-30T18:37:49+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/2b414834dcee746e2cb5377bec9c389ab0800fc4

Merge pull request #1145 from plone/remove-glyphicons

Remove glyphicons

Files changed:
M src/pat/structure/js/views/app.js
M src/pat/structure/js/views/selectionwell.js
M src/pat/structure/js/views/table.js
M src/pat/structure/templates/table.xml
M src/pat/upload/templates/preview.xml
D src/pat/structure/js/views/addmenu.js

b'diff --git a/src/pat/structure/js/views/addmenu.js b/src/pat/structure/js/views/addmenu.js\ndeleted file mode 100644\nindex 240f51eb9..000000000\n--- a/src/pat/structure/js/views/addmenu.js\n+++ /dev/null\n@@ -1,61 +0,0 @@\n-import $ from "jquery";\n-import ButtonGroup from "../../../../core/ui/views/buttongroup";\n-import ButtonView from "../../../../core/ui/views/button";\n-\n-export default ButtonGroup.extend({\n-    title: "Add",\n-    className: "btn-group addnew",\n-    events: {},\n-\n-    initialize: function (options) {\n-        ButtonGroup.prototype.initialize.apply(this, [options]);\n-        $("body").on("context-info-loaded", (event, data) => {\n-            this.$items.empty();\n-            for (const item of data.addButtons) {\n-                const view = new ButtonView({\n-                    id: item.id,\n-                    title: item.title,\n-                    url: item.action,\n-                });\n-                view.render();\n-                const wrap = $("<li/>");\n-                // As we are reusing the whole ButtonView for render the add content\n-                // list we should remove entirely the "btn btn-default" classes.\n-                // This element in fact, should not have any class at all, so we\n-                // remove the attribute completely\n-                view.$el.removeAttr("class");\n-\n-                wrap.append(view.el);\n-                this.$items.append(wrap);\n-                view.$el.click((e) => {\n-                    this.buttonClicked.apply(this, [e, view]);\n-                    return false;\n-                });\n-            }\n-        });\n-    },\n-\n-    buttonClicked: function (e, button) {\n-        e.preventDefault();\n-        this.app.loading.show();\n-        window.location = button.url;\n-    },\n-\n-    render: function () {\n-        this.$el.empty();\n-\n-        this.$el.append(\n-            \'<button type="button" class="btn dropdown-toggle btn-default" data-bs-toggle="dropdown">\' +\n-                \'<span class="glyphicon glyphicon-plus"></span>\' +\n-                this.title +\n-                \'<span class="caret"></span>\' +\n-                "</a>" +\n-                \'<ul class="dropdown-menu">\' +\n-                "</ul>" +\n-                "</div>"\n-        );\n-\n-        this.$items = this.$(".dropdown-menu");\n-        return this;\n-    },\n-});\ndiff --git a/src/pat/structure/js/views/app.js b/src/pat/structure/js/views/app.js\nindex 0a035a3c7..9d7e31b6a 100644\n--- a/src/pat/structure/js/views/app.js\n+++ b/src/pat/structure/js/views/app.js\n@@ -588,7 +588,7 @@ export default BaseView.extend({\n     render: async function () {\n         this.$el.append(this.toolbar.render().el);\n         if (this.wellView) {\n-            this.$el.find("#btn-" + this.wellView.id).after(this.wellView.render().el);\n+            this.$el.find("#btn-" + this.wellView.id).after((await this.wellView.render()).el);\n         }\n         for (const form of this.forms) {\n             const id = $(form).attr("id");\ndiff --git a/src/pat/structure/js/views/selectionwell.js b/src/pat/structure/js/views/selectionwell.js\nindex 37a37026b..1d88bb42b 100644\n--- a/src/pat/structure/js/views/selectionwell.js\n+++ b/src/pat/structure/js/views/selectionwell.js\n@@ -1,6 +1,7 @@\n import $ from "jquery";\n import _ from "underscore";\n import PopoverView from "../../../../core/ui/views/popover";\n+import utils from "../../../../core/utils";\n import ItemTemplate from "../../templates/selection_item.xml";\n \n export default PopoverView.extend({\n@@ -9,7 +10,7 @@ export default PopoverView.extend({\n     title: _.template(\n         \'<input type="text" class="filter" placeholder="<%- _t("Filter") %>" />\' +\n             \'<a href="#" class=" remove-all">\' +\n-            \'<span class="glyphicon glyphicon-remove-circle"></span> <%- _t("remove all") %></a>\'\n+            \'<%= removeIcon %> <%- _t("remove all") %></a>\'\n     ),\n \n     content: _.template(\n@@ -36,7 +37,8 @@ export default PopoverView.extend({\n         this.options["item_template"] = _.template(ItemTemplate); // jshint ignore:line\n     },\n \n-    render: function () {\n+    render: async function () {\n+        this.options["removeIcon"] = await utils.resolveIcon("x-circle");\n         PopoverView.prototype.render.call(this);\n         if (this.collection.length === 0) {\n             this.$el.removeClass("active");\ndiff --git a/src/pat/structure/js/views/table.js b/src/pat/structure/js/views/table.js\nindex 9b7ebfb4f..09ce98369 100644\n--- a/src/pat/structure/js/views/table.js\n+++ b/src/pat/structure/js/views/table.js\n@@ -9,6 +9,7 @@ import TableTemplate from "../../templates/table.xml";\n import Sortable from "../../../sortable/sortable";\n import "../../../datatables/datatables";\n import "bootstrap/js/src/alert";\n+import utils from "../../../../core/utils";\n \n export default BaseView.extend({\n     tagName: "div",\n@@ -85,6 +86,7 @@ export default BaseView.extend({\n         this.$el.html(\n             this.template({\n                 _t: _t,\n+                homeIcon: await utils.resolveIcon(\'house\'),\n                 pathParts: _.filter(\n                     this.app.getCurrentPath().split("/").slice(1),\n                     (val) => {\ndiff --git a/src/pat/structure/templates/table.xml b/src/pat/structure/templates/table.xml\nindex 81904037a..28d9d4e32 100644\n--- a/src/pat/structure/templates/table.xml\n+++ b/src/pat/structure/templates/table.xml\n@@ -1,7 +1,7 @@\n <div class="fc-breadcrumbs-container">\n   <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n     <a href="#" title="<%- _t(\'Root\') %>" aria-label="<%- _t(\'Root\') %>" data-path="/">\n-      <span class="glyphicon glyphicon-home" aria-hidden="true"></span> /\n+      <%= homeIcon %> /\n     </a>\n     <% _.each(pathParts, (part, idx, list) => {\n       if(part){\ndiff --git a/src/pat/upload/templates/preview.xml b/src/pat/upload/templates/preview.xml\nindex 91e91d5f9..50b34bb12 100644\n--- a/src/pat/upload/templates/preview.xml\n+++ b/src/pat/upload/templates/preview.xml\n@@ -1,14 +1,12 @@\n <div class="row item form-inline">\n-    <div class="col-xs-2 action">\n+    <div class="col-1 action">\n         <button\n             type="button"\n-            class="btn btn-danger btn-xs remove-item"\n+            class="btn btn-danger btn-sm remove-item"\n             data-dz-remove=""\n-            href="javascript:undefined;">\n-            <span class="glyphicon glyphicon-remove"></span>\n-        </button>\n+            href="javascript:undefined;">x</button>\n     </div>\n-    <div class="col-xs-7 title">\n+    <div class="col-8 title">\n         <div class="dz-preview">\n           <div class="dz-details">\n             <div class="dz-filename"><span data-dz-name></span></div>\n@@ -19,7 +17,7 @@\n             <span class="dz-upload" data-dz-uploadprogress></span>\n         </div>\n     </div>\n-    <div class="col-xs-3 info">\n+    <div class="col-3 info">\n         <div class="dz-size" data-dz-size></div>\n         <img data-dz-thumbnail />\n     </div>\n'

