Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-07T11:07:42+02:00
Author: Philipp Auersperg-Castell (zworkb) <phil@bluedynamics.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/d8e8ed203d48de1e4dd550bb0d11c8f423de7c44

add plone.textindexer to event and make 'text' in RichText searchable

Files changed:
M plone/app/contenttypes/behaviors/richtext.py
M plone/app/contenttypes/profiles/default/types/Event.xml

b'diff --git a/plone/app/contenttypes/behaviors/richtext.py b/plone/app/contenttypes/behaviors/richtext.py\nindex ed7feeef..9238c9b9 100644\n--- a/plone/app/contenttypes/behaviors/richtext.py\n+++ b/plone/app/contenttypes/behaviors/richtext.py\n@@ -1,6 +1,7 @@\n # -*- coding: utf-8 -*-\n from Acquisition import aq_base\n from plone.app.contenttypes import _\n+from plone.app.dexterity.textindexer import searchable\n from plone.app.textfield import RichText as RichTextField\n from plone.app.z3cform.widget import RichTextFieldWidget\n from plone.autoform import directives as form\n@@ -28,6 +29,7 @@ class IRichTextBehavior(model.Schema):\n     )\n     form.widget(\'text\', RichTextFieldWidget)\n     model.primary(\'text\')\n+    searchable("text")\n \n \n @implementer(IRichTextBehavior)\ndiff --git a/plone/app/contenttypes/profiles/default/types/Event.xml b/plone/app/contenttypes/profiles/default/types/Event.xml\nindex 8076925d..ab761508 100644\n--- a/plone/app/contenttypes/profiles/default/types/Event.xml\n+++ b/plone/app/contenttypes/profiles/default/types/Event.xml\n@@ -32,6 +32,7 @@\n \n   <!-- Enabled behaviors -->\n   <property name="behaviors" purge="false">\n+    <element value="plone.textindexer" />\n     <element value="plone.eventbasic" />\n     <element value="plone.eventrecurrence" />\n     <element value="plone.eventlocation" />\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-07T11:07:42+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/29435e8b6ef3b0831af6b874efa439ca4c48aa32

add newsfile

Files changed:
A news/2780.feature

b'diff --git a/news/2780.feature b/news/2780.feature\nnew file mode 100644\nindex 00000000..ffe38c89\n--- /dev/null\n+++ b/news/2780.feature\n@@ -0,0 +1,2 @@\n+PLIP 2780: Move features of collective.dexteritytextindexer to core.\n+[zworkb]\n'

