Repository: Products.CMFDiffTool


Branch: refs/heads/master
Date: 2016-02-03T20:47:32+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFDiffTool/commit/0f63bd20f39a4f2cc073f623a41e5cd77f292190

fix test (don't expect role from pac-tests)

Files changed:
M Products/CMFDiffTool/tests/testChangeSet.py

diff --git a/Products/CMFDiffTool/tests/testChangeSet.py b/Products/CMFDiffTool/tests/testChangeSet.py
index 76edad3..585da74 100644
--- a/Products/CMFDiffTool/tests/testChangeSet.py
+++ b/Products/CMFDiffTool/tests/testChangeSet.py
@@ -8,6 +8,8 @@
 from Products.CMFCore.utils import getToolByName
 from Products.CMFDiffTool.ChangeSet import BaseChangeSet
 from Products.CMFPlone.utils import safe_hasattr
+from plone.app.testing import setRoles
+from plone.app.testing import TEST_USER_ID
 from unittest import TestCase
 
 
@@ -23,6 +25,7 @@ def setUp(self):
         cs = BaseChangeSet('my_changeset')
         # ChangeSet needs an acquisition wrapper
         self.cs = cs.__of__(self.portal)
+        setRoles(self.portal, TEST_USER_ID, ['Contributor'])
 
     def testInterface(self):
         """Ensure that tool instances implement the portal_diff interface"""


