Repository: mockup


Branch: refs/heads/master
Date: 2017-02-03T15:14:02+01:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/mockup/commit/333fe8da6ff22b01ca0a33af94a7f595753e7b78

feat: add defaultSortOn option in livesearch pattern

Files changed:
M CHANGES.rst
M mockup/patterns/livesearch/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index bf2e5ba..727d6a7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -108,6 +108,9 @@ New:
   of plain string to make importcss-plugin more configurable through pattern
   [datakurre]
 
+- Add ``defaultSortOn`` option in ``livesearch`` pattern.
+  [Gagaro]
+
 Fixes:
 
 - Fix jquery.event.drag to work with HTML5 drag
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 0327d22..823f47b 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -41,6 +41,7 @@ define([
     resultsClass: 'livesearch-results',
     defaults: {
       ajaxUrl: null,
+      defaultSortOn: '',
       perPage: 7,
       quietMillis: 350,
       minimumInputLength: 4,
@@ -68,7 +69,7 @@ define([
           if($searchResults.length > 0){
             return $searchResults.attr('data-default-sort');
           }
-          return '';
+          return self.options.defaultSortOn;
         }
         // cut string before sort_on parameter
         var sort_on = parameters.substring(sorton_position);


Repository: mockup


Branch: refs/heads/master
Date: 2017-02-05T22:25:00+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/8af3ae1ca70f179af117c230caab5e63093698db

Merge pull request #737 from plone/livesearch-default-sort-on-options

feat: add defaultSortOn option in livesearch pattern

Files changed:
M CHANGES.rst
M mockup/patterns/livesearch/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index bf2e5ba..727d6a7 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -108,6 +108,9 @@ New:
   of plain string to make importcss-plugin more configurable through pattern
   [datakurre]
 
+- Add ``defaultSortOn`` option in ``livesearch`` pattern.
+  [Gagaro]
+
 Fixes:
 
 - Fix jquery.event.drag to work with HTML5 drag
diff --git a/mockup/patterns/livesearch/pattern.js b/mockup/patterns/livesearch/pattern.js
index 0327d22..823f47b 100644
--- a/mockup/patterns/livesearch/pattern.js
+++ b/mockup/patterns/livesearch/pattern.js
@@ -41,6 +41,7 @@ define([
     resultsClass: 'livesearch-results',
     defaults: {
       ajaxUrl: null,
+      defaultSortOn: '',
       perPage: 7,
       quietMillis: 350,
       minimumInputLength: 4,
@@ -68,7 +69,7 @@ define([
           if($searchResults.length > 0){
             return $searchResults.attr('data-default-sort');
           }
-          return '';
+          return self.options.defaultSortOn;
         }
         // cut string before sort_on parameter
         var sort_on = parameters.substring(sorton_position);


