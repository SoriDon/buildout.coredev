Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2023-04-12T01:38:38+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/517312ce8d0faab08f591e0da287497b655290ca

fix and cleanup test_behaviors_table_of_contents

Files changed:
A news/fix-test_behaviors_table_of_contents.bugfix
M plone/app/contenttypes/tests/test_behaviors_table_of_contents.py

b'diff --git a/news/fix-test_behaviors_table_of_contents.bugfix b/news/fix-test_behaviors_table_of_contents.bugfix\nnew file mode 100644\nindex 00000000..db325870\n--- /dev/null\n+++ b/news/fix-test_behaviors_table_of_contents.bugfix\n@@ -0,0 +1,2 @@\n+Fix test_behaviors_table_of_contents: ordering of attrtributes changed.\n+@jensens\ndiff --git a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\nindex 34a2fda5..3a7c0d4c 100644\n--- a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n+++ b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n@@ -25,17 +25,11 @@ def setUp(self):\n         fti = DexterityFTI("tocdocument")\n         self.portal.portal_types._setObject("tocdocument", fti)\n         fti.klass = "plone.dexterity.content.Item"\n-        fti.behaviors = (\n-            "plone.app.contenttypes.behaviors.tableofcontents." "ITableOfContents",\n-        )\n+        fti.behaviors = ("plone.tableofcontents", "plone.richtext")\n         self.fti = fti\n-        alsoProvides(self.portal.REQUEST, IPloneAppContenttypesLayer)\n         alsoProvides(self.request, IPloneAppContenttypesLayer)\n-        from plone.app.contenttypes.behaviors.tableofcontents import ITableOfContents\n-\n-        alsoProvides(self.request, ITableOfContents)\n         self.portal.invokeFactory(\n-            "tocdocument", id="tocdoc", title="Document with a table of contents"\n+            "tocdocument", id="tocdoc", title="Document with a table of contents",\n         )\n         import transaction\n \n@@ -65,4 +59,4 @@ def test_toc_viewlet_shows_up(self):\n         ]\n         # Submit form\n         self.browser.getControl("Save").click()\n-        self.assertTrue(\'<section id="document-toc"\' in self.browser.contents)\n+        self.assertTrue(\'id="document-toc"\' in self.browser.contents)\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2023-04-11T23:41:33Z
Author: pre-commit-ci[bot] (pre-commit-ci[bot]) <66853113+pre-commit-ci[bot]@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/b8650e4c7a94c5bb5722be55c9e8bcd431cea97b

[pre-commit.ci] auto fixes from pre-commit.com hooks

for more information, see https://pre-commit.ci

Files changed:
M plone/app/contenttypes/tests/test_behaviors_table_of_contents.py

b'diff --git a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\nindex 3a7c0d4c..c603d96d 100644\n--- a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n+++ b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n@@ -29,7 +29,9 @@ def setUp(self):\n         self.fti = fti\n         alsoProvides(self.request, IPloneAppContenttypesLayer)\n         self.portal.invokeFactory(\n-            "tocdocument", id="tocdoc", title="Document with a table of contents",\n+            "tocdocument",\n+            id="tocdoc",\n+            title="Document with a table of contents",\n         )\n         import transaction\n \n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2023-04-12T01:50:06+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/935d39af23514bbb088b570e37d26537fd0287bb

Merge pull request #660 from plone/fix-test_behaviors_table_of_contents

fix and cleanup test_behaviors_table_of_contents

Files changed:
A news/fix-test_behaviors_table_of_contents.bugfix
M plone/app/contenttypes/tests/test_behaviors_table_of_contents.py

b'diff --git a/news/fix-test_behaviors_table_of_contents.bugfix b/news/fix-test_behaviors_table_of_contents.bugfix\nnew file mode 100644\nindex 00000000..db325870\n--- /dev/null\n+++ b/news/fix-test_behaviors_table_of_contents.bugfix\n@@ -0,0 +1,2 @@\n+Fix test_behaviors_table_of_contents: ordering of attrtributes changed.\n+@jensens\ndiff --git a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\nindex 34a2fda5..c603d96d 100644\n--- a/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n+++ b/plone/app/contenttypes/tests/test_behaviors_table_of_contents.py\n@@ -25,17 +25,13 @@ def setUp(self):\n         fti = DexterityFTI("tocdocument")\n         self.portal.portal_types._setObject("tocdocument", fti)\n         fti.klass = "plone.dexterity.content.Item"\n-        fti.behaviors = (\n-            "plone.app.contenttypes.behaviors.tableofcontents." "ITableOfContents",\n-        )\n+        fti.behaviors = ("plone.tableofcontents", "plone.richtext")\n         self.fti = fti\n-        alsoProvides(self.portal.REQUEST, IPloneAppContenttypesLayer)\n         alsoProvides(self.request, IPloneAppContenttypesLayer)\n-        from plone.app.contenttypes.behaviors.tableofcontents import ITableOfContents\n-\n-        alsoProvides(self.request, ITableOfContents)\n         self.portal.invokeFactory(\n-            "tocdocument", id="tocdoc", title="Document with a table of contents"\n+            "tocdocument",\n+            id="tocdoc",\n+            title="Document with a table of contents",\n         )\n         import transaction\n \n@@ -65,4 +61,4 @@ def test_toc_viewlet_shows_up(self):\n         ]\n         # Submit form\n         self.browser.getControl("Save").click()\n-        self.assertTrue(\'<section id="document-toc"\' in self.browser.contents)\n+        self.assertTrue(\'id="document-toc"\' in self.browser.contents)\n'

