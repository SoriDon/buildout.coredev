Repository: plone.app.users


Branch: refs/heads/master
Date: 2022-08-25T08:58:32+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.app.users/commit/083275393f3c14a5f9ce37613ba36521a4be03ae

Added a timezone setter

Add a timezone setter that prevents `None` to be stored as a timezone.
Save it as an empty string instead.

Fixes #109

Files changed:
A news/109.bugfix
M plone/app/users/browser/account.py

b"diff --git a/news/109.bugfix b/news/109.bugfix\nnew file mode 100644\nindex 00000000..a7f6796f\n--- /dev/null\n+++ b/news/109.bugfix\n@@ -0,0 +1 @@\n+Ensure that, when no timezone is selected, the value of the stored timezone is an empty string\ndiff --git a/plone/app/users/browser/account.py b/plone/app/users/browser/account.py\nindex f89bac92..f13c085c 100644\n--- a/plone/app/users/browser/account.py\n+++ b/plone/app/users/browser/account.py\n@@ -138,6 +138,16 @@ def wysiwyg_editor(self, value):\n             value = ''\n         return self._setProperty('wysiwyg_editor', value)\n \n+    @property\n+    def timezone(self):\n+        return self._getProperty('timezone')\n+\n+    @timezone.setter\n+    def timezone(self, value):\n+        if value is None:\n+            value = ''\n+        return self._setProperty('timezone', value)\n+\n \n @implementer(IAccountPanelForm)\n class AccountPanelForm(AutoExtensibleForm, form.Form):\n"

Repository: plone.app.users


Branch: refs/heads/master
Date: 2022-08-25T17:26:16+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.users/commit/a1de9d77db592aad96591f5f3ebd2c5944c6fb17

Merge pull request #110 from plone/109.bugfix

Added a timezone setter

Files changed:
A news/109.bugfix
M plone/app/users/browser/account.py

b"diff --git a/news/109.bugfix b/news/109.bugfix\nnew file mode 100644\nindex 00000000..a7f6796f\n--- /dev/null\n+++ b/news/109.bugfix\n@@ -0,0 +1 @@\n+Ensure that, when no timezone is selected, the value of the stored timezone is an empty string\ndiff --git a/plone/app/users/browser/account.py b/plone/app/users/browser/account.py\nindex f89bac92..f13c085c 100644\n--- a/plone/app/users/browser/account.py\n+++ b/plone/app/users/browser/account.py\n@@ -138,6 +138,16 @@ def wysiwyg_editor(self, value):\n             value = ''\n         return self._setProperty('wysiwyg_editor', value)\n \n+    @property\n+    def timezone(self):\n+        return self._getProperty('timezone')\n+\n+    @timezone.setter\n+    def timezone(self, value):\n+        if value is None:\n+            value = ''\n+        return self._setProperty('timezone', value)\n+\n \n @implementer(IAccountPanelForm)\n class AccountPanelForm(AutoExtensibleForm, form.Form):\n"

