Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-04-25T00:02:41+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.querystring/commit/7461aaec758cbdb0f777b7eebeab9c9b57f38569

Remove cyclic dependency on plone.app.layout, use plone.base instead.

Files changed:
A news/rm-cyclic-dep.bugfix
M plone/app/querystring/queryparser.py
M setup.py

b'diff --git a/news/rm-cyclic-dep.bugfix b/news/rm-cyclic-dep.bugfix\nnew file mode 100644\nindex 0000000..61501bc\n--- /dev/null\n+++ b/news/rm-cyclic-dep.bugfix\n@@ -0,0 +1,2 @@\n+Fix cyclic dependency, do not depend on `plone.app.layout`.\n+[@jensens]\ndiff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py\nindex 40fbad8..08cfb1b 100644\n--- a/plone/app/querystring/queryparser.py\n+++ b/plone/app/querystring/queryparser.py\n@@ -2,7 +2,7 @@\n from collections import namedtuple\n from DateTime import DateTime\n from DateTime.interfaces import DateTimeError\n-from plone.app.layout.navigation.root import getNavigationRoot\n+from plone.base.navigationroot import get_navigation_root\n from plone.base.interfaces import IPloneSiteRoot\n from plone.base.utils import base_hasattr\n from plone.registry.interfaces import IRegistry\n@@ -324,7 +324,7 @@ def _absolutePath(context, row):\n \n \n def _navigationPath(context, row):\n-    return _pathByRoot(getNavigationRoot(context), context, row)\n+    return _pathByRoot(get_navigation_root(context), context, row)\n \n \n def _relativePath(context, row):\ndiff --git a/setup.py b/setup.py\nindex b8ff79e..33cbd06 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -41,7 +41,6 @@\n     install_requires=[\n         "setuptools",\n         "plone.app.contentlisting",\n-        "plone.app.layout",\n         "plone.app.registry>=1.1",\n         "plone.base",\n         "plone.batching",\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-04-24T22:04:17Z
Author: pre-commit-ci[bot] (pre-commit-ci[bot]) <66853113+pre-commit-ci[bot]@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.querystring/commit/48a117760183f9d70bcb329df718887d74d0dd23

[pre-commit.ci] auto fixes from pre-commit.com hooks

for more information, see https://pre-commit.ci

Files changed:
M plone/app/querystring/queryparser.py

b'diff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py\nindex 08cfb1b..7c6b0cd 100644\n--- a/plone/app/querystring/queryparser.py\n+++ b/plone/app/querystring/queryparser.py\n@@ -2,8 +2,8 @@\n from collections import namedtuple\n from DateTime import DateTime\n from DateTime.interfaces import DateTimeError\n-from plone.base.navigationroot import get_navigation_root\n from plone.base.interfaces import IPloneSiteRoot\n+from plone.base.navigationroot import get_navigation_root\n from plone.base.utils import base_hasattr\n from plone.registry.interfaces import IRegistry\n from plone.uuid.interfaces import IUUID\n'

Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2023-04-25T10:27:21+02:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/9c9bfb4a797eb312060d1cbdf96a4b569dbed674

Merge pull request #123 from plone/rm-cyclic-dep

Remove cyclic dependency on plone.app.layout, use plone.base instead.

Files changed:
A news/rm-cyclic-dep.bugfix
M plone/app/querystring/queryparser.py
M setup.py

b'diff --git a/news/rm-cyclic-dep.bugfix b/news/rm-cyclic-dep.bugfix\nnew file mode 100644\nindex 0000000..61501bc\n--- /dev/null\n+++ b/news/rm-cyclic-dep.bugfix\n@@ -0,0 +1,2 @@\n+Fix cyclic dependency, do not depend on `plone.app.layout`.\n+[@jensens]\ndiff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py\nindex 40fbad8..7c6b0cd 100644\n--- a/plone/app/querystring/queryparser.py\n+++ b/plone/app/querystring/queryparser.py\n@@ -2,8 +2,8 @@\n from collections import namedtuple\n from DateTime import DateTime\n from DateTime.interfaces import DateTimeError\n-from plone.app.layout.navigation.root import getNavigationRoot\n from plone.base.interfaces import IPloneSiteRoot\n+from plone.base.navigationroot import get_navigation_root\n from plone.base.utils import base_hasattr\n from plone.registry.interfaces import IRegistry\n from plone.uuid.interfaces import IUUID\n@@ -324,7 +324,7 @@ def _absolutePath(context, row):\n \n \n def _navigationPath(context, row):\n-    return _pathByRoot(getNavigationRoot(context), context, row)\n+    return _pathByRoot(get_navigation_root(context), context, row)\n \n \n def _relativePath(context, row):\ndiff --git a/setup.py b/setup.py\nindex b8ff79e..33cbd06 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -41,7 +41,6 @@\n     install_requires=[\n         "setuptools",\n         "plone.app.contentlisting",\n-        "plone.app.layout",\n         "plone.app.registry>=1.1",\n         "plone.base",\n         "plone.batching",\n'

