Repository: plone.protect


Branch: refs/heads/master
Date: 2018-10-07T11:59:10+02:00
Author: tschorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.protect/commit/75d5aef0790fadbe67b6e190f32ac68d02e5c347

use AccessControl.requestmethod.buildfacade (now public)

Files changed:
M plone/protect/utils.py

b'diff --git a/plone/protect/utils.py b/plone/protect/utils.py\nindex 1d09829..de859ad 100644\n--- a/plone/protect/utils.py\n+++ b/plone/protect/utils.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from AccessControl.requestmethod import _buildFacade\n+from AccessControl.requestmethod import buildfacade\n from Acquisition import aq_parent\n from OFS.interfaces import IApplication\n from plone.keyring.keymanager import KeyManager\n@@ -60,7 +60,7 @@ def _curried(*args, **kw):\n         # Build a facade, with a reference to our locally-scoped _curried\n         facade_globs = dict(_curried=_curried, _default=_default)\n         name = callable.__name__\n-        exec(_buildFacade(name, spec, callable.__doc__), facade_globs)\n+        exec(buildfacade(name, callable, callable.__doc__), facade_globs)\n         return facade_globs[name]\n \n \n'

Repository: plone.protect


Branch: refs/heads/master
Date: 2018-10-08T08:44:30+02:00
Author: tschorr (tschorr) <t_schorr@gmx.de>
Commit: https://github.com/plone/plone.protect/commit/4da12041630ffd73cb87a46223636e59c3cdf336

update changelog

Files changed:
M CHANGES.rst

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex dd36677..2ce2bb7 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -6,7 +6,9 @@ Changelog\n \n Breaking changes:\n \n-- *add item here*\n+- Adapt to changed visibility of `buildfacade` in\n+  `AccessControl.requestmethod`. Requires AccessControl >= 4.0b6\n+  [tschorr]\n \n New features:\n \n'

Repository: plone.protect


Branch: refs/heads/master
Date: 2018-10-09T14:26:55+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.protect/commit/fb9ae2db0084f638f3e7658979df2a681e9598bb

Merge pull request #85 from plone/use_buildfacade

Use AccessControl.requestmethod.buildfacade

Files changed:
M CHANGES.rst
M plone/protect/utils.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex dd36677..2ce2bb7 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -6,7 +6,9 @@ Changelog\n \n Breaking changes:\n \n-- *add item here*\n+- Adapt to changed visibility of `buildfacade` in\n+  `AccessControl.requestmethod`. Requires AccessControl >= 4.0b6\n+  [tschorr]\n \n New features:\n \ndiff --git a/plone/protect/utils.py b/plone/protect/utils.py\nindex 1d09829..de859ad 100644\n--- a/plone/protect/utils.py\n+++ b/plone/protect/utils.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from AccessControl.requestmethod import _buildFacade\n+from AccessControl.requestmethod import buildfacade\n from Acquisition import aq_parent\n from OFS.interfaces import IApplication\n from plone.keyring.keymanager import KeyManager\n@@ -60,7 +60,7 @@ def _curried(*args, **kw):\n         # Build a facade, with a reference to our locally-scoped _curried\n         facade_globs = dict(_curried=_curried, _default=_default)\n         name = callable.__name__\n-        exec(_buildFacade(name, spec, callable.__doc__), facade_globs)\n+        exec(buildfacade(name, callable, callable.__doc__), facade_globs)\n         return facade_globs[name]\n \n \n'

