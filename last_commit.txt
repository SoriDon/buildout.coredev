Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-07T10:44:35+03:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/cdd687b87fa092496a2c42cf07d566d3578b973d

Increase version to 5108

Files changed:
M Products/CMFPlone/profiles/default/metadata.xml

diff --git a/Products/CMFPlone/profiles/default/metadata.xml b/Products/CMFPlone/profiles/default/metadata.xml
index 3f3cb1285..6019047a9 100644
--- a/Products/CMFPlone/profiles/default/metadata.xml
+++ b/Products/CMFPlone/profiles/default/metadata.xml
@@ -1,4 +1,4 @@
 <?xml version="1.0"?>
 <metadata>
-  <version>5107</version>
+  <version>5108</version>
 </metadata>


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-07T12:06:06+03:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/7046fd5fac83faf3245d6751ebfedabc022e8863

Merge branch 'master' of git://github.com/plone/Products.CMFPlone

Files changed:




Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-13T18:50:45+02:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/92ce04e12e0ef19de14828844f6c4f5c928e7f98

Merge remote-tracking branch 'remotes/origin/master'

Files changed:
M CHANGES.rst
M Products/CMFPlone/profiles/default/rolemap.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index fdbd2ddae..70ea76cd5 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,11 +14,12 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Added ``Show Toolbar`` permission.
+  [agitator]
 
 Bug fixes:
 
-- add :focus class on toolbar for keyboard users  (https://github.com/plone/Products.CMFPlone/issues/1620) 
+- add :focus class on toolbar for keyboard users  (https://github.com/plone/Products.CMFPlone/issues/1620)
   [polyester]
 
 
diff --git a/Products/CMFPlone/profiles/default/rolemap.xml b/Products/CMFPlone/profiles/default/rolemap.xml
index 59532ef59..88b9f109c 100644
--- a/Products/CMFPlone/profiles/default/rolemap.xml
+++ b/Products/CMFPlone/profiles/default/rolemap.xml
@@ -217,5 +217,9 @@
       <role name="Manager" />
       <role name="Site Administrator"/>
     </permission>
+    <permission name="Show Toolbar"
+                acquire="False">
+      <role name="Authenticated"/>
+    </permission>
   </permissions>
 </rolemap>


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-14T14:14:56+02:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/5de833c09936083443eb1d915ce95145e9c6cb12

Fix empty DX add_forms if formlib is also installed thru addon dependencies.

Files changed:
M Products/CMFPlone/meta.zcml

diff --git a/Products/CMFPlone/meta.zcml b/Products/CMFPlone/meta.zcml
index a317b7399..a4542c655 100644
--- a/Products/CMFPlone/meta.zcml
+++ b/Products/CMFPlone/meta.zcml
@@ -18,6 +18,12 @@
     <meta:provides feature="plone-5" />
     <meta:provides feature="plone-51" />
 
+    <configure zcml:condition="installed Products.CMFDefault">
+        <exclude package="Products.CMFDefault.browser" file="configure.zcml" />
+        <exclude package="Products.CMFDefault.formlib" file="configure.zcml" />
+        <exclude package="Products.CMFDefault.upgrade" file="configure.zcml" />
+    </configure>
+
     <include package="Products.CMFCore" file="meta.zcml" />
     <include package="Products.GenericSetup" file="meta.zcml" />
 


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-14T14:17:02+02:00
Author: MrTango (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/85efa1d93ce5cb8427f9110a353ae5eb00ff2fe9

Add changelog entry

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 70ea76cd5..1891a1a7a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -22,6 +22,9 @@ Bug fixes:
 - add :focus class on toolbar for keyboard users  (https://github.com/plone/Products.CMFPlone/issues/1620)
   [polyester]
 
+- Fix empty DX add_forms if formlib is also installed thru addon dependencies
+  [MrTango]
+
 
 5.1b4 (2017-07-03)
 ------------------


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-07-14T15:05:46+02:00
Author: Maik Derstappen (MrTango) <md@derico.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/aff66778e4fa38da5eee984817b242f3153e516e

Merge pull request #2106 from plone/MrTango_fix_addforms_if_formlib_is_installed_too

Mr tango fix addforms if formlib is installed too

Files changed:
M CHANGES.rst
M Products/CMFPlone/meta.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 70ea76cd5..1891a1a7a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -22,6 +22,9 @@ Bug fixes:
 - add :focus class on toolbar for keyboard users  (https://github.com/plone/Products.CMFPlone/issues/1620)
   [polyester]
 
+- Fix empty DX add_forms if formlib is also installed thru addon dependencies
+  [MrTango]
+
 
 5.1b4 (2017-07-03)
 ------------------
diff --git a/Products/CMFPlone/meta.zcml b/Products/CMFPlone/meta.zcml
index a317b7399..a4542c655 100644
--- a/Products/CMFPlone/meta.zcml
+++ b/Products/CMFPlone/meta.zcml
@@ -18,6 +18,12 @@
     <meta:provides feature="plone-5" />
     <meta:provides feature="plone-51" />
 
+    <configure zcml:condition="installed Products.CMFDefault">
+        <exclude package="Products.CMFDefault.browser" file="configure.zcml" />
+        <exclude package="Products.CMFDefault.formlib" file="configure.zcml" />
+        <exclude package="Products.CMFDefault.upgrade" file="configure.zcml" />
+    </configure>
+
     <include package="Products.CMFCore" file="meta.zcml" />
     <include package="Products.GenericSetup" file="meta.zcml" />
 


