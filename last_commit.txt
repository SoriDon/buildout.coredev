Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-15T10:57:46+01:00
Author: Peter Holzer (agitator) <hpeter@agitator.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/d15f49981e9b391c626cc05f727b0984fd71c0be

extended interface for invisible-grid table styles

Files changed:
M CHANGES.rst
M Products/CMFPlone/interfaces/controlpanel.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9e28947..c804e71 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -25,6 +25,10 @@ New:
   [thet]
 
 - Control panel to mange portal actions.
+- added invisible-grid table styles
+  [agitator]
+
+- Control panel to mange portal actions
   [ebrehault]
 
 - new less variable to configure the width of the toolbars submenu called
diff --git a/Products/CMFPlone/interfaces/controlpanel.py b/Products/CMFPlone/interfaces/controlpanel.py
index 4ac5bad..7fe1766 100644
--- a/Products/CMFPlone/interfaces/controlpanel.py
+++ b/Products/CMFPlone/interfaces/controlpanel.py
@@ -501,6 +501,7 @@ class ITinyMCELayoutSchema(Interface):
         missing_value=[],
         default=[
             u"Listing|listing"
+            u"Invisible Grid|invisible-grid"
         ])
 
     formats = schema.Text(


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-15T12:27:57+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/f315d193ab2718f823a0704855334d1abc694cac

check if change from INTEGRATION  to FUNCTIONAL fixture helps.

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
M Products/CMFPlone/testing.py

diff --git a/CHANGES.rst b/CHANGES.rst
index c804e71..396d853 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -24,7 +24,6 @@ New:
   This gives more flexibility for sub site controlpanels.
   [thet]
 
-- Control panel to mange portal actions.
 - added invisible-grid table styles
   [agitator]
 
@@ -55,6 +54,9 @@ New:
 
 Fixes:
 
+- Fixed test error in ``test_controlpanel_site.py`` failed with random error.
+  [jensens]
+
 - Do not break background images relative urls in CSS when concatening bundles
   [ebrehault]
 
@@ -65,6 +67,7 @@ Fixes:
   [maurits]
 
 
+
 5.0.3 (2016-03-??)
 ------------------
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
index 488117d..2aaa5b3 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
@@ -1,7 +1,7 @@
 # -*- coding: utf-8 -*-
 from Products.CMFCore.utils import getToolByName
 from Products.CMFPlone.interfaces import ISiteSchema
-from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_INTEGRATION_TESTING
+from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
 from plone.registry.interfaces import IRegistry
 from zope.component import getMultiAdapter
 from zope.component import getUtility
@@ -13,18 +13,22 @@ class SiteRegistryIntegrationTest(unittest.TestCase):
     settings.
     """
 
-    layer = PRODUCTS_CMFPLONE_INTEGRATION_TESTING
+    layer = PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
 
     def setUp(self):
         self.portal = self.layer['portal']
         self.request = self.layer['request']
         registry = getUtility(IRegistry)
         self.settings = registry.forInterface(
-            ISiteSchema, prefix="plone")
+            ISiteSchema,
+            prefix="plone"
+        )
 
     def test_site_controlpanel_view(self):
-        view = getMultiAdapter((self.portal, self.portal.REQUEST),
-                               name="site-controlpanel")
+        view = getMultiAdapter(
+            (self.portal, self.portal.REQUEST),
+            name="site-controlpanel"
+        )
         view = view.__of__(self.portal)
         self.assertTrue(view())
 
diff --git a/Products/CMFPlone/testing.py b/Products/CMFPlone/testing.py
index 4d942e5..ebdbf93 100644
--- a/Products/CMFPlone/testing.py
+++ b/Products/CMFPlone/testing.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from Acquisition import aq_base
 from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 from plone.app.robotframework import AutoLogin
@@ -65,7 +66,6 @@ def setUpPloneSite(self, portal):
         site_manager.unregisterUtility(provided=IMailHost)
         site_manager.registerUtility(mail_host, IMailHost)
 
-
     def tearDownPloneSite(self, portal):
         login(portal, 'admin')
         setRoles(portal, TEST_USER_ID, ['Manager'])


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-03-15T13:49:36+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/59c8b32b117a1cf85b66c06535db76527a5c40df

Merge pull request #1461 from plone/invisble-grid-table-style

extended interface for invisible-grid table styles

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
M Products/CMFPlone/interfaces/controlpanel.py
M Products/CMFPlone/testing.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9e28947..396d853 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -24,7 +24,10 @@ New:
   This gives more flexibility for sub site controlpanels.
   [thet]
 
-- Control panel to mange portal actions.
+- added invisible-grid table styles
+  [agitator]
+
+- Control panel to mange portal actions
   [ebrehault]
 
 - new less variable to configure the width of the toolbars submenu called
@@ -51,6 +54,9 @@ New:
 
 Fixes:
 
+- Fixed test error in ``test_controlpanel_site.py`` failed with random error.
+  [jensens]
+
 - Do not break background images relative urls in CSS when concatening bundles
   [ebrehault]
 
@@ -61,6 +67,7 @@ Fixes:
   [maurits]
 
 
+
 5.0.3 (2016-03-??)
 ------------------
 
diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
index 488117d..2aaa5b3 100644
--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_site.py
@@ -1,7 +1,7 @@
 # -*- coding: utf-8 -*-
 from Products.CMFCore.utils import getToolByName
 from Products.CMFPlone.interfaces import ISiteSchema
-from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_INTEGRATION_TESTING
+from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
 from plone.registry.interfaces import IRegistry
 from zope.component import getMultiAdapter
 from zope.component import getUtility
@@ -13,18 +13,22 @@ class SiteRegistryIntegrationTest(unittest.TestCase):
     settings.
     """
 
-    layer = PRODUCTS_CMFPLONE_INTEGRATION_TESTING
+    layer = PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING
 
     def setUp(self):
         self.portal = self.layer['portal']
         self.request = self.layer['request']
         registry = getUtility(IRegistry)
         self.settings = registry.forInterface(
-            ISiteSchema, prefix="plone")
+            ISiteSchema,
+            prefix="plone"
+        )
 
     def test_site_controlpanel_view(self):
-        view = getMultiAdapter((self.portal, self.portal.REQUEST),
-                               name="site-controlpanel")
+        view = getMultiAdapter(
+            (self.portal, self.portal.REQUEST),
+            name="site-controlpanel"
+        )
         view = view.__of__(self.portal)
         self.assertTrue(view())
 
diff --git a/Products/CMFPlone/interfaces/controlpanel.py b/Products/CMFPlone/interfaces/controlpanel.py
index 4ac5bad..7fe1766 100644
--- a/Products/CMFPlone/interfaces/controlpanel.py
+++ b/Products/CMFPlone/interfaces/controlpanel.py
@@ -501,6 +501,7 @@ class ITinyMCELayoutSchema(Interface):
         missing_value=[],
         default=[
             u"Listing|listing"
+            u"Invisible Grid|invisible-grid"
         ])
 
     formats = schema.Text(
diff --git a/Products/CMFPlone/testing.py b/Products/CMFPlone/testing.py
index 4d942e5..ebdbf93 100644
--- a/Products/CMFPlone/testing.py
+++ b/Products/CMFPlone/testing.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from Acquisition import aq_base
 from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 from plone.app.robotframework import AutoLogin
@@ -65,7 +66,6 @@ def setUpPloneSite(self, portal):
         site_manager.unregisterUtility(provided=IMailHost)
         site_manager.registerUtility(mail_host, IMailHost)
 
-
     def tearDownPloneSite(self, portal):
         login(portal, 'admin')
         setRoles(portal, TEST_USER_ID, ['Manager'])


