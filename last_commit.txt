Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2018-10-04T13:57:18+02:00
Author: Thomas Lotze (tlotze) <thomas@thomas-lotze.net>
Commit: https://github.com/plone/Products.CMFPlone/commit/624ee5a78937d2c2a19de8e2d932e3d0d0e8a6b3

re #1801: remove redirectToReferrer.py skin script (#2557)

Files changed:
M CHANGES.rst
D Products/CMFPlone/skins/plone_scripts/redirectToReferrer.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex f3ce4407c..061fcbc95 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -17,6 +17,10 @@ Breaking changes:\n \n - Removed getObjectsFromPathList.py skin script. #1801\n   [reinhardt]\n+  \n+- Removed redirectToReferrer.py skin script. #1801\n+  [tlotze]\n+\n - Removed enableHTTPCompression.py skin script. #1801\n   [tlotze]\n \ndiff --git a/Products/CMFPlone/skins/plone_scripts/redirectToReferrer.py b/Products/CMFPlone/skins/plone_scripts/redirectToReferrer.py\ndeleted file mode 100644\nindex 9bd9b0916..000000000\n--- a/Products/CMFPlone/skins/plone_scripts/redirectToReferrer.py\n+++ /dev/null\n@@ -1,17 +0,0 @@\n-## Script (Python) "redirectToReferrer"\n-##bind container=container\n-##bind context=context\n-##bind namespace=\n-##bind script=script\n-##bind subpath=traverse_subpath\n-##parameters=message\n-##title=Redirect to Referrer with message\n-\n-request = context.REQUEST\n-referer = request.get(\'HTTP_REFERER\', \'\')\n-query_pos = referer.find(\'?\')\n-if query_pos != -1:\n-    target_url = referer[:referer.find(\'?\')]\n-else:\n-    target_url = referer\n-return request.RESPONSE.redirect(target_url)\n'

