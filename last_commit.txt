Repository: plone.resource


Branch: refs/heads/master
Date: 2018-10-18T07:14:32+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.resource/commit/90e8acb9baedd6ad7667af0c721b7cc18fe67c22

change name to TextLine (https://github.com/plone/Products.CMFPlone/issues/2591)

Files changed:
M plone/resource/zcml.py

b'diff --git a/plone/resource/zcml.py b/plone/resource/zcml.py\nindex 7a3cd04..d2f802c 100644\n--- a/plone/resource/zcml.py\n+++ b/plone/resource/zcml.py\n@@ -1,14 +1,12 @@\n # -*- coding: utf-8 -*-\n-import os.path\n-\n-from zope.interface import Interface\n+from plone.resource.directory import FilesystemResourceDirectory\n+from plone.resource.interfaces import IResourceDirectory\n from zope.component.zcml import handler\n from zope.configuration.exceptions import ConfigurationError\n-from zope.configuration.fields import PythonIdentifier\n+from zope.interface import Interface\n from zope.schema import ASCIILine, TextLine\n \n-from plone.resource.interfaces import IResourceDirectory\n-from plone.resource.directory import FilesystemResourceDirectory\n+import os.path\n \n \n class IResourceDirectoryDirective(Interface):\n@@ -16,23 +14,23 @@ class IResourceDirectoryDirective(Interface):\n     """\n \n     directory = TextLine(\n-        title = u\'Directory path\',\n-        description = u\'Path relative to the package.\',\n-        required = True\n+        title=u\'Directory path\',\n+        description=u\'Path relative to the package.\',\n+        required=True\n         )\n \n-    name = PythonIdentifier(\n-        title = u\'Name\',\n-        description = u\'Name of the directory. If not specified, the name of \'\n-                      u\'the current package is used.\',\n-        required = False,\n+    name = TextLine(\n+        title=u\'Name\',\n+        description=u\'Name of the directory. If not specified, the name of \'\n+                    u\'the current package is used.\',\n+        required=False,\n         )\n \n     type = ASCIILine(\n-        title = u\'Resource type\',\n-# XXX use a Choice field + vocab\n-#        vocabulary = \'plone.resource.vocab.ResourceTypes\',\n-        required = False,\n+        title=u\'Resource type\',\n+        # XXX use a Choice field + vocab\n+        # vocabulary = \'plone.resource.vocab.ResourceTypes\',\n+        required=False,\n         )\n \n \n@@ -75,7 +73,7 @@ def registerResourceDirectory(_context, directory, name=None, type=None):\n     directory = FilesystemResourceDirectory(directory, name)\n \n     _context.action(\n-        discriminator = (\'plone:static\', identifier),\n-        callable = handler,\n-        args = (\'registerUtility\', directory, IResourceDirectory, identifier),\n+        discriminator=(\'plone:static\', identifier),\n+        callable=handler,\n+        args=(\'registerUtility\', directory, IResourceDirectory, identifier),\n         )\n'

Repository: plone.resource


Branch: refs/heads/master
Date: 2018-10-18T09:41:07+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.resource/commit/2bba4496a4639313f97e5d9dcfc2726d27d90ff1

add changenote

Files changed:
M CHANGES.rst

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 8501c62..2c523d1 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -17,6 +17,9 @@ Bug fixes:\n - Fix tests in py3.\n   [pbauer, jensens]\n \n+- Change name of IResourceDirectoryDirective to TextLine to work with zope.configuration >= 4.2.\n+  See https://github.com/plone/Products.CMFPlone/issues/2591\n+  [pbauer]\n \n 2.0.2 (2018-06-04)\n ------------------\n'

Repository: plone.resource


Branch: refs/heads/master
Date: 2018-10-18T11:23:39+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.resource/commit/58e61998ebaaada402a9e3a00916420df71a4fff

Merge pull request #28 from plone/fix_fieldtype_2591

change name to TextLine

Files changed:
M CHANGES.rst
M plone/resource/zcml.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 8501c62..2c523d1 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -17,6 +17,9 @@ Bug fixes:\n - Fix tests in py3.\n   [pbauer, jensens]\n \n+- Change name of IResourceDirectoryDirective to TextLine to work with zope.configuration >= 4.2.\n+  See https://github.com/plone/Products.CMFPlone/issues/2591\n+  [pbauer]\n \n 2.0.2 (2018-06-04)\n ------------------\ndiff --git a/plone/resource/zcml.py b/plone/resource/zcml.py\nindex 7a3cd04..d2f802c 100644\n--- a/plone/resource/zcml.py\n+++ b/plone/resource/zcml.py\n@@ -1,14 +1,12 @@\n # -*- coding: utf-8 -*-\n-import os.path\n-\n-from zope.interface import Interface\n+from plone.resource.directory import FilesystemResourceDirectory\n+from plone.resource.interfaces import IResourceDirectory\n from zope.component.zcml import handler\n from zope.configuration.exceptions import ConfigurationError\n-from zope.configuration.fields import PythonIdentifier\n+from zope.interface import Interface\n from zope.schema import ASCIILine, TextLine\n \n-from plone.resource.interfaces import IResourceDirectory\n-from plone.resource.directory import FilesystemResourceDirectory\n+import os.path\n \n \n class IResourceDirectoryDirective(Interface):\n@@ -16,23 +14,23 @@ class IResourceDirectoryDirective(Interface):\n     """\n \n     directory = TextLine(\n-        title = u\'Directory path\',\n-        description = u\'Path relative to the package.\',\n-        required = True\n+        title=u\'Directory path\',\n+        description=u\'Path relative to the package.\',\n+        required=True\n         )\n \n-    name = PythonIdentifier(\n-        title = u\'Name\',\n-        description = u\'Name of the directory. If not specified, the name of \'\n-                      u\'the current package is used.\',\n-        required = False,\n+    name = TextLine(\n+        title=u\'Name\',\n+        description=u\'Name of the directory. If not specified, the name of \'\n+                    u\'the current package is used.\',\n+        required=False,\n         )\n \n     type = ASCIILine(\n-        title = u\'Resource type\',\n-# XXX use a Choice field + vocab\n-#        vocabulary = \'plone.resource.vocab.ResourceTypes\',\n-        required = False,\n+        title=u\'Resource type\',\n+        # XXX use a Choice field + vocab\n+        # vocabulary = \'plone.resource.vocab.ResourceTypes\',\n+        required=False,\n         )\n \n \n@@ -75,7 +73,7 @@ def registerResourceDirectory(_context, directory, name=None, type=None):\n     directory = FilesystemResourceDirectory(directory, name)\n \n     _context.action(\n-        discriminator = (\'plone:static\', identifier),\n-        callable = handler,\n-        args = (\'registerUtility\', directory, IResourceDirectory, identifier),\n+        discriminator=(\'plone:static\', identifier),\n+        callable=handler,\n+        args=(\'registerUtility\', directory, IResourceDirectory, identifier),\n         )\n'

