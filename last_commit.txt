Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-16T17:46:05-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/Products.CMFEditions/commit/b697cf566935c1740989d5564ba69e72de72709d

fix test

Files changed:
A news/89.bugfix
M Products/CMFEditions/tests/test_IntegrationTests.py

b'diff --git a/Products/CMFEditions/tests/test_IntegrationTests.py b/Products/CMFEditions/tests/test_IntegrationTests.py\nindex a0b384b..f6b7ac1 100644\n--- a/Products/CMFEditions/tests/test_IntegrationTests.py\n+++ b/Products/CMFEditions/tests/test_IntegrationTests.py\n@@ -394,6 +394,7 @@ def test13_revertUpdatesCatalog(self):\n         doc.text = RichTextValue("Plain text", "text/plain", "text/plain")\n         portal_repo.applyVersionControl(doc)\n         doc.text = RichTextValue("blahblah", "text/plain", "text/plain")\n+        doc.reindexObject(idxs=["SearchableText"])\n         portal_repo.save(doc)\n         # Test that catalog has current value\n         results = cat(SearchableText="Plain Text")\ndiff --git a/news/89.bugfix b/news/89.bugfix\nnew file mode 100644\nindex 0000000..f0f80e5\n--- /dev/null\n+++ b/news/89.bugfix\n@@ -0,0 +1,2 @@\n+Fix test to work with updated CMFUid.\n+[davisagli]\n'

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-16T20:36:57-07:00
Author: David Glick (davisagli) <david@glicksoftware.com>
Commit: https://github.com/plone/Products.CMFEditions/commit/7ecb40bd58482eea8ad5c980fa0efec8d1f8b9a7

Merge pull request #89 from plone/davisagli-fix-test

fix test by explicitly reindexing

Files changed:
A news/89.bugfix
M Products/CMFEditions/tests/test_IntegrationTests.py

b'diff --git a/Products/CMFEditions/tests/test_IntegrationTests.py b/Products/CMFEditions/tests/test_IntegrationTests.py\nindex a0b384b..f6b7ac1 100644\n--- a/Products/CMFEditions/tests/test_IntegrationTests.py\n+++ b/Products/CMFEditions/tests/test_IntegrationTests.py\n@@ -394,6 +394,7 @@ def test13_revertUpdatesCatalog(self):\n         doc.text = RichTextValue("Plain text", "text/plain", "text/plain")\n         portal_repo.applyVersionControl(doc)\n         doc.text = RichTextValue("blahblah", "text/plain", "text/plain")\n+        doc.reindexObject(idxs=["SearchableText"])\n         portal_repo.save(doc)\n         # Test that catalog has current value\n         results = cat(SearchableText="Plain Text")\ndiff --git a/news/89.bugfix b/news/89.bugfix\nnew file mode 100644\nindex 0000000..f0f80e5\n--- /dev/null\n+++ b/news/89.bugfix\n@@ -0,0 +1,2 @@\n+Fix test to work with updated CMFUid.\n+[davisagli]\n'

