Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2017-03-30T12:21:44+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.app.contenttypes/commit/97f5fa3a851dfbc0ec59cc8d360151594fb55df9

Fix issue where contentFilter could not be read from request

Files changed:
M plone/app/contenttypes/browser/collection.py

diff --git a/plone/app/contenttypes/browser/collection.py b/plone/app/contenttypes/browser/collection.py
index d6f9394..6e96a10 100644
--- a/plone/app/contenttypes/browser/collection.py
+++ b/plone/app/contenttypes/browser/collection.py
@@ -36,7 +36,7 @@ def results(self, **kwargs):
                 sequence.
         """
         # Extra filter
-        contentFilter = self.request.get('contentFilter', {})
+        contentFilter = dict(self.request.get('contentFilter', {}))
         contentFilter.update(kwargs.get('contentFilter', {}))
         kwargs.setdefault('custom_query', contentFilter)
         kwargs.setdefault('batch', True)


Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2017-03-30T12:29:53+03:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/plone.app.contenttypes/commit/6c3ff4dc6b8c5fc0473d0bef855632327cf556d4

Update changelog

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index db047b7..0f1be75 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix issue where contentFilter could not be read from request
+  [datakurre]
 
 
 1.3.0 (2017-03-27)


Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2017-04-05T19:10:09+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.contenttypes/commit/4433c09de651acc604ec736b97eb91b15016b6fc

Merge pull request #392 from plone/datakurre-contentFilter

Fix issue where contentFilter could not be read from request

Files changed:
M CHANGES.rst
M plone/app/contenttypes/browser/collection.py

diff --git a/CHANGES.rst b/CHANGES.rst
index db047b7..0f1be75 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,7 +14,8 @@ New features:
 
 Bug fixes:
 
-- *add item here*
+- Fix issue where contentFilter could not be read from request
+  [datakurre]
 
 
 1.3.0 (2017-03-27)
diff --git a/plone/app/contenttypes/browser/collection.py b/plone/app/contenttypes/browser/collection.py
index d6f9394..6e96a10 100644
--- a/plone/app/contenttypes/browser/collection.py
+++ b/plone/app/contenttypes/browser/collection.py
@@ -36,7 +36,7 @@ def results(self, **kwargs):
                 sequence.
         """
         # Extra filter
-        contentFilter = self.request.get('contentFilter', {})
+        contentFilter = dict(self.request.get('contentFilter', {}))
         contentFilter.update(kwargs.get('contentFilter', {}))
         kwargs.setdefault('custom_query', contentFilter)
         kwargs.setdefault('batch', True)


