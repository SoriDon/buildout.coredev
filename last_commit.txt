Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2021-11-11T11:43:25+01:00
Author: Jan Mevissen (jmevissen) <mevissen@interaktiv.de>
Commit: https://github.com/plone/plone.app.z3cform/commit/8ec391f01948129ca229c12877caa187cac13fd1

enable formautofocus pattern for plone forms

Files changed:
M README.rst
M plone/app/z3cform/templates/macros.pt

b'diff --git a/README.rst b/README.rst\nindex c1d3c84..3850ebb 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -115,6 +115,19 @@ You can disable this behavior for your form::\n         # Disable unload protection behavior\n         enable_unload_protection  = False\n \n+Autofocus\n+---------\n+\n+The default behaviour on Plone Forms is to use the formautofocus pattern to focus the "first" input field.\n+\n+You can disable this behavior for your form::\n+\n+    class SearchForm(z3c.form.group.GroupForm, z3c.form.form.Form):\n+\n+        # Disable autofocus behavior\n+        enable_autofocus = False\n+\n+\n \n CSRF Protection\n ===============\ndiff --git a/plone/app/z3cform/templates/macros.pt b/plone/app/z3cform/templates/macros.pt\nindex b920f4a..082fbbc 100644\n--- a/plone/app/z3cform/templates/macros.pt\n+++ b/plone/app/z3cform/templates/macros.pt\n@@ -62,6 +62,8 @@\n                                   enable_form_tabbing view/enable_form_tabbing | python:True;\n                                   enable_unload_protection view/enable_unload_protection|python:True;\n                                   unload_protection python:enable_unload_protection and \'pat-formunloadalert\';\n+                                  enable_autofocus view/enable_autofocus|python:True;\n+                                  autofocus python:enable_autofocus and \'pat-formautofocus\';\n                                   has_groups python:bool(groups);\n                                   form_tabbing python:(has_groups and enable_form_tabbing) and \'enableFormTabbing pat-autotoc\' or \'\';\n                                   show_default_label python:has_groups and default_fieldset_label and len(view.widgets);\n@@ -70,7 +72,7 @@\n                                   "\n                       tal:attributes="action view/action|request/getURL;\n                                       enctype view/enctype;\n-                                      class string:rowlike $unload_protection $form_tabbing $form_class $form_view_name_raw $form_view_name;\n+                                      class string:rowlike $unload_protection $autofocus $form_tabbing $form_class $form_view_name_raw $form_view_name;\n                                       id view/id;\n                                       method view/method|string:post">\n \n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2021-11-11T11:49:43+01:00
Author: Jan Mevissen (jmevissen) <mevissen@interaktiv.de>
Commit: https://github.com/plone/plone.app.z3cform/commit/f0b21aced65215437f556cfb01e7939b9c86469e

add changelog entry

Files changed:
A news/135.feature

b'diff --git a/news/135.feature b/news/135.feature\nnew file mode 100644\nindex 0000000..c4e6ec6\n--- /dev/null\n+++ b/news/135.feature\n@@ -0,0 +1 @@\n+- enable formautofocus for plone forms disabable for specific forms [jmevissen]\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2021-11-18T10:49:12+02:00
Author: Maik Derstappen (MrTango) <md@derico.de>
Commit: https://github.com/plone/plone.app.z3cform/commit/f455471e8479c0d1385c41e4ed64a0482f238d43

Merge pull request #135 from plone/jmevissen-enable_formautofocus_pattern_in_plone_forms

enable formautofocus pattern for plone forms, could be disabled for forms by setting class variable enable_autofocus to False

Files changed:
A news/135.feature
M README.rst
M plone/app/z3cform/templates/macros.pt

b'diff --git a/README.rst b/README.rst\nindex c1d3c84..3850ebb 100644\n--- a/README.rst\n+++ b/README.rst\n@@ -115,6 +115,19 @@ You can disable this behavior for your form::\n         # Disable unload protection behavior\n         enable_unload_protection  = False\n \n+Autofocus\n+---------\n+\n+The default behaviour on Plone Forms is to use the formautofocus pattern to focus the "first" input field.\n+\n+You can disable this behavior for your form::\n+\n+    class SearchForm(z3c.form.group.GroupForm, z3c.form.form.Form):\n+\n+        # Disable autofocus behavior\n+        enable_autofocus = False\n+\n+\n \n CSRF Protection\n ===============\ndiff --git a/news/135.feature b/news/135.feature\nnew file mode 100644\nindex 0000000..c4e6ec6\n--- /dev/null\n+++ b/news/135.feature\n@@ -0,0 +1 @@\n+- enable formautofocus for plone forms disabable for specific forms [jmevissen]\ndiff --git a/plone/app/z3cform/templates/macros.pt b/plone/app/z3cform/templates/macros.pt\nindex b920f4a..082fbbc 100644\n--- a/plone/app/z3cform/templates/macros.pt\n+++ b/plone/app/z3cform/templates/macros.pt\n@@ -62,6 +62,8 @@\n                                   enable_form_tabbing view/enable_form_tabbing | python:True;\n                                   enable_unload_protection view/enable_unload_protection|python:True;\n                                   unload_protection python:enable_unload_protection and \'pat-formunloadalert\';\n+                                  enable_autofocus view/enable_autofocus|python:True;\n+                                  autofocus python:enable_autofocus and \'pat-formautofocus\';\n                                   has_groups python:bool(groups);\n                                   form_tabbing python:(has_groups and enable_form_tabbing) and \'enableFormTabbing pat-autotoc\' or \'\';\n                                   show_default_label python:has_groups and default_fieldset_label and len(view.widgets);\n@@ -70,7 +72,7 @@\n                                   "\n                       tal:attributes="action view/action|request/getURL;\n                                       enctype view/enctype;\n-                                      class string:rowlike $unload_protection $form_tabbing $form_class $form_view_name_raw $form_view_name;\n+                                      class string:rowlike $unload_protection $autofocus $form_tabbing $form_class $form_view_name_raw $form_view_name;\n                                       id view/id;\n                                       method view/method|string:post">\n \n'

