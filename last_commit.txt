Repository: plone.app.testing


Branch: refs/heads/master
Date: 2019-02-16T13:14:30+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.testing/commit/788fdc7157ae6d56ad21b1f583f1d94fac68e5e1

Make plone.app.folder optional even in py2 (Fix https://github.com/plone/Products.CMFPlone/issues/2753)

Files changed:
M src/plone/app/testing/layers.py

b"diff --git a/src/plone/app/testing/layers.py b/src/plone/app/testing/layers.py\nindex 6959205..fcc8775 100644\n--- a/src/plone/app/testing/layers.py\n+++ b/src/plone/app/testing/layers.py\n@@ -69,9 +69,17 @@ class PloneFixture(Layer):\n     if six.PY2:\n         products += (\n             ('Products.ExternalEditor', {'loadZCML': True}, ),\n-            ('plone.app.folder', {'loadZCML': True}, ),\n         )\n \n+        try:\n+            # Since gopipindex moved to plone.folder only with Archetypes\n+            import plone.app.folder\n+            products += (\n+                ('plone.app.folder', {'loadZCML': True}, ),\n+            )\n+        except ImportError:\n+            pass\n+\n     # try:\n     #    import Products.PasswordResetTool\n     #    products = products + (\n"

Repository: plone.app.testing


Branch: refs/heads/master
Date: 2019-02-16T13:17:38+01:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.testing/commit/70c58f7cd547fe36bfc7df4f16d345e1e8106b93

add changelog

Files changed:
A news/59.bugfix

b'diff --git a/news/59.bugfix b/news/59.bugfix\nnew file mode 100644\nindex 0000000..2387921\n--- /dev/null\n+++ b/news/59.bugfix\n@@ -0,0 +1 @@\n+Make plone.app.folder a optional product for PloneFixture in py2\n\\ No newline at end of file\n'

Repository: plone.app.testing


Branch: refs/heads/master
Date: 2019-02-16T14:14:34+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/plone.app.testing/commit/d63d5218a1f5b7ddf3a8f24f39891456490cf62d

Merge pull request #59 from plone/optional_pafolder

Make plone.app.folder optional even in py2

Files changed:
A news/59.bugfix
M src/plone/app/testing/layers.py

b"diff --git a/news/59.bugfix b/news/59.bugfix\nnew file mode 100644\nindex 0000000..2387921\n--- /dev/null\n+++ b/news/59.bugfix\n@@ -0,0 +1 @@\n+Make plone.app.folder a optional product for PloneFixture in py2\n\\ No newline at end of file\ndiff --git a/src/plone/app/testing/layers.py b/src/plone/app/testing/layers.py\nindex 6959205..fcc8775 100644\n--- a/src/plone/app/testing/layers.py\n+++ b/src/plone/app/testing/layers.py\n@@ -69,9 +69,17 @@ class PloneFixture(Layer):\n     if six.PY2:\n         products += (\n             ('Products.ExternalEditor', {'loadZCML': True}, ),\n-            ('plone.app.folder', {'loadZCML': True}, ),\n         )\n \n+        try:\n+            # Since gopipindex moved to plone.folder only with Archetypes\n+            import plone.app.folder\n+            products += (\n+                ('plone.app.folder', {'loadZCML': True}, ),\n+            )\n+        except ImportError:\n+            pass\n+\n     # try:\n     #    import Products.PasswordResetTool\n     #    products = products + (\n"

