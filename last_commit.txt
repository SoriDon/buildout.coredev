Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-11-11T22:26:18+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@redturtle.it>
Commit: https://github.com/plone/plone.app.theming/commit/e77fe792e65f92ff18c31e24897d5f1bd879d14f

Document X-Theme-Disabled header

Files changed:
M CHANGES.rst
M src/plone/app/theming/browser/resources/userguide.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 1778b16..e700d78 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,10 @@ Changelog
 
 New:
 
+- Document how to disable diazo transform
+  by setting the ``X-Theme-Disabled`` header
+  [ale-rt]
+
 - *add item here*
 
 Fixes:
diff --git a/src/plone/app/theming/browser/resources/userguide.rst b/src/plone/app/theming/browser/resources/userguide.rst
index 832f0bb..d3469a1 100644
--- a/src/plone/app/theming/browser/resources/userguide.rst
+++ b/src/plone/app/theming/browser/resources/userguide.rst
@@ -1012,3 +1012,21 @@ Use::
     not: request/HTTP_X_THEME_ENABLED | nothing
 
 to 'hide' a style sheet from the themed site.
+
+Advanced: Disable diazo transformation by setting the ``X-Theme-Disabled`` header
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+The diazo transformation is not applied
+if a response header ``X-Theme-Disabled`` is set.
+
+In a browser view, the header can be set by using this instruction::
+
+    self.request.response.setHeader('X-Theme-Disabled', '1')
+
+This is a complete example::
+
+    class NoDiazoView(BrowserView):
+
+        def __call__(self):
+            self.request.response.setHeader('X-Theme-Disabled', '1')
+            return super(NoDiazoView).__call__()


Repository: plone.app.theming


Branch: refs/heads/master
Date: 2015-11-18T23:00:43+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@redturtle.it>
Commit: https://github.com/plone/plone.app.theming/commit/11f369698ebb01928cd1a95eba4a972c2147b30a

Copied the documentation snippet on the index.rst file

Files changed:
M docs/index.rst

diff --git a/docs/index.rst b/docs/index.rst
index 7f2bcad..f71d99c 100644
--- a/docs/index.rst
+++ b/docs/index.rst
@@ -810,3 +810,22 @@ Use::
     not: request/HTTP_X_THEME_ENABLED | nothing
 
 to 'hide' a style sheet from the themed site.
+
+
+Advanced: Disable diazo transformation by setting the ``X-Theme-Disabled`` header
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+The diazo transformation is not applied
+if a response header ``X-Theme-Disabled`` is set.
+
+In a browser view, the header can be set by using this instruction::
+
+    self.request.response.setHeader('X-Theme-Disabled', '1')
+
+This is a complete example::
+
+    class NoDiazoView(BrowserView):
+
+        def __call__(self):
+            self.request.response.setHeader('X-Theme-Disabled', '1')
+            return super(NoDiazoView).__call__()


Repository: plone.app.theming


Branch: refs/heads/master
Date: 2016-02-11T19:27:35+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.theming/commit/2ce74a2fa9296f4dbe11deab98035ae5b8a74df2

Merge pull request #88 from plone/documentation-x-theme-disabled-header

Document X-Theme-Disabled header

Files changed:
M CHANGES.rst
M docs/index.rst
M src/plone/app/theming/browser/resources/userguide.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index bc6622b..5d8e434 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -6,6 +6,10 @@ Changelog
 
 New:
 
+- Document how to disable diazo transform
+  by setting the ``X-Theme-Disabled`` header
+  [ale-rt]
+
 - *add item here*
 
 Fixes:
diff --git a/docs/index.rst b/docs/index.rst
index 7f2bcad..f71d99c 100644
--- a/docs/index.rst
+++ b/docs/index.rst
@@ -810,3 +810,22 @@ Use::
     not: request/HTTP_X_THEME_ENABLED | nothing
 
 to 'hide' a style sheet from the themed site.
+
+
+Advanced: Disable diazo transformation by setting the ``X-Theme-Disabled`` header
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+The diazo transformation is not applied
+if a response header ``X-Theme-Disabled`` is set.
+
+In a browser view, the header can be set by using this instruction::
+
+    self.request.response.setHeader('X-Theme-Disabled', '1')
+
+This is a complete example::
+
+    class NoDiazoView(BrowserView):
+
+        def __call__(self):
+            self.request.response.setHeader('X-Theme-Disabled', '1')
+            return super(NoDiazoView).__call__()
diff --git a/src/plone/app/theming/browser/resources/userguide.rst b/src/plone/app/theming/browser/resources/userguide.rst
index 832f0bb..d3469a1 100644
--- a/src/plone/app/theming/browser/resources/userguide.rst
+++ b/src/plone/app/theming/browser/resources/userguide.rst
@@ -1012,3 +1012,21 @@ Use::
     not: request/HTTP_X_THEME_ENABLED | nothing
 
 to 'hide' a style sheet from the themed site.
+
+Advanced: Disable diazo transformation by setting the ``X-Theme-Disabled`` header
+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
+
+The diazo transformation is not applied
+if a response header ``X-Theme-Disabled`` is set.
+
+In a browser view, the header can be set by using this instruction::
+
+    self.request.response.setHeader('X-Theme-Disabled', '1')
+
+This is a complete example::
+
+    class NoDiazoView(BrowserView):
+
+        def __call__(self):
+            self.request.response.setHeader('X-Theme-Disabled', '1')
+            return super(NoDiazoView).__call__()


