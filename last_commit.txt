Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-11-23T08:07:25+01:00
Author: wolbernd (wolbernd) <wolbernd@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.caching/commit/c98e44bc449bbdad6c36a6448888333995e3cec2

Add @@images/image to purge list for images

Files changed:
M plone/app/caching/purge.py

b'diff --git a/plone/app/caching/purge.py b/plone/app/caching/purge.py\nindex f21d6ad..96b6e46 100644\n--- a/plone/app/caching/purge.py\n+++ b/plone/app/caching/purge.py\n@@ -208,6 +208,7 @@ def schemas():\n                     continue\n                 filename = value.filename\n                 if is_image:\n+                    yield f"{prefix}/@@images/image"\n                     for size in self.getScales():\n                         yield f"{prefix}/images/{field_name}/{size}"\n                         yield f"{prefix}/@@images/{field_name}/{size}"\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-11-23T15:40:45+01:00
Author: wolbernd (wolbernd) <wolbernd@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.caching/commit/c42de65716bbef9221481b11d4177372ba5dc342

Use field_name to purge image

Co-authored-by: Jens W. Klein &lt;jk@kleinundpartner.at&gt;

Files changed:
M plone/app/caching/purge.py

b'diff --git a/plone/app/caching/purge.py b/plone/app/caching/purge.py\nindex 96b6e46..0982b05 100644\n--- a/plone/app/caching/purge.py\n+++ b/plone/app/caching/purge.py\n@@ -208,7 +208,7 @@ def schemas():\n                     continue\n                 filename = value.filename\n                 if is_image:\n-                    yield f"{prefix}/@@images/image"\n+                    yield f"{prefix}/@@images/{field_name}"\n                     for size in self.getScales():\n                         yield f"{prefix}/images/{field_name}/{size}"\n                         yield f"{prefix}/@@images/{field_name}/{size}"\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-11-24T15:06:22+01:00
Author: wolbernd (wolbernd) <wolbernd@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.caching/commit/cc5ea9fa83b54e160da55f46cd9486a6d6341059

Add info for PR 89

Files changed:
A news/89.feature

b'diff --git a/news/89.feature b/news/89.feature\nnew file mode 100644\nindex 0000000..8e31439\n--- /dev/null\n+++ b/news/89.feature\n@@ -0,0 +1 @@\n+When purging images also purge the field WITHOUT a size parameter (e.g. [...]/@@images/image)\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-11-24T15:33:05+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.caching/commit/0f8aa320228bcb4943722ad2d83e7dddecf01a94

Merge pull request #89 from wolbernd/master

Add @@images/image to purge list for images

Files changed:
A news/89.feature
M plone/app/caching/purge.py

b'diff --git a/news/89.feature b/news/89.feature\nnew file mode 100644\nindex 0000000..8e31439\n--- /dev/null\n+++ b/news/89.feature\n@@ -0,0 +1 @@\n+When purging images also purge the field WITHOUT a size parameter (e.g. [...]/@@images/image)\ndiff --git a/plone/app/caching/purge.py b/plone/app/caching/purge.py\nindex f21d6ad..0982b05 100644\n--- a/plone/app/caching/purge.py\n+++ b/plone/app/caching/purge.py\n@@ -208,6 +208,7 @@ def schemas():\n                     continue\n                 filename = value.filename\n                 if is_image:\n+                    yield f"{prefix}/@@images/{field_name}"\n                     for size in self.getScales():\n                         yield f"{prefix}/images/{field_name}/{size}"\n                         yield f"{prefix}/@@images/{field_name}/{size}"\n'

