Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-10-27T10:26:41+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.CMFPlone/commit/65c7639aaede0ddc5e97cc302347bce2593b7ac5

Fix test where you cannot instanciate a PythonScript with the id script.

Files changed:
M CHANGES.rst
M Products/CMFPlone/tests/testSecurity.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 3680002e0..69548e22f 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -28,6 +28,9 @@ New Features:
 
 Bug Fixes:
 
+- Fix test where you cannot instanciate a PythonScript with the id script.
+  [pbauer]
+
 - Set the status of an exception view according to the exception type.
   Fixes `issue 2187 <https://github.com/plone/Products.CMFPlone/issues/2187>`_.
   [maurits]
diff --git a/Products/CMFPlone/tests/testSecurity.py b/Products/CMFPlone/tests/testSecurity.py
index 7a61d6d0d..ee8e97192 100644
--- a/Products/CMFPlone/tests/testSecurity.py
+++ b/Products/CMFPlone/tests/testSecurity.py
@@ -38,8 +38,8 @@ def test_PT_allow_module_not_available_in_RestrictedPython_1(self):
 Products.PlacelessTranslationService.allow_module('os')
 '''
         from Products.PythonScripts.PythonScript import PythonScript
-        script = makerequest(PythonScript('script'))
-        script._filepath = 'script'
+        script = makerequest(PythonScript('fooscript'))
+        script._filepath = 'fooscript'
         script.write(src)
         self.assertRaises((ImportError, Unauthorized), script)
 
@@ -49,8 +49,8 @@ def test_PT_allow_module_not_available_in_RestrictedPython_2(self):
 allow_module('os')
 '''
         from Products.PythonScripts.PythonScript import PythonScript
-        script = makerequest(PythonScript('script'))
-        script._filepath = 'script'
+        script = makerequest(PythonScript('barscript'))
+        script._filepath = 'barscript'
         script.write(src)
         self.assertRaises((ImportError, Unauthorized), script)
 


