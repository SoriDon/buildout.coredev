Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-20T17:47:27+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/e3a800eb132779c6da4dd7ac6b86bc2904f7a3be

Implement `pat-checklist` to group membership management

Files changed:
A news/3740.bugfix
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\nindex 3a5d475f6b..f8db4d1d8f 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n@@ -87,7 +87,7 @@\n                               batchformkeys python:[\'searchstring\',\'_authenticator\',\'groupname\',\'form.submitted\'];\n                               many_users view/many_users">\n               <h2 i18n:translate="heading_groupmembers_current">Current group members</h2>\n-              <table class="table table-responsive table-bordered table-striped" summary="Group Members Listing"\n+              <table class="table table-responsive table-bordered table-striped pat-checklist" summary="Group Members Listing"\n                   tal:condition="view/groupMembers">\n                 <thead>\n                   <tr>\n@@ -204,7 +204,7 @@\n                         </th>\n                       </tr>\n                     </thead>\n-                    <tbody>\n+                    <tbody class="pat-checklist">\n                       <tr tal:condition="batch">\n                         <th><span class="form-check"><input class="noborder form-check-input toggle-all"\n                                     type="checkbox"\ndiff --git a/news/3740.bugfix b/news/3740.bugfix\nnew file mode 100644\nindex 0000000000..d016eea54b\n--- /dev/null\n+++ b/news/3740.bugfix\n@@ -0,0 +1,2 @@\n+Implement `pat-checklist` for groupuser management.\n+[petschki]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T09:32:47+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/a3f6bb2137f00f7d5e8511a3d5b9aceeb52701b6

update usermembership template

Files changed:
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\nindex f0651e77b6..b04479ad98 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n@@ -52,16 +52,24 @@\n \n     <div id="content-core">\n \n+      <p class="lead mt-4" i18n:translate="">Group membership</p>\n+\n       <div class="autotabs">\n-        <nav class="autotoc-nav">\n-          <a href="${portal_url}/@@user-information?${userquery}"\n-             i18n:translate="title_personal_information_form">Personal Information</a>\n-          <a href="${portal_url}/@@user-preferences?${userquery}"\n-             i18n:translate="">Personal Preferences</a>\n-          <a class="active"\n-             href="${portal_url}/@@usergroup-usermembership?${userquery}"\n-             i18n:translate="label_group_memberships">Group Memberships</a>\n-        </nav>\n+        <ul class="autotoc-nav nav nav-tabs">\n+          <li class="nav-item">\n+            <a class="nav-link" href="${portal_url}/@@user-information?${userquery}"\n+            i18n:translate="title_personal_information_form">Personal Information</a>\n+          </li>\n+          <li class="nav-item">\n+            <a class="nav-link" href="${portal_url}/@@user-preferences?${userquery}"\n+            i18n:translate="">Personal Preferences</a>\n+          </li>\n+          <li class="nav-item">\n+            <a class="nav-link active" class="active"\n+               href="${portal_url}/@@usergroup-usermembership?${userquery}"\n+               i18n:translate="label_group_memberships">Group Memberships</a>\n+          </li>\n+        </ul>\n \n         <form method="post"\n               tal:attributes="action string:$portal_url/$template_id?userid=${userid}">\n@@ -86,11 +94,11 @@\n \n \n                     <td class="listingCheckbox">\n-                        <input type="checkbox"\n-                               class="noborder notify"\n+                        <span class="form-check"><input type="checkbox"\n+                               class="noborder notify form-check-input"\n                                name="delete:list"\n                                tal:attributes="value groupId;\n-                                               disabled python:member.canRemoveFromGroup(groupId) and default or \'disabled\'" />\n+                                               disabled python:member.canRemoveFromGroup(groupId) and default or \'disabled\'" /></span>\n                     </td>\n                 </tr>\n             </tal:block>\n@@ -106,11 +114,11 @@\n           <h2 tal:condition="many_groups" i18n:translate="heading_search_groups">Search for groups</h2>\n           <h2 tal:condition="not:many_groups" i18n:translate="heading_assign_to_groups">Assign to groups</h2>\n \n-          <table class="table overflow-auto table-bordered table-striped text-center" summary="Groups">\n+          <table class="table overflow-auto table-bordered table-striped pat-checklist" summary="Groups">\n             <tr>\n               <th colspan="2" tal:condition="many_groups">\n                 <span tal:omit-tag="" i18n:translate="label_quick_search">Quick search</span>:\n-                      <input class="quickSearch"\n+                      <input class="quickSearch form-control"\n                              type="text"\n                              name="searchstring"\n                              value=""\n@@ -127,16 +135,13 @@\n             </tr>\n             <tal:block condition="python:results">\n                 <tr>\n-                  <th>\n-                      <input class="noborder"\n+                  <th style="width:1.5rem;">\n+                      <span class="form-check"><input class="form-check-input toggle-all"\n                              type="checkbox"\n-                             src="select_all_icon.png"\n                              name="selectButton"\n                              title="Select all items"\n-                             onClick="toggleSelect(this, \'add:list\');"\n-                             tal:attributes="src string:${context/portal_url}/select_all_icon.png"\n                              alt="Select all items"\n-                             i18n:attributes="title label_select_all_items; alt label_select_all_items;"/>\n+                             i18n:attributes="title label_select_all_items; alt label_select_all_items;"/></span>\n                   </th>\n                   <th i18n:translate="listingheader_group_name">Group Name</th>\n                 </tr>\n@@ -145,14 +150,14 @@\n                       tal:attributes="class python:\'odd\' if oddrow else \'even\'">\n \n                     <td class="listingCheckbox">\n-                      <input type="checkbox"\n-                             class="noborder"\n+                      <span class="form-check"><input type="checkbox"\n+                             class="form-check-input"\n                              name="add:list"\n                              value="value"\n-                                 tal:define="calcId obj/getGroupId | obj/getId;\n-                                             canAddToGroup python:member.canAddToGroup(calcId) and (\'Manager\' not in obj.getRoles() or view.is_zope_manager)"\n-                                 tal:attributes="value calcId;\n-                                                 disabled python:canAddToGroup and default or \'disabled\'" />\n+                             tal:define="calcId obj/getGroupId | obj/getId;\n+                                         canAddToGroup python:member.canAddToGroup(calcId) and (\'Manager\' not in obj.getRoles() or view.is_zope_manager)"\n+                             tal:attributes="value calcId;\n+                                             disabled python:canAddToGroup and default or \'disabled\'" /></span>\n                     </td>\n \n                     <td>\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T09:37:52+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/0df72c6b130b194f84272f1fca687a2a9e365d11

update icons

Files changed:
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\nindex f8db4d1d8f..8dfb6c7197 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n@@ -119,7 +119,7 @@\n \n                         <tal:block tal:condition="python: view.isGroup(this_user)">\n                           <td>\n-                            <img src="group.png" alt="" />\n+                            <img tal:replace="structure python:icons.tag(\'people\')">\n                             <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\' + view.makeQuery(groupname=this_user.getGroupName())" >\n                               <span tal:replace="this_user/getGroupTitleOrName | default" />\n                               (<span tal:replace="this_user/id" />)\n@@ -129,7 +129,7 @@\n \n                         <tal:block tal:condition="python: not view.isGroup(this_user)">\n                           <td>\n-                            <img src="user.png" alt="" />\n+                            <img tal:replace="structure python:icons.tag(\'person\')">\n                             <a href="" tal:attributes="href python:\'@@user-information?\' + view.makeQuery(userid=this_user.getId());\n                                                         title this_user/getId">\n                                 <span tal:replace="python:this_user.getProperty(\'fullname\')">Full Name</span>\n@@ -234,7 +234,7 @@\n \n                           <td>\n                               <tal:block tal:condition="python:not view.isGroup(this_user)">\n-                                  <img src="user.png" alt="" />\n+                                  <img tal:replace="structure python:icons.tag(\'person\')">\n                                   <a href="" tal:attributes="href python:\'@@user-information?\' + view.makeQuery(userid=this_user.getId());\n                                                               title this_user/getId">\n                                     <span tal:replace="python:this_user.getProperty(\'fullname\')">Full Name</span>\n@@ -244,7 +244,7 @@\n                                   </a>\n                               </tal:block>\n                               <tal:block tal:condition="python: view.isGroup(this_user)">\n-                                  <img src="group.png" alt="" />\n+                                  <img tal:replace="structure python:icons.tag(\'people\')">\n                                   <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\' + view.makeQuery(groupname=this_user.getGroupName())">\n                                       <span tal:replace="this_user/getGroupTitleOrName | default" />\n                                       (<span tal:replace="this_user/id | default" />)\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\nindex b04479ad98..434315b16d 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n@@ -85,10 +85,10 @@\n                                 groupId group/getId;"\n                     tal:attributes="class python:\'odd\' if oddrow else \'even\'">\n                     <td>\n+                        <img tal:replace="structure python:icons.tag(\'people\')">\n                         <a href="@@usergroup-groupdetails"\n                            tal:attributes="href string:@@usergroup-groupdetails?groupname=${groupId}">\n-                        <tal:block replace="structure portal/group.png"/>&nbsp;<span\n-                                     tal:replace="group/getGroupTitleOrName">group name</span>\n+                           <span tal:replace="group/getGroupTitleOrName">group name</span>\n                         </a>\n                     </td>\n \n@@ -161,7 +161,7 @@\n                     </td>\n \n                     <td>\n-                        <img src="group.png" alt="" />\n+                        <img tal:replace="structure python:icons.tag(\'people\')">\n                         <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\'+mq(groupname=obj.getGroupName())"\n                                   tal:content="obj/getGroupTitleOrName | default">\n                               <span i18n:translate="link_groupname_not_available">\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T09:39:17+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/1f3e95b3cae681f868f96585d5a9fb5f830f5218

checkbox column width

Files changed:
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\nindex 8dfb6c7197..6ff5ab4d2b 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n@@ -91,7 +91,7 @@\n                   tal:condition="view/groupMembers">\n                 <thead>\n                   <tr>\n-                      <th>\n+                      <th style="width:1rem;">\n                           <span class="form-check"><input class="form-check-input toggle-all"\n                                   type="checkbox"\n                                   name="selectButton"\n@@ -206,7 +206,7 @@\n                     </thead>\n                     <tbody class="pat-checklist">\n                       <tr tal:condition="batch">\n-                        <th><span class="form-check"><input class="noborder form-check-input toggle-all"\n+                        <th style="width:1rem;"><span class="form-check"><input class="noborder form-check-input toggle-all"\n                                     type="checkbox"\n                                     name="selectButton"\n                                     title="Select all items"\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T09:44:03+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/a10146015a86b17df1048d10f00683f669370fca

fix remove button and translations

Files changed:
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\nindex 434315b16d..22fc535621 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n@@ -71,7 +71,7 @@\n           </li>\n         </ul>\n \n-        <form method="post"\n+        <form method="post" class="mt-3"\n               tal:attributes="action string:$portal_url/$template_id?userid=${userid}">\n \n           <h2 i18n:translate="heading_memberships_current">Current group memberships</h2>\n@@ -104,12 +104,11 @@\n             </tal:block>\n           </table>\n           <p tal:condition="not:groups" i18n:translate="text_user_not_in_any_group">This user does not belong to any group.</p>\n-          <button class="btn btn-alert"\n+          <button class="btn btn-danger mb-4"\n                  type="submit"\n                  name="form.button.Delete"\n-                 value="Remove from selected groups"\n-                 i18n:attributes="value label_remove_selected_groups;"\n-                 tal:condition="groups" />\n+                 i18n:translate="label_remove_selected_groups"\n+                 tal:condition="groups">Remove from selected groups</button>\n \n           <h2 tal:condition="many_groups" i18n:translate="heading_search_groups">Search for groups</h2>\n           <h2 tal:condition="not:many_groups" i18n:translate="heading_assign_to_groups">Assign to groups</h2>\n@@ -199,10 +198,8 @@\n           <button class="btn btn-primary"\n                  type="submit"\n                  name="form.button.Add"\n-                 value="Add user to selected groups"\n                  tal:condition="batch"\n-                 i18n:translate=""\n-                 i18n:attributes="value label_add_user_to_group;">Add user to selected groups</button>\n+                 i18n:translate="label_add_user_to_group">Add user to selected groups</button>\n           <input tal:replace="structure context/@@authenticator/authenticator" />\n \n         </form>\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T13:41:58+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/c66100ceb60b1d4e50123b51b3b5215dc5fa118f

fix tests due to changed markup

Files changed:
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py

b'diff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\nindex d2803c0cde..3000ecc0d3 100644\n--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\n+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\n@@ -218,7 +218,7 @@ def test_usergroup_usermembership_blocks_escalation(self):\n             self.portal_url + \'/@@usergroup-usermembership?userid=%s\' % self.normal_user)\n         contents = self._simplify_white_space(self.browser.contents)\n         self.assertTrue(\n-            \'<input type="checkbox" class="noborder" name="add:list" \'\n+            \'<input type="checkbox" class="form-check-input" name="add:list" \'\n             \'value="Administrators" disabled="disabled" />\' in contents\n         )\n \n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-21T16:58:56+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/26bdd9191cd4e166b59bbe3719943443a24707fd

Merge pull request #3746 from plone/petschki/pat-checklist-implementation

Implement `pat-checklist` to group membership management

Files changed:
A news/3740.bugfix
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt
M Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py

b'diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\nindex 3a5d475f6b..6ff5ab4d2b 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.pt\n@@ -87,11 +87,11 @@\n                               batchformkeys python:[\'searchstring\',\'_authenticator\',\'groupname\',\'form.submitted\'];\n                               many_users view/many_users">\n               <h2 i18n:translate="heading_groupmembers_current">Current group members</h2>\n-              <table class="table table-responsive table-bordered table-striped" summary="Group Members Listing"\n+              <table class="table table-responsive table-bordered table-striped pat-checklist" summary="Group Members Listing"\n                   tal:condition="view/groupMembers">\n                 <thead>\n                   <tr>\n-                      <th>\n+                      <th style="width:1rem;">\n                           <span class="form-check"><input class="form-check-input toggle-all"\n                                   type="checkbox"\n                                   name="selectButton"\n@@ -119,7 +119,7 @@\n \n                         <tal:block tal:condition="python: view.isGroup(this_user)">\n                           <td>\n-                            <img src="group.png" alt="" />\n+                            <img tal:replace="structure python:icons.tag(\'people\')">\n                             <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\' + view.makeQuery(groupname=this_user.getGroupName())" >\n                               <span tal:replace="this_user/getGroupTitleOrName | default" />\n                               (<span tal:replace="this_user/id" />)\n@@ -129,7 +129,7 @@\n \n                         <tal:block tal:condition="python: not view.isGroup(this_user)">\n                           <td>\n-                            <img src="user.png" alt="" />\n+                            <img tal:replace="structure python:icons.tag(\'person\')">\n                             <a href="" tal:attributes="href python:\'@@user-information?\' + view.makeQuery(userid=this_user.getId());\n                                                         title this_user/getId">\n                                 <span tal:replace="python:this_user.getProperty(\'fullname\')">Full Name</span>\n@@ -204,9 +204,9 @@\n                         </th>\n                       </tr>\n                     </thead>\n-                    <tbody>\n+                    <tbody class="pat-checklist">\n                       <tr tal:condition="batch">\n-                        <th><span class="form-check"><input class="noborder form-check-input toggle-all"\n+                        <th style="width:1rem;"><span class="form-check"><input class="noborder form-check-input toggle-all"\n                                     type="checkbox"\n                                     name="selectButton"\n                                     title="Select all items"\n@@ -234,7 +234,7 @@\n \n                           <td>\n                               <tal:block tal:condition="python:not view.isGroup(this_user)">\n-                                  <img src="user.png" alt="" />\n+                                  <img tal:replace="structure python:icons.tag(\'person\')">\n                                   <a href="" tal:attributes="href python:\'@@user-information?\' + view.makeQuery(userid=this_user.getId());\n                                                               title this_user/getId">\n                                     <span tal:replace="python:this_user.getProperty(\'fullname\')">Full Name</span>\n@@ -244,7 +244,7 @@\n                                   </a>\n                               </tal:block>\n                               <tal:block tal:condition="python: view.isGroup(this_user)">\n-                                  <img src="group.png" alt="" />\n+                                  <img tal:replace="structure python:icons.tag(\'people\')">\n                                   <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\' + view.makeQuery(groupname=this_user.getGroupName())">\n                                       <span tal:replace="this_user/getGroupTitleOrName | default" />\n                                       (<span tal:replace="this_user/id | default" />)\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\nindex f0651e77b6..22fc535621 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.pt\n@@ -52,18 +52,26 @@\n \n     <div id="content-core">\n \n+      <p class="lead mt-4" i18n:translate="">Group membership</p>\n+\n       <div class="autotabs">\n-        <nav class="autotoc-nav">\n-          <a href="${portal_url}/@@user-information?${userquery}"\n-             i18n:translate="title_personal_information_form">Personal Information</a>\n-          <a href="${portal_url}/@@user-preferences?${userquery}"\n-             i18n:translate="">Personal Preferences</a>\n-          <a class="active"\n-             href="${portal_url}/@@usergroup-usermembership?${userquery}"\n-             i18n:translate="label_group_memberships">Group Memberships</a>\n-        </nav>\n-\n-        <form method="post"\n+        <ul class="autotoc-nav nav nav-tabs">\n+          <li class="nav-item">\n+            <a class="nav-link" href="${portal_url}/@@user-information?${userquery}"\n+            i18n:translate="title_personal_information_form">Personal Information</a>\n+          </li>\n+          <li class="nav-item">\n+            <a class="nav-link" href="${portal_url}/@@user-preferences?${userquery}"\n+            i18n:translate="">Personal Preferences</a>\n+          </li>\n+          <li class="nav-item">\n+            <a class="nav-link active" class="active"\n+               href="${portal_url}/@@usergroup-usermembership?${userquery}"\n+               i18n:translate="label_group_memberships">Group Memberships</a>\n+          </li>\n+        </ul>\n+\n+        <form method="post" class="mt-3"\n               tal:attributes="action string:$portal_url/$template_id?userid=${userid}">\n \n           <h2 i18n:translate="heading_memberships_current">Current group memberships</h2>\n@@ -77,40 +85,39 @@\n                                 groupId group/getId;"\n                     tal:attributes="class python:\'odd\' if oddrow else \'even\'">\n                     <td>\n+                        <img tal:replace="structure python:icons.tag(\'people\')">\n                         <a href="@@usergroup-groupdetails"\n                            tal:attributes="href string:@@usergroup-groupdetails?groupname=${groupId}">\n-                        <tal:block replace="structure portal/group.png"/>&nbsp;<span\n-                                     tal:replace="group/getGroupTitleOrName">group name</span>\n+                           <span tal:replace="group/getGroupTitleOrName">group name</span>\n                         </a>\n                     </td>\n \n \n                     <td class="listingCheckbox">\n-                        <input type="checkbox"\n-                               class="noborder notify"\n+                        <span class="form-check"><input type="checkbox"\n+                               class="noborder notify form-check-input"\n                                name="delete:list"\n                                tal:attributes="value groupId;\n-                                               disabled python:member.canRemoveFromGroup(groupId) and default or \'disabled\'" />\n+                                               disabled python:member.canRemoveFromGroup(groupId) and default or \'disabled\'" /></span>\n                     </td>\n                 </tr>\n             </tal:block>\n           </table>\n           <p tal:condition="not:groups" i18n:translate="text_user_not_in_any_group">This user does not belong to any group.</p>\n-          <button class="btn btn-alert"\n+          <button class="btn btn-danger mb-4"\n                  type="submit"\n                  name="form.button.Delete"\n-                 value="Remove from selected groups"\n-                 i18n:attributes="value label_remove_selected_groups;"\n-                 tal:condition="groups" />\n+                 i18n:translate="label_remove_selected_groups"\n+                 tal:condition="groups">Remove from selected groups</button>\n \n           <h2 tal:condition="many_groups" i18n:translate="heading_search_groups">Search for groups</h2>\n           <h2 tal:condition="not:many_groups" i18n:translate="heading_assign_to_groups">Assign to groups</h2>\n \n-          <table class="table overflow-auto table-bordered table-striped text-center" summary="Groups">\n+          <table class="table overflow-auto table-bordered table-striped pat-checklist" summary="Groups">\n             <tr>\n               <th colspan="2" tal:condition="many_groups">\n                 <span tal:omit-tag="" i18n:translate="label_quick_search">Quick search</span>:\n-                      <input class="quickSearch"\n+                      <input class="quickSearch form-control"\n                              type="text"\n                              name="searchstring"\n                              value=""\n@@ -127,16 +134,13 @@\n             </tr>\n             <tal:block condition="python:results">\n                 <tr>\n-                  <th>\n-                      <input class="noborder"\n+                  <th style="width:1.5rem;">\n+                      <span class="form-check"><input class="form-check-input toggle-all"\n                              type="checkbox"\n-                             src="select_all_icon.png"\n                              name="selectButton"\n                              title="Select all items"\n-                             onClick="toggleSelect(this, \'add:list\');"\n-                             tal:attributes="src string:${context/portal_url}/select_all_icon.png"\n                              alt="Select all items"\n-                             i18n:attributes="title label_select_all_items; alt label_select_all_items;"/>\n+                             i18n:attributes="title label_select_all_items; alt label_select_all_items;"/></span>\n                   </th>\n                   <th i18n:translate="listingheader_group_name">Group Name</th>\n                 </tr>\n@@ -145,18 +149,18 @@\n                       tal:attributes="class python:\'odd\' if oddrow else \'even\'">\n \n                     <td class="listingCheckbox">\n-                      <input type="checkbox"\n-                             class="noborder"\n+                      <span class="form-check"><input type="checkbox"\n+                             class="form-check-input"\n                              name="add:list"\n                              value="value"\n-                                 tal:define="calcId obj/getGroupId | obj/getId;\n-                                             canAddToGroup python:member.canAddToGroup(calcId) and (\'Manager\' not in obj.getRoles() or view.is_zope_manager)"\n-                                 tal:attributes="value calcId;\n-                                                 disabled python:canAddToGroup and default or \'disabled\'" />\n+                             tal:define="calcId obj/getGroupId | obj/getId;\n+                                         canAddToGroup python:member.canAddToGroup(calcId) and (\'Manager\' not in obj.getRoles() or view.is_zope_manager)"\n+                             tal:attributes="value calcId;\n+                                             disabled python:canAddToGroup and default or \'disabled\'" /></span>\n                     </td>\n \n                     <td>\n-                        <img src="group.png" alt="" />\n+                        <img tal:replace="structure python:icons.tag(\'people\')">\n                         <a href="" tal:attributes="href python:\'@@usergroup-groupdetails?\'+mq(groupname=obj.getGroupName())"\n                                   tal:content="obj/getGroupTitleOrName | default">\n                               <span i18n:translate="link_groupname_not_available">\n@@ -194,10 +198,8 @@\n           <button class="btn btn-primary"\n                  type="submit"\n                  name="form.button.Add"\n-                 value="Add user to selected groups"\n                  tal:condition="batch"\n-                 i18n:translate=""\n-                 i18n:attributes="value label_add_user_to_group;">Add user to selected groups</button>\n+                 i18n:translate="label_add_user_to_group">Add user to selected groups</button>\n           <input tal:replace="structure context/@@authenticator/authenticator" />\n \n         </form>\ndiff --git a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\nindex d2803c0cde..3000ecc0d3 100644\n--- a/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\n+++ b/Products/CMFPlone/controlpanel/tests/test_controlpanel_browser_usergroups_siteadmin_role.py\n@@ -218,7 +218,7 @@ def test_usergroup_usermembership_blocks_escalation(self):\n             self.portal_url + \'/@@usergroup-usermembership?userid=%s\' % self.normal_user)\n         contents = self._simplify_white_space(self.browser.contents)\n         self.assertTrue(\n-            \'<input type="checkbox" class="noborder" name="add:list" \'\n+            \'<input type="checkbox" class="form-check-input" name="add:list" \'\n             \'value="Administrators" disabled="disabled" />\' in contents\n         )\n \ndiff --git a/news/3740.bugfix b/news/3740.bugfix\nnew file mode 100644\nindex 0000000000..d016eea54b\n--- /dev/null\n+++ b/news/3740.bugfix\n@@ -0,0 +1,2 @@\n+Implement `pat-checklist` for groupuser management.\n+[petschki]\n'

