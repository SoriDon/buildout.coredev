Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-01-15T08:57:35+01:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/d4fca73b68da60b904846c2d0f9ea7f3c23872aa

The @@plone view exposes the human_readable_size helper

Fixes #3146

Files changed:
A news/3146.feature
M Products/CMFPlone/browser/ploneview.py
M Products/CMFPlone/tests/testPloneView.py

b"diff --git a/Products/CMFPlone/browser/ploneview.py b/Products/CMFPlone/browser/ploneview.py\nindex 7bae74eb74..c9735e95c8 100644\n--- a/Products/CMFPlone/browser/ploneview.py\n+++ b/Products/CMFPlone/browser/ploneview.py\n@@ -211,3 +211,7 @@ def patterns_settings(self):\n         return getMultiAdapter(\n             (context, self.request),\n             name='plone_patterns_settings')()\n+\n+    @property\n+    def human_readable_size(self):\n+        return utils.human_readable_size\ndiff --git a/Products/CMFPlone/tests/testPloneView.py b/Products/CMFPlone/tests/testPloneView.py\nindex 4f68681a98..5efdcc84bd 100644\n--- a/Products/CMFPlone/tests/testPloneView.py\n+++ b/Products/CMFPlone/tests/testPloneView.py\n@@ -151,3 +151,8 @@ def testCropText(self):\n     def testSiteEncoding(self):\n         view = Plone(self.portal, self.app.REQUEST)\n         self.assertEqual('utf-8', view.site_encoding())\n+\n+    def test_human_readable_size(self):\n+        view = Plone(self.portal, self.app.REQUEST)\n+        from Products.CMFPlone.utils import human_readable_size\n+        self.assertIs(view.human_readable_size, human_readable_size)\ndiff --git a/news/3146.feature b/news/3146.feature\nnew file mode 100644\nindex 0000000000..49a34411e5\n--- /dev/null\n+++ b/news/3146.feature\n@@ -0,0 +1,2 @@\n+The @@plone view exposes the human_readable_size helper\n+[ale-rt]\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-01-18T00:07:21+01:00
Author: Maurits van Rees (mauritsvanrees) <m.van.rees@zestsoftware.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/07574b0412460914fb5f1829638c0f9c4c084b4d

Merge pull request #3404 from plone/3146-human_readable_size

The @@plone view exposes the human_readable_size helper

Files changed:
A news/3146.feature
M Products/CMFPlone/browser/ploneview.py
M Products/CMFPlone/tests/testPloneView.py

b"diff --git a/Products/CMFPlone/browser/ploneview.py b/Products/CMFPlone/browser/ploneview.py\nindex 7bae74eb74..c9735e95c8 100644\n--- a/Products/CMFPlone/browser/ploneview.py\n+++ b/Products/CMFPlone/browser/ploneview.py\n@@ -211,3 +211,7 @@ def patterns_settings(self):\n         return getMultiAdapter(\n             (context, self.request),\n             name='plone_patterns_settings')()\n+\n+    @property\n+    def human_readable_size(self):\n+        return utils.human_readable_size\ndiff --git a/Products/CMFPlone/tests/testPloneView.py b/Products/CMFPlone/tests/testPloneView.py\nindex 4f68681a98..5efdcc84bd 100644\n--- a/Products/CMFPlone/tests/testPloneView.py\n+++ b/Products/CMFPlone/tests/testPloneView.py\n@@ -151,3 +151,8 @@ def testCropText(self):\n     def testSiteEncoding(self):\n         view = Plone(self.portal, self.app.REQUEST)\n         self.assertEqual('utf-8', view.site_encoding())\n+\n+    def test_human_readable_size(self):\n+        view = Plone(self.portal, self.app.REQUEST)\n+        from Products.CMFPlone.utils import human_readable_size\n+        self.assertIs(view.human_readable_size, human_readable_size)\ndiff --git a/news/3146.feature b/news/3146.feature\nnew file mode 100644\nindex 0000000000..49a34411e5\n--- /dev/null\n+++ b/news/3146.feature\n@@ -0,0 +1,2 @@\n+The @@plone view exposes the human_readable_size helper\n+[ale-rt]\n"

