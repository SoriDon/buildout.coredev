Repository: mockup


Branch: refs/heads/master
Date: 2017-01-19T23:22:15+01:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/mockup/commit/983c8ba338973dcd12e6dd00b0ee1c906da7180a

auto set time on date change before the original inputs value is updated. Refs: but doesn't solve: https://github.com/plone/Products.CMFPlone/issues/1914

Files changed:
M mockup/patterns/pickadate/pattern.js

diff --git a/mockup/patterns/pickadate/pattern.js b/mockup/patterns/pickadate/pattern.js
index a067c38..4ff0ed3 100644
--- a/mockup/patterns/pickadate/pattern.js
+++ b/mockup/patterns/pickadate/pattern.js
@@ -218,15 +218,15 @@ define([
                 onSet: function(e) {
                   if (e.select !== undefined) {
                     self.$date.attr('data-value', e.select);
-                    if (self.options.time === false ||
-                        self.$time.attr('data-value') !== '') {
-                      self.updateValue.call(self);
-                    }
                     if (self.options.autoSetTimeOnDateChange !== false && self.$time) {
                       if (! self.$time.pickatime('picker').get('select')) {
                         self.$time.pickatime('picker').set('select', self.options.autoSetTimeOnDateChange);
                       }
                     }
+                    if (self.options.time === false ||
+                        self.$time.attr('data-value') !== '') {
+                      self.updateValue.call(self);
+                    }
                   }
                   if (e.hasOwnProperty('clear')) {
                     self.$el.val('');


