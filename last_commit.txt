Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2022-05-17T16:20:05+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/047bf372af933c96a9977dc298a1be94426fcf36

add icon expressions

Files changed:
M src/plone/app/multilingual/profiles/default/types/LIF.xml
M src/plone/app/multilingual/profiles/default/types/LRF.xml

b'diff --git a/src/plone/app/multilingual/profiles/default/types/LIF.xml b/src/plone/app/multilingual/profiles/default/types/LIF.xml\nindex c1a283bf1..e6aadd68e 100644\n--- a/src/plone/app/multilingual/profiles/default/types/LIF.xml\n+++ b/src/plone/app/multilingual/profiles/default/types/LIF.xml\n@@ -2,7 +2,7 @@\n <object name="LIF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n   <property name="title" i18n:translate="">Language Independent Folder</property>\n   <property name="description" i18n:translate=""></property>\n-  <property name="icon_expr"></property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n   <property name="factory">LIF</property>\n   <property name="add_view_expr">string:${folder_url}/++add++LIF</property>\n   <property name="link_target"></property>\n@@ -37,12 +37,12 @@\n   <alias from="sharing" to="@@sharing"/>\n   <alias from="view" to="(selected layout)"/>\n   <action title="View" action_id="view" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}"\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n       visible="True" i18n:attributes="title">\n     <permission value="View"/>\n   </action>\n   <action title="Edit" action_id="edit" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}/edit"\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n       visible="True" i18n:attributes="title">\n     <permission value="Modify portal content"/>\n   </action>\ndiff --git a/src/plone/app/multilingual/profiles/default/types/LRF.xml b/src/plone/app/multilingual/profiles/default/types/LRF.xml\nindex b1e28668f..5df0a8514 100644\n--- a/src/plone/app/multilingual/profiles/default/types/LRF.xml\n+++ b/src/plone/app/multilingual/profiles/default/types/LRF.xml\n@@ -2,7 +2,7 @@\n <object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n   <property name="title" i18n:translate="">Language Root Folder</property>\n   <property name="description" i18n:translate=""></property>\n-  <property name="icon_expr"></property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n   <property name="factory">LRF</property>\n   <property name="add_view_expr">string:${folder_url}/++add++LRF</property>\n   <property name="link_target"></property>\n@@ -38,12 +38,12 @@\n   <alias from="sharing" to="@@sharing"/>\n   <alias from="view" to="(selected layout)"/>\n   <action title="View" action_id="view" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}"\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n       visible="True" i18n:attributes="title">\n     <permission value="View"/>\n   </action>\n   <action title="Edit" action_id="edit" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}/edit"\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n       visible="True" i18n:attributes="title">\n     <permission value="Modify portal content"/>\n   </action>\n'

Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2022-05-17T16:22:55+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/35b133fdde629e30d30b329d1a96dda2d7e55b98

add news

Files changed:
A news/401.bugfix

b'diff --git a/news/401.bugfix b/news/401.bugfix\nnew file mode 100644\nindex 00000000..77fae5a3\n--- /dev/null\n+++ b/news/401.bugfix\n@@ -0,0 +1,2 @@\n+Add icon expressions to types.\n+[agitator]\n\\ No newline at end of file\n'

Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2022-05-17T20:28:58+02:00
Author: Peter Holzer (agitator) <peter.holzer@agitator.com>
Commit: https://github.com/plone/plone.app.multilingual/commit/3f5cca48bd5497e27d655dc92e1dcd0c5d3e93dc

add upgrade step

Files changed:
A src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml
A src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml
M src/plone/app/multilingual/profiles/default/metadata.xml
M src/plone/app/multilingual/upgrades.zcml

b'diff --git a/src/plone/app/multilingual/profiles/default/metadata.xml b/src/plone/app/multilingual/profiles/default/metadata.xml\nindex e732d58b8..796db6345 100644\n--- a/src/plone/app/multilingual/profiles/default/metadata.xml\n+++ b/src/plone/app/multilingual/profiles/default/metadata.xml\n@@ -1,6 +1,6 @@\n <?xml version="1.0"?>\n <metadata>\n-  <version>4</version>\n+  <version>1000</version>\n   <dependencies>\n     <dependency>profile-plone.app.dexterity:default</dependency>\n   </dependencies>\ndiff --git a/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml\nnew file mode 100644\nindex 000000000..0a678610e\n--- /dev/null\n+++ b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<object name="LIF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+  <property name="title" i18n:translate="">Language Independent Folder</property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n+  <action title="View" action_id="view" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n+      visible="True" i18n:attributes="title">\n+    <permission value="View"/>\n+  </action>\n+  <action title="Edit" action_id="edit" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n+      visible="True" i18n:attributes="title">\n+    <permission value="Modify portal content"/>\n+  </action>\n+</object>\ndiff --git a/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml\nnew file mode 100644\nindex 000000000..f411d40b9\n--- /dev/null\n+++ b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+  <property name="title" i18n:translate="">Language Root Folder</property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n+  <action title="View" action_id="view" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n+      visible="True" i18n:attributes="title">\n+    <permission value="View"/>\n+  </action>\n+  <action title="Edit" action_id="edit" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n+      visible="True" i18n:attributes="title">\n+    <permission value="Modify portal content"/>\n+  </action>\n+</object>\ndiff --git a/src/plone/app/multilingual/upgrades.zcml b/src/plone/app/multilingual/upgrades.zcml\nindex 88c4005c1..adbc8be97 100644\n--- a/src/plone/app/multilingual/upgrades.zcml\n+++ b/src/plone/app/multilingual/upgrades.zcml\n@@ -52,4 +52,22 @@\n       handler=".upgrades.upgrade_to_4"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to_1000"\n+      title="Update to 1000"\n+      directory="profiles/upgrades/to_1000"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n+  <genericsetup:upgradeSteps source="4"\n+      destination="1000"\n+      profile="plone.app.multilingual:default">\n+\n+      <genericsetup:upgradeDepends\n+        title="Add icon expressions"\n+        import_profile="plone.app.multilingual:to_1000" />\n+\n+  </genericsetup:upgradeSteps>\n+\n </configure>\n'

Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2022-05-18T14:43:48+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.multilingual/commit/9f6d3839a9f793f5e6cbb50f66d48d29c1e0d590

Merge pull request #401 from plone/addiconepressions

add icon expressions

Files changed:
A news/401.bugfix
A src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml
A src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml
M src/plone/app/multilingual/profiles/default/metadata.xml
M src/plone/app/multilingual/profiles/default/types/LIF.xml
M src/plone/app/multilingual/profiles/default/types/LRF.xml
M src/plone/app/multilingual/upgrades.zcml

b'diff --git a/news/401.bugfix b/news/401.bugfix\nnew file mode 100644\nindex 000000000..77fae5a32\n--- /dev/null\n+++ b/news/401.bugfix\n@@ -0,0 +1,2 @@\n+Add icon expressions to types.\n+[agitator]\n\\ No newline at end of file\ndiff --git a/src/plone/app/multilingual/profiles/default/metadata.xml b/src/plone/app/multilingual/profiles/default/metadata.xml\nindex e732d58b8..796db6345 100644\n--- a/src/plone/app/multilingual/profiles/default/metadata.xml\n+++ b/src/plone/app/multilingual/profiles/default/metadata.xml\n@@ -1,6 +1,6 @@\n <?xml version="1.0"?>\n <metadata>\n-  <version>4</version>\n+  <version>1000</version>\n   <dependencies>\n     <dependency>profile-plone.app.dexterity:default</dependency>\n   </dependencies>\ndiff --git a/src/plone/app/multilingual/profiles/default/types/LIF.xml b/src/plone/app/multilingual/profiles/default/types/LIF.xml\nindex c1a283bf1..e6aadd68e 100644\n--- a/src/plone/app/multilingual/profiles/default/types/LIF.xml\n+++ b/src/plone/app/multilingual/profiles/default/types/LIF.xml\n@@ -2,7 +2,7 @@\n <object name="LIF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n   <property name="title" i18n:translate="">Language Independent Folder</property>\n   <property name="description" i18n:translate=""></property>\n-  <property name="icon_expr"></property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n   <property name="factory">LIF</property>\n   <property name="add_view_expr">string:${folder_url}/++add++LIF</property>\n   <property name="link_target"></property>\n@@ -37,12 +37,12 @@\n   <alias from="sharing" to="@@sharing"/>\n   <alias from="view" to="(selected layout)"/>\n   <action title="View" action_id="view" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}"\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n       visible="True" i18n:attributes="title">\n     <permission value="View"/>\n   </action>\n   <action title="Edit" action_id="edit" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}/edit"\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n       visible="True" i18n:attributes="title">\n     <permission value="Modify portal content"/>\n   </action>\ndiff --git a/src/plone/app/multilingual/profiles/default/types/LRF.xml b/src/plone/app/multilingual/profiles/default/types/LRF.xml\nindex b1e28668f..5df0a8514 100644\n--- a/src/plone/app/multilingual/profiles/default/types/LRF.xml\n+++ b/src/plone/app/multilingual/profiles/default/types/LRF.xml\n@@ -2,7 +2,7 @@\n <object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n   <property name="title" i18n:translate="">Language Root Folder</property>\n   <property name="description" i18n:translate=""></property>\n-  <property name="icon_expr"></property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n   <property name="factory">LRF</property>\n   <property name="add_view_expr">string:${folder_url}/++add++LRF</property>\n   <property name="link_target"></property>\n@@ -38,12 +38,12 @@\n   <alias from="sharing" to="@@sharing"/>\n   <alias from="view" to="(selected layout)"/>\n   <action title="View" action_id="view" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}"\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n       visible="True" i18n:attributes="title">\n     <permission value="View"/>\n   </action>\n   <action title="Edit" action_id="edit" category="object" condition_expr=""\n-      icon_expr="" link_target="" url_expr="string:${object_url}/edit"\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n       visible="True" i18n:attributes="title">\n     <permission value="Modify portal content"/>\n   </action>\ndiff --git a/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml\nnew file mode 100644\nindex 000000000..0a678610e\n--- /dev/null\n+++ b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LIF.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<object name="LIF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+  <property name="title" i18n:translate="">Language Independent Folder</property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n+  <action title="View" action_id="view" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n+      visible="True" i18n:attributes="title">\n+    <permission value="View"/>\n+  </action>\n+  <action title="Edit" action_id="edit" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n+      visible="True" i18n:attributes="title">\n+    <permission value="Modify portal content"/>\n+  </action>\n+</object>\ndiff --git a/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml\nnew file mode 100644\nindex 000000000..f411d40b9\n--- /dev/null\n+++ b/src/plone/app/multilingual/profiles/upgrades/to_1000/types/LRF.xml\n@@ -0,0 +1,15 @@\n+<?xml version="1.0"?>\n+<object name="LRF" meta_type="Dexterity FTI" i18n:domain="plone" xmlns:i18n="http://xml.zope.org/namespaces/i18n">\n+  <property name="title" i18n:translate="">Language Root Folder</property>\n+  <property name="icon_expr">string:contenttype/folder</property>\n+  <action title="View" action_id="view" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/view" link_target="" url_expr="string:${object_url}"\n+      visible="True" i18n:attributes="title">\n+    <permission value="View"/>\n+  </action>\n+  <action title="Edit" action_id="edit" category="object" condition_expr=""\n+      icon_expr="string:toolbar-action/edit" link_target="" url_expr="string:${object_url}/edit"\n+      visible="True" i18n:attributes="title">\n+    <permission value="Modify portal content"/>\n+  </action>\n+</object>\ndiff --git a/src/plone/app/multilingual/upgrades.zcml b/src/plone/app/multilingual/upgrades.zcml\nindex 88c4005c1..adbc8be97 100644\n--- a/src/plone/app/multilingual/upgrades.zcml\n+++ b/src/plone/app/multilingual/upgrades.zcml\n@@ -52,4 +52,22 @@\n       handler=".upgrades.upgrade_to_4"\n       />\n \n+  <genericsetup:registerProfile\n+      name="to_1000"\n+      title="Update to 1000"\n+      directory="profiles/upgrades/to_1000"\n+      for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+      provides="Products.GenericSetup.interfaces.EXTENSION"\n+      />\n+\n+  <genericsetup:upgradeSteps source="4"\n+      destination="1000"\n+      profile="plone.app.multilingual:default">\n+\n+      <genericsetup:upgradeDepends\n+        title="Add icon expressions"\n+        import_profile="plone.app.multilingual:to_1000" />\n+\n+  </genericsetup:upgradeSteps>\n+\n </configure>\n'

