Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2017-05-23T11:41:14+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/c476a5a37db3bf9cc79c4f06ff4405efd5c32a17

Fix flaky test in test_indexes.

Files changed:
M CHANGES.rst
M plone/app/contenttypes/tests/test_indexes.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 71efae7e..71697f4e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -16,11 +16,15 @@ New features:
 
 Bug fixes:
 
+- Fix flaky test in test_indexes.
+  [thet]
+
+- removed unittest2 dependency
+  [kakshay21]
+
 - Fix issue where contentFilter could not be read from request
   [datakurre]
 
-- removed unittest2 dependency
-   [kakshay21]
 
 1.3.0 (2017-03-27)
 ------------------
diff --git a/plone/app/contenttypes/tests/test_indexes.py b/plone/app/contenttypes/tests/test_indexes.py
index 924921c0..23681f99 100644
--- a/plone/app/contenttypes/tests/test_indexes.py
+++ b/plone/app/contenttypes/tests/test_indexes.py
@@ -149,13 +149,13 @@ def test_text_in_searchable_text_index(self):
             SearchableText=u'Lorem ipsum',
         ))
         self.assertEqual(len(brains), 2)
-        self.assertEqual(
-            brains[0].getPath(),
-            '/plone/folder/news_item'
+
+        paths = [it.getPath() for it in brains]
+        self.assertTrue(
+            '/plone/folder/news_item' in paths
         )
-        self.assertEqual(
-            brains[1].getPath(),
-            '/plone/folder/document'
+        self.assertTrue(
+            '/plone/folder/document' in paths
         )
 
     def test_html_stripped_searchable_text_index(self):


Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2017-05-23T13:20:19+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/73add50570940d804235ad7ebe2f76a622e8e383

Merge pull request #402 from plone/thet-fixflakytest

Fix flaky test in test_indexes.

Files changed:
M CHANGES.rst
M plone/app/contenttypes/tests/test_indexes.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 71efae7e..71697f4e 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -16,11 +16,15 @@ New features:
 
 Bug fixes:
 
+- Fix flaky test in test_indexes.
+  [thet]
+
+- removed unittest2 dependency
+  [kakshay21]
+
 - Fix issue where contentFilter could not be read from request
   [datakurre]
 
-- removed unittest2 dependency
-   [kakshay21]
 
 1.3.0 (2017-03-27)
 ------------------
diff --git a/plone/app/contenttypes/tests/test_indexes.py b/plone/app/contenttypes/tests/test_indexes.py
index 924921c0..23681f99 100644
--- a/plone/app/contenttypes/tests/test_indexes.py
+++ b/plone/app/contenttypes/tests/test_indexes.py
@@ -149,13 +149,13 @@ def test_text_in_searchable_text_index(self):
             SearchableText=u'Lorem ipsum',
         ))
         self.assertEqual(len(brains), 2)
-        self.assertEqual(
-            brains[0].getPath(),
-            '/plone/folder/news_item'
+
+        paths = [it.getPath() for it in brains]
+        self.assertTrue(
+            '/plone/folder/news_item' in paths
         )
-        self.assertEqual(
-            brains[1].getPath(),
-            '/plone/folder/document'
+        self.assertTrue(
+            '/plone/folder/document' in paths
         )
 
     def test_html_stripped_searchable_text_index(self):


