Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-10-03T01:54:45-07:00
Author: Steve Piercy (stevepiercy) <web@stevepiercy.com>
Commit: https://github.com/plone/plone.restapi/commit/76f324ed278c57a76810b9bf310d9c07ad2db007

MySTify linkintegrity.md (#1510)

- Add missing response file as a TODO
- Add myst as topmatter key
- Convert reST to MyST
- Move linkintegrity.md under `endpoints` and add it to its `toctree`

Closes #1509

Files changed:
A docs/source/endpoints/linkintegrity.md
A news/1509.doc
A src/plone/restapi/tests/http-examples/linkintegrity_get.resp
M docs/source/endpoints/index.md
D docs/source/linkintegrity.md

b'diff --git a/docs/source/endpoints/index.md b/docs/source/endpoints/index.md\nindex 2eec48957..f6f525ef9 100644\n--- a/docs/source/endpoints/index.md\n+++ b/docs/source/endpoints/index.md\n@@ -31,6 +31,7 @@ email-send\n expansion\n groups\n history\n+linkintegrity\n locking\n navigation\n actions\ndiff --git a/docs/source/endpoints/linkintegrity.md b/docs/source/endpoints/linkintegrity.md\nnew file mode 100644\nindex 000000000..a6bff085b\n--- /dev/null\n+++ b/docs/source/endpoints/linkintegrity.md\n@@ -0,0 +1,37 @@\n+---\n+myst:\n+  html_meta:\n+    "description": "Returns a list of possible reference breaches for given objects."\n+    "property=og:description": "Returns a list of possible reference breaches for given objects."\n+    "property=og:title": "Link integrity"\n+    "keywords": "Plone, plone.restapi, REST, API, Link, integrity"\n+---\n+\n+# Link Integrity\n+\n+When you create relations between content objects in Plone (for example, via relation fields or links in text blocks), these relations are stored in the database.\n+The Plone user interface will use those stored relations to show a warning when you try to delete a content object that is still referenced elsewhere.\n+Link integrity avoids broken links ("breaches") in the site.\n+\n+This check includes content objects that are located within a content object ("folderish content").\n+\n+The `@linkintegrity` endpoint returns the list of reference breaches.\n+If there are none, it will return an empty list (`[]`).\n+\n+You can call the `/@linkintegrity` endpoint on the site root with a `GET` request and a list of UIDs in the JSON body:\n+\n+```{eval-rst}\n+..  http:example:: curl httpie python-requests\n+    :request: ../../../src/plone/restapi/tests/http-examples/linkintegrity_get.req\n+```\n+\n+The server will respond with the result:\n+\n+```{literalinclude} ../../../src/plone/restapi/tests/http-examples/linkintegrity_get.resp\n+   :language: http\n+```\n+\n+The endpoint accepts a single parameter:\n+\n+`uids`\n+: A list of object UIDs that you want to check.\ndiff --git a/docs/source/linkintegrity.md b/docs/source/linkintegrity.md\ndeleted file mode 100644\nindex 2aed82201..000000000\n--- a/docs/source/linkintegrity.md\n+++ /dev/null\n@@ -1,31 +0,0 @@\n----\n-html_meta:\n-  "description": "Returns a list of possible reference breaches for given objects."\n-  "property=og:description": "Returns a list of possible reference breaches for given objects."\n-  "property=og:title": "Link integrity"\n-  "keywords": "Plone, plone.restapi, REST, API, Linkintegrity"\n----\n-\n-# Link Integrity\n-\n-When you create relations between content objects in Plone (e.g. via relation fields or links in text blocks), these relations are stored in the database.\n-The Plone user interface will use those stored relations to show a warning when you try to delete a content object that is still referenced somewhere.\n-This avoids broken links ("breaches") in the site.\n-\n-This check includes content objects that are located within a content object ("folderish content").\n-\n-The `@linkintegrity` endpoint returns the list of reference breaches. If there are none, it will return an empty list ("[]").\n-\n-You can call the `/@linkintegrity` endpoint on site root with a `GET` request and a list of uids in JSON BODY:\n-\n-..  http:example:: curl httpie python-requests\n-    :request: ../../src/plone/restapi/tests/http-examples/linkintegrity_get.req\n-\n-The server will respond with the results:\n-\n-.. literalinclude:: ../../src/plone/restapi/tests/http-examples/linkintegrity_get.resp\n-   :language: http\n-\n-The endpoint accepts a single parameter:\n-\n-  - ``uids`` (a list of object uids that you want to check)\ndiff --git a/news/1509.doc b/news/1509.doc\nnew file mode 100644\nindex 000000000..e7a75ea4d\n--- /dev/null\n+++ b/news/1509.doc\n@@ -0,0 +1 @@\n+Fix linkintegrity documentation, add missing a response file, and use MyST syntax. [stevepiercy]\ndiff --git a/src/plone/restapi/tests/http-examples/linkintegrity_get.resp b/src/plone/restapi/tests/http-examples/linkintegrity_get.resp\nnew file mode 100644\nindex 000000000..30404ce4c\n--- /dev/null\n+++ b/src/plone/restapi/tests/http-examples/linkintegrity_get.resp\n@@ -0,0 +1 @@\n+TODO\n\\ No newline at end of file\n'

