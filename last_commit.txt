Repository: plone.app.event


Branch: refs/heads/master
Date: 2016-01-27T02:08:06+01:00
Author: Patrick Gerken (do3cc) <patrick.gerken@zumtobelgroup.com>
Commit: https://github.com/plone/plone.app.event/commit/5a1c3258e1c6ba590f8928640dfcfb98a68f2617

Properly handle case of no TZ set

Files changed:
M plone/app/event/testing.py

diff --git a/plone/app/event/testing.py b/plone/app/event/testing.py
index 60cdc9a..9239922 100644
--- a/plone/app/event/testing.py
+++ b/plone/app/event/testing.py
@@ -37,6 +37,7 @@ def set_timezone(tz):
 
 def set_env_timezone(tz):
     if tz is None:
+        os.environ.pop('TZ')
         return None
     current_tz = os.environ.get('TZ', None)
     os.environ['TZ'] = tz


