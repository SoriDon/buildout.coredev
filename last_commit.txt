Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2021-10-14T12:58:33+02:00
Author: Marcel Liebischer (mliebischer) <liebischer@interaktiv.de>
Commit: https://github.com/plone/plone.app.multilingual/commit/f4f465da4e26468f8a99bc6c3276052c152f5454

modify_translations.pt template should not call translation objects. Fixes #384

Files changed:
A news/384.bugfix
M src/plone/app/multilingual/browser/templates/modify_translations.pt

b'diff --git a/news/384.bugfix b/news/384.bugfix\nnew file mode 100644\nindex 00000000..e27093d0\n--- /dev/null\n+++ b/news/384.bugfix\n@@ -0,0 +1 @@\n+Manage Translations view should not call translation objects. [mliebischer]\ndiff --git a/src/plone/app/multilingual/browser/templates/modify_translations.pt b/src/plone/app/multilingual/browser/templates/modify_translations.pt\nindex 7a500f81..a32f8adc 100644\n--- a/src/plone/app/multilingual/browser/templates/modify_translations.pt\n+++ b/src/plone/app/multilingual/browser/templates/modify_translations.pt\n@@ -32,13 +32,13 @@\n                   tal:content="lang"></span>\n           </td>\n           <td>\n-            <tal:hastranslation condition="translation">\n+            <tal:hastranslation condition="python:translation">\n               <h3 class="translationTitle" tal:content="translation/Title">Title</h3>\n               <a class="translationURL" href="#" tal:attributes="href translation/absolute_url">\n                 <span tal:replace="python:\'/\'.join(translation.getPhysicalPath())">URL</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <h3 class="translationTitle discreet" i18n:translate="">Translation missing</h3>\n             </tal:notranslation>\n           </td>\n@@ -52,7 +52,7 @@\n                     class="d-none d-md-inline-block text-xs-right" i18n:translate="disconnect_translation">Disconnect translation</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <a href="#" title="Connect existing translation" class="pat-plone-modal connectTranslationAction"\n                  tal:attributes="href string:${context/absolute_url}/connect_translation?language=${lang}"\n                  i18n:attributes="title connect_existing_translation">\n@@ -72,7 +72,7 @@\n                     class="d-none d-md-inline-block" i18n:translate="delete_translated_item">Delete translated item</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <a href="#" title="Add translation" class="pat-plone-modal addTranslationAction"\n                  tal:attributes="href string:${context/absolute_url}/@@create_translation?language=${lang}"\n                  i18n:attributes="title add_translation">\n'

Repository: plone.app.multilingual


Branch: refs/heads/master
Date: 2021-10-15T22:04:32+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.multilingual/commit/ea4fb4a2421942e2ca71485b0286ac2f87e1dcb7

Merge pull request #385 from plone/384-fix-modify-translation-template

384 fix modify translation template

Files changed:
A news/384.bugfix
M src/plone/app/multilingual/browser/templates/modify_translations.pt

b'diff --git a/news/384.bugfix b/news/384.bugfix\nnew file mode 100644\nindex 00000000..e27093d0\n--- /dev/null\n+++ b/news/384.bugfix\n@@ -0,0 +1 @@\n+Manage Translations view should not call translation objects. [mliebischer]\ndiff --git a/src/plone/app/multilingual/browser/templates/modify_translations.pt b/src/plone/app/multilingual/browser/templates/modify_translations.pt\nindex 7a500f81..a32f8adc 100644\n--- a/src/plone/app/multilingual/browser/templates/modify_translations.pt\n+++ b/src/plone/app/multilingual/browser/templates/modify_translations.pt\n@@ -32,13 +32,13 @@\n                   tal:content="lang"></span>\n           </td>\n           <td>\n-            <tal:hastranslation condition="translation">\n+            <tal:hastranslation condition="python:translation">\n               <h3 class="translationTitle" tal:content="translation/Title">Title</h3>\n               <a class="translationURL" href="#" tal:attributes="href translation/absolute_url">\n                 <span tal:replace="python:\'/\'.join(translation.getPhysicalPath())">URL</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <h3 class="translationTitle discreet" i18n:translate="">Translation missing</h3>\n             </tal:notranslation>\n           </td>\n@@ -52,7 +52,7 @@\n                     class="d-none d-md-inline-block text-xs-right" i18n:translate="disconnect_translation">Disconnect translation</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <a href="#" title="Connect existing translation" class="pat-plone-modal connectTranslationAction"\n                  tal:attributes="href string:${context/absolute_url}/connect_translation?language=${lang}"\n                  i18n:attributes="title connect_existing_translation">\n@@ -72,7 +72,7 @@\n                     class="d-none d-md-inline-block" i18n:translate="delete_translated_item">Delete translated item</span>\n               </a>\n             </tal:hastranslation>\n-            <tal:notranslation condition="not:translation">\n+            <tal:notranslation condition="python:not translation">\n               <a href="#" title="Add translation" class="pat-plone-modal addTranslationAction"\n                  tal:attributes="href string:${context/absolute_url}/@@create_translation?language=${lang}"\n                  i18n:attributes="title add_translation">\n'

