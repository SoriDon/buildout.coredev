Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-09-13T12:03:01+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.caching/commit/72fa7d92129925c4ae45e482b4573606ab94b8cb

Split default/registry.xml into various files.

The general settings remain in registry.xml.
Weak, moderate, strong, terse, and generic get their own file in the registry directory.
(Generic is not used by default, it was commented out in the original.)
This should give a better overview.

Also, this makes it easier to copy `registry/terse.xml` for an upgrade step.

Files changed:
A plone/app/caching/profiles/default/registry/generic.xml
A plone/app/caching/profiles/default/registry/moderate.xml
A plone/app/caching/profiles/default/registry/strong.xml
A plone/app/caching/profiles/default/registry/terse.xml
A plone/app/caching/profiles/default/registry/weak.xml
M plone/app/caching/operations/configure.zcml
M plone/app/caching/profiles/default/registry.xml

b'diff --git a/plone/app/caching/operations/configure.zcml b/plone/app/caching/operations/configure.zcml\nindex 416c0d4..a142fe3 100644\n--- a/plone/app/caching/operations/configure.zcml\n+++ b/plone/app/caching/operations/configure.zcml\n@@ -24,7 +24,7 @@\n     <adapter   factory=".default.NoCaching"             name="plone.app.caching.noCaching" />\n     <utility component=".default.NoCaching"             name="plone.app.caching.noCaching" />\n \n-    <!-- Uncomment to show the "Generic caching" in the UI (also see profiles/default/registry.xml)\n+    <!-- Uncomment to show the "Generic caching" in the UI (also see profiles/default/registry/generic.xml)\n     <adapter   factory=".default.BaseCaching"           name="plone.app.caching.baseCaching" />\n     <utility component=".default.BaseCaching"           name="plone.app.caching.baseCaching" />\n     -->\ndiff --git a/plone/app/caching/profiles/default/registry.xml b/plone/app/caching/profiles/default/registry.xml\nindex 8488373..6dbbf1c 100644\n--- a/plone/app/caching/profiles/default/registry.xml\n+++ b/plone/app/caching/profiles/default/registry.xml\n@@ -12,10 +12,6 @@\n     <!-- Default content type/template mappings\n          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->\n \n-    <!-- <record name="plone.app.caching.interfaces.IPloneCacheSettings.contentTypeRulesetMapping">\n-        <value purge="False">\n-        </value>\n-    </record> -->\n \n     <record name="plone.app.caching.interfaces.IPloneCacheSettings.templateRulesetMapping">\n         <value purge="False">\n@@ -53,279 +49,4 @@\n         <value></value>\n     </record>\n \n-\n-    <!-- Weak caching -->\n-    <record name="plone.app.caching.weakCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-\n-    <!-- Terse caching -->\n-    <record name="plone.app.caching.terseCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser</description>\n-            <required>False</required>\n-        </field>\n-        <value>10</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>60</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-\n-    <!-- Moderate caching -->\n-    <record name="plone.app.caching.moderateCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>86400</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-    <!-- Strong caching -->\n-    <record name="plone.app.caching.strongCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>86400</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-    <!-- Uncomment if showing "Generic caching" in the UI.\n-         Also see operations/configure.zcml\n-\n-    <record name="plone.app.caching.baseCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    -->\n-\n-\n </registry>\ndiff --git a/plone/app/caching/profiles/default/registry/generic.xml b/plone/app/caching/profiles/default/registry/generic.xml\nnew file mode 100644\nindex 0000000..8c5bfd2\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/generic.xml\n@@ -0,0 +1,57 @@\n+<registry>\n+    <!-- Uncomment if showing "Generic caching" in the UI.\n+         Also see operations/configure.zcml\n+\n+    <record name="plone.app.caching.baseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    -->\n+\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/moderate.xml b/plone/app/caching/profiles/default/registry/moderate.xml\nnew file mode 100644\nindex 0000000..ed68cb0\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/moderate.xml\n@@ -0,0 +1,53 @@\n+<registry>\n+    <!-- Moderate caching -->\n+    <record name="plone.app.caching.moderateCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>86400</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/strong.xml b/plone/app/caching/profiles/default/registry/strong.xml\nnew file mode 100644\nindex 0000000..c7e4df9\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/strong.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Strong caching -->\n+    <record name="plone.app.caching.strongCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>86400</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/terse.xml b/plone/app/caching/profiles/default/registry/terse.xml\nnew file mode 100644\nindex 0000000..adae5bb\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/terse.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Terse caching -->\n+    <record name="plone.app.caching.terseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser</description>\n+            <required>False</required>\n+        </field>\n+        <value>10</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>60</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/weak.xml b/plone/app/caching/profiles/default/registry/weak.xml\nnew file mode 100644\nindex 0000000..674f819\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/weak.xml\n@@ -0,0 +1,45 @@\n+<registry>\n+    <!-- Weak caching -->\n+    <record name="plone.app.caching.weakCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-09-13T12:03:01+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.caching/commit/dd8e1f7c081df9c5c8dffced89f6e3a533b058ed

Moved GS parts of configure.zcml to genericsetup.zcml.

Files changed:
A plone/app/caching/profiles.zcml
M plone/app/caching/configure.zcml

b'diff --git a/plone/app/caching/configure.zcml b/plone/app/caching/configure.zcml\nindex 561a7af..9f9b1fc 100644\n--- a/plone/app/caching/configure.zcml\n+++ b/plone/app/caching/configure.zcml\n@@ -1,7 +1,6 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n     i18n_domain="plone">\n \n     <include package="z3c.zcmlhook" file="meta.zcml" />\n@@ -14,21 +13,7 @@\n \n     <include package=".browser" />\n     <include package=".operations" />\n-\n-    <genericsetup:registerProfile\n-        name="default"\n-        title="HTTP caching support"\n-        directory="profiles/default"\n-        description="Installs plone.app.caching"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n-\n-    <genericsetup:importStep\n-        name="plone.app.caching"\n-        title="Plone caching - additional installation steps"\n-        description="Imperative configuration for plone.app.caching"\n-        handler=".setuphandlers.importVarious"\n-        />\n+    <include file="profiles.zcml" />\n \n     <zcml:customAction\n         handler=".setuphandlers.enableExplicitMode"\ndiff --git a/plone/app/caching/profiles.zcml b/plone/app/caching/profiles.zcml\nnew file mode 100644\nindex 0000000..8bfff04\n--- /dev/null\n+++ b/plone/app/caching/profiles.zcml\n@@ -0,0 +1,21 @@\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone">\n+\n+    <genericsetup:registerProfile\n+        name="default"\n+        title="HTTP caching support"\n+        directory="profiles/default"\n+        description="Installs plone.app.caching"\n+        provides="Products.GenericSetup.interfaces.EXTENSION"\n+        />\n+\n+    <genericsetup:importStep\n+        name="plone.app.caching"\n+        title="Plone caching - additional installation steps"\n+        description="Imperative configuration for plone.app.caching"\n+        handler=".setuphandlers.importVarious"\n+        />\n+\n+</configure>\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-09-13T12:11:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.caching/commit/2e1b7d0ddde85794ed8f10d641959793a1176658

Add upgrade step to define the new base terse cache setting.

Fixes https://github.com/plone/plone.app.caching/issues/82

Note: to let this be automatically applied when running @@plone-upgrade, we should add it to the AddOn list in CMFPlone/MigrationTool.py.
I will do that part next, but this can be done separately.

Files changed:
A news/82.bugfix
A plone/app/caching/profiles/v2/registry/terse.xml
M plone/app/caching/profiles.zcml
M plone/app/caching/profiles/default/metadata.xml

b'diff --git a/news/82.bugfix b/news/82.bugfix\nnew file mode 100644\nindex 0000000..cb3db02\n--- /dev/null\n+++ b/news/82.bugfix\n@@ -0,0 +1,2 @@\n+Add upgrade step to define the new base terse cache setting.\n+[maurits]\ndiff --git a/plone/app/caching/profiles.zcml b/plone/app/caching/profiles.zcml\nindex 8bfff04..960191c 100644\n--- a/plone/app/caching/profiles.zcml\n+++ b/plone/app/caching/profiles.zcml\n@@ -11,6 +11,14 @@\n         provides="Products.GenericSetup.interfaces.EXTENSION"\n         />\n \n+    <genericsetup:registerProfile\n+        name="v2"\n+        title="Upgrade plone.app.caching to v2 with terse caching"\n+        directory="profiles/default"\n+        for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+        provides="Products.GenericSetup.interfaces.EXTENSION"\n+        />\n+\n     <genericsetup:importStep\n         name="plone.app.caching"\n         title="Plone caching - additional installation steps"\n@@ -18,4 +26,14 @@\n         handler=".setuphandlers.importVarious"\n         />\n \n+    <genericsetup:upgradeSteps\n+        source="1"\n+        destination="2"\n+        profile="plone.app.caching:default">\n+        <genericsetup:upgradeDepends\n+            title="Upgrade plone.app.caching to v2 with terse caching"\n+            import_profile="plone.app.caching:v2"\n+            />\n+    </genericsetup:upgradeSteps>\n+\n </configure>\ndiff --git a/plone/app/caching/profiles/default/metadata.xml b/plone/app/caching/profiles/default/metadata.xml\nindex dc95597..5f38361 100644\n--- a/plone/app/caching/profiles/default/metadata.xml\n+++ b/plone/app/caching/profiles/default/metadata.xml\n@@ -1,5 +1,5 @@\n <metadata>\n-    <version>1</version>\n+    <version>2</version>\n     <dependencies>\n         <dependency>profile-plone.app.registry:default</dependency>\n     </dependencies>\ndiff --git a/plone/app/caching/profiles/v2/registry/terse.xml b/plone/app/caching/profiles/v2/registry/terse.xml\nnew file mode 100644\nindex 0000000..adae5bb\n--- /dev/null\n+++ b/plone/app/caching/profiles/v2/registry/terse.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Terse caching -->\n+    <record name="plone.app.caching.terseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser</description>\n+            <required>False</required>\n+        </field>\n+        <value>10</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>60</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\n'

Repository: plone.app.caching


Branch: refs/heads/master
Date: 2021-09-13T15:32:54+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.caching/commit/cd8135673be5ba1c958af7520463607cef8f0524

Merge pull request #83 from plone/maurits/upgrade-step-terse-caching

Add upgrade step for terse caching

Files changed:
A news/82.bugfix
A plone/app/caching/profiles.zcml
A plone/app/caching/profiles/default/registry/generic.xml
A plone/app/caching/profiles/default/registry/moderate.xml
A plone/app/caching/profiles/default/registry/strong.xml
A plone/app/caching/profiles/default/registry/terse.xml
A plone/app/caching/profiles/default/registry/weak.xml
A plone/app/caching/profiles/v2/registry/terse.xml
M plone/app/caching/configure.zcml
M plone/app/caching/operations/configure.zcml
M plone/app/caching/profiles/default/metadata.xml
M plone/app/caching/profiles/default/registry.xml

b'diff --git a/news/82.bugfix b/news/82.bugfix\nnew file mode 100644\nindex 0000000..cb3db02\n--- /dev/null\n+++ b/news/82.bugfix\n@@ -0,0 +1,2 @@\n+Add upgrade step to define the new base terse cache setting.\n+[maurits]\ndiff --git a/plone/app/caching/configure.zcml b/plone/app/caching/configure.zcml\nindex 561a7af..9f9b1fc 100644\n--- a/plone/app/caching/configure.zcml\n+++ b/plone/app/caching/configure.zcml\n@@ -1,7 +1,6 @@\n <configure\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:zcml="http://namespaces.zope.org/zcml"\n-    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n     i18n_domain="plone">\n \n     <include package="z3c.zcmlhook" file="meta.zcml" />\n@@ -14,21 +13,7 @@\n \n     <include package=".browser" />\n     <include package=".operations" />\n-\n-    <genericsetup:registerProfile\n-        name="default"\n-        title="HTTP caching support"\n-        directory="profiles/default"\n-        description="Installs plone.app.caching"\n-        provides="Products.GenericSetup.interfaces.EXTENSION"\n-        />\n-\n-    <genericsetup:importStep\n-        name="plone.app.caching"\n-        title="Plone caching - additional installation steps"\n-        description="Imperative configuration for plone.app.caching"\n-        handler=".setuphandlers.importVarious"\n-        />\n+    <include file="profiles.zcml" />\n \n     <zcml:customAction\n         handler=".setuphandlers.enableExplicitMode"\ndiff --git a/plone/app/caching/operations/configure.zcml b/plone/app/caching/operations/configure.zcml\nindex 416c0d4..a142fe3 100644\n--- a/plone/app/caching/operations/configure.zcml\n+++ b/plone/app/caching/operations/configure.zcml\n@@ -24,7 +24,7 @@\n     <adapter   factory=".default.NoCaching"             name="plone.app.caching.noCaching" />\n     <utility component=".default.NoCaching"             name="plone.app.caching.noCaching" />\n \n-    <!-- Uncomment to show the "Generic caching" in the UI (also see profiles/default/registry.xml)\n+    <!-- Uncomment to show the "Generic caching" in the UI (also see profiles/default/registry/generic.xml)\n     <adapter   factory=".default.BaseCaching"           name="plone.app.caching.baseCaching" />\n     <utility component=".default.BaseCaching"           name="plone.app.caching.baseCaching" />\n     -->\ndiff --git a/plone/app/caching/profiles.zcml b/plone/app/caching/profiles.zcml\nnew file mode 100644\nindex 0000000..960191c\n--- /dev/null\n+++ b/plone/app/caching/profiles.zcml\n@@ -0,0 +1,39 @@\n+<configure\n+    xmlns="http://namespaces.zope.org/zope"\n+    xmlns:genericsetup="http://namespaces.zope.org/genericsetup"\n+    i18n_domain="plone">\n+\n+    <genericsetup:registerProfile\n+        name="default"\n+        title="HTTP caching support"\n+        directory="profiles/default"\n+        description="Installs plone.app.caching"\n+        provides="Products.GenericSetup.interfaces.EXTENSION"\n+        />\n+\n+    <genericsetup:registerProfile\n+        name="v2"\n+        title="Upgrade plone.app.caching to v2 with terse caching"\n+        directory="profiles/default"\n+        for="Products.CMFPlone.interfaces.IMigratingPloneSiteRoot"\n+        provides="Products.GenericSetup.interfaces.EXTENSION"\n+        />\n+\n+    <genericsetup:importStep\n+        name="plone.app.caching"\n+        title="Plone caching - additional installation steps"\n+        description="Imperative configuration for plone.app.caching"\n+        handler=".setuphandlers.importVarious"\n+        />\n+\n+    <genericsetup:upgradeSteps\n+        source="1"\n+        destination="2"\n+        profile="plone.app.caching:default">\n+        <genericsetup:upgradeDepends\n+            title="Upgrade plone.app.caching to v2 with terse caching"\n+            import_profile="plone.app.caching:v2"\n+            />\n+    </genericsetup:upgradeSteps>\n+\n+</configure>\ndiff --git a/plone/app/caching/profiles/default/metadata.xml b/plone/app/caching/profiles/default/metadata.xml\nindex dc95597..5f38361 100644\n--- a/plone/app/caching/profiles/default/metadata.xml\n+++ b/plone/app/caching/profiles/default/metadata.xml\n@@ -1,5 +1,5 @@\n <metadata>\n-    <version>1</version>\n+    <version>2</version>\n     <dependencies>\n         <dependency>profile-plone.app.registry:default</dependency>\n     </dependencies>\ndiff --git a/plone/app/caching/profiles/default/registry.xml b/plone/app/caching/profiles/default/registry.xml\nindex 8488373..6dbbf1c 100644\n--- a/plone/app/caching/profiles/default/registry.xml\n+++ b/plone/app/caching/profiles/default/registry.xml\n@@ -12,10 +12,6 @@\n     <!-- Default content type/template mappings\n          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->\n \n-    <!-- <record name="plone.app.caching.interfaces.IPloneCacheSettings.contentTypeRulesetMapping">\n-        <value purge="False">\n-        </value>\n-    </record> -->\n \n     <record name="plone.app.caching.interfaces.IPloneCacheSettings.templateRulesetMapping">\n         <value purge="False">\n@@ -53,279 +49,4 @@\n         <value></value>\n     </record>\n \n-\n-    <!-- Weak caching -->\n-    <record name="plone.app.caching.weakCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.weakCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-\n-    <!-- Terse caching -->\n-    <record name="plone.app.caching.terseCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser</description>\n-            <required>False</required>\n-        </field>\n-        <value>10</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>60</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.terseCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-\n-    <!-- Moderate caching -->\n-    <record name="plone.app.caching.moderateCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>86400</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.moderateCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-    <!-- Strong caching -->\n-    <record name="plone.app.caching.strongCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value>86400</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.strongCaching.anonOnly">\n-        <field type="plone.registry.field.Bool">\n-            <title>Only cache for anonymous users</title>\n-            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-\n-    <!-- Uncomment if showing "Generic caching" in the UI.\n-         Also see operations/configure.zcml\n-\n-    <record name="plone.app.caching.baseCaching.maxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Maximum age</title>\n-            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.smaxage">\n-        <field type="plone.registry.field.Int">\n-            <title>Shared maximum age</title>\n-            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.etags">\n-        <field type="plone.registry.field.Tuple">\n-            <title>ETags</title>\n-            <description>A list of ETag component names to include</description>\n-            <value_type type="plone.registry.field.ASCIILine" />\n-            <required>False</required>\n-        </field>\n-        <value>\n-        </value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.lastModified">\n-        <field type="plone.registry.field.Bool">\n-            <title>Last-modified validation</title>\n-            <description>Turn on Last-Modified headers</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.ramCache">\n-        <field type="plone.registry.field.Bool">\n-            <title>RAM cache</title>\n-            <description>Turn on caching in Zope memory</description>\n-            <required>False</required>\n-        </field>\n-        <value>False</value>\n-    </record>\n-    <record name="plone.app.caching.baseCaching.vary">\n-        <field type="plone.registry.field.ASCIILine">\n-            <title>Vary</title>\n-            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n-            <required>False</required>\n-        </field>\n-        <value></value>\n-    </record>\n-    -->\n-\n-\n </registry>\ndiff --git a/plone/app/caching/profiles/default/registry/generic.xml b/plone/app/caching/profiles/default/registry/generic.xml\nnew file mode 100644\nindex 0000000..8c5bfd2\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/generic.xml\n@@ -0,0 +1,57 @@\n+<registry>\n+    <!-- Uncomment if showing "Generic caching" in the UI.\n+         Also see operations/configure.zcml\n+\n+    <record name="plone.app.caching.baseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.baseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    -->\n+\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/moderate.xml b/plone/app/caching/profiles/default/registry/moderate.xml\nnew file mode 100644\nindex 0000000..ed68cb0\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/moderate.xml\n@@ -0,0 +1,53 @@\n+<registry>\n+    <!-- Moderate caching -->\n+    <record name="plone.app.caching.moderateCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>86400</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.moderateCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/strong.xml b/plone/app/caching/profiles/default/registry/strong.xml\nnew file mode 100644\nindex 0000000..c7e4df9\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/strong.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Strong caching -->\n+    <record name="plone.app.caching.strongCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser or caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>86400</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy. Leave blank to use value from "Maximum age" field.</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.strongCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/terse.xml b/plone/app/caching/profiles/default/registry/terse.xml\nnew file mode 100644\nindex 0000000..adae5bb\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/terse.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Terse caching -->\n+    <record name="plone.app.caching.terseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser</description>\n+            <required>False</required>\n+        </field>\n+        <value>10</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>60</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/default/registry/weak.xml b/plone/app/caching/profiles/default/registry/weak.xml\nnew file mode 100644\nindex 0000000..674f819\n--- /dev/null\n+++ b/plone/app/caching/profiles/default/registry/weak.xml\n@@ -0,0 +1,45 @@\n+<registry>\n+    <!-- Weak caching -->\n+    <record name="plone.app.caching.weakCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.weakCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\ndiff --git a/plone/app/caching/profiles/v2/registry/terse.xml b/plone/app/caching/profiles/v2/registry/terse.xml\nnew file mode 100644\nindex 0000000..adae5bb\n--- /dev/null\n+++ b/plone/app/caching/profiles/v2/registry/terse.xml\n@@ -0,0 +1,61 @@\n+<registry>\n+    <!-- Terse caching -->\n+    <record name="plone.app.caching.terseCaching.maxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Maximum age</title>\n+            <description>Time (in seconds) to cache the response in the browser</description>\n+            <required>False</required>\n+        </field>\n+        <value>10</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.smaxage">\n+        <field type="plone.registry.field.Int">\n+            <title>Shared maximum age</title>\n+            <description>Time (in seconds) to cache the response in the caching proxy</description>\n+            <required>False</required>\n+        </field>\n+        <value>60</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.etags">\n+        <field type="plone.registry.field.Tuple">\n+            <title>ETags</title>\n+            <description>A list of ETag component names to include</description>\n+            <value_type type="plone.registry.field.ASCIILine" />\n+            <required>False</required>\n+        </field>\n+        <value>\n+        </value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.lastModified">\n+        <field type="plone.registry.field.Bool">\n+            <title>Last-modified validation</title>\n+            <description>Turn on Last-Modified headers</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.ramCache">\n+        <field type="plone.registry.field.Bool">\n+            <title>RAM cache</title>\n+            <description>Turn on caching in Zope memory</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.vary">\n+        <field type="plone.registry.field.ASCIILine">\n+            <title>Vary</title>\n+            <description>Name(s) of HTTP headers that must match for the caching proxy to return a cached response</description>\n+            <required>False</required>\n+        </field>\n+        <value></value>\n+    </record>\n+    <record name="plone.app.caching.terseCaching.anonOnly">\n+        <field type="plone.registry.field.Bool">\n+            <title>Only cache for anonymous users</title>\n+            <description>Ensure logging users always get a fresh page. Note that if you are caching pages in a proxy cache, you\'ll still need to use a Vary response header to keep anonymous and authenticated content separate.</description>\n+            <required>False</required>\n+        </field>\n+        <value>False</value>\n+    </record>\n+</registry>\n'

