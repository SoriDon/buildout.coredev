Repository: plone.app.theming


Branch: refs/heads/master
Date: 2022-04-15T18:14:34-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plone.app.theming/commit/5685136c69b0e2b56b6c0a07a90c5a883d4d79d2

Do not apply the theme transform over every request. Closes gh-207

Files changed:
A news/207.misc
M src/plone/app/theming/transform.py

b'diff --git a/news/207.misc b/news/207.misc\nnew file mode 100644\nindex 0000000..7ad97f6\n--- /dev/null\n+++ b/news/207.misc\n@@ -0,0 +1,2 @@\n+Do not apply the theme transform over every request\n+[frapell]\ndiff --git a/src/plone/app/theming/transform.py b/src/plone/app/theming/transform.py\nindex 9a09dd4..13b5b1b 100644\n--- a/src/plone/app/theming/transform.py\n+++ b/src/plone/app/theming/transform.py\n@@ -14,6 +14,7 @@\n from zope.component import adapter\n from zope.interface import implementer\n from zope.interface import Interface\n+from zope.location.interfaces import ILocation\n \n import logging\n \n@@ -25,7 +26,7 @@\n \n \n @implementer(ITransform)\n-@adapter(Interface, IThemingLayer)\n+@adapter(ILocation, IThemingLayer)\n class ThemeTransform(object):\n     """Late stage in the 8000\'s transform chain. When plone.app.blocks is\n     used, we can benefit from lxml parsing having taken place already.\n'

