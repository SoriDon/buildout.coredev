Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-03-12T18:02:32+01:00
Author: Victor Fernandez de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/e55ada9bebf4ad5236df1b8c1d627411dee2b56e

Fix a problem on ZCML loading depending on how the policy package is named, related to the load of permissions in control panels and multilingual.

Files changed:
A news/526.bugfix
M src/plone/restapi/services/controlpanels/configure.zcml
M src/plone/restapi/services/multilingual/configure.zcml

b'diff --git a/news/526.bugfix b/news/526.bugfix\nnew file mode 100644\nindex 00000000..16e10773\n--- /dev/null\n+++ b/news/526.bugfix\n@@ -0,0 +1,3 @@\n+- Fix a problem on ZCML loading depending on how the policy package is named,\n+  related to the load of permissions in control panels and multilingual.\n+  [sneridagh]\ndiff --git a/src/plone/restapi/services/controlpanels/configure.zcml b/src/plone/restapi/services/controlpanels/configure.zcml\nindex cef57d10..de3fda6c 100644\n--- a/src/plone/restapi/services/controlpanels/configure.zcml\n+++ b/src/plone/restapi/services/controlpanels/configure.zcml\n@@ -2,6 +2,8 @@\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:plone="http://namespaces.plone.org/plone">\n \n+  <include package="plone.app.controlpanel" file="permissions.zcml" />\n+\n   <plone:service\n     method="GET"\n     for="Products.CMFPlone.interfaces.IPloneSiteRoot"\ndiff --git a/src/plone/restapi/services/multilingual/configure.zcml b/src/plone/restapi/services/multilingual/configure.zcml\nindex 2c6dae1b..11fb18e1 100644\n--- a/src/plone/restapi/services/multilingual/configure.zcml\n+++ b/src/plone/restapi/services/multilingual/configure.zcml\n@@ -3,6 +3,8 @@\n     xmlns:plone="http://namespaces.plone.org/plone"\n     xmlns:zcml="http://namespaces.zope.org/zcml">\n \n+    <include package="plone.app.multilingual" file="permissions.zcml"/>\n+\n     <adapter factory=".pam.Translations" name="translations"/>\n \n     <plone:service\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-03-12T18:30:07+01:00
Author: Victor Fernandez de Alba (sneridagh) <sneridagh@gmail.com>
Commit: https://github.com/plone/plone.restapi/commit/55bfaf38c62a041c18ca94b60a703c5eacecbbee

Try to fix Plone 5.2 build

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex ac900d51..70a3338b 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -70,6 +70,7 @@\n           \'plone.schema >= 1.2.0\',  # new json field\n           \'PyJWT\',\n           \'pytz\',\n+          \'plone.app.controlpanel\'  # to remove in Plone 6.\n       ],\n       extras_require={\'test\': TEST_REQUIRES},\n       entry_points="""\n'

Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-03-13T05:37:49+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/ba42b732029f2c144cc2fa7d382ce17057bff641

Merge pull request #694 from plone/fixzcmlloadorderproblem

Fix a problem on ZCML loading depending on how the policy package is â€¦

Files changed:
A news/526.bugfix
M setup.py
M src/plone/restapi/services/controlpanels/configure.zcml
M src/plone/restapi/services/multilingual/configure.zcml

b'diff --git a/news/526.bugfix b/news/526.bugfix\nnew file mode 100644\nindex 00000000..16e10773\n--- /dev/null\n+++ b/news/526.bugfix\n@@ -0,0 +1,3 @@\n+- Fix a problem on ZCML loading depending on how the policy package is named,\n+  related to the load of permissions in control panels and multilingual.\n+  [sneridagh]\ndiff --git a/setup.py b/setup.py\nindex ac900d51..70a3338b 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -70,6 +70,7 @@\n           \'plone.schema >= 1.2.0\',  # new json field\n           \'PyJWT\',\n           \'pytz\',\n+          \'plone.app.controlpanel\'  # to remove in Plone 6.\n       ],\n       extras_require={\'test\': TEST_REQUIRES},\n       entry_points="""\ndiff --git a/src/plone/restapi/services/controlpanels/configure.zcml b/src/plone/restapi/services/controlpanels/configure.zcml\nindex cef57d10..de3fda6c 100644\n--- a/src/plone/restapi/services/controlpanels/configure.zcml\n+++ b/src/plone/restapi/services/controlpanels/configure.zcml\n@@ -2,6 +2,8 @@\n     xmlns="http://namespaces.zope.org/zope"\n     xmlns:plone="http://namespaces.plone.org/plone">\n \n+  <include package="plone.app.controlpanel" file="permissions.zcml" />\n+\n   <plone:service\n     method="GET"\n     for="Products.CMFPlone.interfaces.IPloneSiteRoot"\ndiff --git a/src/plone/restapi/services/multilingual/configure.zcml b/src/plone/restapi/services/multilingual/configure.zcml\nindex 2c6dae1b..11fb18e1 100644\n--- a/src/plone/restapi/services/multilingual/configure.zcml\n+++ b/src/plone/restapi/services/multilingual/configure.zcml\n@@ -3,6 +3,8 @@\n     xmlns:plone="http://namespaces.plone.org/plone"\n     xmlns:zcml="http://namespaces.zope.org/zcml">\n \n+    <include package="plone.app.multilingual" file="permissions.zcml"/>\n+\n     <adapter factory=".pam.Translations" name="translations"/>\n \n     <plone:service\n'

