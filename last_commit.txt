Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-04T08:25:08+01:00
Author: Timo Stollenwerk (tisto) <stollenwerk@kitconcept.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/0b195788c9750d0e0a397e04a5b5f652ee928a69

PLIP #3279: Implement modern image scales

Files changed:
A news/3279.feature
M Products/CMFPlone/interfaces/controlpanel.py

b"diff --git a/Products/CMFPlone/interfaces/controlpanel.py b/Products/CMFPlone/interfaces/controlpanel.py\nindex d79e8d13f7..0fee5cc0a1 100644\n--- a/Products/CMFPlone/interfaces/controlpanel.py\n+++ b/Products/CMFPlone/interfaces/controlpanel.py\n@@ -1490,9 +1490,13 @@ class IImagingSchema(Interface):\n         ),\n         value_type=schema.TextLine(),\n         default=[\n-            'large 768:768',\n-            'preview 400:400',\n-            'mini 200:200',\n+            'huge 1600:65536',\n+            'great 1200:65536',\n+            'larger 1000:65536',\n+            'large 800:65536',\n+            'teaser 600:65536',\n+            'preview 400:65536',\n+            'mini 200:65536',\n             'thumb 128:128',\n             'tile 64:64',\n             'icon 32:32',\ndiff --git a/news/3279.feature b/news/3279.feature\nnew file mode 100644\nindex 0000000000..83482e9526\n--- /dev/null\n+++ b/news/3279.feature\n@@ -0,0 +1,2 @@\n+PLIP #3279: Implement modern images scales. Add huge (1600px), great (1200px), larger (1000px), teaser (600px). Amend preview and mini (remove height constraint).\n+[tisto]\n\\ No newline at end of file\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-04T17:36:01+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/1b4a2a9c7eabaf85594a6f8632ffc5560b0fd1cc

Merge branch 'master' into plip-3279-modern-image-scales

Files changed:
A news/3031.bugfix
M Products/CMFPlone/profiles/default/controlpanel.xml
M Products/CMFPlone/tests/testControlPanel.py

b'diff --git a/Products/CMFPlone/profiles/default/controlpanel.xml b/Products/CMFPlone/profiles/default/controlpanel.xml\nindex 1cf104e4b7..2ab92c9020 100644\n--- a/Products/CMFPlone/profiles/default/controlpanel.xml\n+++ b/Products/CMFPlone/profiles/default/controlpanel.xml\n@@ -50,20 +50,6 @@\n     i18n:attributes="title">\n   <permission>Plone Site Setup: Users and Groups</permission>\n  </configlet>\n- <configlet title="Personal Preferences" action_id="MemberPrefs" appId="Plone"\n-    category="Member" condition_expr=""\n-    icon_expr="string:person"\n-    url_expr="string:${portal_url}/@@personal-preferences" visible="True"\n-    i18n:attributes="title">\n-  <permission>Set own properties</permission>\n- </configlet>\n- <configlet title="Change Password" action_id="MemberPassword" appId="Plone"\n-    category="Member" condition_expr="python:member.canPasswordSet()"\n-    icon_expr="string:lock"\n-    url_expr="string:${portal_url}/password_form" visible="True"\n-    i18n:attributes="title">\n-  <permission>Set own password</permission>\n- </configlet>\n  <configlet title="Mail" action_id="MailHost" appId="MailHost"\n     category="plone-general" condition_expr=""\n     icon_expr="string:envelope-open"\ndiff --git a/Products/CMFPlone/tests/testControlPanel.py b/Products/CMFPlone/tests/testControlPanel.py\nindex 159e1ee627..0ce80c7acf 100644\n--- a/Products/CMFPlone/tests/testControlPanel.py\n+++ b/Products/CMFPlone/tests/testControlPanel.py\n@@ -13,8 +13,8 @@ def setUp(self):\n         # get the expected default groups and configlets\n         self.groups = [\'Plone\', \'Products\']\n         self.configlets = [\'QuickInstaller\', \'MailHost\',\n-                           \'UsersGroups\', \'MemberPrefs\', \'PortalSkin\',\n-                           \'MemberPassword\', \'ZMI\', \'SecuritySettings\',\n+                           \'UsersGroups\', \'PortalSkin\',\n+                           \'ZMI\', \'SecuritySettings\',\n                            \'NavigationSettings\', \'SearchSettings\',\n                            \'errorLog\', \'PloneReconfig\', \'TypesSettings\',\n                            \'FilterSettings\',\ndiff --git a/news/3031.bugfix b/news/3031.bugfix\nnew file mode 100644\nindex 0000000000..a856dc7521\n--- /dev/null\n+++ b/news/3031.bugfix\n@@ -0,0 +1,5 @@\n+Remove Configlets, Change Member Password and Member Prefs not needed in Overview Controlpanel\n+both Views available via User Control Panel\n+\n+the deleton of "Change Member Password" Configlet remove also the issue #3031\n+[1letter]\n\\ No newline at end of file\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-05T02:35:19+01:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/fd0510ee54fd471c56b1e665e33e4bf118431e12

Merge branch 'master' into plip-3279-modern-image-scales

Files changed:
A news/3447.bugfix
M Products/CMFPlone/browser/login/password_reset.py

b"diff --git a/Products/CMFPlone/browser/login/password_reset.py b/Products/CMFPlone/browser/login/password_reset.py\nindex 7594dc5461..98ebe496cd 100644\n--- a/Products/CMFPlone/browser/login/password_reset.py\n+++ b/Products/CMFPlone/browser/login/password_reset.py\n@@ -1,4 +1,5 @@\n from AccessControl.SecurityManagement import getSecurityManager\n+from DateTime import DateTime\n from email.header import Header\n from plone.app.layout.navigation.interfaces import INavigationRoot\n from plone.memoize import view\n@@ -108,8 +109,9 @@ def _auto_login(self, userid, password):\n             # with the given userid\n             user = getSecurityManager().getUser()\n \n-        login_time = user.getProperty('login_time', None)\n-        if login_time is None:\n+        default = DateTime('2000/01/01')\n+        login_time = user.getProperty('login_time', default)\n+        if login_time == default:\n             notify(UserInitialLoginInEvent(user))\n         else:\n             notify(UserLoggedInEvent(user))\ndiff --git a/news/3447.bugfix b/news/3447.bugfix\nnew file mode 100644\nindex 0000000000..ab80f61905\n--- /dev/null\n+++ b/news/3447.bugfix\n@@ -0,0 +1 @@\n+Fix detection of initial login time [MrTango]\n\\ No newline at end of file\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-03-11T09:17:03+01:00
Author: Alessandro Pisa (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/9eee3a753bfe7452c6b4b7f50b974bea4d22f8b4

Merge pull request #3450 from plone/plip-3279-modern-image-scales

PLIP #3279: Implement modern image scales

Files changed:
A news/3279.feature
M Products/CMFPlone/interfaces/controlpanel.py

b"diff --git a/Products/CMFPlone/interfaces/controlpanel.py b/Products/CMFPlone/interfaces/controlpanel.py\nindex d79e8d13f7..0fee5cc0a1 100644\n--- a/Products/CMFPlone/interfaces/controlpanel.py\n+++ b/Products/CMFPlone/interfaces/controlpanel.py\n@@ -1490,9 +1490,13 @@ class IImagingSchema(Interface):\n         ),\n         value_type=schema.TextLine(),\n         default=[\n-            'large 768:768',\n-            'preview 400:400',\n-            'mini 200:200',\n+            'huge 1600:65536',\n+            'great 1200:65536',\n+            'larger 1000:65536',\n+            'large 800:65536',\n+            'teaser 600:65536',\n+            'preview 400:65536',\n+            'mini 200:65536',\n             'thumb 128:128',\n             'tile 64:64',\n             'icon 32:32',\ndiff --git a/news/3279.feature b/news/3279.feature\nnew file mode 100644\nindex 0000000000..83482e9526\n--- /dev/null\n+++ b/news/3279.feature\n@@ -0,0 +1,2 @@\n+PLIP #3279: Implement modern images scales. Add huge (1600px), great (1200px), larger (1000px), teaser (600px). Amend preview and mini (remove height constraint).\n+[tisto]\n\\ No newline at end of file\n"

