Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2023-03-31T01:15:36+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.portlet.collection/commit/342d747a9b0269835fa391ccbeff397701051cef

Configuring with plone/meta, especially updating .meta.toml.

Files changed:
A news/c79ab88f.internal
M .meta.toml
M .pre-commit-config.yaml
M setup.cfg
M tox.ini

b'diff --git a/.meta.toml b/.meta.toml\nindex 0df002c..e5ff8a0 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -2,4 +2,14 @@\n # https://github.com/plone/meta/tree/master/config/default\n [meta]\n template = "default"\n-commit-id = "a533099d"\n+commit-id = "c79ab88f"\n+\n+[check-manifest]\n+additional-ignores = [\n+    "*.cfg",\n+    ]\n+\n+[dependencies]\n+mappings = [\n+    "ExtensionClass = [\'ComputedAttribute\']",\n+    ]\ndiff --git a/.pre-commit-config.yaml b/.pre-commit-config.yaml\nindex 582f8ac..449e951 100644\n--- a/.pre-commit-config.yaml\n+++ b/.pre-commit-config.yaml\n@@ -19,7 +19,7 @@ repos:\n     hooks:\n     -   id: black\n -   repo: https://github.com/collective/zpretty\n-    rev: 3.0.2\n+    rev: 3.0.3\n     hooks:\n     -   id: zpretty\n -   repo: https://github.com/PyCQA/flake8\ndiff --git a/news/c79ab88f.internal b/news/c79ab88f.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/c79ab88f.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/setup.cfg b/setup.cfg\nindex bf4da34..a9fb345 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -22,4 +22,3 @@ ignore =\n     .pre-commit-config.yaml\n     tox.ini\n     *.cfg\n-    .coveragerc\ndiff --git a/tox.ini b/tox.ini\nindex 4eff2bc..21286ef 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,8 @@\n # Generated from:\n # https://github.com/plone/meta/tree/master/config/default\n [tox]\n+# We need 4.4.0 for constrain_package_deps.\n+min_version = 4.4.0\n envlist =\n     format\n     lint\n@@ -37,14 +39,15 @@ deps =\n     graphviz  # optional dependency of pipdeptree\n commands =\n     dependencychecker\n-    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+    sh -c \'pipdeptree --exclude setuptools,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n \n [testenv:test]\n usedevelop = true\n+constrain_package_deps = true\n deps =\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.portlet.collection\n+    zope-testrunner --all --test-path={toxinidir} -s plone.portlet.collection {posargs}\n extras =\n     test\n'

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2023-03-31T01:17:02+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.portlet.collection/commit/f18e2b6fc6c48c4d9885c495a93dff8b1ec8fb3f

Remove BBB import of z2

Files changed:
M plone/portlet/collection/tests/functional.txt

b"diff --git a/plone/portlet/collection/tests/functional.txt b/plone/portlet/collection/tests/functional.txt\nindex c600e59..e777164 100644\n--- a/plone/portlet/collection/tests/functional.txt\n+++ b/plone/portlet/collection/tests/functional.txt\n@@ -14,10 +14,7 @@ Set up testbrowser::\n     >>> from plone.app.testing import login\n     >>> login(layer['portal'], 'admin')\n     >>> app = layer['app']\n-    >>> try:\n-    ...     from plone.testing.zope import Browser\n-    ... except ImportError:\n-    ...     from plone.testing.z2 import Browser\n+    >>> from plone.testing.zope import Browser\n     >>> browser = Browser(app)\n     >>> browser.handleErrors = False\n     >>> browser.addHeader('Authorization', 'Basic admin:secret')\n"

Repository: plone.portlet.collection


Branch: refs/heads/master
Date: 2023-04-07T02:33:38+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.portlet.collection/commit/3a3ec1b36f8ec684d0b9a658ac105f48dcc0fe05

Merge pull request #38 from plone/config-with-default-template-79037e7f

Config with default template 79037e7f: update .meta.toml mostly

Files changed:
A news/c79ab88f.internal
M .meta.toml
M plone/portlet/collection/tests/functional.txt
M setup.cfg
M tox.ini

b'diff --git a/.meta.toml b/.meta.toml\nindex 0df002c..e5ff8a0 100644\n--- a/.meta.toml\n+++ b/.meta.toml\n@@ -2,4 +2,14 @@\n # https://github.com/plone/meta/tree/master/config/default\n [meta]\n template = "default"\n-commit-id = "a533099d"\n+commit-id = "c79ab88f"\n+\n+[check-manifest]\n+additional-ignores = [\n+    "*.cfg",\n+    ]\n+\n+[dependencies]\n+mappings = [\n+    "ExtensionClass = [\'ComputedAttribute\']",\n+    ]\ndiff --git a/news/c79ab88f.internal b/news/c79ab88f.internal\nnew file mode 100644\nindex 0000000..c08f539\n--- /dev/null\n+++ b/news/c79ab88f.internal\n@@ -0,0 +1,2 @@\n+Update configuration files.\n+[plone devs]\ndiff --git a/plone/portlet/collection/tests/functional.txt b/plone/portlet/collection/tests/functional.txt\nindex c600e59..e777164 100644\n--- a/plone/portlet/collection/tests/functional.txt\n+++ b/plone/portlet/collection/tests/functional.txt\n@@ -14,10 +14,7 @@ Set up testbrowser::\n     >>> from plone.app.testing import login\n     >>> login(layer[\'portal\'], \'admin\')\n     >>> app = layer[\'app\']\n-    >>> try:\n-    ...     from plone.testing.zope import Browser\n-    ... except ImportError:\n-    ...     from plone.testing.z2 import Browser\n+    >>> from plone.testing.zope import Browser\n     >>> browser = Browser(app)\n     >>> browser.handleErrors = False\n     >>> browser.addHeader(\'Authorization\', \'Basic admin:secret\')\ndiff --git a/setup.cfg b/setup.cfg\nindex bf4da34..a9fb345 100644\n--- a/setup.cfg\n+++ b/setup.cfg\n@@ -22,4 +22,3 @@ ignore =\n     .pre-commit-config.yaml\n     tox.ini\n     *.cfg\n-    .coveragerc\ndiff --git a/tox.ini b/tox.ini\nindex 4eff2bc..21286ef 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -1,6 +1,8 @@\n # Generated from:\n # https://github.com/plone/meta/tree/master/config/default\n [tox]\n+# We need 4.4.0 for constrain_package_deps.\n+min_version = 4.4.0\n envlist =\n     format\n     lint\n@@ -37,14 +39,15 @@ deps =\n     graphviz  # optional dependency of pipdeptree\n commands =\n     dependencychecker\n-    sh -c \'pipdeptree --exclude setuptools,pipdeptree,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n+    sh -c \'pipdeptree --exclude setuptools,wheel,pipdeptree,z3c.dependencychecker,zope.interface,zope.component --graph-output svg > dependencies.svg\'\n \n [testenv:test]\n usedevelop = true\n+constrain_package_deps = true\n deps =\n     zope.testrunner\n     -c https://dist.plone.org/release/6.0-dev/constraints.txt\n commands =\n-    zope-testrunner --test-path={toxinidir} -s plone.portlet.collection\n+    zope-testrunner --all --test-path={toxinidir} -s plone.portlet.collection {posargs}\n extras =\n     test\n'

