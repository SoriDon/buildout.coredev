Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-04-12T04:57:11+10:00
Author: Tom Gross (tomgross) <itconsense@gmail.com>
Commit: https://github.com/plone/plone.app.layout/commit/09b7324065665f35818ca3a50cff4b79620b980d

Make it easier to override title seperator

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/common.py

diff --git a/CHANGES.rst b/CHANGES.rst
index dce7034..5e4d028 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Make it easier to override seperator in title viewlet
+  [tomgross]
 
 Bug fixes:
 
diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index 5cf5f76..0da1f9f 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -66,6 +66,9 @@ def index(self):
 class TitleViewlet(ViewletBase):
     index = ViewPageTemplateFile('title.pt')
 
+    # seperator of page- and portal-title
+    sep = u' &mdash; '
+
     @property
     @memoize
     def site_title_setting(self):
@@ -121,8 +124,7 @@ def update(self):
         if self.page_title == portal_title:
             self.site_title = portal_title
         else:
-            self.site_title = u"%s &mdash; %s" % (self.page_title,
-                                                  portal_title)
+            self.site_title = self.sep.join([self.page_title, portal_title])
 
 
 class DublinCoreViewlet(ViewletBase):


Repository: plone.app.layout


Branch: refs/heads/master
Date: 2018-04-11T22:02:08+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.layout/commit/6e72de8c564b31f9935611440f4c6018b5dff54d

Merge pull request #144 from plone/tomgross_title_sep

Make it easier to override title seperator

Files changed:
M CHANGES.rst
M plone/app/layout/viewlets/common.py

diff --git a/CHANGES.rst b/CHANGES.rst
index dce7034..5e4d028 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Breaking changes:
 
 New features:
 
-- *add item here*
+- Make it easier to override seperator in title viewlet
+  [tomgross]
 
 Bug fixes:
 
diff --git a/plone/app/layout/viewlets/common.py b/plone/app/layout/viewlets/common.py
index 5cf5f76..0da1f9f 100644
--- a/plone/app/layout/viewlets/common.py
+++ b/plone/app/layout/viewlets/common.py
@@ -66,6 +66,9 @@ def index(self):
 class TitleViewlet(ViewletBase):
     index = ViewPageTemplateFile('title.pt')
 
+    # seperator of page- and portal-title
+    sep = u' &mdash; '
+
     @property
     @memoize
     def site_title_setting(self):
@@ -121,8 +124,7 @@ def update(self):
         if self.page_title == portal_title:
             self.site_title = portal_title
         else:
-            self.site_title = u"%s &mdash; %s" % (self.page_title,
-                                                  portal_title)
+            self.site_title = self.sep.join([self.page_title, portal_title])
 
 
 class DublinCoreViewlet(ViewletBase):


