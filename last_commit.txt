Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2016-01-21T14:39:48+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.contentlisting/commit/8f9fbfd806e95fb3113a2cfd7a9a66804e783f39

Minor cleanup (decorator, utf8 header, ...), removed unused imports and fixed dependencies.

Files changed:
M CHANGES.rst
M plone/__init__.py
M plone/app/__init__.py
M plone/app/contentlisting/__init__.py
M plone/app/contentlisting/browser.py
M plone/app/contentlisting/catalog.py
M plone/app/contentlisting/contentlisting.py
M plone/app/contentlisting/interfaces.py
M plone/app/contentlisting/realobject.py
M plone/app/contentlisting/tests/base.py
M plone/app/contentlisting/tests/test_integration_unit.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9ad8bad..159791a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Minor cleanup (decorator, utf8 header, ...), removed unused imports and
+  fixed dependencies.
+  [jensens]
 
 
 1.2.3 (2015-11-25)
diff --git a/plone/__init__.py b/plone/__init__.py
index de40ea7..68c04af 100644
--- a/plone/__init__.py
+++ b/plone/__init__.py
@@ -1 +1,2 @@
+# -*- coding: utf-8 -*-
 __import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/app/__init__.py b/plone/app/__init__.py
index de40ea7..68c04af 100644
--- a/plone/app/__init__.py
+++ b/plone/app/__init__.py
@@ -1 +1,2 @@
+# -*- coding: utf-8 -*-
 __import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/app/contentlisting/__init__.py b/plone/app/contentlisting/__init__.py
index e69de29..40a96af 100644
--- a/plone/app/contentlisting/__init__.py
+++ b/plone/app/contentlisting/__init__.py
@@ -0,0 +1 @@
+# -*- coding: utf-8 -*-
diff --git a/plone/app/contentlisting/browser.py b/plone/app/contentlisting/browser.py
index 500a902..8fabcbf 100644
--- a/plone/app/contentlisting/browser.py
+++ b/plone/app/contentlisting/browser.py
@@ -1,8 +1,8 @@
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
 from Products.CMFCore.utils import getToolByName
 from zope.publisher.browser import BrowserView
 
-from .interfaces import IContentListing
-
 
 class FolderListing(BrowserView):
 
diff --git a/plone/app/contentlisting/catalog.py b/plone/app/contentlisting/catalog.py
index 259ed52..ac2fea7 100644
--- a/plone/app/contentlisting/catalog.py
+++ b/plone/app/contentlisting/catalog.py
@@ -1,18 +1,17 @@
 # -*- coding: utf-8 -*-
-from .contentlisting import BaseContentListingObject
-from .interfaces import IContentListingObject
 from Acquisition import aq_base
 from Acquisition import aq_get
-from Products.CMFCore.utils import getToolByName
-from plone.app.layout.icons.interfaces import IContentIcon
+from plone.app.contentlisting.contentlisting import BaseContentListingObject
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.registry.interfaces import IRegistry
 from plone.uuid.interfaces import IUUID
-from zope import interface
+from Products.CMFCore.utils import getToolByName
 from zope.component import getMultiAdapter
-from zope.component import queryMultiAdapter
 from zope.component import queryUtility
+from zope.interface import implementer
 
 
+@implementer(IContentListingObject)
 class CatalogContentListingObject(BaseContentListingObject):
     """A Catalog-results based content object representation.
 
@@ -20,8 +19,6 @@ class CatalogContentListingObject(BaseContentListingObject):
     This is the type of objects they are adapted to.
     """
 
-    interface.implements(IContentListingObject)
-
     def __init__(self, brain):
         self._brain = brain
         self._cached_realobject = None
diff --git a/plone/app/contentlisting/contentlisting.py b/plone/app/contentlisting/contentlisting.py
index 83849a5..954210d 100644
--- a/plone/app/contentlisting/contentlisting.py
+++ b/plone/app/contentlisting/contentlisting.py
@@ -1,17 +1,17 @@
-from .interfaces import IContentListing
-from .interfaces import IContentListingObject
-from Products.CMFCore.utils import getToolByName
-from Products.CMFPlone.interfaces import INavigationSchema
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.i18n.normalizer.interfaces import IIDNormalizer
 from plone.registry.interfaces import IRegistry
-from zope import interface
-from zope.component import queryUtility
+from Products.CMFPlone.interfaces import INavigationSchema
+from zope.interface import implementer
 from zope.component import getUtility
+from zope.component import queryUtility
 
 
+@implementer(IContentListing)
 class ContentListing(object):
     """An IContentListing implementation based on sequences of objects."""
-    interface.implements(IContentListing)
 
     def __init__(self, sequence):
         self._basesequence = sequence
diff --git a/plone/app/contentlisting/interfaces.py b/plone/app/contentlisting/interfaces.py
index c7279b1..7fd3bc4 100644
--- a/plone/app/contentlisting/interfaces.py
+++ b/plone/app/contentlisting/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from Products.CMFCore.interfaces import IDublinCore
 from zope.interface.common.sequence import IReadSequence
 
diff --git a/plone/app/contentlisting/realobject.py b/plone/app/contentlisting/realobject.py
index d2a3b52..0bcf53a 100644
--- a/plone/app/contentlisting/realobject.py
+++ b/plone/app/contentlisting/realobject.py
@@ -1,20 +1,18 @@
-from .contentlisting import BaseContentListingObject
-from .interfaces import IContentListingObject
+# -*- coding: utf-8 -*-
 from Acquisition import aq_base
 from Acquisition import aq_get
-from Products.CMFCore.utils import getToolByName
-from plone.app.layout.icons.interfaces import IContentIcon
+from plone.app.contentlisting.contentlisting import BaseContentListingObject
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.uuid.interfaces import IUUID
-from zope import interface
-from zope.component import queryMultiAdapter
+from Products.CMFCore.utils import getToolByName
+from zope.interface import implementer
 
 
+@implementer(IContentListingObject)
 class RealContentListingObject(BaseContentListingObject):
     """A content object representation wrapping a real content object.
     """
 
-    interface.implements(IContentListingObject)
-
     def __init__(self, obj):
         self._realobject = obj
         self.request = aq_get(obj, 'REQUEST')
diff --git a/plone/app/contentlisting/tests/base.py b/plone/app/contentlisting/tests/base.py
index 8457012..dcea273 100644
--- a/plone/app/contentlisting/tests/base.py
+++ b/plone/app/contentlisting/tests/base.py
@@ -1,10 +1,11 @@
-from Products.CMFCore.utils import getToolByName
+# -*- coding: utf-8 -*-
 from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 from plone.app.testing import FunctionalTesting
 from plone.app.testing import IntegrationTesting
 from plone.app.testing import PloneSandboxLayer
-from plone.app.testing import TEST_USER_ID
 from plone.app.testing import setRoles
+from plone.app.testing import TEST_USER_ID
+from Products.CMFCore.utils import getToolByName
 from zope.configuration import xmlconfig
 import unittest2 as unittest
 
diff --git a/plone/app/contentlisting/tests/test_integration_unit.py b/plone/app/contentlisting/tests/test_integration_unit.py
index aba4183..85637b5 100644
--- a/plone/app/contentlisting/tests/test_integration_unit.py
+++ b/plone/app/contentlisting/tests/test_integration_unit.py
@@ -1,10 +1,12 @@
-from ..interfaces import IContentListing
-from ..interfaces import IContentListingObject
-from .base import ContentlistingFunctionalTestCase
-from Products.CMFCore.utils import getToolByName
-from plone.app.testing import TEST_USER_ID
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
+from plone.app.contentlisting.interfaces import IContentListingObject
+from plone.app.contentlisting.tests.base import \
+    ContentlistingFunctionalTestCase
 from plone.app.testing import setRoles
+from plone.app.testing import TEST_USER_ID
 from plone.batching.interfaces import IBatch
+from Products.CMFCore.utils import getToolByName
 from zope.interface.verify import verifyObject
 
 
@@ -110,7 +112,6 @@ def test_item_getURL(self):
         )
         self.assertEqual(self.item.getURL(), self.realitem.absolute_url())
 
-
     def test_item_getSize(self):
         self.assertEqual(self.item.getSize().upper(), '0 KB')
 
diff --git a/setup.py b/setup.py
index 9a3249b..bd5d214 100644
--- a/setup.py
+++ b/setup.py
@@ -32,7 +32,7 @@ def read(*rnames):
     zip_safe=False,
     install_requires=[
         'setuptools',
-        'plone.uuid',
+        'Products.CMFPlone',
     ],
     extras_require={
         'test': [


Repository: plone.app.contentlisting


Branch: refs/heads/master
Date: 2016-01-21T16:17:36+01:00
Author: agitator (agitator) <hpeter@agitator.com>
Commit: https://github.com/plone/plone.app.contentlisting/commit/ef3df6dfc08bbcc1e24a0aeaea69e6c0226ed508

Merge pull request #13 from plone/jensens-cleanup2

Minor cleanup (decorator, utf8 header, ...), removed unused imports aâ€¦

Files changed:
M CHANGES.rst
M plone/__init__.py
M plone/app/__init__.py
M plone/app/contentlisting/__init__.py
M plone/app/contentlisting/browser.py
M plone/app/contentlisting/catalog.py
M plone/app/contentlisting/contentlisting.py
M plone/app/contentlisting/interfaces.py
M plone/app/contentlisting/realobject.py
M plone/app/contentlisting/tests/base.py
M plone/app/contentlisting/tests/test_integration_unit.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9ad8bad..159791a 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,9 @@ New:
 
 Fixes:
 
-- *add item here*
+- Minor cleanup (decorator, utf8 header, ...), removed unused imports and
+  fixed dependencies.
+  [jensens]
 
 
 1.2.3 (2015-11-25)
diff --git a/plone/__init__.py b/plone/__init__.py
index de40ea7..68c04af 100644
--- a/plone/__init__.py
+++ b/plone/__init__.py
@@ -1 +1,2 @@
+# -*- coding: utf-8 -*-
 __import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/app/__init__.py b/plone/app/__init__.py
index de40ea7..68c04af 100644
--- a/plone/app/__init__.py
+++ b/plone/app/__init__.py
@@ -1 +1,2 @@
+# -*- coding: utf-8 -*-
 __import__('pkg_resources').declare_namespace(__name__)
diff --git a/plone/app/contentlisting/__init__.py b/plone/app/contentlisting/__init__.py
index e69de29..40a96af 100644
--- a/plone/app/contentlisting/__init__.py
+++ b/plone/app/contentlisting/__init__.py
@@ -0,0 +1 @@
+# -*- coding: utf-8 -*-
diff --git a/plone/app/contentlisting/browser.py b/plone/app/contentlisting/browser.py
index 500a902..8fabcbf 100644
--- a/plone/app/contentlisting/browser.py
+++ b/plone/app/contentlisting/browser.py
@@ -1,8 +1,8 @@
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
 from Products.CMFCore.utils import getToolByName
 from zope.publisher.browser import BrowserView
 
-from .interfaces import IContentListing
-
 
 class FolderListing(BrowserView):
 
diff --git a/plone/app/contentlisting/catalog.py b/plone/app/contentlisting/catalog.py
index 259ed52..ac2fea7 100644
--- a/plone/app/contentlisting/catalog.py
+++ b/plone/app/contentlisting/catalog.py
@@ -1,18 +1,17 @@
 # -*- coding: utf-8 -*-
-from .contentlisting import BaseContentListingObject
-from .interfaces import IContentListingObject
 from Acquisition import aq_base
 from Acquisition import aq_get
-from Products.CMFCore.utils import getToolByName
-from plone.app.layout.icons.interfaces import IContentIcon
+from plone.app.contentlisting.contentlisting import BaseContentListingObject
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.registry.interfaces import IRegistry
 from plone.uuid.interfaces import IUUID
-from zope import interface
+from Products.CMFCore.utils import getToolByName
 from zope.component import getMultiAdapter
-from zope.component import queryMultiAdapter
 from zope.component import queryUtility
+from zope.interface import implementer
 
 
+@implementer(IContentListingObject)
 class CatalogContentListingObject(BaseContentListingObject):
     """A Catalog-results based content object representation.
 
@@ -20,8 +19,6 @@ class CatalogContentListingObject(BaseContentListingObject):
     This is the type of objects they are adapted to.
     """
 
-    interface.implements(IContentListingObject)
-
     def __init__(self, brain):
         self._brain = brain
         self._cached_realobject = None
diff --git a/plone/app/contentlisting/contentlisting.py b/plone/app/contentlisting/contentlisting.py
index 83849a5..954210d 100644
--- a/plone/app/contentlisting/contentlisting.py
+++ b/plone/app/contentlisting/contentlisting.py
@@ -1,17 +1,17 @@
-from .interfaces import IContentListing
-from .interfaces import IContentListingObject
-from Products.CMFCore.utils import getToolByName
-from Products.CMFPlone.interfaces import INavigationSchema
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.i18n.normalizer.interfaces import IIDNormalizer
 from plone.registry.interfaces import IRegistry
-from zope import interface
-from zope.component import queryUtility
+from Products.CMFPlone.interfaces import INavigationSchema
+from zope.interface import implementer
 from zope.component import getUtility
+from zope.component import queryUtility
 
 
+@implementer(IContentListing)
 class ContentListing(object):
     """An IContentListing implementation based on sequences of objects."""
-    interface.implements(IContentListing)
 
     def __init__(self, sequence):
         self._basesequence = sequence
diff --git a/plone/app/contentlisting/interfaces.py b/plone/app/contentlisting/interfaces.py
index c7279b1..7fd3bc4 100644
--- a/plone/app/contentlisting/interfaces.py
+++ b/plone/app/contentlisting/interfaces.py
@@ -1,3 +1,4 @@
+# -*- coding: utf-8 -*-
 from Products.CMFCore.interfaces import IDublinCore
 from zope.interface.common.sequence import IReadSequence
 
diff --git a/plone/app/contentlisting/realobject.py b/plone/app/contentlisting/realobject.py
index d2a3b52..0bcf53a 100644
--- a/plone/app/contentlisting/realobject.py
+++ b/plone/app/contentlisting/realobject.py
@@ -1,20 +1,18 @@
-from .contentlisting import BaseContentListingObject
-from .interfaces import IContentListingObject
+# -*- coding: utf-8 -*-
 from Acquisition import aq_base
 from Acquisition import aq_get
-from Products.CMFCore.utils import getToolByName
-from plone.app.layout.icons.interfaces import IContentIcon
+from plone.app.contentlisting.contentlisting import BaseContentListingObject
+from plone.app.contentlisting.interfaces import IContentListingObject
 from plone.uuid.interfaces import IUUID
-from zope import interface
-from zope.component import queryMultiAdapter
+from Products.CMFCore.utils import getToolByName
+from zope.interface import implementer
 
 
+@implementer(IContentListingObject)
 class RealContentListingObject(BaseContentListingObject):
     """A content object representation wrapping a real content object.
     """
 
-    interface.implements(IContentListingObject)
-
     def __init__(self, obj):
         self._realobject = obj
         self.request = aq_get(obj, 'REQUEST')
diff --git a/plone/app/contentlisting/tests/base.py b/plone/app/contentlisting/tests/base.py
index 8457012..dcea273 100644
--- a/plone/app/contentlisting/tests/base.py
+++ b/plone/app/contentlisting/tests/base.py
@@ -1,10 +1,11 @@
-from Products.CMFCore.utils import getToolByName
+# -*- coding: utf-8 -*-
 from plone.app.contenttypes.testing import PLONE_APP_CONTENTTYPES_FIXTURE
 from plone.app.testing import FunctionalTesting
 from plone.app.testing import IntegrationTesting
 from plone.app.testing import PloneSandboxLayer
-from plone.app.testing import TEST_USER_ID
 from plone.app.testing import setRoles
+from plone.app.testing import TEST_USER_ID
+from Products.CMFCore.utils import getToolByName
 from zope.configuration import xmlconfig
 import unittest2 as unittest
 
diff --git a/plone/app/contentlisting/tests/test_integration_unit.py b/plone/app/contentlisting/tests/test_integration_unit.py
index aba4183..85637b5 100644
--- a/plone/app/contentlisting/tests/test_integration_unit.py
+++ b/plone/app/contentlisting/tests/test_integration_unit.py
@@ -1,10 +1,12 @@
-from ..interfaces import IContentListing
-from ..interfaces import IContentListingObject
-from .base import ContentlistingFunctionalTestCase
-from Products.CMFCore.utils import getToolByName
-from plone.app.testing import TEST_USER_ID
+# -*- coding: utf-8 -*-
+from plone.app.contentlisting.interfaces import IContentListing
+from plone.app.contentlisting.interfaces import IContentListingObject
+from plone.app.contentlisting.tests.base import \
+    ContentlistingFunctionalTestCase
 from plone.app.testing import setRoles
+from plone.app.testing import TEST_USER_ID
 from plone.batching.interfaces import IBatch
+from Products.CMFCore.utils import getToolByName
 from zope.interface.verify import verifyObject
 
 
@@ -110,7 +112,6 @@ def test_item_getURL(self):
         )
         self.assertEqual(self.item.getURL(), self.realitem.absolute_url())
 
-
     def test_item_getSize(self):
         self.assertEqual(self.item.getSize().upper(), '0 KB')
 
diff --git a/setup.py b/setup.py
index 9a3249b..bd5d214 100644
--- a/setup.py
+++ b/setup.py
@@ -32,7 +32,7 @@ def read(*rnames):
     zip_safe=False,
     install_requires=[
         'setuptools',
-        'plone.uuid',
+        'Products.CMFPlone',
     ],
     extras_require={
         'test': [


