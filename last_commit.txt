Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-10-28T10:07:46+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/8b34bceac82c092d6d6c131196e0e422aa85c37c

Fix vanished ClassType import

Files changed:
M CHANGES.rst
M Products/CMFPlone/utils.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a3589f2d1..685e806bb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -28,6 +28,9 @@ New Features:
 
 Bug Fixes:
 
+- Increase compatibility with Python3.
+  [ale-rt]
+
 - Show example for expression in actions control panel.
   [maurits]
 
diff --git a/Products/CMFPlone/utils.py b/Products/CMFPlone/utils.py
index 53919bb10..87597cad2 100644
--- a/Products/CMFPlone/utils.py
+++ b/Products/CMFPlone/utils.py
@@ -30,7 +30,6 @@
 from Products.CMFPlone.log import log
 from Products.CMFPlone.log import log_deprecated
 from Products.CMFPlone.log import log_exc
-from types import ClassType
 from urlparse import urlparse
 from webdav.interfaces import IWriteLock
 from zope import schema
@@ -57,6 +56,12 @@
 import zope.interface
 
 
+try:
+    from types import ClassType
+except ImportError:
+    ClassType = type
+
+
 deprecated_import(
     "Import from Products.CMFPlone.defaultpage instead",
     isDefaultPage='Products.CMFPlone.defaultpage:check_default_page_via_view',


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2017-11-01T17:11:17+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/b45d36191116035760b5b8a7c61570eac2b31215

Merge pull request #2198 from plone/py3-class-type

Fix vanished ClassType import

Files changed:
M CHANGES.rst
M Products/CMFPlone/utils.py

diff --git a/CHANGES.rst b/CHANGES.rst
index a3589f2d1..685e806bb 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -28,6 +28,9 @@ New Features:
 
 Bug Fixes:
 
+- Increase compatibility with Python3.
+  [ale-rt]
+
 - Show example for expression in actions control panel.
   [maurits]
 
diff --git a/Products/CMFPlone/utils.py b/Products/CMFPlone/utils.py
index 53919bb10..87597cad2 100644
--- a/Products/CMFPlone/utils.py
+++ b/Products/CMFPlone/utils.py
@@ -30,7 +30,6 @@
 from Products.CMFPlone.log import log
 from Products.CMFPlone.log import log_deprecated
 from Products.CMFPlone.log import log_exc
-from types import ClassType
 from urlparse import urlparse
 from webdav.interfaces import IWriteLock
 from zope import schema
@@ -57,6 +56,12 @@
 import zope.interface
 
 
+try:
+    from types import ClassType
+except ImportError:
+    ClassType = type
+
+
 deprecated_import(
     "Import from Products.CMFPlone.defaultpage instead",
     isDefaultPage='Products.CMFPlone.defaultpage:check_default_page_via_view',


