Repository: plone.app.contentrules


Branch: refs/heads/master
Date: 2018-05-16T17:03:35+02:00
Author: Michael Howitz (icemac) <mh@gocept.com>
Commit: https://github.com/plone/plone.app.contentrules/commit/b6f56cd87fe5e8d6bc3631ecaf2f5926e32a7cba

Adapt tests to `Products.GenericSetup &gt;= 2.0`.

Files changed:
M CHANGES.rst
M buildout.cfg
M plone/app/contentrules/tests/test_configuration.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 34a33a7..90010ea 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,12 +1,13 @@
 Changelog
 =========
 
-4.0.19 (unreleased)
--------------------
+4.1 (unreleased)
+----------------
 
 Breaking changes:
 
-- *add item here*
+- Adapt tests to `Products.GenericSetup >= 2.0` thus requiring at least that
+  version.
 
 New features:
 
diff --git a/buildout.cfg b/buildout.cfg
index 4178c9e..704737b 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -1,7 +1,23 @@
 [buildout]
+extensions = mr.developer
+auto-checkout = *
 extends = https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-5.x.cfg
+          https://raw.githubusercontent.com/plone/buildout.coredev/5.2/versions.cfg
 package-name = plone.app.contentrules
 package-extras = [test]
 
+[remotes]
+plone = https://github.com/plone
+plone_push = git@github.com:plone
+zope = https://github.com/zopefoundation
+zope_push = git@github.com:zopefoundation
+
+[sources]
+Products.CMFCore = git ${remotes:zope}/Products.CMFCore.git pushurl=${remotes:zope_push}/Products.CMFCore.git branch=master
+Products.CMFFormController = git ${remotes:plone}/Products.CMFFormController.git pushurl=${remotes:plone_push}/Products.CMFFormController.git branch=master
+Products.CMFPlone = git ${remotes:plone}/Products.CMFPlone.git pushurl=${remotes:plone_push}/Products.CMFPlone.git branch=master
+Products.GenericSetup = git ${remotes:zope}/Products.GenericSetup.git pushurl=${remotes:zope_push}/Products.GenericSetup.git branch=master
+Products.PlonePAS = git ${remotes:plone}/Products.PlonePAS.git pushurl=${remotes:plone_push}/Products.PlonePAS.git branch=master
+
 [versions]
 plone.app.contentrules =
diff --git a/plone/app/contentrules/tests/test_configuration.py b/plone/app/contentrules/tests/test_configuration.py
index 456a244..82f94c5 100644
--- a/plone/app/contentrules/tests/test_configuration.py
+++ b/plone/app/contentrules/tests/test_configuration.py
@@ -119,7 +119,7 @@ def testExport(self):
         exporter = getMultiAdapter(
             (site, context), IBody, name=u'plone.contentrules')
 
-        expected = """<?xml version="1.0"?>
+        expected = """<?xml version="1.0" encoding="utf-8"?>
 <contentrules>
  <rule name="test1" title="Test rule 1" cascading="False"
     description="A test rule" enabled="True"
diff --git a/setup.py b/setup.py
index f56cc53..50717b1 100644
--- a/setup.py
+++ b/setup.py
@@ -1,7 +1,7 @@
 # -*- coding: utf-8 -*-
 from setuptools import setup, find_packages
 
-version = '4.0.19.dev0'
+version = '4.1.dev0'
 
 setup(
     name='plone.app.contentrules',
@@ -55,7 +55,7 @@
         'Acquisition',
         'Products.CMFPlone',
         'Products.CMFCore',
-        'Products.GenericSetup',
+        'Products.GenericSetup >= 2.0.dev0',
         'Products.statusmessages',
         'ZODB3',
         'Zope2 >= 2.12.3',


Repository: plone.app.contentrules


Branch: refs/heads/master
Date: 2018-05-16T23:54:37+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.contentrules/commit/4b8173613dbc40e9b606ffe1f6ac83b598d5a79a

Merge pull request #36 from plone/GenericSetup-2.0

Adapt tests to `Products.GenericSetup &gt;= 2.0`.

Files changed:
M CHANGES.rst
M buildout.cfg
M plone/app/contentrules/tests/test_configuration.py
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 34a33a7..90010ea 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,12 +1,13 @@
 Changelog
 =========
 
-4.0.19 (unreleased)
--------------------
+4.1 (unreleased)
+----------------
 
 Breaking changes:
 
-- *add item here*
+- Adapt tests to `Products.GenericSetup >= 2.0` thus requiring at least that
+  version.
 
 New features:
 
diff --git a/buildout.cfg b/buildout.cfg
index 4178c9e..704737b 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -1,7 +1,23 @@
 [buildout]
+extensions = mr.developer
+auto-checkout = *
 extends = https://raw.githubusercontent.com/collective/buildout.plonetest/master/test-5.x.cfg
+          https://raw.githubusercontent.com/plone/buildout.coredev/5.2/versions.cfg
 package-name = plone.app.contentrules
 package-extras = [test]
 
+[remotes]
+plone = https://github.com/plone
+plone_push = git@github.com:plone
+zope = https://github.com/zopefoundation
+zope_push = git@github.com:zopefoundation
+
+[sources]
+Products.CMFCore = git ${remotes:zope}/Products.CMFCore.git pushurl=${remotes:zope_push}/Products.CMFCore.git branch=master
+Products.CMFFormController = git ${remotes:plone}/Products.CMFFormController.git pushurl=${remotes:plone_push}/Products.CMFFormController.git branch=master
+Products.CMFPlone = git ${remotes:plone}/Products.CMFPlone.git pushurl=${remotes:plone_push}/Products.CMFPlone.git branch=master
+Products.GenericSetup = git ${remotes:zope}/Products.GenericSetup.git pushurl=${remotes:zope_push}/Products.GenericSetup.git branch=master
+Products.PlonePAS = git ${remotes:plone}/Products.PlonePAS.git pushurl=${remotes:plone_push}/Products.PlonePAS.git branch=master
+
 [versions]
 plone.app.contentrules =
diff --git a/plone/app/contentrules/tests/test_configuration.py b/plone/app/contentrules/tests/test_configuration.py
index 456a244..82f94c5 100644
--- a/plone/app/contentrules/tests/test_configuration.py
+++ b/plone/app/contentrules/tests/test_configuration.py
@@ -119,7 +119,7 @@ def testExport(self):
         exporter = getMultiAdapter(
             (site, context), IBody, name=u'plone.contentrules')
 
-        expected = """<?xml version="1.0"?>
+        expected = """<?xml version="1.0" encoding="utf-8"?>
 <contentrules>
  <rule name="test1" title="Test rule 1" cascading="False"
     description="A test rule" enabled="True"
diff --git a/setup.py b/setup.py
index f56cc53..50717b1 100644
--- a/setup.py
+++ b/setup.py
@@ -1,7 +1,7 @@
 # -*- coding: utf-8 -*-
 from setuptools import setup, find_packages
 
-version = '4.0.19.dev0'
+version = '4.1.dev0'
 
 setup(
     name='plone.app.contentrules',
@@ -55,7 +55,7 @@
         'Acquisition',
         'Products.CMFPlone',
         'Products.CMFCore',
-        'Products.GenericSetup',
+        'Products.GenericSetup >= 2.0.dev0',
         'Products.statusmessages',
         'ZODB3',
         'Zope2 >= 2.12.3',


