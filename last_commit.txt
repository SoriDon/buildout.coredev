Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-04T11:44:18+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFEditions/commit/4b459c9fd15e38da868abb92db6a5d6ae248e79e

do not depend on Zope2 but on Zope

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex e861fb2..27d4b1f 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -59,7 +59,7 @@\n         "Acquisition",\n         "DateTime",\n         "transaction",\n-        "Zope2",\n+        "Zope>=5",\n     ],\n     entry_points="""\n     [z3c.autoinclude.plugin]\n'

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-04T11:44:52+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFEditions/commit/89883bdf929fd80e3b2b012aee0fbefc686b3290

do not depend on packages that are already dependencies of the Zope 5 package

Files changed:
M setup.py

b'diff --git a/setup.py b/setup.py\nindex 27d4b1f..8e05de5 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -50,15 +50,12 @@\n         "zope.copy",\n         "zope.dottedname",\n         "zope.i18nmessageid",\n-        "zope.interface",\n         "Products.CMFCore >=2.1",\n         "Products.CMFDiffTool",  # dependency in diff template\n         "Products.CMFUid",\n         "Products.GenericSetup >=1.4.0",\n         "Products.ZopeVersionControl",\n         "Acquisition",\n-        "DateTime",\n-        "transaction",\n         "Zope>=5",\n     ],\n     entry_points="""\n'

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-04T11:46:27+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFEditions/commit/27889964925c96402f7c91712cd46a25c4082c6f

document changes

Files changed:
A news/87.bugfix

b'diff --git a/news/87.bugfix b/news/87.bugfix\nnew file mode 100644\nindex 0000000..d8bf26a\n--- /dev/null\n+++ b/news/87.bugfix\n@@ -0,0 +1,2 @@\n+Do not depend on Zope2 but Zope and remove transitional dependencies.\n+[jensens]\n\\ No newline at end of file\n'

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-04T13:53:51+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFEditions/commit/daaad0d76067af0ae2affca89b79a2d325d3f9ce

Merge branch 'master' into update-setup

Files changed:
A news/88.bugfix
M Products/CMFEditions/browser/views.py
M Products/CMFEditions/tests/test_ContentTypes.py
M setup.py

b'diff --git a/Products/CMFEditions/browser/views.py b/Products/CMFEditions/browser/views.py\nindex cbf7e43..0fa4fb3 100644\n--- a/Products/CMFEditions/browser/views.py\n+++ b/Products/CMFEditions/browser/views.py\n@@ -1,11 +1,11 @@\n from Acquisition import aq_inner\n+from plone.base.utils import human_readable_size\n from Products.CMFCore.utils import getToolByName\n from Products.CMFEditions import CMFEditionsMessageFactory as _\n from Products.CMFEditions.interfaces.IModifier import FileTooLargeToVersionError\n from Products.CMFEditions.utilities import isObjectChanged\n from Products.CMFEditions.utilities import isObjectVersioned\n from Products.CMFEditions.utilities import maybeSaveVersion\n-from Products.CMFPlone.utils import human_readable_size\n from Products.Five import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n \ndiff --git a/Products/CMFEditions/tests/test_ContentTypes.py b/Products/CMFEditions/tests/test_ContentTypes.py\nindex 68f1ebe..df7e158 100644\n--- a/Products/CMFEditions/tests/test_ContentTypes.py\n+++ b/Products/CMFEditions/tests/test_ContentTypes.py\n@@ -3,7 +3,7 @@\n from plone.namedfile.file import NamedBlobImage\n from Products.CMFEditions import PACKAGE_HOME\n from Products.CMFEditions.tests.base import CMFEditionsBaseTestCase\n-from Products.CMFPlone.utils import _createObjectByType\n+from plone.base.utils import unrestricted_construct_instance\n \n import os\n \n@@ -22,7 +22,7 @@ def setUp(self):\n         self.workflow = self.portal.portal_workflow\n         self.portal_repository = self.portal.portal_repository\n         self.portal_archivist = self.portal.portal_archivist\n-        _createObjectByType("Folder", self.portal, id="folder")\n+        unrestricted_construct_instance("Folder", self.portal, id="folder")\n         self.folder = self.portal.folder\n \n     def getPermissionsOfRole(self, role):\ndiff --git a/news/88.bugfix b/news/88.bugfix\nnew file mode 100644\nindex 0000000..82850db\n--- /dev/null\n+++ b/news/88.bugfix\n@@ -0,0 +1,3 @@\n+Fix deprecated imports and not depend on CMFPlone.\n+Removes also circular dependency.\n+[jensens]\ndiff --git a/setup.py b/setup.py\nindex 8e05de5..ea1a366 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -40,7 +40,6 @@\n         test=[\n             "plone.app.testing",\n             "plone.app.textfield",\n-            "Products.CMFPlone",\n             "Products.CMFDynamicViewFTI",\n             "zope.testing",\n         ]\n@@ -50,6 +49,7 @@\n         "zope.copy",\n         "zope.dottedname",\n         "zope.i18nmessageid",\n+        "plone.base",\n         "Products.CMFCore >=2.1",\n         "Products.CMFDiffTool",  # dependency in diff template\n         "Products.CMFUid",\n'

Repository: Products.CMFEditions


Branch: refs/heads/master
Date: 2022-07-04T13:53:56+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFEditions/commit/0ed40b42afaa2e88e0e6f0dc63e7faadd3c1923a

Merge pull request #87 from plone/update-setup

Update setup

Files changed:
A news/87.bugfix
M setup.py

b'diff --git a/news/87.bugfix b/news/87.bugfix\nnew file mode 100644\nindex 0000000..d8bf26a\n--- /dev/null\n+++ b/news/87.bugfix\n@@ -0,0 +1,2 @@\n+Do not depend on Zope2 but Zope and remove transitional dependencies.\n+[jensens]\n\\ No newline at end of file\ndiff --git a/setup.py b/setup.py\nindex ab827f0..ea1a366 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -49,7 +49,6 @@\n         "zope.copy",\n         "zope.dottedname",\n         "zope.i18nmessageid",\n-        "zope.interface",\n         "plone.base",\n         "Products.CMFCore >=2.1",\n         "Products.CMFDiffTool",  # dependency in diff template\n@@ -57,9 +56,7 @@\n         "Products.GenericSetup >=1.4.0",\n         "Products.ZopeVersionControl",\n         "Acquisition",\n-        "DateTime",\n-        "transaction",\n-        "Zope2",\n+        "Zope>=5",\n     ],\n     entry_points="""\n     [z3c.autoinclude.plugin]\n'

