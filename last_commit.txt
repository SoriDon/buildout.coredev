Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-10-18T22:17:15+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/f0e4713313767710ed688079a40664d5b71d9c59

fix default value for email msgid

Files changed:
A news/2790.bugfix
M Products/CMFPlone/tests/csrf.txt
M Products/CMFPlone/tests/emaillogin.rst
M Products/CMFPlone/tests/pwreset_browser.rst

b"diff --git a/Products/CMFPlone/tests/csrf.txt b/Products/CMFPlone/tests/csrf.txt\nindex c70b7ea65..6dedd8de0 100644\n--- a/Products/CMFPlone/tests/csrf.txt\n+++ b/Products/CMFPlone/tests/csrf.txt\n@@ -97,7 +97,7 @@ be able to add new users himself if he wishes so:\n \n   >>> browser.getControl('Full Name').value = 'John Doe'\n   >>> browser.getControl('User Name').value = 'john'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Password').value = 'y0d4Wg'\n   >>> browser.getControl('Confirm password').value = 'y0d4Wg'\n   >>> browser.getControl('Register').click()\n@@ -122,7 +122,7 @@ with the personal preferences:\n   >>> browser.getControl('Log in').click()\n   >>> browser.open('http://nohost/plone/@@personal-information')\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   >>> browser.contents\n   '...Info...Changes saved...'\n@@ -134,7 +134,7 @@ existing invalid, in which case submitting should yield an error:\n   >>> browser.goBack()\n   >>> browser.getControl(name='_authenticator', index=0).value = 'invalid!'\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   Traceback (most recent call last):\n   ...\n@@ -173,7 +173,7 @@ as its z3cform the portrait gets always modified because is IObject:\n   >>> browser.getControl('Log in').click()\n   >>> browser.open('http://nohost/plone/@@user-information?userid=%s' % SITE_OWNER_NAME)\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   >>> browser.contents\n   '...Info...Changes saved...'\n@@ -181,7 +181,7 @@ as its z3cform the portrait gets always modified because is IObject:\n   >>> browser.goBack()\n   >>> browser.getControl(name='_authenticator', index=0).value = 'invalid!'\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john.doe@foo-security.net'\n+  >>> browser.getControl('Email').value = 'john.doe@foo-security.net'\n   >>> browser.getControl('Save').click()\n   Traceback (most recent call last):\n   ...\n@@ -203,7 +203,7 @@ anymore (which at the same time tests the security control panel):\n   >>> browser.getLink('Users and Groups').click()\n   >>> browser.getLink('Add New User').click()\n   >>> browser.getControl('User Name').value = 'johnny'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Password').value = 'y0d4Wg!'\n   >>> browser.getControl('Confirm password').value = 'y0d4Wg!'\n   >>> browser.getControl('Register').click()\ndiff --git a/Products/CMFPlone/tests/emaillogin.rst b/Products/CMFPlone/tests/emaillogin.rst\nindex 10ff4da19..739d75d64 100644\n--- a/Products/CMFPlone/tests/emaillogin.rst\n+++ b/Products/CMFPlone/tests/emaillogin.rst\n@@ -45,7 +45,7 @@ there::\n \n     >>> browser.open('http://nohost/plone/@@register')\n     >>> browser.getControl('User Name').value='username'\n-    >>> browser.getControl('E-mail').value='username@example.org'\n+    >>> browser.getControl('Email').value='username@example.org'\n     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Confirm password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Register').click()\n@@ -79,7 +79,7 @@ there::\n \n We fill in the rest of the form::\n \n-    >>> browser.getControl('E-mail').value='email@example.org'\n+    >>> browser.getControl('Email').value='email@example.org'\n     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Confirm password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Register').click()\n@@ -155,11 +155,11 @@ switched on::\n We change the email address::\n \n     >>> browser.open('http://nohost/plone/@@personal-information')\n-    >>> browser.getControl('E-mail').value = 'email2@example.org'\n+    >>> browser.getControl('Email').value = 'email2@example.org'\n     >>> browser.getControl('Save').click()\n     >>> 'Changes saved.' in browser.contents\n     True\n-    >>> browser.getControl('E-mail').value\n+    >>> browser.getControl('Email').value\n     'email2@example.org'\n \n After those two changes, we can no longer login with our first email\n@@ -188,7 +188,7 @@ The current email address of course works fine for logging in::\n Picking the e-mail address of another user should of course fail::\n \n     >>> browser.open('http://nohost/plone/@@personal-information')\n-    >>> browser.getControl('E-mail').value = 'username@example.org'\n+    >>> browser.getControl('Email').value = 'username@example.org'\n     >>> browser.getControl('Save').click()\n     >>> 'Changes saved.' in browser.contents\n     False\ndiff --git a/Products/CMFPlone/tests/pwreset_browser.rst b/Products/CMFPlone/tests/pwreset_browser.rst\nindex 84a97d62a..922468f08 100644\n--- a/Products/CMFPlone/tests/pwreset_browser.rst\n+++ b/Products/CMFPlone/tests/pwreset_browser.rst\n@@ -126,7 +126,7 @@ Now register a new user:\n   'http://nohost/plone/@@register'\n \n   >>> browser.getControl('User Name').value = 'jsmith'\n-  >>> browser.getControl('E-mail').value = 'jsmith@example.com'\n+  >>> browser.getControl('Email').value = 'jsmith@example.com'\n   >>> browser.getControl('Password').value = 'secret'\n   >>> browser.getControl('Confirm password').value = 'secret'\n   >>> browser.getControl('Register').click()\n@@ -264,7 +264,7 @@ We navigate to the Users Overview page and register a new user:\n   'http://nohost/plone/@@new-user'\n \n   >>> browser.getControl('User Name').value = 'wsmith'\n-  >>> browser.getControl('E-mail').value = 'wsmith@example.com'\n+  >>> browser.getControl('Email').value = 'wsmith@example.com'\n   >>> browser.getControl('Password').value = 'supersecret'\n   >>> browser.getControl('Confirm password').value = 'supersecret'\n   >>> browser.getControl('Register').click()\n@@ -366,7 +366,7 @@ Log out again and then join:\n   True\n   >>> browser.open('http://nohost/plone/@@register')\n   >>> browser.getControl('User Name').value = 'bsmith'\n-  >>> browser.getControl('E-mail').value = 'bsmith@example.com'\n+  >>> browser.getControl('Email').value = 'bsmith@example.com'\n \n We shouldn't be able to fill in our password:\n \n@@ -447,7 +447,7 @@ We navigate to the Users Overview page and register a new user:\n   'http://nohost/plone/@@new-user'\n \n   >>> browser.getControl('User Name').value = 'wwwsmith'\n-  >>> browser.getControl('E-mail').value = 'wwwsmith@example.com'\n+  >>> browser.getControl('Email').value = 'wwwsmith@example.com'\n   >>> browser.getControl('Password').value = 'secret'\n   >>> browser.getControl('Confirm password').value = 'secret'\n   >>> browser.getControl('Send a confirmation mail with a link to set the password').selected = True\ndiff --git a/news/2790.bugfix b/news/2790.bugfix\nnew file mode 100644\nindex 000000000..00db2e4a6\n--- /dev/null\n+++ b/news/2790.bugfix\n@@ -0,0 +1,2 @@\n+fix default value for email msgid\n+[erral]\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-10-20T09:53:58+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/58881a4b5a5e2de23f93557142fe45d048eaa2ae

Merge pull request #2961 from plone/erral-issue-2790

fix default value for email msgid

Files changed:
A news/2790.bugfix
M Products/CMFPlone/tests/csrf.txt
M Products/CMFPlone/tests/emaillogin.rst
M Products/CMFPlone/tests/pwreset_browser.rst

b"diff --git a/Products/CMFPlone/tests/csrf.txt b/Products/CMFPlone/tests/csrf.txt\nindex c70b7ea65..6dedd8de0 100644\n--- a/Products/CMFPlone/tests/csrf.txt\n+++ b/Products/CMFPlone/tests/csrf.txt\n@@ -97,7 +97,7 @@ be able to add new users himself if he wishes so:\n \n   >>> browser.getControl('Full Name').value = 'John Doe'\n   >>> browser.getControl('User Name').value = 'john'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Password').value = 'y0d4Wg'\n   >>> browser.getControl('Confirm password').value = 'y0d4Wg'\n   >>> browser.getControl('Register').click()\n@@ -122,7 +122,7 @@ with the personal preferences:\n   >>> browser.getControl('Log in').click()\n   >>> browser.open('http://nohost/plone/@@personal-information')\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   >>> browser.contents\n   '...Info...Changes saved...'\n@@ -134,7 +134,7 @@ existing invalid, in which case submitting should yield an error:\n   >>> browser.goBack()\n   >>> browser.getControl(name='_authenticator', index=0).value = 'invalid!'\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   Traceback (most recent call last):\n   ...\n@@ -173,7 +173,7 @@ as its z3cform the portrait gets always modified because is IObject:\n   >>> browser.getControl('Log in').click()\n   >>> browser.open('http://nohost/plone/@@user-information?userid=%s' % SITE_OWNER_NAME)\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Save').click()\n   >>> browser.contents\n   '...Info...Changes saved...'\n@@ -181,7 +181,7 @@ as its z3cform the portrait gets always modified because is IObject:\n   >>> browser.goBack()\n   >>> browser.getControl(name='_authenticator', index=0).value = 'invalid!'\n   >>> browser.getControl('Full Name').value = 'John Doe'\n-  >>> browser.getControl('E-mail').value = 'john.doe@foo-security.net'\n+  >>> browser.getControl('Email').value = 'john.doe@foo-security.net'\n   >>> browser.getControl('Save').click()\n   Traceback (most recent call last):\n   ...\n@@ -203,7 +203,7 @@ anymore (which at the same time tests the security control panel):\n   >>> browser.getLink('Users and Groups').click()\n   >>> browser.getLink('Add New User').click()\n   >>> browser.getControl('User Name').value = 'johnny'\n-  >>> browser.getControl('E-mail').value = 'john@foo-security.com'\n+  >>> browser.getControl('Email').value = 'john@foo-security.com'\n   >>> browser.getControl('Password').value = 'y0d4Wg!'\n   >>> browser.getControl('Confirm password').value = 'y0d4Wg!'\n   >>> browser.getControl('Register').click()\ndiff --git a/Products/CMFPlone/tests/emaillogin.rst b/Products/CMFPlone/tests/emaillogin.rst\nindex 10ff4da19..739d75d64 100644\n--- a/Products/CMFPlone/tests/emaillogin.rst\n+++ b/Products/CMFPlone/tests/emaillogin.rst\n@@ -45,7 +45,7 @@ there::\n \n     >>> browser.open('http://nohost/plone/@@register')\n     >>> browser.getControl('User Name').value='username'\n-    >>> browser.getControl('E-mail').value='username@example.org'\n+    >>> browser.getControl('Email').value='username@example.org'\n     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Confirm password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Register').click()\n@@ -79,7 +79,7 @@ there::\n \n We fill in the rest of the form::\n \n-    >>> browser.getControl('E-mail').value='email@example.org'\n+    >>> browser.getControl('Email').value='email@example.org'\n     >>> browser.getControl('Password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Confirm password').value = SITE_OWNER_PASSWORD\n     >>> browser.getControl('Register').click()\n@@ -155,11 +155,11 @@ switched on::\n We change the email address::\n \n     >>> browser.open('http://nohost/plone/@@personal-information')\n-    >>> browser.getControl('E-mail').value = 'email2@example.org'\n+    >>> browser.getControl('Email').value = 'email2@example.org'\n     >>> browser.getControl('Save').click()\n     >>> 'Changes saved.' in browser.contents\n     True\n-    >>> browser.getControl('E-mail').value\n+    >>> browser.getControl('Email').value\n     'email2@example.org'\n \n After those two changes, we can no longer login with our first email\n@@ -188,7 +188,7 @@ The current email address of course works fine for logging in::\n Picking the e-mail address of another user should of course fail::\n \n     >>> browser.open('http://nohost/plone/@@personal-information')\n-    >>> browser.getControl('E-mail').value = 'username@example.org'\n+    >>> browser.getControl('Email').value = 'username@example.org'\n     >>> browser.getControl('Save').click()\n     >>> 'Changes saved.' in browser.contents\n     False\ndiff --git a/Products/CMFPlone/tests/pwreset_browser.rst b/Products/CMFPlone/tests/pwreset_browser.rst\nindex 84a97d62a..922468f08 100644\n--- a/Products/CMFPlone/tests/pwreset_browser.rst\n+++ b/Products/CMFPlone/tests/pwreset_browser.rst\n@@ -126,7 +126,7 @@ Now register a new user:\n   'http://nohost/plone/@@register'\n \n   >>> browser.getControl('User Name').value = 'jsmith'\n-  >>> browser.getControl('E-mail').value = 'jsmith@example.com'\n+  >>> browser.getControl('Email').value = 'jsmith@example.com'\n   >>> browser.getControl('Password').value = 'secret'\n   >>> browser.getControl('Confirm password').value = 'secret'\n   >>> browser.getControl('Register').click()\n@@ -264,7 +264,7 @@ We navigate to the Users Overview page and register a new user:\n   'http://nohost/plone/@@new-user'\n \n   >>> browser.getControl('User Name').value = 'wsmith'\n-  >>> browser.getControl('E-mail').value = 'wsmith@example.com'\n+  >>> browser.getControl('Email').value = 'wsmith@example.com'\n   >>> browser.getControl('Password').value = 'supersecret'\n   >>> browser.getControl('Confirm password').value = 'supersecret'\n   >>> browser.getControl('Register').click()\n@@ -366,7 +366,7 @@ Log out again and then join:\n   True\n   >>> browser.open('http://nohost/plone/@@register')\n   >>> browser.getControl('User Name').value = 'bsmith'\n-  >>> browser.getControl('E-mail').value = 'bsmith@example.com'\n+  >>> browser.getControl('Email').value = 'bsmith@example.com'\n \n We shouldn't be able to fill in our password:\n \n@@ -447,7 +447,7 @@ We navigate to the Users Overview page and register a new user:\n   'http://nohost/plone/@@new-user'\n \n   >>> browser.getControl('User Name').value = 'wwwsmith'\n-  >>> browser.getControl('E-mail').value = 'wwwsmith@example.com'\n+  >>> browser.getControl('Email').value = 'wwwsmith@example.com'\n   >>> browser.getControl('Password').value = 'secret'\n   >>> browser.getControl('Confirm password').value = 'secret'\n   >>> browser.getControl('Send a confirmation mail with a link to set the password').selected = True\ndiff --git a/news/2790.bugfix b/news/2790.bugfix\nnew file mode 100644\nindex 000000000..00db2e4a6\n--- /dev/null\n+++ b/news/2790.bugfix\n@@ -0,0 +1,2 @@\n+fix default value for email msgid\n+[erral]\n"

