Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2018-09-22T16:50:40+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.ATContentTypes/commit/8002343df6c5818517207809377b6d4995ca0fa0

Switch to new TestCase using AT after PloneTestcase is now DX.

Files changed:
M CHANGES.rst
M Products/ATContentTypes/tests/atcttestcase.py
M Products/ATContentTypes/tests/testContentTypes.py
M Products/ATContentTypes/tests/test_atimage.py
M Products/ATContentTypes/tests/test_base_profile.py
M Products/ATContentTypes/tests/test_content_profile.py
M Products/ATContentTypes/tests/test_controlpanel.py
M Products/ATContentTypes/tests/test_doctests.py
M Products/ATContentTypes/tests/test_portal_factory.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 1d0d9718..b13eae66 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -35,6 +35,10 @@ Bug fixes:\n - Handle no content icon in folder_tabular_view\n   [davisagli]\n \n+- Switch to new TestCase using AT after PloneTestcase is now DX.\n+  [pbauer]\n+\n+\n 2.3.6 (2017-06-26)\n ------------------\n \ndiff --git a/Products/ATContentTypes/tests/atcttestcase.py b/Products/ATContentTypes/tests/atcttestcase.py\nindex c087828d..95b8519d 100644\n--- a/Products/ATContentTypes/tests/atcttestcase.py\n+++ b/Products/ATContentTypes/tests/atcttestcase.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from plone.app.blob.markings import markAs\n from plone.app.testing import TEST_USER_ID as default_user\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.Archetypes.atapi import AttributeStorage\n from Products.Archetypes.atapi import DisplayList\n from Products.Archetypes.atapi import IdWidget\ndiff --git a/Products/ATContentTypes/tests/testContentTypes.py b/Products/ATContentTypes/tests/testContentTypes.py\nindex c61e788d..44826b2b 100644\n--- a/Products/ATContentTypes/tests/testContentTypes.py\n+++ b/Products/ATContentTypes/tests/testContentTypes.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.ATContentTypes.interfaces import IATContentType\n from Products.CMFPlone.tests import dummy\n from zope.i18nmessageid.message import Message\ndiff --git a/Products/ATContentTypes/tests/test_atimage.py b/Products/ATContentTypes/tests/test_atimage.py\nindex 140d74f6..0cc0057d 100644\n--- a/Products/ATContentTypes/tests/test_atimage.py\n+++ b/Products/ATContentTypes/tests/test_atimage.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from cStringIO import StringIO\n from plone.app.blob.content import ATBlob\n-from plone.app.testing.bbb import PloneTestCase as FunctionalTestCase\n+from plone.app.testing.bbb_at import PloneTestCase as FunctionalTestCase\n from plone.testing.z2 import Browser\n from Products.Archetypes import atapi\n from Products.Archetypes.interfaces.layer import ILayerContainer\ndiff --git a/Products/ATContentTypes/tests/test_base_profile.py b/Products/ATContentTypes/tests/test_base_profile.py\nindex b2f15be1..026f89c9 100644\n--- a/Products/ATContentTypes/tests/test_base_profile.py\n+++ b/Products/ATContentTypes/tests/test_base_profile.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.CMFCore.utils import getToolByName\n \n \ndiff --git a/Products/ATContentTypes/tests/test_content_profile.py b/Products/ATContentTypes/tests/test_content_profile.py\nindex 6a101f0a..44990e9c 100644\n--- a/Products/ATContentTypes/tests/test_content_profile.py\n+++ b/Products/ATContentTypes/tests/test_content_profile.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.ATContentTypes import setuphandlers\n \n \ndiff --git a/Products/ATContentTypes/tests/test_controlpanel.py b/Products/ATContentTypes/tests/test_controlpanel.py\nindex 8b925898..ade3b99f 100644\n--- a/Products/ATContentTypes/tests/test_controlpanel.py\n+++ b/Products/ATContentTypes/tests/test_controlpanel.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n \n \n class TestControlPanel(PloneTestCase):\ndiff --git a/Products/ATContentTypes/tests/test_doctests.py b/Products/ATContentTypes/tests/test_doctests.py\nindex e666f5a3..9d1acb57 100644\n--- a/Products/ATContentTypes/tests/test_doctests.py\n+++ b/Products/ATContentTypes/tests/test_doctests.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n \n-from plone.app.testing.bbb import PTC_FUNCTIONAL_TESTING\n+from plone.app.testing.bbb_at import PTC_FUNCTIONAL_TESTING\n from plone.testing import layered\n \n import doctest\ndiff --git a/Products/ATContentTypes/tests/test_portal_factory.py b/Products/ATContentTypes/tests/test_portal_factory.py\nindex 26baaff2..0267ba41 100644\n--- a/Products/ATContentTypes/tests/test_portal_factory.py\n+++ b/Products/ATContentTypes/tests/test_portal_factory.py\n@@ -6,7 +6,7 @@\n from plone.app.testing import TEST_USER_PASSWORD\n from Products.CMFCore.permissions import AddPortalContent\n from Products.CMFCore.permissions import ModifyPortalContent\n-from Products.CMFPlone.tests import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.PluggableAuthService.interfaces.plugins import IChallengePlugin\n \n import urlparse\n@@ -19,7 +19,7 @@ def sortTuple(t):\n ADD_DOC_PERM = 'ATContentTypes: Add Document'\n \n \n-class TestPortalFactory(PloneTestCase.PloneTestCase):\n+class TestPortalFactory(PloneTestCase):\n \n     def afterSetUp(self):\n         self.membership = self.portal.portal_membership\n@@ -141,7 +141,7 @@ def testTempFolderPermissions(self):\n         self.assertEqual(temp_roles, new_roles)\n \n \n-class TestCreateObject(PloneTestCase.PloneTestCase):\n+class TestCreateObject(PloneTestCase):\n \n     def testCreateObjectByDoCreate(self):\n         # doCreate should create the real object\n@@ -188,7 +188,7 @@ def testRenamePermission(self):\n             self.portal, self.portal, 'manage_renameObjects'))\n \n \n-class TestCreateObjectByURL(PloneTestCase.FunctionalTestCase):\n+class TestCreateObjectByURL(PloneTestCase):\n     '''Weeee, functional tests'''\n \n     def afterSetUp(self):\n@@ -273,7 +273,7 @@ def testUnauthorizedToViewEditFormOfNonFactoryObject(self):\n         self.assertEqual(response.getStatus(), 401)  # Unauthorized\n \n \n-class TestPortalFactoryTraverseByURL(PloneTestCase.FunctionalTestCase):\n+class TestPortalFactoryTraverseByURL(PloneTestCase):\n     '''Weeee, functional tests'''\n \n     def afterSetUp(self):\n"

Repository: Products.ATContentTypes


Branch: refs/heads/master
Date: 2018-09-27T17:18:37+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/Products.ATContentTypes/commit/1e3d962892db0c4e1a748c3c4584f6256bfdb2c8

Merge pull request #56 from plone/testlayer

Switch to new TestCase using AT after PloneTestcase is now DX

Files changed:
M CHANGES.rst
M Products/ATContentTypes/tests/atcttestcase.py
M Products/ATContentTypes/tests/testContentTypes.py
M Products/ATContentTypes/tests/test_atimage.py
M Products/ATContentTypes/tests/test_base_profile.py
M Products/ATContentTypes/tests/test_content_profile.py
M Products/ATContentTypes/tests/test_controlpanel.py
M Products/ATContentTypes/tests/test_doctests.py
M Products/ATContentTypes/tests/test_portal_factory.py

b"diff --git a/CHANGES.rst b/CHANGES.rst\nindex 1d0d9718..b13eae66 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -35,6 +35,10 @@ Bug fixes:\n - Handle no content icon in folder_tabular_view\n   [davisagli]\n \n+- Switch to new TestCase using AT after PloneTestcase is now DX.\n+  [pbauer]\n+\n+\n 2.3.6 (2017-06-26)\n ------------------\n \ndiff --git a/Products/ATContentTypes/tests/atcttestcase.py b/Products/ATContentTypes/tests/atcttestcase.py\nindex c087828d..95b8519d 100644\n--- a/Products/ATContentTypes/tests/atcttestcase.py\n+++ b/Products/ATContentTypes/tests/atcttestcase.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from plone.app.blob.markings import markAs\n from plone.app.testing import TEST_USER_ID as default_user\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.Archetypes.atapi import AttributeStorage\n from Products.Archetypes.atapi import DisplayList\n from Products.Archetypes.atapi import IdWidget\ndiff --git a/Products/ATContentTypes/tests/testContentTypes.py b/Products/ATContentTypes/tests/testContentTypes.py\nindex c61e788d..44826b2b 100644\n--- a/Products/ATContentTypes/tests/testContentTypes.py\n+++ b/Products/ATContentTypes/tests/testContentTypes.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.ATContentTypes.interfaces import IATContentType\n from Products.CMFPlone.tests import dummy\n from zope.i18nmessageid.message import Message\ndiff --git a/Products/ATContentTypes/tests/test_atimage.py b/Products/ATContentTypes/tests/test_atimage.py\nindex 140d74f6..0cc0057d 100644\n--- a/Products/ATContentTypes/tests/test_atimage.py\n+++ b/Products/ATContentTypes/tests/test_atimage.py\n@@ -1,7 +1,7 @@\n # -*- coding: utf-8 -*-\n from cStringIO import StringIO\n from plone.app.blob.content import ATBlob\n-from plone.app.testing.bbb import PloneTestCase as FunctionalTestCase\n+from plone.app.testing.bbb_at import PloneTestCase as FunctionalTestCase\n from plone.testing.z2 import Browser\n from Products.Archetypes import atapi\n from Products.Archetypes.interfaces.layer import ILayerContainer\ndiff --git a/Products/ATContentTypes/tests/test_base_profile.py b/Products/ATContentTypes/tests/test_base_profile.py\nindex b2f15be1..026f89c9 100644\n--- a/Products/ATContentTypes/tests/test_base_profile.py\n+++ b/Products/ATContentTypes/tests/test_base_profile.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.CMFCore.utils import getToolByName\n \n \ndiff --git a/Products/ATContentTypes/tests/test_content_profile.py b/Products/ATContentTypes/tests/test_content_profile.py\nindex 6a101f0a..44990e9c 100644\n--- a/Products/ATContentTypes/tests/test_content_profile.py\n+++ b/Products/ATContentTypes/tests/test_content_profile.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.ATContentTypes import setuphandlers\n \n \ndiff --git a/Products/ATContentTypes/tests/test_controlpanel.py b/Products/ATContentTypes/tests/test_controlpanel.py\nindex 8b925898..ade3b99f 100644\n--- a/Products/ATContentTypes/tests/test_controlpanel.py\n+++ b/Products/ATContentTypes/tests/test_controlpanel.py\n@@ -1,5 +1,5 @@\n # -*- coding: utf-8 -*-\n-from plone.app.testing.bbb import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n \n \n class TestControlPanel(PloneTestCase):\ndiff --git a/Products/ATContentTypes/tests/test_doctests.py b/Products/ATContentTypes/tests/test_doctests.py\nindex e666f5a3..9d1acb57 100644\n--- a/Products/ATContentTypes/tests/test_doctests.py\n+++ b/Products/ATContentTypes/tests/test_doctests.py\n@@ -1,6 +1,6 @@\n # -*- coding: utf-8 -*-\n \n-from plone.app.testing.bbb import PTC_FUNCTIONAL_TESTING\n+from plone.app.testing.bbb_at import PTC_FUNCTIONAL_TESTING\n from plone.testing import layered\n \n import doctest\ndiff --git a/Products/ATContentTypes/tests/test_portal_factory.py b/Products/ATContentTypes/tests/test_portal_factory.py\nindex 26baaff2..0267ba41 100644\n--- a/Products/ATContentTypes/tests/test_portal_factory.py\n+++ b/Products/ATContentTypes/tests/test_portal_factory.py\n@@ -6,7 +6,7 @@\n from plone.app.testing import TEST_USER_PASSWORD\n from Products.CMFCore.permissions import AddPortalContent\n from Products.CMFCore.permissions import ModifyPortalContent\n-from Products.CMFPlone.tests import PloneTestCase\n+from plone.app.testing.bbb_at import PloneTestCase\n from Products.PluggableAuthService.interfaces.plugins import IChallengePlugin\n \n import urlparse\n@@ -19,7 +19,7 @@ def sortTuple(t):\n ADD_DOC_PERM = 'ATContentTypes: Add Document'\n \n \n-class TestPortalFactory(PloneTestCase.PloneTestCase):\n+class TestPortalFactory(PloneTestCase):\n \n     def afterSetUp(self):\n         self.membership = self.portal.portal_membership\n@@ -141,7 +141,7 @@ def testTempFolderPermissions(self):\n         self.assertEqual(temp_roles, new_roles)\n \n \n-class TestCreateObject(PloneTestCase.PloneTestCase):\n+class TestCreateObject(PloneTestCase):\n \n     def testCreateObjectByDoCreate(self):\n         # doCreate should create the real object\n@@ -188,7 +188,7 @@ def testRenamePermission(self):\n             self.portal, self.portal, 'manage_renameObjects'))\n \n \n-class TestCreateObjectByURL(PloneTestCase.FunctionalTestCase):\n+class TestCreateObjectByURL(PloneTestCase):\n     '''Weeee, functional tests'''\n \n     def afterSetUp(self):\n@@ -273,7 +273,7 @@ def testUnauthorizedToViewEditFormOfNonFactoryObject(self):\n         self.assertEqual(response.getStatus(), 401)  # Unauthorized\n \n \n-class TestPortalFactoryTraverseByURL(PloneTestCase.FunctionalTestCase):\n+class TestPortalFactoryTraverseByURL(PloneTestCase):\n     '''Weeee, functional tests'''\n \n     def afterSetUp(self):\n"

