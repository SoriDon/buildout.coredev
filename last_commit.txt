Repository: mockup


Branch: refs/heads/master
Date: 2017-01-13T13:49:17+02:00
Author: Asko Soukka (datakurre) <asko.soukka@iki.fi>
Commit: https://github.com/plone/mockup/commit/4ac8a89a74ef586ac67e727fe0d177dc92ba6e72

Add better support for TinyMCE importcss_groups and importcss_selector_filter by interpreting configured filter strings as regular expressions

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 92e9cf9..d59a974 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -99,6 +99,11 @@ New:
 - Add select2 result class based on value of option so it can be styled
   [vangheem]
 
+- Add to interpret TinyMCE ``importcss_selector_filter`` and ``filter`` value
+  of each ``importcss_groups`` configuration value as RegExp value instead
+  of plain string to make importcss-plugin more configurable through pattern
+  [datakurre]
+
 Fixes:
 
 - Make ``pat-tooltip`` useable by it's own by including the necessary less files and reuse that one in other patterns.
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index fe49647..e83a385 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -391,6 +391,23 @@ define([
           };
         }
 
+        if (tinyOptions.importcss_selector_filter &&
+            tinyOptions.importcss_selector_filter.length) {
+          tinyOptions.importcss_selector_filter =
+            new RegExp(tinyOptions.importcss_selector_filter);
+        }
+
+        if (tinyOptions.importcss_groups &&
+            tinyOptions.importcss_groups.length) {
+          for(var i=0; i<tinyOptions.importcss_groups.length; i++){
+            if (tinyOptions.importcss_groups[i].filter &&
+                tinyOptions.importcss_groups[i].filter.length) {
+              tinyOptions.importcss_groups[i].filter =
+                new RegExp(tinyOptions.importcss_groups[i].filter);
+            }
+          }
+        }
+
         tinymce.init(tinyOptions);
         self.tiny = tinymce.get(self.tinyId);
 


Repository: mockup


Branch: refs/heads/master
Date: 2017-01-16T12:22:37+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/6fe9887b30265037a255d8c210a560d1873c3cfa

Merge pull request #728 from plone/datakurre-importcss_regexp

Add better support for TinyMCE importcss-plugin configuration through pattern

Files changed:
M CHANGES.rst
M mockup/patterns/tinymce/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index da8508b..c74de42 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -99,6 +99,11 @@ New:
 - Add select2 result class based on value of option so it can be styled
   [vangheem]
 
+- Add to interpret TinyMCE ``importcss_selector_filter`` and ``filter`` value
+  of each ``importcss_groups`` configuration value as RegExp value instead
+  of plain string to make importcss-plugin more configurable through pattern
+  [datakurre]
+
 Fixes:
 
 - Move tooltip pattern definition after bootstrapTooltip function definition.
diff --git a/mockup/patterns/tinymce/pattern.js b/mockup/patterns/tinymce/pattern.js
index fe49647..e83a385 100644
--- a/mockup/patterns/tinymce/pattern.js
+++ b/mockup/patterns/tinymce/pattern.js
@@ -391,6 +391,23 @@ define([
           };
         }
 
+        if (tinyOptions.importcss_selector_filter &&
+            tinyOptions.importcss_selector_filter.length) {
+          tinyOptions.importcss_selector_filter =
+            new RegExp(tinyOptions.importcss_selector_filter);
+        }
+
+        if (tinyOptions.importcss_groups &&
+            tinyOptions.importcss_groups.length) {
+          for(var i=0; i<tinyOptions.importcss_groups.length; i++){
+            if (tinyOptions.importcss_groups[i].filter &&
+                tinyOptions.importcss_groups[i].filter.length) {
+              tinyOptions.importcss_groups[i].filter =
+                new RegExp(tinyOptions.importcss_groups[i].filter);
+            }
+          }
+        }
+
         tinymce.init(tinyOptions);
         self.tiny = tinymce.get(self.tinyId);
 


