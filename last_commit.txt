Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-02-22T15:36:58+01:00
Author: Guido A.J. Stevens (gyst) <guido.stevens@cosent.nl>
Commit: https://github.com/plone/Products.CMFPlone/commit/5ced85888673e0491c5388e32d0624fa168a1769

move hero to content
fixes https://github.com/plone/Products.CMFPlone/issues/974
requires https://github.com/plone/plonetheme.barceloneta/pull/83

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/templates/plone-frontpage.pt
D Products/CMFPlone/browser/templates/hero.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index a5edf71..b545021 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -28,6 +28,10 @@ New:
 
 Fixes:
 
+- Move hero on welcome page from theme into managed content.
+  Issue https://github.com/plone/Products.CMFPlone/issues/974
+  [gyst]
+
 - Get ``email_from_name`` from the mail settings registry.
   Fixes https://github.com/plone/Products.CMFPlone/issues/1382
   [tmog]
diff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml
index c1bec77..2b70f9e 100644
--- a/Products/CMFPlone/browser/configure.zcml
+++ b/Products/CMFPlone/browser/configure.zcml
@@ -213,13 +213,6 @@
 
   <browser:page
       for="*"
-      name="hero"
-      permission="zope.Public"
-      template="templates/hero.pt"
-      />
-
-  <browser:page
-      for="*"
       name="footer"
       permission="zope.Public"
       template="templates/footer.pt"
diff --git a/Products/CMFPlone/browser/templates/hero.pt b/Products/CMFPlone/browser/templates/hero.pt
deleted file mode 100644
index d6871aa..0000000
--- a/Products/CMFPlone/browser/templates/hero.pt
+++ /dev/null
@@ -1,18 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      lang="en"
-      tal:omit-tag=""
-      i18n:domain="plone">
-
-<div class="principal" role="complementary">
-    <div class="container">
-        <div class="gigantic">
-          <h1 i18n:translate="">Welcome!</h1>
-          <p><a href="http://plone.com" class="context" role="button" target="_blank" i18n:translate="">Learn more about Plone</a></p>
-        </div>
-    </div>
-</div>
-
-</html>
\ No newline at end of file
diff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt
index 75abc2e..e64e70c 100644
--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt
+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt
@@ -7,7 +7,14 @@
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 </head>
 
-<body i18n:translate="front-text"><p class="discreet">
+<body i18n:translate="front-text">
+
+  <div class="hero">
+    <h1>Welcome!</h1>
+    <p><a class="context" href="http://plone.com" target="_blank">Learn more about Plone</a></p>
+  </div>
+  
+  <p class="discreet">
 If you're seeing this instead of the web site you were expecting, the owner of
 this web site has just installed Plone. Do not contact the Plone Team or the
 Plone support channels about this.


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-02-22T17:08:28+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/a74391d0f0cc90595760c9f5e6b2a5626d62aff7

Merge pull request #1374 from plone/hero_in_content

move hero to content

Files changed:
M CHANGES.rst
M Products/CMFPlone/browser/configure.zcml
M Products/CMFPlone/browser/templates/plone-frontpage.pt
D Products/CMFPlone/browser/templates/hero.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index a5edf71..b545021 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -28,6 +28,10 @@ New:
 
 Fixes:
 
+- Move hero on welcome page from theme into managed content.
+  Issue https://github.com/plone/Products.CMFPlone/issues/974
+  [gyst]
+
 - Get ``email_from_name`` from the mail settings registry.
   Fixes https://github.com/plone/Products.CMFPlone/issues/1382
   [tmog]
diff --git a/Products/CMFPlone/browser/configure.zcml b/Products/CMFPlone/browser/configure.zcml
index c1bec77..2b70f9e 100644
--- a/Products/CMFPlone/browser/configure.zcml
+++ b/Products/CMFPlone/browser/configure.zcml
@@ -213,13 +213,6 @@
 
   <browser:page
       for="*"
-      name="hero"
-      permission="zope.Public"
-      template="templates/hero.pt"
-      />
-
-  <browser:page
-      for="*"
       name="footer"
       permission="zope.Public"
       template="templates/footer.pt"
diff --git a/Products/CMFPlone/browser/templates/hero.pt b/Products/CMFPlone/browser/templates/hero.pt
deleted file mode 100644
index d6871aa..0000000
--- a/Products/CMFPlone/browser/templates/hero.pt
+++ /dev/null
@@ -1,18 +0,0 @@
-<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
-      xmlns:tal="http://xml.zope.org/namespaces/tal"
-      xmlns:metal="http://xml.zope.org/namespaces/metal"
-      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
-      lang="en"
-      tal:omit-tag=""
-      i18n:domain="plone">
-
-<div class="principal" role="complementary">
-    <div class="container">
-        <div class="gigantic">
-          <h1 i18n:translate="">Welcome!</h1>
-          <p><a href="http://plone.com" class="context" role="button" target="_blank" i18n:translate="">Learn more about Plone</a></p>
-        </div>
-    </div>
-</div>
-
-</html>
\ No newline at end of file
diff --git a/Products/CMFPlone/browser/templates/plone-frontpage.pt b/Products/CMFPlone/browser/templates/plone-frontpage.pt
index 75abc2e..e64e70c 100644
--- a/Products/CMFPlone/browser/templates/plone-frontpage.pt
+++ b/Products/CMFPlone/browser/templates/plone-frontpage.pt
@@ -7,7 +7,14 @@
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 </head>
 
-<body i18n:translate="front-text"><p class="discreet">
+<body i18n:translate="front-text">
+
+  <div class="hero">
+    <h1>Welcome!</h1>
+    <p><a class="context" href="http://plone.com" target="_blank">Learn more about Plone</a></p>
+  </div>
+  
+  <p class="discreet">
 If you're seeing this instead of the web site you were expecting, the owner of
 this web site has just installed Plone. Do not contact the Plone Team or the
 Plone support channels about this.


