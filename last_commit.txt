Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2024-02-22T20:40:09+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/fd5e5400db379135dc10ccad377f35f0fd6473f9

Implement PasswordWigdet adapter

Files changed:
A plone/app/z3cform/widgets/password.py
M plone/app/z3cform/interfaces.py
M plone/app/z3cform/widgets.zcml

b'diff --git a/plone/app/z3cform/interfaces.py b/plone/app/z3cform/interfaces.py\nindex 00be578..0c22c77 100644\n--- a/plone/app/z3cform/interfaces.py\n+++ b/plone/app/z3cform/interfaces.py\n@@ -103,6 +103,10 @@ class IEmailWidget(ITextWidget):\n     """Marker interface for the dumb email widget."""\n \n \n+class IPasswordWidget(ITextWidget):\n+    """Marker interface for the password widget."""\n+\n+\n class ISubmitWidget(ISubmitWidgetBase):\n     """Marker interface for SubmitWidget."""\n \ndiff --git a/plone/app/z3cform/widgets.zcml b/plone/app/z3cform/widgets.zcml\nindex fc63294..5fd76ff 100644\n--- a/plone/app/z3cform/widgets.zcml\n+++ b/plone/app/z3cform/widgets.zcml\n@@ -61,12 +61,6 @@\n            plone.app.z3cform.interfaces.IPloneFormLayer"\n       />\n \n-  <adapter\n-      factory=".widgets.text.TextFieldWidget"\n-      for="zope.schema.interfaces.IPassword\n-           plone.app.z3cform.interfaces.IPloneFormLayer"\n-      />\n-\n   <z3c:widgetTemplate\n       widget=".interfaces.ITextWidget"\n       template="templates/text_input.pt"\n@@ -292,6 +286,21 @@\n       mode="input"\n       />\n \n+\n+  <!-- password -->\n+  <adapter\n+      factory=".widgets.password.PasswordFieldWidget"\n+      for="zope.schema.interfaces.IPassword\n+           .interfaces.IPloneFormLayer"\n+      />\n+\n+  <z3c:widgetTemplate\n+      widget=".interfaces.IPasswordWidget"\n+      template="templates/password_input.pt"\n+      layer=".interfaces.IPloneFormLayer"\n+      mode="input"\n+      />\n+\n   <!-- submit -->\n   <adapter\n       factory=".widgets.submit.ButtonAction"\ndiff --git a/plone/app/z3cform/widgets/password.py b/plone/app/z3cform/widgets/password.py\nnew file mode 100644\nindex 0000000..8b226e6\n--- /dev/null\n+++ b/plone/app/z3cform/widgets/password.py\n@@ -0,0 +1,19 @@\n+from plone.app.z3cform.interfaces import IPasswordWidget\n+from plone.app.z3cform.widgets.base import HTMLTextInputWidget\n+from z3c.form.interfaces import IFieldWidget\n+from z3c.form.widget import FieldWidget\n+from z3c.form.widget import Widget\n+from zope.interface import implementer\n+from zope.interface import implementer_only\n+\n+\n+@implementer_only(IPasswordWidget)\n+class PasswordWidget(HTMLTextInputWidget, Widget):\n+    """enhanced text widget"""\n+\n+    klass = "password-widget"\n+\n+\n+@implementer(IFieldWidget)\n+def PasswordFieldWidget(field, request):\n+    return FieldWidget(field, PasswordWidget(request))\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2024-02-22T20:42:53+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.z3cform/commit/aa1ee8a93f2b3a78fc6ed4399a1434324bac94e0

changenote

Files changed:
A news/193.bugfix

b'diff --git a/news/193.bugfix b/news/193.bugfix\nnew file mode 100644\nindex 0000000..d7a6aed\n--- /dev/null\n+++ b/news/193.bugfix\n@@ -0,0 +1,2 @@\n+Implement missing PasswordWidget adapter.\n+[petschki]\n'

Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2024-02-27T17:08:32+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.z3cform/commit/cb54d4253fa874d87cbf86d880462a8715c3d8fc

Merge pull request #193 from plone/password-widget

Implement missing PasswordWigdet adapter

Files changed:
A news/193.bugfix
A plone/app/z3cform/widgets/password.py
M plone/app/z3cform/interfaces.py
M plone/app/z3cform/widgets.zcml

b'diff --git a/news/193.bugfix b/news/193.bugfix\nnew file mode 100644\nindex 0000000..d7a6aed\n--- /dev/null\n+++ b/news/193.bugfix\n@@ -0,0 +1,2 @@\n+Implement missing PasswordWidget adapter.\n+[petschki]\ndiff --git a/plone/app/z3cform/interfaces.py b/plone/app/z3cform/interfaces.py\nindex 00be578..0c22c77 100644\n--- a/plone/app/z3cform/interfaces.py\n+++ b/plone/app/z3cform/interfaces.py\n@@ -103,6 +103,10 @@ class IEmailWidget(ITextWidget):\n     """Marker interface for the dumb email widget."""\n \n \n+class IPasswordWidget(ITextWidget):\n+    """Marker interface for the password widget."""\n+\n+\n class ISubmitWidget(ISubmitWidgetBase):\n     """Marker interface for SubmitWidget."""\n \ndiff --git a/plone/app/z3cform/widgets.zcml b/plone/app/z3cform/widgets.zcml\nindex fc63294..5fd76ff 100644\n--- a/plone/app/z3cform/widgets.zcml\n+++ b/plone/app/z3cform/widgets.zcml\n@@ -61,12 +61,6 @@\n            plone.app.z3cform.interfaces.IPloneFormLayer"\n       />\n \n-  <adapter\n-      factory=".widgets.text.TextFieldWidget"\n-      for="zope.schema.interfaces.IPassword\n-           plone.app.z3cform.interfaces.IPloneFormLayer"\n-      />\n-\n   <z3c:widgetTemplate\n       widget=".interfaces.ITextWidget"\n       template="templates/text_input.pt"\n@@ -292,6 +286,21 @@\n       mode="input"\n       />\n \n+\n+  <!-- password -->\n+  <adapter\n+      factory=".widgets.password.PasswordFieldWidget"\n+      for="zope.schema.interfaces.IPassword\n+           .interfaces.IPloneFormLayer"\n+      />\n+\n+  <z3c:widgetTemplate\n+      widget=".interfaces.IPasswordWidget"\n+      template="templates/password_input.pt"\n+      layer=".interfaces.IPloneFormLayer"\n+      mode="input"\n+      />\n+\n   <!-- submit -->\n   <adapter\n       factory=".widgets.submit.ButtonAction"\ndiff --git a/plone/app/z3cform/widgets/password.py b/plone/app/z3cform/widgets/password.py\nnew file mode 100644\nindex 0000000..8b226e6\n--- /dev/null\n+++ b/plone/app/z3cform/widgets/password.py\n@@ -0,0 +1,19 @@\n+from plone.app.z3cform.interfaces import IPasswordWidget\n+from plone.app.z3cform.widgets.base import HTMLTextInputWidget\n+from z3c.form.interfaces import IFieldWidget\n+from z3c.form.widget import FieldWidget\n+from z3c.form.widget import Widget\n+from zope.interface import implementer\n+from zope.interface import implementer_only\n+\n+\n+@implementer_only(IPasswordWidget)\n+class PasswordWidget(HTMLTextInputWidget, Widget):\n+    """enhanced text widget"""\n+\n+    klass = "password-widget"\n+\n+\n+@implementer(IFieldWidget)\n+def PasswordFieldWidget(field, request):\n+    return FieldWidget(field, PasswordWidget(request))\n'

