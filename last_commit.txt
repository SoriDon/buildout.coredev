Repository: plone.app.testing


Branch: refs/heads/master
Date: 2018-10-17T14:31:12+02:00
Author: Philip Bauer (pbauer) <bauer@starzel.de>
Commit: https://github.com/plone/plone.app.testing/commit/3dbb144dc8589897f221eab72a3d9ee672c63421

only import Products.ExternalEditor and plone.app.folder in py2

Files changed:
M src/plone/app/testing/layers.py

b'diff --git a/src/plone/app/testing/layers.py b/src/plone/app/testing/layers.py\nindex 8167f5c..6959205 100644\n--- a/src/plone/app/testing/layers.py\n+++ b/src/plone/app/testing/layers.py\n@@ -24,6 +24,8 @@\n from zope.event import notify\n from zope.traversing.interfaces import BeforeTraverseEvent\n \n+import six\n+\n \n class PloneFixture(Layer):\n     """This layer sets up a basic Plone site, with:\n@@ -54,7 +56,6 @@ class PloneFixture(Layer):\n         (\'Products.CMFPlacefulWorkflow\', {\'loadZCML\': True}, ),\n         (\'Products.MimetypesRegistry\', {\'loadZCML\': True}, ),\n         (\'Products.PortalTransforms\', {\'loadZCML\': True}, ),\n-        (\'Products.ExternalEditor\', {\'loadZCML\': True}, ),\n         (\'Products.ExtendedPathIndex\', {\'loadZCML\': True}, ),\n         (\'Products.ResourceRegistries\', {\'loadZCML\': True}, ),\n         (\'Products.SiteAccess\', {\'loadZCML\': False}, ),\n@@ -62,10 +63,14 @@ class PloneFixture(Layer):\n         (\'Products.CMFDiffTool\', {\'loadZCML\': True}, ),\n         (\'plone.i18n\', {\'loadZCML\': True, \'install\': False}, ),\n         (\'plonetheme.barceloneta\', {\'loadZCML\': True, \'install\': False}, ),\n-        (\'plone.app.folder\', {\'loadZCML\': True}, ),\n         (\'Products.CMFPlone\', {\'loadZCML\': True}, ),\n         (\'Products.PythonScripts\', {\'loadZCML\': False}, ),\n     )\n+    if six.PY2:\n+        products += (\n+            (\'Products.ExternalEditor\', {\'loadZCML\': True}, ),\n+            (\'plone.app.folder\', {\'loadZCML\': True}, ),\n+        )\n \n     # try:\n     #    import Products.PasswordResetTool\n'

