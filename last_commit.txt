Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-01T08:35:35+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/78b5a7d4148506380bc3e65b7bd67ea2eb2170f8

folder_listing and folder_summary cleanup and float fix

Files changed:
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_summary.pt

b'diff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex eba5dc9f..5c61655f 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -24,7 +24,7 @@\n                          thumb_scale_list python:view.get_thumb_scale_list();\n                          thumb_scale_table python:view.get_thumb_scale_table();\n                          thumb_scale_summary python:view.get_thumb_scale_summary();\n-                         img_class python:\'thumb-{} float-end\'.format(thumb_scale_list);\n+                         img_class python:\'thumb-{} image-responsive\'.format(thumb_scale_list);\n                          showicons python:view.show_icons()">\n       <tal:listing condition="python:batch">\n         <div class="entries" metal:define-slot="entries"\n@@ -51,17 +51,14 @@\n                 ">\n               <metal:block define-slot="entry">\n \n-                <article class="mb-3">\n+                <article class="mb-3 row">\n \n-                  <div metal:define-macro="listitem">\n+                  <div class="col-9" metal:define-macro="listitem">\n \n                       <div class="mb-1">\n                         <a tal:attributes="href python:item_link; class string:$item_type_class $item_wf_state_class url; title item_type" tal:content="python:item_title">\n                           Item Title\n                         </a>\n-                        <a tal:attributes="href python:item_link;" tal:condition="python:item_has_image and thumb_scale_list">\n-                          <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_list, css_class=img_class)" />\n-                        </a>\n                       </div>\n \n                       <metal:block metal:define-macro="document_byline">\n@@ -112,12 +109,16 @@\n                       </div>\n                       </metal:block>\n \n+                      <p class="me-3" tal:condition="python:item_description" tal:content="python:item_description">\n+                        description\n+                      </p>\n                   </div>\n \n-                  <p class="me-3" tal:condition="python:item_description" tal:content="python:item_description">\n-                    description\n-                  </p>\n-\n+                  <div class="col-3 text-end">\n+                    <a tal:attributes="href python:item_link;" tal:condition="python:item_has_image and thumb_scale_list">\n+                      <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_list, css_class=img_class)" />\n+                    </a>\n+                  </div>\n                 </article>\n \n               </metal:block>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex c16b08ff..379d6fd4 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -17,9 +17,9 @@\n \n       <metal:entry fill-slot="entry">\n \n-        <article class="d-flex mb-3">\n+        <article class="row mb-3">\n \n-          <div class="me-3">\n+          <div class="col-9">\n \n           <h2 metal:define-macro="listitem">\n             <a class="summary url" tal:attributes="href item_link; title item_type" tal:content="item_title">\n@@ -45,9 +45,9 @@\n \n           </div>\n \n-          <div tal:define="thumb_url python:item_url + \'/@@images/image/\' + thumb_scale_summary;" tal:condition="python: item_has_image and thumb_scale_summary" tal:attributes="class python: \'tileImage\' if item_description else \'tileImageNoFloat\'">\n+          <div class="col-3" tal:define="thumb_url python:item_url + \'/@@images/image/\' + thumb_scale_summary;" tal:condition="python: item_has_image and thumb_scale_summary">\n             <a tal:attributes="href item_link">\n-              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'thumb-\' + thumb_scale_summary)" />\n+              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive w-100 thumb-\' + thumb_scale_summary)" />\n             </a>\n           </div>\n \n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-01T08:36:34+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/a29733ba3ed449b86ab36364602fa4c752abcb3e

changelog

Files changed:
A news/638.bugfix

b'diff --git a/news/638.bugfix b/news/638.bugfix\nnew file mode 100644\nindex 00000000..bbf0ec52\n--- /dev/null\n+++ b/news/638.bugfix\n@@ -0,0 +1,2 @@\n+listing_view and summary_view cleanup and float fix\n+[petschki]\n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-01T09:47:12+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.contenttypes/commit/94f09c69be963c8529fbb5b992e1ec27be4ba8ea

full width when no item_image

Files changed:
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_summary.pt

b'diff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex 5c61655f..0d90cb03 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -53,7 +53,7 @@\n \n                 <article class="mb-3 row">\n \n-                  <div class="col-9" metal:define-macro="listitem">\n+                  <div class="col" metal:define-macro="listitem">\n \n                       <div class="mb-1">\n                         <a tal:attributes="href python:item_link; class string:$item_type_class $item_wf_state_class url; title item_type" tal:content="python:item_title">\n@@ -114,8 +114,8 @@\n                       </p>\n                   </div>\n \n-                  <div class="col-3 text-end">\n-                    <a tal:attributes="href python:item_link;" tal:condition="python:item_has_image and thumb_scale_list">\n+                  <div class="col-3 text-end" tal:condition="python:item_has_image and thumb_scale_list">\n+                    <a tal:attributes="href python:item_link;">\n                       <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_list, css_class=img_class)" />\n                     </a>\n                   </div>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex 379d6fd4..95873a87 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -19,7 +19,7 @@\n \n         <article class="row mb-3">\n \n-          <div class="col-9">\n+          <div class="col">\n \n           <h2 metal:define-macro="listitem">\n             <a class="summary url" tal:attributes="href item_link; title item_type" tal:content="item_title">\n@@ -47,7 +47,7 @@\n \n           <div class="col-3" tal:define="thumb_url python:item_url + \'/@@images/image/\' + thumb_scale_summary;" tal:condition="python: item_has_image and thumb_scale_summary">\n             <a tal:attributes="href item_link">\n-              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive w-100 thumb-\' + thumb_scale_summary)" />\n+              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary)" />\n             </a>\n           </div>\n \n'

Repository: plone.app.contenttypes


Branch: refs/heads/master
Date: 2022-04-06T17:06:14+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.contenttypes/commit/08b6cea4e17a5588d2f5cdbe706ca280f528c481

Merge pull request #638 from plone/fix-folderlisting-float

folder_listing and folder_summary cleanup and float fix

Files changed:
A news/638.bugfix
M plone/app/contenttypes/browser/templates/listing.pt
M plone/app/contenttypes/browser/templates/listing_summary.pt

b'diff --git a/news/638.bugfix b/news/638.bugfix\nnew file mode 100644\nindex 00000000..bbf0ec52\n--- /dev/null\n+++ b/news/638.bugfix\n@@ -0,0 +1,2 @@\n+listing_view and summary_view cleanup and float fix\n+[petschki]\ndiff --git a/plone/app/contenttypes/browser/templates/listing.pt b/plone/app/contenttypes/browser/templates/listing.pt\nindex eba5dc9f..0d90cb03 100644\n--- a/plone/app/contenttypes/browser/templates/listing.pt\n+++ b/plone/app/contenttypes/browser/templates/listing.pt\n@@ -24,7 +24,7 @@\n                          thumb_scale_list python:view.get_thumb_scale_list();\n                          thumb_scale_table python:view.get_thumb_scale_table();\n                          thumb_scale_summary python:view.get_thumb_scale_summary();\n-                         img_class python:\'thumb-{} float-end\'.format(thumb_scale_list);\n+                         img_class python:\'thumb-{} image-responsive\'.format(thumb_scale_list);\n                          showicons python:view.show_icons()">\n       <tal:listing condition="python:batch">\n         <div class="entries" metal:define-slot="entries"\n@@ -51,17 +51,14 @@\n                 ">\n               <metal:block define-slot="entry">\n \n-                <article class="mb-3">\n+                <article class="mb-3 row">\n \n-                  <div metal:define-macro="listitem">\n+                  <div class="col" metal:define-macro="listitem">\n \n                       <div class="mb-1">\n                         <a tal:attributes="href python:item_link; class string:$item_type_class $item_wf_state_class url; title item_type" tal:content="python:item_title">\n                           Item Title\n                         </a>\n-                        <a tal:attributes="href python:item_link;" tal:condition="python:item_has_image and thumb_scale_list">\n-                          <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_list, css_class=img_class)" />\n-                        </a>\n                       </div>\n \n                       <metal:block metal:define-macro="document_byline">\n@@ -112,12 +109,16 @@\n                       </div>\n                       </metal:block>\n \n+                      <p class="me-3" tal:condition="python:item_description" tal:content="python:item_description">\n+                        description\n+                      </p>\n                   </div>\n \n-                  <p class="me-3" tal:condition="python:item_description" tal:content="python:item_description">\n-                    description\n-                  </p>\n-\n+                  <div class="col-3 text-end" tal:condition="python:item_has_image and thumb_scale_list">\n+                    <a tal:attributes="href python:item_link;">\n+                      <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_list, css_class=img_class)" />\n+                    </a>\n+                  </div>\n                 </article>\n \n               </metal:block>\ndiff --git a/plone/app/contenttypes/browser/templates/listing_summary.pt b/plone/app/contenttypes/browser/templates/listing_summary.pt\nindex c16b08ff..95873a87 100644\n--- a/plone/app/contenttypes/browser/templates/listing_summary.pt\n+++ b/plone/app/contenttypes/browser/templates/listing_summary.pt\n@@ -17,9 +17,9 @@\n \n       <metal:entry fill-slot="entry">\n \n-        <article class="d-flex mb-3">\n+        <article class="row mb-3">\n \n-          <div class="me-3">\n+          <div class="col">\n \n           <h2 metal:define-macro="listitem">\n             <a class="summary url" tal:attributes="href item_link; title item_type" tal:content="item_title">\n@@ -45,9 +45,9 @@\n \n           </div>\n \n-          <div tal:define="thumb_url python:item_url + \'/@@images/image/\' + thumb_scale_summary;" tal:condition="python: item_has_image and thumb_scale_summary" tal:attributes="class python: \'tileImage\' if item_description else \'tileImageNoFloat\'">\n+          <div class="col-3" tal:define="thumb_url python:item_url + \'/@@images/image/\' + thumb_scale_summary;" tal:condition="python: item_has_image and thumb_scale_summary">\n             <a tal:attributes="href item_link">\n-              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'thumb-\' + thumb_scale_summary)" />\n+              <img tal:replace="structure python:image_scale.tag(item, \'image\', scale=thumb_scale_summary, css_class=\'image-responsive thumb-\' + thumb_scale_summary)" />\n             </a>\n           </div>\n \n'

