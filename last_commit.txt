Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2016-12-08T16:05:49+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/e10a8372736e9f3a1bea9ca10a507cb9a69f241d

fix: catch notfound for non existing resources in bundle

Files changed:
M Products/CMFPlone/resources/bundle.py

diff --git a/Products/CMFPlone/resources/bundle.py b/Products/CMFPlone/resources/bundle.py
index f7eab61..eab92a8 100644
--- a/Products/CMFPlone/resources/bundle.py
+++ b/Products/CMFPlone/resources/bundle.py
@@ -1,11 +1,12 @@
 # -*- coding: utf-8 -*-
+from datetime import datetime
 from plone.resource.directory import FilesystemResourceDirectory
 from plone.resource.file import FilesystemFile
 from Products.CMFCore.FSFile import FSFile
 from Products.Five.browser.resource import DirectoryResource
 from Products.Five.browser.resource import FileResource
+from zExceptions import NotFound
 from zope.component.hooks import getSite
-from datetime import datetime
 
 import os
 
@@ -31,7 +32,10 @@ def _real_path(self, ctx):
             resource_path = self.data.jscompilation
         else:
             resource_path = self.data.csscompilation
-        resource = getSite().restrictedTraverse(resource_path)
+        try:
+            resource = getSite().restrictedTraverse(resource_path)
+        except NotFound:
+            return None, None
         if resource.__module__ == 'Products.Five.metaclass':
             try:
                 return 'fs', resource.chooseContext().path


