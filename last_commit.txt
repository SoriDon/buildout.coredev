Repository: plone.restapi


Branch: refs/heads/master
Date: 2022-05-06T15:13:03+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/49cc786159acb2d152117aa77d8511a97345c630

Upgrade to Plone 6.0.0a4. Remove CMFPlone checkout. All credits go toâ€¦ (#1410)

* Upgrade to Plone 6.0.0a4. Remove CMFPlone checkout. All credits go to Maurits.

* Fix requirements-5.2.txt

* Add requirements-6.0.txt

Files changed:
A requirements-5.2.txt
A requirements-6.0.txt
M .github/workflows/tests.yml
M plone-6.0.x.cfg
D requirements.txt

b'diff --git a/.github/workflows/tests.yml b/.github/workflows/tests.yml\nindex 5e7a4dff2..9fdf80b32 100644\n--- a/.github/workflows/tests.yml\n+++ b/.github/workflows/tests.yml\n@@ -42,7 +42,7 @@ jobs:\n       - run: pip install virtualenv\n       - run: pip install wheel\n       - name: pip install\n-        run: pip install -r requirements.txt -r requirements-docs.txt\n+        run: pip install -r requirements-${{ matrix.plone-version }}.txt -r requirements-docs.txt\n \n       # buildout\n       - name: buildout\ndiff --git a/plone-6.0.x.cfg b/plone-6.0.x.cfg\nindex 6ab61a6ad..ff6dcdf4c 100644\n--- a/plone-6.0.x.cfg\n+++ b/plone-6.0.x.cfg\n@@ -1,40 +1,34 @@\n [buildout]\n extensions = mr.developer\n extends =\n-    https://dist.plone.org/release/6.0.0a3/versions.cfg\n+    https://dist.plone.org/release/6.0.0a4/versions.cfg\n     base.cfg\n-find-links = https://dist.plone.org/release/6.0.0a3/\n+find-links = https://dist.plone.org/release/6.0.0a4/\n versions=versions\n auto-checkout =\n-    Products.CMFPlone\n+#    Products.CMFPlone\n always-checkout = true\n \n+[buildout:python37]\n+parts =\n+    test\n+    code-analysis\n+\n [sources]\n Products.CMFPlone = git https://github.com/plone/Products.CMFPlone.git rev=1103e16165ede181eec0b1a27b9c5a64e0046172\n \n [instance]\n recipe = plone.recipe.zope2instance\n zodb-temporary-storage = off\n-# On March 24 2022, all ES6 stuff was merged.\n-# Since then, mockup is no longer a Python package and is not pulled in by CMFPlone\n-# The plone.app.widgets pinned in 6.0.0a3 still tries to import it.\n-# So temporarily include the egg explicitly, until Plone 6.0.0a4 is out.\n-# Alternative would be to add plone.app.widgets to the checkouts.\n-eggs += mockup\n \n [versions]\n-# we need the new traversal\n-plone.rest = 2.0.0a3\n-\n-# We need newer plone.app.testing to fix test setup errors like this:\n-# ZODB.POSException.POSKeyError: \'RequestContainer\' object has no attribute \'adapters\'\n-plone.app.testing = 7.0.0a2\n-\n black = 21.7b0\n \n # cffi 1.14.3 fails on apple m1\n # cffi 1.14.4 fails with "ModuleNotFoundError: No module named \'_cffi_backend\'"\n cffi = 1.14.6\n \n-# Error: The requirement (\'importlib-metadata<4.3\') is not allowed by your [versions] constraint (4.5.0)\n+[versions:python37]\n+# Requirement of flake8>=2.4.0: importlib-metadata<4.3\n+# Error: The requirement (\'importlib-metadata<4.3\') is not allowed by your [versions] constraint (4.11.2)\n importlib-metadata = 4.2.0\ndiff --git a/requirements.txt b/requirements-5.2.txt\nsimilarity index 100%\nrename from requirements.txt\nrename to requirements-5.2.txt\ndiff --git a/requirements-6.0.txt b/requirements-6.0.txt\nnew file mode 100644\nindex 000000000..62c99aa74\n--- /dev/null\n+++ b/requirements-6.0.txt\n@@ -0,0 +1,12 @@\n+# from https://dist.plone.org/release/6.0.0a4/requirements.txt\n+setuptools==62.0.0\n+zc.buildout==3.0.0rc3\n+pip==22.0.4\n+wheel==0.37.1\n+\n+# Windows specific down here (has to be installed here, fails in buildout)\n+# Dependency of zope.sendmail:\n+pywin32 ; platform_system == \'Windows\'\n+\n+# SSL Certs on windows, because Python is missing them otherwise:\n+certifi ; platform_system == \'Windows\'\n\\ No newline at end of file\n'

