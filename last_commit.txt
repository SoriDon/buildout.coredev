Repository: mockup


Branch: refs/heads/master
Date: 2017-02-15T22:18:46+01:00
Author: Diederik Veeze (didrix) <d.veeze@zestsoftware.nl>
Commit: https://github.com/plone/mockup/commit/b585658eaf21353f4490b375936e5f9646626153

Add srcset attribute to image modal

Fall back on empty string if image has no data-modal-srcset attribute

Files changed:
M CHANGES.rst
M mockup/patterns/modal/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 86ddb0e..8afde35 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -118,6 +118,9 @@ New:
 - Add an option to set the path operator in QueryHelp and tinymce pattern.
   [Gagaro]
 
+- Add srcset attribute to image modal
+  [didrix]
+
 Fixes:
 
 - Change ``bool`` function in mockup-utils to allow for truthy values and match on falsy values.
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 3fa97b1..5164493 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -608,8 +608,9 @@ define([
       var self = this;
       self.$wrapper.addClass('image-modal');
       var src = self.$el.attr('href');
+      var srcset = self.$el.attr('data-modal-srcset') || '';
       // XXX aria?
-      self.$raw = $('<div><h1>Image</h1><div id="content"><div class="modal-image"><img src="' + src + '" /></div></div></div>');
+      self.$raw = $('<div><h1>Image</h1><div id="content"><div class="modal-image"><img src="' + src + '" srcset="' + srcset + '" /></div></div></div>');
       self._show();
     },
 


Repository: mockup


Branch: refs/heads/master
Date: 2017-02-23T12:13:18+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/mockup/commit/7f4eb605a899805a6c200ed0bc16b67bc55c9b1b

Merge pull request #679 from plone/plip-1483-retina-image-scales

Plip 1483 retina image scales

Files changed:
M CHANGES.rst
M mockup/patterns/modal/pattern.js

diff --git a/CHANGES.rst b/CHANGES.rst
index 7cd4900..d964144 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -134,6 +134,9 @@ New:
 - Add an option to set the path operator in QueryHelp and relateditem pattern.
   [Gagaro]
 
+- Add srcset attribute to image modal
+  [didrix]
+
 Fixes:
 
 - Change ``bool`` function in mockup-utils to allow for truthy values and match on falsy values.
diff --git a/mockup/patterns/modal/pattern.js b/mockup/patterns/modal/pattern.js
index 3fa97b1..5164493 100644
--- a/mockup/patterns/modal/pattern.js
+++ b/mockup/patterns/modal/pattern.js
@@ -608,8 +608,9 @@ define([
       var self = this;
       self.$wrapper.addClass('image-modal');
       var src = self.$el.attr('href');
+      var srcset = self.$el.attr('data-modal-srcset') || '';
       // XXX aria?
-      self.$raw = $('<div><h1>Image</h1><div id="content"><div class="modal-image"><img src="' + src + '" /></div></div></div>');
+      self.$raw = $('<div><h1>Image</h1><div id="content"><div class="modal-image"><img src="' + src + '" srcset="' + srcset + '" /></div></div></div>');
       self._show();
     },
 


