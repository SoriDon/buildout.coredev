Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-12-22T11:59:00+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/ce97ab998b73cae006489b7cdb76831069f6de68

Fixed Forbidden error in users and groups overview.

This is when using it as Site Administrator.  This could happen when
there are users that inherit the Manager role from the Administrators
group.

Fixes issue #1293.

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 474f38c..b267f39 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,12 @@ New:
 
 Fixes:
 
+- Fixed Forbidden error when using the users and groups overview as
+  Site Administrator.  This could happen when there are users that
+  inherit the Manager role from the Administrators group.
+  Fixes issue https://github.com/plone/Products.CMFPlone/issues/1293
+  [maurits]
+
 - Fixed Unauthorized error in folder_full_view for anonymous users.
   Fixes issue https://github.com/plone/Products.CMFPlone/issues/1292
   [maurits]
diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
index 28418fb..f71fcdf 100644
--- a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
@@ -146,7 +146,7 @@
                             <input type="hidden"
                                 name="users.roles:list:records"
                                 value="Manager"
-                                tal:condition="python:explicit and not enabled and not inherited"
+                                tal:condition="python:inherited"
                                 tal:attributes="value portal_role" />
                             <img tal:condition="inherited" tal:replace="structure context/site_icon.png" />
                           </tal:block>
@@ -238,4 +238,3 @@
 
 </body>
 </html>
-


Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2015-12-22T13:30:06+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/757a00e91b694770fd8e886dd4efd553b54d35e1

Merge pull request #1296 from plone/issue-1293

Fixed Forbidden error in users and groups overview.

Files changed:
M CHANGES.rst
M Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt

diff --git a/CHANGES.rst b/CHANGES.rst
index 474f38c..b267f39 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,6 +14,12 @@ New:
 
 Fixes:
 
+- Fixed Forbidden error when using the users and groups overview as
+  Site Administrator.  This could happen when there are users that
+  inherit the Manager role from the Administrators group.
+  Fixes issue https://github.com/plone/Products.CMFPlone/issues/1293
+  [maurits]
+
 - Fixed Unauthorized error in folder_full_view for anonymous users.
   Fixes issue https://github.com/plone/Products.CMFPlone/issues/1292
   [maurits]
diff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
index 28418fb..f71fcdf 100644
--- a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.pt
@@ -146,7 +146,7 @@
                             <input type="hidden"
                                 name="users.roles:list:records"
                                 value="Manager"
-                                tal:condition="python:explicit and not enabled and not inherited"
+                                tal:condition="python:inherited"
                                 tal:attributes="value portal_role" />
                             <img tal:condition="inherited" tal:replace="structure context/site_icon.png" />
                           </tal:block>
@@ -238,4 +238,3 @@
 
 </body>
 </html>
-


