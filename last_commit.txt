Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2021-10-08T08:12:11+02:00
Author: agitator (agitator) <agitator@users.noreply.github.com>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/e2454df41fd5b83ade23b44d7bd14df7dc99bba0

Npm packaging (#251)

* import bootstrap from node_modules and use --load-path=node_modules

* create first npm release

Files changed:
A .npmignore
A NPM_RELEASE.rst
A README.md
A news/251.feature
M .gitignore
M package-lock.json
M package.json
M scss/base.scss

b'diff --git a/.gitignore b/.gitignore\nindex b1dc7663..21471f0b 100644\n--- a/.gitignore\n+++ b/.gitignore\n@@ -7,3 +7,4 @@ node_modules\n .idea\n plonetheme/barceloneta/static/vendor/\n plonetheme/barceloneta/static/barceloneta.css.map\n+.vscode\ndiff --git a/.npmignore b/.npmignore\nnew file mode 100644\nindex 00000000..9364c9f7\n--- /dev/null\n+++ b/.npmignore\n@@ -0,0 +1,18 @@\n+*.py\n+*.rst\n+.vscode/\n+/news/\n+/node_modules/\n+/plonetheme.barceloneta.egg-info/\n+/plonetheme/\n+/scss/legacy/\n+CHANGES.rst\n+CONTRIBUTING.rst\n+MANIFEST.in\n+NOTES_TO_DO.rst\n+NPM_RELEASE.rst\n+README.rst \n+index.html\n+pyproject.toml\n+setup.cfg\n+setup.py\n\\ No newline at end of file\ndiff --git a/NPM_RELEASE.rst b/NPM_RELEASE.rst\nnew file mode 100644\nindex 00000000..6b107883\n--- /dev/null\n+++ b/NPM_RELEASE.rst\n@@ -0,0 +1,15 @@\n+========================\n+NPM Release Instructions\n+========================\n+\n+------------\n+Pre-Releases\n+------------\n+\n+Based on https://survivejs.com/maintenance/packaging/publishing/#publishing-a-pre-release-version\n+\n+    - Change version in package.json to correspondig version in setup.py\n+    - You can also use `npm version 3.0.0-alpha5` - This will change the version in package.json and create a git tag.\n+    - `npm publish --tag alpha` - Publish the package under alpha tag.\n+\n+To consume the test version, users have to use `npm install @plone/plonetheme-barceloneta-base@alpha`.\n\\ No newline at end of file\ndiff --git a/README.md b/README.md\nnew file mode 100644\nindex 00000000..7ff834e2\n--- /dev/null\n+++ b/README.md\n@@ -0,0 +1,24 @@\n+# Barceloneta\n+\n+Classic theme resources for Plone 6 - based on Bootstrap 5\n+\n+This package provides scss resources to build your own theme based on the Plone default theme for (backend rendered) Classic UI of Plone.\n+\n+Latest version on [npmjs.com](https://www.npmjs.com/package/@plone/plonetheme-barceloneta)\n+\n+## Documentation\n+Plonetheme.barceloneta documentation http://docs.plone.org/adapt-and-extend/theming/barceloneta.html is part of the official Plone documentation.\n+\n+## Changelog\n+https://github.com/plone/plonetheme.barceloneta/blob/master/CHANGES.rst\n+\n+## Source Code and Contribution\n+\n+### Contributors\n+Please read the document [Process for Plone core\'s development](http://docs.plone.org/develop/coredev/docs/index.html). Also consult the section about contribution in the [plone.api contributors documentation](http://docs.plone.org/develop/plone.api/docs/contribute/index.html).\n+\n+### Source-Code\n+Plone code repository hosted at Github https://github.com/plone/plonetheme.barceloneta.\n+\n+### Issues\n+Please use the [Issue-Tracker](https://github.com/plone/plonetheme.barceloneta/issues)\ndiff --git a/news/251.feature b/news/251.feature\nnew file mode 100644\nindex 00000000..e7569e4f\n--- /dev/null\n+++ b/news/251.feature\n@@ -0,0 +1,2 @@\n+Added npm packaging info\n+[agitator]\n\\ No newline at end of file\ndiff --git a/package-lock.json b/package-lock.json\nindex 119cddfb..e8399684 100644\n--- a/package-lock.json\n+++ b/package-lock.json\n@@ -1,6 +1,6 @@\n {\n   "name": "plonetheme.barceloneta",\n-  "version": "1.0.0",\n+  "version": "3.0.0-alpha5",\n   "lockfileVersion": 1,\n   "requires": true,\n   "dependencies": {\ndiff --git a/package.json b/package.json\nindex 85b32a79..9a69559f 100644\n--- a/package.json\n+++ b/package.json\n@@ -1,8 +1,23 @@\n {\n-  "name": "plonetheme.barceloneta",\n-  "version": "1.0.0",\n-  "main": "index.js",\n+  "name": "@plone/plonetheme-barceloneta-base",\n+  "description": "Plone Theme Barceloneta Resources",\n+  "version": "3.0.0-alpha5",\n+  "repository": {\n+    "type": "git",\n+    "url": "git@github.com:plone/plonetheme.barceloneta.git"\n+  },\n+  "bugs": {\n+    "url": "https://github.com/plone/plonetheme.barceloneta/issues",\n+    "email": "plone-developers@lists.sourceforge.net"\n+  },\n+  "homepage": "https://plone.org",\n   "license": "MIT",\n+  "keywords": [\n+    "plone",\n+    "front-end",\n+    "sass",\n+    "css"\n+  ],\n   "devDependencies": {\n     "autoprefixer": "^10.2.5",\n     "bootstrap": "^5.1.1",\n@@ -18,7 +33,7 @@\n     "watch": "nodemon --watch scss/ --ext scss --exec \\"npm run css-main\\"",\n     "build": "npm-run-all css-compile-main css-prefix-main css-minify-main",\n     "css-main": "npm-run-all css-compile-main css-prefix-main css-minify-main",\n-    "css-compile-main": "sass --style expanded --source-map --embed-sources --no-error-css scss/barceloneta.scss:plonetheme/barceloneta/theme/css/barceloneta.css",\n+    "css-compile-main": "sass --load-path=node_modules --style expanded --source-map --embed-sources --no-error-css scss/barceloneta.scss:plonetheme/barceloneta/theme/css/barceloneta.css",\n     "css-prefix-main": "postcss --config postcss.config.js --replace \\"plonetheme/barceloneta/theme/css/*.css\\" \\"!plonetheme/barceloneta/theme/css/*.min.css\\"",\n     "css-minify-main": "cleancss -O1 --format breakWith=lf --with-rebase --source-map --source-map-inline-sources --output plonetheme/barceloneta/theme/css/barceloneta.min.css plonetheme/barceloneta/theme/css/barceloneta.css",\n     "css-lint": "stylelint \\"scss/**/*.scss\\" --cache --cache-location .cache/.stylelintcache"\ndiff --git a/scss/base.scss b/scss/base.scss\nindex 13c76a83..bc9ffe0f 100644\n--- a/scss/base.scss\n+++ b/scss/base.scss\n@@ -8,11 +8,10 @@\n @import "variables.properties.scss";\n @import "variables.barceloneta.scss";\n \n-// Bootstrap\n-@import "../node_modules/bootstrap/scss/bootstrap";\n+// Bootstrap - imported with --load-path=node_modules\n+@import "bootstrap/scss/bootstrap";\n \n // Plone backend or minimal styles\n @import "forms.scss";\n @import "controlpanels.scss";\n @import "login";\n-// .. mockup specifics ...\n'

