Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-03-19T22:12:10+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/fdd9b615fd9f5ffc9ce8b1d56e1830e0d7e556d3

Some more fixes for unstable robot tests.

Files changed:
M Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
M Products/CMFPlone/tests/robot/test_controlpanel_site.robot
M Products/CMFPlone/tests/robot/test_linkintegrity.robot
M news/2809.bugfix

b'diff --git a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\nindex 4a302f030..10ca0f147 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n@@ -111,6 +111,7 @@ anonymous users can see the new action title\n anonymous users can see the actions new ordering\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain Element   xpath=//div[@id=\'portal-footer\']//ul/li[1]/a/span[contains(text(), \'Accessibility\')]\n   Page Should Contain Element   xpath=//div[@id=\'portal-footer\']//ul/li[3]/a/span[contains(text(), \'Site Map\')]\n \ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\nindex 94a4c24eb..518fd7283 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\n@@ -100,6 +100,7 @@ the site title should be set to \'${expected_site_title}\'\n \n the site logo should be set to the custom logo\n   Go To  ${PLONE_URL}\n+  Wait Until Element Is Visible  css=#portal-logo\n   Page should contain element  //*[@id="portal-logo"]/img[contains(@src,\'@@site-logo/pixel.png\')]\n \n then I can see a sitemap\ndiff --git a/Products/CMFPlone/tests/robot/test_linkintegrity.robot b/Products/CMFPlone/tests/robot/test_linkintegrity.robot\nindex 6f812fda8..5544e34b4 100644\n--- a/Products/CMFPlone/tests/robot/test_linkintegrity.robot\n+++ b/Products/CMFPlone/tests/robot/test_linkintegrity.robot\n@@ -91,6 +91,7 @@ a link in rich text\n \n should show warning when deleting page\n   Go To  ${PLONE_URL}/foo\n+  Wait until element is visible  css=#plone-contentmenu-actions a\n   Click Link  css=#plone-contentmenu-actions a\n   Wait until element is visible  css=#plone-contentmenu-actions-delete\n   Click Link  css=#plone-contentmenu-actions-delete\n@@ -126,6 +127,7 @@ should not show warning when deleting page from folder_contents\n \n should not show warning when deleting page\n   Go To  ${PLONE_URL}/foo\n+  Wait until element is visible  css=#plone-contentmenu-actions a\n   Click Link  css=#plone-contentmenu-actions a\n   Wait until element is visible  css=#plone-contentmenu-actions-delete\n   Click Link  css=#plone-contentmenu-actions-delete\n@@ -134,6 +136,7 @@ should not show warning when deleting page\n \n remove link to page\n   Go To  ${PLONE_URL}/bar\n+  Wait until element is visible  css=#contentview-edit a\n   Click Link  css=#contentview-edit a\n   Wait until element is visible  css=.mce-edit-area iframe\n   Select Frame  css=.mce-edit-area iframe\ndiff --git a/news/2809.bugfix b/news/2809.bugfix\nindex 2188bc701..ead45773f 100644\n--- a/news/2809.bugfix\n+++ b/news/2809.bugfix\n@@ -1 +1 @@\n-Fixed unstable Markup Control Panel robot test.  [maurits]\n+Fixed unstable Markup Control Panel and other robot tests.   [maurits]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-03-19T23:39:13+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/Products.CMFPlone/commit/49127a4e187946d62c82422da641f29861f89eb8

Add some more waits in robot tests.

Files changed:
M Products/CMFPlone/tests/robot/test_actionmenu.robot
M Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
M Products/CMFPlone/tests/robot/test_controlpanel_editing.robot
M Products/CMFPlone/tests/robot/test_controlpanel_filter.robot
M Products/CMFPlone/tests/robot/test_controlpanel_language.robot
M Products/CMFPlone/tests/robot/test_controlpanel_markup.robot
M Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot
M Products/CMFPlone/tests/robot/test_controlpanel_search.robot
M Products/CMFPlone/tests/robot/test_controlpanel_security.robot
M Products/CMFPlone/tests/robot/test_controlpanel_social.robot
M Products/CMFPlone/tests/robot/test_controlpanel_types.robot
M Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot
M Products/CMFPlone/tests/robot/test_edit.robot
M Products/CMFPlone/tests/robot/test_edit_user_schema.robot
M Products/CMFPlone/tests/robot/test_overlays.robot
M Products/CMFPlone/tests/robot/test_portlets.robot
M Products/CMFPlone/tests/robot/test_thememapper.robot
M Products/CMFPlone/tests/robot/test_tinymce.robot

b'diff --git a/Products/CMFPlone/tests/robot/test_actionmenu.robot b/Products/CMFPlone/tests/robot/test_actionmenu.robot\nindex fb4c6e1d1..9fe356848 100644\n--- a/Products/CMFPlone/tests/robot/test_actionmenu.robot\n+++ b/Products/CMFPlone/tests/robot/test_actionmenu.robot\n@@ -94,7 +94,7 @@ Scenario:\n an actionsmenu page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}\n-\n+    Wait until page contains  An actionsmenu page\n \n # --- WHEN -------------------------------------------------------------------\n \ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\nindex 10ca0f147..3d44502d8 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n@@ -63,6 +63,7 @@ a logged-in administrator\n \n the actions control panel\n   Go to  ${PLONE_URL}/@@actions-controlpanel\n+  Wait until page contains  Portal actions\n \n # --- WHEN -------------------------------------------------------------------\n \n@@ -106,6 +107,7 @@ I unhide the action\n anonymous users can see the new action title\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  A new site map\n \n anonymous users can see the actions new ordering\n@@ -119,14 +121,17 @@ logged-in users can see the new action\n   Disable autologin\n   Enable autologin as   Contributor\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  My favorites\n \n anonymous users cannot see the action anymore\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Not Contain  Site Map\n \n anonymous users can see the action again\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  Site Map\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot b/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\nindex 46a66d3b3..4b99bb4fc 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\n@@ -53,7 +53,7 @@ a document \'${title}\'\n \n the editing control panel\n   Go to  ${PLONE_URL}/@@editing-controlpanel\n-\n+  Wait until page contains  Editing Settings\n \n # --- WHEN -------------------------------------------------------------------\n \ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot b/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\nindex 26399060f..1ca5cbf83 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\n@@ -64,6 +64,7 @@ a logged-in site administrator\n \n the filter control panel\n   Go to  ${PLONE_URL}/@@filter-controlpanel\n+  Wait until page contains  HTML Filtering Settings\n \n Input RichText\n   [Arguments]  ${input}\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_language.robot b/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\nindex 7f3cc7979..ebd790247 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\n@@ -29,6 +29,7 @@ a logged-in site administrator\n \n the language control panel\n   Go to  ${PLONE_URL}/@@language-controlpanel\n+  Wait until page contains  Language Settings\n \n \n # --- WHEN -------------------------------------------------------------------\n@@ -45,4 +46,5 @@ I set the site language to German\n \n the Plone user interface is in German\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Sie sind hier\n   Page should contain  Sie sind hier\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot b/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\nindex 0c1310d80..b455c5cf4 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\n@@ -40,6 +40,7 @@ a document \'${title}\'\n \n the markup control panel\n   Go to  ${PLONE_URL}/@@markup-controlpanel\n+  Wait until page contains  Markup Settings\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot b/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\nindex ca715c9a0..29c77563e 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\n@@ -53,6 +53,7 @@ Scenario: Filter Navigation By Displayed Types in the Navigation Control Panel\n \n the navigation control panel\n   Go to  ${PLONE_URL}/@@navigation-controlpanel\n+  Wait until page contains  Navigation Settings\n \n a published document \'${title}\'\n   ${uid}=  a document \'${title}\'\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_search.robot b/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\nindex 39d5cc07b..f0a7721c2 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\n@@ -41,6 +41,7 @@ a document \'${title}\'\n \n the search control panel\n   Go to  ${PLONE_URL}/@@search-controlpanel\n+  Wait until page contains  Search Settings\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_security.robot b/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\nindex 4e9902589..cb91da1ff 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\n@@ -61,9 +61,11 @@ a logged-in site administrator\n \n the security control panel\n   Go to  ${PLONE_URL}/@@security-controlpanel\n+  Wait until page contains  Security Settings\n \n a published test folder\n   Go to  ${PLONE_URL}/test-folder\n+  Wait until element is visible  css=#plone-contentmenu-workflow\n   Click link  xpath=//li[@id=\'plone-contentmenu-workflow\']/a\n   Wait until element is visible  id=workflow-transition-publish\n   Click link  id=workflow-transition-publish\n@@ -114,16 +116,19 @@ I enable UUID to be used as a user id\n Anonymous users can register to the site\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Element Should Be Visible  xpath=//a[@id=\'personaltools-join\']\n \n Users can select their own passwords when registering\n   Disable autologin\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Element Should Be Visible  xpath=//input[@id=\'form-widgets-password\']\n \n Users can use email as their login name\n   Disable autologin\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Element Should Be Visible  xpath=//input[@id=\'form-widgets-email\']\n   Element Should Not Be Visible  xpath=//input[@id=\'form-widgets-username\']\n \n@@ -133,6 +138,7 @@ A user folder should be created when a user registers and logs in to the site\n \n   # I register to the site\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Input Text for sure  form.widgets.username  joe\n   Input Text for sure  form.widgets.email  joe@test.com\n   Input Text for sure  form.widgets.password  supersecret\n@@ -141,6 +147,7 @@ A user folder should be created when a user registers and logs in to the site\n \n   # I login to the site\n   Go to  ${PLONE_URL}/login\n+  Wait until page contains  Login Name\n   Input text for sure  __ac_name  joe\n   Input text for sure  __ac_password  supersecret\n   Click Button  Log in\n@@ -148,12 +155,14 @@ A user folder should be created when a user registers and logs in to the site\n \n   # The user folder should be created\n   Go to  ${PLONE_URL}/Members/joe\n+  Wait until page contains  joe\n   Element Should Contain  css=h1.documentFirstHeading  joe\n   Page should Not contain  This page does not seem to exist\n \n Anonymous users can view \'about\' information\n   Disable autologin\n   Go to  ${PLONE_URL}/@@search?SearchableText=test\n+  Wait until page contains  Search results\n   Element Should Be Visible  xpath=//span[contains(@class, \'documentAuthor\')]\n \n UUID should be used for the user id\n@@ -162,6 +171,7 @@ UUID should be used for the user id\n \n   # I register to the site\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Input Text for sure  form.widgets.username  joe\n   Input Text for sure  form.widgets.email  joe@test.com\n   Input Text for sure  form.widgets.password  supersecret\n@@ -170,6 +180,7 @@ UUID should be used for the user id\n \n   # I login to the site\n   Go to  ${PLONE_URL}/login\n+  Wait until page contains  Login Name\n   Input text for sure  __ac_name  joe\n   Input text for sure  __ac_password  supersecret\n   Click Button  Log in\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_social.robot b/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\nindex bd4f45a22..8acf10ff1 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\n@@ -36,6 +36,7 @@ a logged-in site administrator\n \n the social control panel\n   Go to  ${PLONE_URL}/@@social-controlpanel\n+  Wait until page contains  Social Media Settings\n \n \n # --- WHEN -------------------------------------------------------------------\n@@ -59,17 +60,20 @@ I provide social settings\n \n social tags should exist for anonymous\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should not contain element  css=meta[name="twitter:site"]\n   Page should not contain element  css=meta[property="og:article:publisher"]\n   Page should not contain element  css=meta[property="fb:app_id"]\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should contain element  css=meta[name="twitter:site"]\n   Page should contain element  css=meta[property="og:article:publisher"]\n   Page should contain element  css=meta[property="fb:app_id"]\n \n social tags should not exist\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should not contain element  css=meta[name="twitter:site"]\n   Page should not contain element  css=meta[property="og:article:publisher"]\n   Page should not contain element  css=meta[property="fb:app_id"]\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_types.robot b/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\nindex a4d9f6248..dd4f480e5 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\n@@ -41,9 +41,11 @@ a logged-in manager\n \n the types control panel\n   Go to  ${PLONE_URL}/@@content-controlpanel\n+  Wait until page contains  Content Settings\n \n Globaly enabled comments\n   Go to  ${PLONE_URL}/@@discussion-settings\n+  Wait until page contains  Discussion settings\n   Select checkbox  name=form.widgets.globally_enabled:list\n   Click button  Save\n \n@@ -65,6 +67,7 @@ I select \'${workflow}\' workflow\n \n I add new Link \'${id}\'\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Create content  type=Link  id=${id}  title=${id}  remoteUrl=http://www.starzel.de\n \n \n@@ -72,9 +75,11 @@ I add new Link \'${id}\'\n \n Link \'${id}\' should have comments enabled\n   Go to  ${PLONE_URL}/${id}\n+  Wait until page contains  ${id}\n   Page should contain element  xpath=//div[@id="commenting"]\n \n Link \'${id}\' should have Single State Workflow enabled\n   Go to  ${PLONE_URL}/${id}\n+  Wait until page contains  ${id}\n   # We check that single state worklow is used, publish button is not present\n   Page should not contain element  xpath=//a[@id="workflow-transition-publish"]\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot b/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\nindex 9572b23d0..77ee561d1 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\n@@ -61,18 +61,22 @@ a logged-in site administrator\n \n the usergroups control panel\n   Go to  ${PLONE_URL}/@@usergroup-userprefs\n+  Wait until page contains  Users and Groups\n \n \n # --- WHEN -------------------------------------------------------------------\n \n I click show all users\n   Click button  Show all\n+  Wait until page contains  User Search\n \n I go to Groups control panel\n   Click link  Groups\n+  Wait until page contains  Group Search\n \n I click show all groups\n   Click button  Show all\n+  Wait until page contains  Group Search\n \n I create new group\n   Click button  Add New Group\n@@ -89,11 +93,13 @@ I create new group\n \n I go to Settings control panel\n   Click link  Settings\n+  Wait until page contains  User and groups settings\n \n enable many groups and many users settings\n   Select Checkbox  name=form.widgets.many_groups:list\n   Select Checkbox  name=form.widgets.many_users:list\n   Click button  Save\n+  Wait until page contains  Data successfully updated.\n \n # --- THEN -------------------------------------------------------------------\n \n@@ -109,10 +115,12 @@ all groups should be shown\n \n showing all users is disabled\n   Click link  Users\n+  Wait until page contains  User Search\n   Page should not contain  Show all\n \n showing all groups is disabled\n   Click link  Groups\n+  Wait until page contains  Group Search\n   Page should not contain  Show all\n \n new group should show under all groups\ndiff --git a/Products/CMFPlone/tests/robot/test_edit.robot b/Products/CMFPlone/tests/robot/test_edit.robot\nindex c03e7f838..cdeffdc00 100644\n--- a/Products/CMFPlone/tests/robot/test_edit.robot\n+++ b/Products/CMFPlone/tests/robot/test_edit.robot\n@@ -73,6 +73,7 @@ Scenario: Form dropdowns follows DateTime widget values\n an edited page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}/edit\n+    Wait until page contains  Edit Page\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_edit_user_schema.robot b/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\nindex 8b2f83210..ce8b87f4e 100644\n--- a/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\n+++ b/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\n@@ -80,6 +80,7 @@ a logged-in manager\n \n site registration enabled\n   Go To  ${PLONE_URL}/@@security-controlpanel\n+  Wait until page contains  Security Settings\n   Wait until page contains element  form.widgets.enable_self_reg:list\n   Select Checkbox  form.widgets.enable_self_reg:list\n   Click Button  Save\ndiff --git a/Products/CMFPlone/tests/robot/test_overlays.robot b/Products/CMFPlone/tests/robot/test_overlays.robot\nindex 716a549cf..9b4c581b4 100644\n--- a/Products/CMFPlone/tests/robot/test_overlays.robot\n+++ b/Products/CMFPlone/tests/robot/test_overlays.robot\n@@ -218,12 +218,15 @@ a logged-in site administrator\n \n the users and groups configlet\n     Go to  ${PLONE_URL}/@@usergroup-userprefs\n+    Wait until page contains  User Search\n \n I click the \'${link_name}\' link\n+    Wait until page contains  ${link_name}\n     Element should be visible  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n     Click Link  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n \n the \'${link_name}\' overlay\n+    Wait until page contains  ${link_name}\n     Click Link  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n     Wait until keyword succeeds  30  1  Page should contain element  css=div.plone-modal-dialog\n \ndiff --git a/Products/CMFPlone/tests/robot/test_portlets.robot b/Products/CMFPlone/tests/robot/test_portlets.robot\nindex ca54a825b..313b42a77 100644\n--- a/Products/CMFPlone/tests/robot/test_portlets.robot\n+++ b/Products/CMFPlone/tests/robot/test_portlets.robot\n@@ -24,6 +24,7 @@ Scenario: Add Login Portlet\n \n a manage portlets view\n     Go to   ${PLONE_URL}/@@manage-portlets\n+    Wait until page contains  Manage portlets\n \n I add a \'${portletname}\' portlet to the left column\n     Select from list  xpath=//div[@id="portletmanager-plone-leftcolumn"]//select  ${portletname}\ndiff --git a/Products/CMFPlone/tests/robot/test_thememapper.robot b/Products/CMFPlone/tests/robot/test_thememapper.robot\nindex 951fd5190..16d3a7a58 100644\n--- a/Products/CMFPlone/tests/robot/test_thememapper.robot\n+++ b/Products/CMFPlone/tests/robot/test_thememapper.robot\n@@ -50,6 +50,7 @@ Scenario: Thememapper LESS builder\n \n a new theme to edit\n     Go to  ${PLONE_URL}/theming-controlpanel\n+    Wait until page contains  Theme settings\n     Click Element   jquery=a[href="#modal-copy-barceloneta"]\n     Wait Until Element Is Visible   jquery=.plone-modal-body input[type="text"]\n     Input Text  jquery=.plone-modal-body input[type="text"]   Test\ndiff --git a/Products/CMFPlone/tests/robot/test_tinymce.robot b/Products/CMFPlone/tests/robot/test_tinymce.robot\nindex c4f617e8a..c6bc13726 100644\n--- a/Products/CMFPlone/tests/robot/test_tinymce.robot\n+++ b/Products/CMFPlone/tests/robot/test_tinymce.robot\n@@ -43,6 +43,7 @@ Scenario: A page is opened to edit in TinyMCE\n an edited page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}/edit\n+    Wait until page contains  Edit Page\n \n an uploaded image\n     Create content  type=Image  title=an-image\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2019-03-20T01:37:55+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/f8b4c0e91f3504f0acf33380c98a9c3452ab7121

Merge pull request #2811 from plone/maurits-unstable-robot-tests-2019-march-part2

Fix some more unstable robot tests by adding waits

Files changed:
M Products/CMFPlone/tests/robot/test_actionmenu.robot
M Products/CMFPlone/tests/robot/test_controlpanel_actions.robot
M Products/CMFPlone/tests/robot/test_controlpanel_editing.robot
M Products/CMFPlone/tests/robot/test_controlpanel_filter.robot
M Products/CMFPlone/tests/robot/test_controlpanel_language.robot
M Products/CMFPlone/tests/robot/test_controlpanel_markup.robot
M Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot
M Products/CMFPlone/tests/robot/test_controlpanel_search.robot
M Products/CMFPlone/tests/robot/test_controlpanel_security.robot
M Products/CMFPlone/tests/robot/test_controlpanel_site.robot
M Products/CMFPlone/tests/robot/test_controlpanel_social.robot
M Products/CMFPlone/tests/robot/test_controlpanel_types.robot
M Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot
M Products/CMFPlone/tests/robot/test_edit.robot
M Products/CMFPlone/tests/robot/test_edit_user_schema.robot
M Products/CMFPlone/tests/robot/test_linkintegrity.robot
M Products/CMFPlone/tests/robot/test_overlays.robot
M Products/CMFPlone/tests/robot/test_portlets.robot
M Products/CMFPlone/tests/robot/test_thememapper.robot
M Products/CMFPlone/tests/robot/test_tinymce.robot
M news/2809.bugfix

b'diff --git a/Products/CMFPlone/tests/robot/test_actionmenu.robot b/Products/CMFPlone/tests/robot/test_actionmenu.robot\nindex fb4c6e1d1..9fe356848 100644\n--- a/Products/CMFPlone/tests/robot/test_actionmenu.robot\n+++ b/Products/CMFPlone/tests/robot/test_actionmenu.robot\n@@ -94,7 +94,7 @@ Scenario:\n an actionsmenu page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}\n-\n+    Wait until page contains  An actionsmenu page\n \n # --- WHEN -------------------------------------------------------------------\n \ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\nindex 4a302f030..3d44502d8 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_actions.robot\n@@ -63,6 +63,7 @@ a logged-in administrator\n \n the actions control panel\n   Go to  ${PLONE_URL}/@@actions-controlpanel\n+  Wait until page contains  Portal actions\n \n # --- WHEN -------------------------------------------------------------------\n \n@@ -106,11 +107,13 @@ I unhide the action\n anonymous users can see the new action title\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  A new site map\n \n anonymous users can see the actions new ordering\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain Element   xpath=//div[@id=\'portal-footer\']//ul/li[1]/a/span[contains(text(), \'Accessibility\')]\n   Page Should Contain Element   xpath=//div[@id=\'portal-footer\']//ul/li[3]/a/span[contains(text(), \'Site Map\')]\n \n@@ -118,14 +121,17 @@ logged-in users can see the new action\n   Disable autologin\n   Enable autologin as   Contributor\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  My favorites\n \n anonymous users cannot see the action anymore\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Not Contain  Site Map\n \n anonymous users can see the action again\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Accessibility\n   Page Should Contain  Site Map\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot b/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\nindex 46a66d3b3..4b99bb4fc 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_editing.robot\n@@ -53,7 +53,7 @@ a document \'${title}\'\n \n the editing control panel\n   Go to  ${PLONE_URL}/@@editing-controlpanel\n-\n+  Wait until page contains  Editing Settings\n \n # --- WHEN -------------------------------------------------------------------\n \ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot b/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\nindex 26399060f..1ca5cbf83 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_filter.robot\n@@ -64,6 +64,7 @@ a logged-in site administrator\n \n the filter control panel\n   Go to  ${PLONE_URL}/@@filter-controlpanel\n+  Wait until page contains  HTML Filtering Settings\n \n Input RichText\n   [Arguments]  ${input}\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_language.robot b/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\nindex 7f3cc7979..ebd790247 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_language.robot\n@@ -29,6 +29,7 @@ a logged-in site administrator\n \n the language control panel\n   Go to  ${PLONE_URL}/@@language-controlpanel\n+  Wait until page contains  Language Settings\n \n \n # --- WHEN -------------------------------------------------------------------\n@@ -45,4 +46,5 @@ I set the site language to German\n \n the Plone user interface is in German\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Sie sind hier\n   Page should contain  Sie sind hier\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot b/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\nindex 0c1310d80..b455c5cf4 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_markup.robot\n@@ -40,6 +40,7 @@ a document \'${title}\'\n \n the markup control panel\n   Go to  ${PLONE_URL}/@@markup-controlpanel\n+  Wait until page contains  Markup Settings\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot b/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\nindex ca715c9a0..29c77563e 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_navigation.robot\n@@ -53,6 +53,7 @@ Scenario: Filter Navigation By Displayed Types in the Navigation Control Panel\n \n the navigation control panel\n   Go to  ${PLONE_URL}/@@navigation-controlpanel\n+  Wait until page contains  Navigation Settings\n \n a published document \'${title}\'\n   ${uid}=  a document \'${title}\'\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_search.robot b/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\nindex 39d5cc07b..f0a7721c2 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_search.robot\n@@ -41,6 +41,7 @@ a document \'${title}\'\n \n the search control panel\n   Go to  ${PLONE_URL}/@@search-controlpanel\n+  Wait until page contains  Search Settings\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_security.robot b/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\nindex 4e9902589..cb91da1ff 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_security.robot\n@@ -61,9 +61,11 @@ a logged-in site administrator\n \n the security control panel\n   Go to  ${PLONE_URL}/@@security-controlpanel\n+  Wait until page contains  Security Settings\n \n a published test folder\n   Go to  ${PLONE_URL}/test-folder\n+  Wait until element is visible  css=#plone-contentmenu-workflow\n   Click link  xpath=//li[@id=\'plone-contentmenu-workflow\']/a\n   Wait until element is visible  id=workflow-transition-publish\n   Click link  id=workflow-transition-publish\n@@ -114,16 +116,19 @@ I enable UUID to be used as a user id\n Anonymous users can register to the site\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Element Should Be Visible  xpath=//a[@id=\'personaltools-join\']\n \n Users can select their own passwords when registering\n   Disable autologin\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Element Should Be Visible  xpath=//input[@id=\'form-widgets-password\']\n \n Users can use email as their login name\n   Disable autologin\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Element Should Be Visible  xpath=//input[@id=\'form-widgets-email\']\n   Element Should Not Be Visible  xpath=//input[@id=\'form-widgets-username\']\n \n@@ -133,6 +138,7 @@ A user folder should be created when a user registers and logs in to the site\n \n   # I register to the site\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Input Text for sure  form.widgets.username  joe\n   Input Text for sure  form.widgets.email  joe@test.com\n   Input Text for sure  form.widgets.password  supersecret\n@@ -141,6 +147,7 @@ A user folder should be created when a user registers and logs in to the site\n \n   # I login to the site\n   Go to  ${PLONE_URL}/login\n+  Wait until page contains  Login Name\n   Input text for sure  __ac_name  joe\n   Input text for sure  __ac_password  supersecret\n   Click Button  Log in\n@@ -148,12 +155,14 @@ A user folder should be created when a user registers and logs in to the site\n \n   # The user folder should be created\n   Go to  ${PLONE_URL}/Members/joe\n+  Wait until page contains  joe\n   Element Should Contain  css=h1.documentFirstHeading  joe\n   Page should Not contain  This page does not seem to exist\n \n Anonymous users can view \'about\' information\n   Disable autologin\n   Go to  ${PLONE_URL}/@@search?SearchableText=test\n+  Wait until page contains  Search results\n   Element Should Be Visible  xpath=//span[contains(@class, \'documentAuthor\')]\n \n UUID should be used for the user id\n@@ -162,6 +171,7 @@ UUID should be used for the user id\n \n   # I register to the site\n   Go to  ${PLONE_URL}/@@register\n+  Wait until page contains  Registration form\n   Input Text for sure  form.widgets.username  joe\n   Input Text for sure  form.widgets.email  joe@test.com\n   Input Text for sure  form.widgets.password  supersecret\n@@ -170,6 +180,7 @@ UUID should be used for the user id\n \n   # I login to the site\n   Go to  ${PLONE_URL}/login\n+  Wait until page contains  Login Name\n   Input text for sure  __ac_name  joe\n   Input text for sure  __ac_password  supersecret\n   Click Button  Log in\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\nindex 94a4c24eb..518fd7283 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_site.robot\n@@ -100,6 +100,7 @@ the site title should be set to \'${expected_site_title}\'\n \n the site logo should be set to the custom logo\n   Go To  ${PLONE_URL}\n+  Wait Until Element Is Visible  css=#portal-logo\n   Page should contain element  //*[@id="portal-logo"]/img[contains(@src,\'@@site-logo/pixel.png\')]\n \n then I can see a sitemap\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_social.robot b/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\nindex bd4f45a22..8acf10ff1 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_social.robot\n@@ -36,6 +36,7 @@ a logged-in site administrator\n \n the social control panel\n   Go to  ${PLONE_URL}/@@social-controlpanel\n+  Wait until page contains  Social Media Settings\n \n \n # --- WHEN -------------------------------------------------------------------\n@@ -59,17 +60,20 @@ I provide social settings\n \n social tags should exist for anonymous\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should not contain element  css=meta[name="twitter:site"]\n   Page should not contain element  css=meta[property="og:article:publisher"]\n   Page should not contain element  css=meta[property="fb:app_id"]\n   Disable autologin\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should contain element  css=meta[name="twitter:site"]\n   Page should contain element  css=meta[property="og:article:publisher"]\n   Page should contain element  css=meta[property="fb:app_id"]\n \n social tags should not exist\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Page should not contain element  css=meta[name="twitter:site"]\n   Page should not contain element  css=meta[property="og:article:publisher"]\n   Page should not contain element  css=meta[property="fb:app_id"]\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_types.robot b/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\nindex a4d9f6248..dd4f480e5 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_types.robot\n@@ -41,9 +41,11 @@ a logged-in manager\n \n the types control panel\n   Go to  ${PLONE_URL}/@@content-controlpanel\n+  Wait until page contains  Content Settings\n \n Globaly enabled comments\n   Go to  ${PLONE_URL}/@@discussion-settings\n+  Wait until page contains  Discussion settings\n   Select checkbox  name=form.widgets.globally_enabled:list\n   Click button  Save\n \n@@ -65,6 +67,7 @@ I select \'${workflow}\' workflow\n \n I add new Link \'${id}\'\n   Go to  ${PLONE_URL}\n+  Wait until page contains  Plone site\n   Create content  type=Link  id=${id}  title=${id}  remoteUrl=http://www.starzel.de\n \n \n@@ -72,9 +75,11 @@ I add new Link \'${id}\'\n \n Link \'${id}\' should have comments enabled\n   Go to  ${PLONE_URL}/${id}\n+  Wait until page contains  ${id}\n   Page should contain element  xpath=//div[@id="commenting"]\n \n Link \'${id}\' should have Single State Workflow enabled\n   Go to  ${PLONE_URL}/${id}\n+  Wait until page contains  ${id}\n   # We check that single state worklow is used, publish button is not present\n   Page should not contain element  xpath=//a[@id="workflow-transition-publish"]\ndiff --git a/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot b/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\nindex 9572b23d0..77ee561d1 100644\n--- a/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\n+++ b/Products/CMFPlone/tests/robot/test_controlpanel_usergroups.robot\n@@ -61,18 +61,22 @@ a logged-in site administrator\n \n the usergroups control panel\n   Go to  ${PLONE_URL}/@@usergroup-userprefs\n+  Wait until page contains  Users and Groups\n \n \n # --- WHEN -------------------------------------------------------------------\n \n I click show all users\n   Click button  Show all\n+  Wait until page contains  User Search\n \n I go to Groups control panel\n   Click link  Groups\n+  Wait until page contains  Group Search\n \n I click show all groups\n   Click button  Show all\n+  Wait until page contains  Group Search\n \n I create new group\n   Click button  Add New Group\n@@ -89,11 +93,13 @@ I create new group\n \n I go to Settings control panel\n   Click link  Settings\n+  Wait until page contains  User and groups settings\n \n enable many groups and many users settings\n   Select Checkbox  name=form.widgets.many_groups:list\n   Select Checkbox  name=form.widgets.many_users:list\n   Click button  Save\n+  Wait until page contains  Data successfully updated.\n \n # --- THEN -------------------------------------------------------------------\n \n@@ -109,10 +115,12 @@ all groups should be shown\n \n showing all users is disabled\n   Click link  Users\n+  Wait until page contains  User Search\n   Page should not contain  Show all\n \n showing all groups is disabled\n   Click link  Groups\n+  Wait until page contains  Group Search\n   Page should not contain  Show all\n \n new group should show under all groups\ndiff --git a/Products/CMFPlone/tests/robot/test_edit.robot b/Products/CMFPlone/tests/robot/test_edit.robot\nindex c03e7f838..cdeffdc00 100644\n--- a/Products/CMFPlone/tests/robot/test_edit.robot\n+++ b/Products/CMFPlone/tests/robot/test_edit.robot\n@@ -73,6 +73,7 @@ Scenario: Form dropdowns follows DateTime widget values\n an edited page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}/edit\n+    Wait until page contains  Edit Page\n \n \n # --- WHEN -------------------------------------------------------------------\ndiff --git a/Products/CMFPlone/tests/robot/test_edit_user_schema.robot b/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\nindex 8b2f83210..ce8b87f4e 100644\n--- a/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\n+++ b/Products/CMFPlone/tests/robot/test_edit_user_schema.robot\n@@ -80,6 +80,7 @@ a logged-in manager\n \n site registration enabled\n   Go To  ${PLONE_URL}/@@security-controlpanel\n+  Wait until page contains  Security Settings\n   Wait until page contains element  form.widgets.enable_self_reg:list\n   Select Checkbox  form.widgets.enable_self_reg:list\n   Click Button  Save\ndiff --git a/Products/CMFPlone/tests/robot/test_linkintegrity.robot b/Products/CMFPlone/tests/robot/test_linkintegrity.robot\nindex 6f812fda8..5544e34b4 100644\n--- a/Products/CMFPlone/tests/robot/test_linkintegrity.robot\n+++ b/Products/CMFPlone/tests/robot/test_linkintegrity.robot\n@@ -91,6 +91,7 @@ a link in rich text\n \n should show warning when deleting page\n   Go To  ${PLONE_URL}/foo\n+  Wait until element is visible  css=#plone-contentmenu-actions a\n   Click Link  css=#plone-contentmenu-actions a\n   Wait until element is visible  css=#plone-contentmenu-actions-delete\n   Click Link  css=#plone-contentmenu-actions-delete\n@@ -126,6 +127,7 @@ should not show warning when deleting page from folder_contents\n \n should not show warning when deleting page\n   Go To  ${PLONE_URL}/foo\n+  Wait until element is visible  css=#plone-contentmenu-actions a\n   Click Link  css=#plone-contentmenu-actions a\n   Wait until element is visible  css=#plone-contentmenu-actions-delete\n   Click Link  css=#plone-contentmenu-actions-delete\n@@ -134,6 +136,7 @@ should not show warning when deleting page\n \n remove link to page\n   Go To  ${PLONE_URL}/bar\n+  Wait until element is visible  css=#contentview-edit a\n   Click Link  css=#contentview-edit a\n   Wait until element is visible  css=.mce-edit-area iframe\n   Select Frame  css=.mce-edit-area iframe\ndiff --git a/Products/CMFPlone/tests/robot/test_overlays.robot b/Products/CMFPlone/tests/robot/test_overlays.robot\nindex 716a549cf..9b4c581b4 100644\n--- a/Products/CMFPlone/tests/robot/test_overlays.robot\n+++ b/Products/CMFPlone/tests/robot/test_overlays.robot\n@@ -218,12 +218,15 @@ a logged-in site administrator\n \n the users and groups configlet\n     Go to  ${PLONE_URL}/@@usergroup-userprefs\n+    Wait until page contains  User Search\n \n I click the \'${link_name}\' link\n+    Wait until page contains  ${link_name}\n     Element should be visible  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n     Click Link  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n \n the \'${link_name}\' overlay\n+    Wait until page contains  ${link_name}\n     Click Link  xpath=//a[descendant-or-self::*[contains(text(), \'${link_name}\')]]\n     Wait until keyword succeeds  30  1  Page should contain element  css=div.plone-modal-dialog\n \ndiff --git a/Products/CMFPlone/tests/robot/test_portlets.robot b/Products/CMFPlone/tests/robot/test_portlets.robot\nindex ca54a825b..313b42a77 100644\n--- a/Products/CMFPlone/tests/robot/test_portlets.robot\n+++ b/Products/CMFPlone/tests/robot/test_portlets.robot\n@@ -24,6 +24,7 @@ Scenario: Add Login Portlet\n \n a manage portlets view\n     Go to   ${PLONE_URL}/@@manage-portlets\n+    Wait until page contains  Manage portlets\n \n I add a \'${portletname}\' portlet to the left column\n     Select from list  xpath=//div[@id="portletmanager-plone-leftcolumn"]//select  ${portletname}\ndiff --git a/Products/CMFPlone/tests/robot/test_thememapper.robot b/Products/CMFPlone/tests/robot/test_thememapper.robot\nindex 951fd5190..16d3a7a58 100644\n--- a/Products/CMFPlone/tests/robot/test_thememapper.robot\n+++ b/Products/CMFPlone/tests/robot/test_thememapper.robot\n@@ -50,6 +50,7 @@ Scenario: Thememapper LESS builder\n \n a new theme to edit\n     Go to  ${PLONE_URL}/theming-controlpanel\n+    Wait until page contains  Theme settings\n     Click Element   jquery=a[href="#modal-copy-barceloneta"]\n     Wait Until Element Is Visible   jquery=.plone-modal-body input[type="text"]\n     Input Text  jquery=.plone-modal-body input[type="text"]   Test\ndiff --git a/Products/CMFPlone/tests/robot/test_tinymce.robot b/Products/CMFPlone/tests/robot/test_tinymce.robot\nindex c4f617e8a..c6bc13726 100644\n--- a/Products/CMFPlone/tests/robot/test_tinymce.robot\n+++ b/Products/CMFPlone/tests/robot/test_tinymce.robot\n@@ -43,6 +43,7 @@ Scenario: A page is opened to edit in TinyMCE\n an edited page\n     Create content  type=Document  title=${TITLE}\n     Go to  ${PLONE_URL}/${PAGE_ID}/edit\n+    Wait until page contains  Edit Page\n \n an uploaded image\n     Create content  type=Image  title=an-image\ndiff --git a/news/2809.bugfix b/news/2809.bugfix\nindex 2188bc701..ead45773f 100644\n--- a/news/2809.bugfix\n+++ b/news/2809.bugfix\n@@ -1 +1 @@\n-Fixed unstable Markup Control Panel robot test.  [maurits]\n+Fixed unstable Markup Control Panel and other robot tests.   [maurits]\n'

