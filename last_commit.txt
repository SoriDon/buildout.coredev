Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-01-25T16:17:30+01:00
Author: Gagaro (Gagaro) <gagaro42@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/d90a5f9ea22992efd136b46b97fb3b6a50fb4024

fix: Error message unicode error in rename action

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/rename.py

diff --git a/CHANGES.rst b/CHANGES.rst
index be50f73..17c01da 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ New:
 
 Fixes:
 
-- *add item here*
+- Fixed error message unicode error in rename action.
+  [Gagaro]
 
 
 3.0.16 (2016-01-08)
diff --git a/plone/app/content/browser/contents/rename.py b/plone/app/content/browser/contents/rename.py
index 80a6b7b..c43a3b0 100644
--- a/plone/app/content/browser/contents/rename.py
+++ b/plone/app/content/browser/contents/rename.py
@@ -2,6 +2,7 @@
 from AccessControl import getSecurityManager
 from Acquisition import aq_inner
 from Acquisition import aq_parent
+import logging
 from plone.app.content.browser.contents import ContentsBaseAction
 from plone.app.content.interfaces import IStructureAction
 from Products.CMFCore.utils import getToolByName
@@ -17,6 +18,9 @@
 import transaction
 
 
+logger = logging.getLogger('plone.app.content')
+
+
 @implementer(IStructureAction)
 class RenameAction(object):
 
@@ -96,9 +100,11 @@ def __call__(self):
                     obj.reindexObject()
             except ConflictError:
                 raise
-            except Exception:
+            except Exception as e:
                 sp.rollback()
-                self.errors.append(_('Error renaming ${title}', mapping={
-                    'title': title}))
+                logger.error(u'Error renaming "{title}": "{exception}"'
+                    .format(title=title.decode('utf8'), exception=e))
+                self.errors.append(_(u'Error renaming ${title}', mapping={
+                    'title': title.decode('utf8')}))
 
         return self.message(missing)


Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-02-08T22:30:52+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/a8ff52b9e5422f379b12c2009433fb072063ea81

Merge remote-tracking branch 'origin/fix-rename-error-message'

Files changed:
M CHANGES.rst
M plone/app/content/browser/contents/rename.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2661eef..56ed8cc 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -12,6 +12,8 @@ Fixes:
 
 - Fix errors when cutting and copying objects in folder contents
   [vangheem]
+- Fixed error message unicode error in rename action.
+  [Gagaro]
 
 
 3.0.16 (2016-01-08)
diff --git a/plone/app/content/browser/contents/rename.py b/plone/app/content/browser/contents/rename.py
index 80a6b7b..c43a3b0 100644
--- a/plone/app/content/browser/contents/rename.py
+++ b/plone/app/content/browser/contents/rename.py
@@ -2,6 +2,7 @@
 from AccessControl import getSecurityManager
 from Acquisition import aq_inner
 from Acquisition import aq_parent
+import logging
 from plone.app.content.browser.contents import ContentsBaseAction
 from plone.app.content.interfaces import IStructureAction
 from Products.CMFCore.utils import getToolByName
@@ -17,6 +18,9 @@
 import transaction
 
 
+logger = logging.getLogger('plone.app.content')
+
+
 @implementer(IStructureAction)
 class RenameAction(object):
 
@@ -96,9 +100,11 @@ def __call__(self):
                     obj.reindexObject()
             except ConflictError:
                 raise
-            except Exception:
+            except Exception as e:
                 sp.rollback()
-                self.errors.append(_('Error renaming ${title}', mapping={
-                    'title': title}))
+                logger.error(u'Error renaming "{title}": "{exception}"'
+                    .format(title=title.decode('utf8'), exception=e))
+                self.errors.append(_(u'Error renaming ${title}', mapping={
+                    'title': title.decode('utf8')}))
 
         return self.message(missing)


Repository: plone.app.content


Branch: refs/heads/master
Date: 2016-02-08T22:31:37+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/f0aa1ccbb842877cafa20d1483c61f4b57b2f9c4

Cleaned up changelog before release.

Files changed:
M CHANGES.rst

diff --git a/CHANGES.rst b/CHANGES.rst
index 56ed8cc..e999c5d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,17 +4,14 @@ Changelog
 3.0.17 (unreleased)
 -------------------
 
-New:
-
-- *add item here*
-
 Fixes:
 
-- Fix errors when cutting and copying objects in folder contents
-  [vangheem]
 - Fixed error message unicode error in rename action.
   [Gagaro]
 
+- Fixed errors when cutting and copying objects in folder contents.
+  [vangheem]
+
 
 3.0.16 (2016-01-08)
 -------------------


