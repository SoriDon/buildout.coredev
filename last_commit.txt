Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-12-01T13:12:43+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.dexterity/commit/ad23c9730b8767de1b48ddfbd635b40622ae880c

Remove deprecated import

Files changed:
M plone/app/dexterity/permissions.py
M plone/app/dexterity/tests/test_permissions.py

b'diff --git a/plone/app/dexterity/permissions.py b/plone/app/dexterity/permissions.py\nindex 93d5caa..2156b0e 100644\n--- a/plone/app/dexterity/permissions.py\n+++ b/plone/app/dexterity/permissions.py\n@@ -1,4 +1,5 @@\n from AccessControl import getSecurityManager\n+from plone.app.z3cform.interfaces import IFieldPermissionChecker\n from plone.app.z3cform.interfaces import IPloneFormLayer\n from plone.autoform.interfaces import WIDGETS_KEY\n from plone.autoform.interfaces import WRITE_PERMISSIONS_KEY\n@@ -17,13 +18,6 @@\n from zope.security.interfaces import IPermission\n \n \n-try:\n-    from plone.app.z3cform.interfaces import IFieldPermissionChecker\n-except ImportError:\n-    # bbb for < plone 5.2rc2\n-    from plone.app.widgets.interfaces import IFieldPermissionChecker\n-\n-\n @implementer(IPloneFormLayer)\n class MockRequest(TestRequest):\n     pass\ndiff --git a/plone/app/dexterity/tests/test_permissions.py b/plone/app/dexterity/tests/test_permissions.py\nindex 7092d3c..aa62445 100644\n--- a/plone/app/dexterity/tests/test_permissions.py\n+++ b/plone/app/dexterity/tests/test_permissions.py\n@@ -3,8 +3,8 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n-from plone.app.widgets.testing import PLONEAPPWIDGETS_DX_INTEGRATION_TESTING\n from plone.app.z3cform.interfaces import IPloneFormLayer\n+from plone.app.z3cform.tests.layer import PAZ3CForm_INTEGRATION_TESTING\n from plone.autoform.interfaces import WIDGETS_KEY\n from plone.autoform.interfaces import WRITE_PERMISSIONS_KEY\n from plone.dexterity.browser.add import DefaultAddForm\n@@ -87,7 +87,7 @@ def _disable_custom_widget(field):\n \n class DexterityVocabularyPermissionTests(unittest.TestCase):\n \n-    layer = PLONEAPPWIDGETS_DX_INTEGRATION_TESTING\n+    layer = PAZ3CForm_INTEGRATION_TESTING\n \n     def setUp(self):\n         self.request = TestRequest(environ={"HTTP_ACCEPT_LANGUAGE": "en"})\n'

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-12-01T13:13:50+01:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.app.dexterity/commit/98d7b2f38d503853fde59aab727e72114820f48f

changenote

Files changed:
A news/355.bugfix

b'diff --git a/news/355.bugfix b/news/355.bugfix\nnew file mode 100644\nindex 00000000..14c0604f\n--- /dev/null\n+++ b/news/355.bugfix\n@@ -0,0 +1,2 @@\n+Remove deprecated imports from ``plone.app.widgets``\n+[petschki]\n'

Repository: plone.app.dexterity


Branch: refs/heads/master
Date: 2022-12-02T07:13:18+01:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plone.app.dexterity/commit/b5e5398cc2af674d4ab25f42ad1f1fe93be8d485

Merge pull request #355 from plone/remove-deprecated-import

Remove deprecated import from `plone.app.widgets`

Files changed:
A news/355.bugfix
M plone/app/dexterity/permissions.py
M plone/app/dexterity/tests/test_permissions.py

b'diff --git a/news/355.bugfix b/news/355.bugfix\nnew file mode 100644\nindex 00000000..14c0604f\n--- /dev/null\n+++ b/news/355.bugfix\n@@ -0,0 +1,2 @@\n+Remove deprecated imports from ``plone.app.widgets``\n+[petschki]\ndiff --git a/plone/app/dexterity/permissions.py b/plone/app/dexterity/permissions.py\nindex 93d5caa0..2156b0e1 100644\n--- a/plone/app/dexterity/permissions.py\n+++ b/plone/app/dexterity/permissions.py\n@@ -1,4 +1,5 @@\n from AccessControl import getSecurityManager\n+from plone.app.z3cform.interfaces import IFieldPermissionChecker\n from plone.app.z3cform.interfaces import IPloneFormLayer\n from plone.autoform.interfaces import WIDGETS_KEY\n from plone.autoform.interfaces import WRITE_PERMISSIONS_KEY\n@@ -17,13 +18,6 @@\n from zope.security.interfaces import IPermission\n \n \n-try:\n-    from plone.app.z3cform.interfaces import IFieldPermissionChecker\n-except ImportError:\n-    # bbb for < plone 5.2rc2\n-    from plone.app.widgets.interfaces import IFieldPermissionChecker\n-\n-\n @implementer(IPloneFormLayer)\n class MockRequest(TestRequest):\n     pass\ndiff --git a/plone/app/dexterity/tests/test_permissions.py b/plone/app/dexterity/tests/test_permissions.py\nindex 7092d3c9..aa624455 100644\n--- a/plone/app/dexterity/tests/test_permissions.py\n+++ b/plone/app/dexterity/tests/test_permissions.py\n@@ -3,8 +3,8 @@\n from plone.app.testing import setRoles\n from plone.app.testing import TEST_USER_ID\n from plone.app.testing import TEST_USER_NAME\n-from plone.app.widgets.testing import PLONEAPPWIDGETS_DX_INTEGRATION_TESTING\n from plone.app.z3cform.interfaces import IPloneFormLayer\n+from plone.app.z3cform.tests.layer import PAZ3CForm_INTEGRATION_TESTING\n from plone.autoform.interfaces import WIDGETS_KEY\n from plone.autoform.interfaces import WRITE_PERMISSIONS_KEY\n from plone.dexterity.browser.add import DefaultAddForm\n@@ -87,7 +87,7 @@ def _disable_custom_widget(field):\n \n class DexterityVocabularyPermissionTests(unittest.TestCase):\n \n-    layer = PLONEAPPWIDGETS_DX_INTEGRATION_TESTING\n+    layer = PAZ3CForm_INTEGRATION_TESTING\n \n     def setUp(self):\n         self.request = TestRequest(environ={"HTTP_ACCEPT_LANGUAGE": "en"})\n'

