Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-04-09T01:24:13+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.collection/commit/2b7f142590f04c36818e174a544cfe8387f684fb

Added uninstall profile.

The Collection type is removed when you uninstall this package.

Files changed:
A plone/app/collection/profiles/uninstall/types.xml
M CHANGES.rst
M plone/app/collection/configure.zcml
M plone/app/collection/profiles/default/types.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 80c9317..0155996 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -10,7 +10,8 @@ Incompatibilities:
 
 New:
 
-- *add item here*
+- Added uninstall profile.  The Collection type is removed when you
+  uninstall this package.  [maurits]
 
 Fixes:
 
diff --git a/plone/app/collection/configure.zcml b/plone/app/collection/configure.zcml
index d2bda5d..7f8e3b6 100644
--- a/plone/app/collection/configure.zcml
+++ b/plone/app/collection/configure.zcml
@@ -9,7 +9,7 @@
   <include package="plone.app.querystring" />
   <include package="plone.app.contentlisting" />
   <include package=".browser" />
-  
+
   <genericsetup:registerProfile
     name="default"
     title="plone.app.collection"
@@ -18,6 +18,14 @@
     provides="Products.GenericSetup.interfaces.EXTENSION"
     />
 
+  <genericsetup:registerProfile
+    name="uninstall"
+    title="plone.app.collection"
+    directory="profiles/uninstall"
+    description="Archetypes-based collections (uninstall)"
+    provides="Products.GenericSetup.interfaces.EXTENSION"
+    />
+
   <!-- hide profiles for our widget/field dependencies -->
   <utility
     factory=".integration.HiddenProfiles"
diff --git a/plone/app/collection/profiles/default/types.xml b/plone/app/collection/profiles/default/types.xml
index e4f2f9d..9705225 100644
--- a/plone/app/collection/profiles/default/types.xml
+++ b/plone/app/collection/profiles/default/types.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0"?>
 <object name="portal_types">
-   <!-- We remove the existing FTI since itcould be Dexterity-based and would
+   <!-- We remove the existing FTI since it could be Dexterity-based and would
         not be compatible in that case.  You get this error when installing:
         ValueError: undefined property 'content_meta_type' -->
   <object name="Collection" remove="True"/>
diff --git a/plone/app/collection/profiles/uninstall/types.xml b/plone/app/collection/profiles/uninstall/types.xml
new file mode 100644
index 0000000..a1ea1c6
--- /dev/null
+++ b/plone/app/collection/profiles/uninstall/types.xml
@@ -0,0 +1,4 @@
+<?xml version="1.0"?>
+<object name="portal_types">
+  <object name="Collection" remove="True"/>
+</object>


Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-04-09T01:26:15+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.collection/commit/9a285b009abbbb8ce6771f76a2b715af4448959c

Bump version for feature.

Files changed:
M CHANGES.rst
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 0155996..19f7fe3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-1.1.7 (unreleased)
+1.2.0 (unreleased)
 ------------------
 
 Incompatibilities:
diff --git a/setup.py b/setup.py
index df18723..a79df48 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,6 @@
 from setuptools import setup, find_packages
 
-version = '1.1.7.dev0'
+version = '1.2.0.dev0'
 
 setup(name='plone.app.collection',
       version=version,


Repository: plone.app.collection


Branch: refs/heads/master
Date: 2016-04-11T16:56:07+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.app.collection/commit/0252e3c51989d1470b39806b2c461b3bc1261a3b

Merge pull request #34 from plone/uninstall-profile

Add uninstall profile

Files changed:
A plone/app/collection/profiles/uninstall/types.xml
M CHANGES.rst
M plone/app/collection/configure.zcml
M plone/app/collection/profiles/default/types.xml
M setup.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 80c9317..19f7fe3 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -1,7 +1,7 @@
 Changelog
 =========
 
-1.1.7 (unreleased)
+1.2.0 (unreleased)
 ------------------
 
 Incompatibilities:
@@ -10,7 +10,8 @@ Incompatibilities:
 
 New:
 
-- *add item here*
+- Added uninstall profile.  The Collection type is removed when you
+  uninstall this package.  [maurits]
 
 Fixes:
 
diff --git a/plone/app/collection/configure.zcml b/plone/app/collection/configure.zcml
index d2bda5d..7f8e3b6 100644
--- a/plone/app/collection/configure.zcml
+++ b/plone/app/collection/configure.zcml
@@ -9,7 +9,7 @@
   <include package="plone.app.querystring" />
   <include package="plone.app.contentlisting" />
   <include package=".browser" />
-  
+
   <genericsetup:registerProfile
     name="default"
     title="plone.app.collection"
@@ -18,6 +18,14 @@
     provides="Products.GenericSetup.interfaces.EXTENSION"
     />
 
+  <genericsetup:registerProfile
+    name="uninstall"
+    title="plone.app.collection"
+    directory="profiles/uninstall"
+    description="Archetypes-based collections (uninstall)"
+    provides="Products.GenericSetup.interfaces.EXTENSION"
+    />
+
   <!-- hide profiles for our widget/field dependencies -->
   <utility
     factory=".integration.HiddenProfiles"
diff --git a/plone/app/collection/profiles/default/types.xml b/plone/app/collection/profiles/default/types.xml
index e4f2f9d..9705225 100644
--- a/plone/app/collection/profiles/default/types.xml
+++ b/plone/app/collection/profiles/default/types.xml
@@ -1,6 +1,6 @@
 <?xml version="1.0"?>
 <object name="portal_types">
-   <!-- We remove the existing FTI since itcould be Dexterity-based and would
+   <!-- We remove the existing FTI since it could be Dexterity-based and would
         not be compatible in that case.  You get this error when installing:
         ValueError: undefined property 'content_meta_type' -->
   <object name="Collection" remove="True"/>
diff --git a/plone/app/collection/profiles/uninstall/types.xml b/plone/app/collection/profiles/uninstall/types.xml
new file mode 100644
index 0000000..a1ea1c6
--- /dev/null
+++ b/plone/app/collection/profiles/uninstall/types.xml
@@ -0,0 +1,4 @@
+<?xml version="1.0"?>
+<object name="portal_types">
+  <object name="Collection" remove="True"/>
+</object>
diff --git a/setup.py b/setup.py
index df18723..a79df48 100644
--- a/setup.py
+++ b/setup.py
@@ -1,6 +1,6 @@
 from setuptools import setup, find_packages
 
-version = '1.1.7.dev0'
+version = '1.2.0.dev0'
 
 setup(name='plone.app.collection',
       version=version,


