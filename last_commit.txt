Repository: plone.volto


Branch: refs/heads/main
Date: 2022-01-15T21:06:31+01:00
Author: Tiberiu Ichim (tiberiuichim) <tiberiuichim@users.noreply.github.com>
Commit: https://github.com/plone/plone.volto/commit/02aafb0e1f7f641cd181b6b94949165daa5ec7b7

New field with huge vocabulary defined in the widget options (#38)

* new field with huge vocabulary not tied to it, but in defined in the widget

* Remove the include for .coresandbox in zcml

* Add changelog

Co-authored-by: Victor Fernandez de Alba &lt;sneridagh@gmail.com&gt;

Files changed:
M CHANGES.rst
M src/plone/volto/coresandbox/example.py

b'diff --git a/CHANGES.rst b/CHANGES.rst\nindex 1307733..6062d81 100644\n--- a/CHANGES.rst\n+++ b/CHANGES.rst\n@@ -4,8 +4,8 @@ Changelog\n 3.1.0a9 (unreleased)\n --------------------\n \n-- Nothing changed yet.\n-\n+- Add new field in the coresandbox: not constrained by vocabulary field but the vocabulary defined in the widget.\n+  [sneridagh]\n \n 3.1.0a8 (2022-01-12)\n --------------------\ndiff --git a/src/plone/volto/coresandbox/example.py b/src/plone/volto/coresandbox/example.py\nindex ff94c0f..33a0d9e 100644\n--- a/src/plone/volto/coresandbox/example.py\n+++ b/src/plone/volto/coresandbox/example.py\n@@ -68,6 +68,7 @@ class IExample(model.Schema):\n             "list_field_select",\n             "list_field_voc_unconstrained",\n             "list_field_voc_huge",\n+            "list_field_voc_huge_unconstrained",\n             "tuple_field",\n             "set_field",\n             "set_field_checkbox",\n@@ -261,6 +262,20 @@ class IExample(model.Schema):\n         frontendOptions={"widget": "autocomplete", "widgetProps": {"prop1": "text"}},\n     )\n \n+    list_field_voc_huge_unconstrained = schema.List(\n+        title=u"List field with values from a huge vocabulary but unconstrained",\n+        description=u"zope.schema.List",\n+        value_type=schema.TextLine(),\n+        required=False,\n+        missing_value=[],\n+        default=[],\n+    )\n+    directives.widget(\n+        "list_field_voc_huge_unconstrained",\n+        vocabulary="plone.volto.coresandbox.vocabularies.huge",\n+        frontendOptions={"widget": "autocomplete", "widgetProps": {"prop1": "text"}},\n+    )\n+\n     tuple_field = schema.Tuple(\n         title=u"Tuple field",\n         description=u"zope.schema.Tuple",\n'

