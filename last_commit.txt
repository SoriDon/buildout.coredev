Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-17T09:19:59+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/Products.CMFPlone/commit/46a4bcadf12bbc27df99f566b8e71c48d60d036b

Import PloneMessageFactory from plone.base

Files changed:
A news/3742.bugfix
M Products/CMFPlone/PloneControlPanel.py
M Products/CMFPlone/browser/contact_info.py
M Products/CMFPlone/browser/interfaces.py
M Products/CMFPlone/browser/login/login.py
M Products/CMFPlone/browser/login/login_help.py
M Products/CMFPlone/browser/login/logout.py
M Products/CMFPlone/browser/login/mail_password.py
M Products/CMFPlone/browser/login/password_reset.py
M Products/CMFPlone/browser/syndication/views.py
M Products/CMFPlone/controlpanel/browser/actions.py
M Products/CMFPlone/controlpanel/browser/dateandtime.py
M Products/CMFPlone/controlpanel/browser/error_log_form.py
M Products/CMFPlone/controlpanel/browser/filter.py
M Products/CMFPlone/controlpanel/browser/imaging.py
M Products/CMFPlone/controlpanel/browser/language.py
M Products/CMFPlone/controlpanel/browser/mail.py
M Products/CMFPlone/controlpanel/browser/maintenance.py
M Products/CMFPlone/controlpanel/browser/markup.py
M Products/CMFPlone/controlpanel/browser/navigation.py
M Products/CMFPlone/controlpanel/browser/quickinstaller.py
M Products/CMFPlone/controlpanel/browser/resourceregistry.py
M Products/CMFPlone/controlpanel/browser/search.py
M Products/CMFPlone/controlpanel/browser/security.py
M Products/CMFPlone/controlpanel/browser/site.py
M Products/CMFPlone/controlpanel/browser/socialmedia.py
M Products/CMFPlone/controlpanel/browser/tinymce.py
M Products/CMFPlone/controlpanel/browser/types.py
M Products/CMFPlone/controlpanel/browser/usergroups.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py
M Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py
M Products/CMFPlone/factory.py
M Products/CMFPlone/relationhelper.py
M Products/CMFPlone/tests/testRegistrationTool.py
M Products/CMFPlone/tests/test_login_form.py

b"diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py\nindex fa04987c11..d3bdd10096 100644\n--- a/Products/CMFPlone/PloneControlPanel.py\n+++ b/Products/CMFPlone/PloneControlPanel.py\n@@ -3,6 +3,7 @@\n from App.special_dtml import DTMLFile\n from OFS.Folder import Folder\n from OFS.PropertyManager import PropertyManager\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IControlPanel\n from Products.CMFCore.ActionInformation import ActionInformation\n from Products.CMFCore.ActionProviderBase import ActionProviderBase\n@@ -14,7 +15,6 @@\n from Products.CMFCore.utils import getToolByName\n from Products.CMFCore.utils import registerToolInterface\n from Products.CMFCore.utils import UniqueObject\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.PloneBaseTool import PloneBaseTool\n from zope.component.hooks import getSite\n from zope.i18n import translate\ndiff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py\nindex 5b113269a3..1b70a775a6 100644\n--- a/Products/CMFPlone/browser/contact_info.py\n+++ b/Products/CMFPlone/browser/contact_info.py\n@@ -1,9 +1,9 @@\n from email.mime.text import MIMEText\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.browser.interfaces import IContactForm\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/browser/interfaces.py b/Products/CMFPlone/browser/interfaces.py\nindex 732f11e05a..2e08f93b5e 100644\n--- a/Products/CMFPlone/browser/interfaces.py\n+++ b/Products/CMFPlone/browser/interfaces.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from plone.schema import Email\n-from Products.CMFPlone import PloneMessageFactory as _\n from zope import schema\n from zope.interface import Attribute\n from zope.interface import Interface\ndiff --git a/Products/CMFPlone/browser/login/login.py b/Products/CMFPlone/browser/login/login.py\nindex 8bc062b1ba..12f920cd65 100644\n--- a/Products/CMFPlone/browser/login/login.py\n+++ b/Products/CMFPlone/browser/login/login.py\n@@ -1,5 +1,6 @@\n from .utils import has_logged_in\n from plone.app.users.browser.passwordpanel import PasswordPanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IForcePasswordChange\n from plone.base.interfaces import IInitialLogin\n from plone.base.interfaces import ILoginForm\n@@ -8,7 +9,6 @@\n from plone.base.interfaces import ISecuritySchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n from urllib import parse\ndiff --git a/Products/CMFPlone/browser/login/login_help.py b/Products/CMFPlone/browser/login/login_help.py\nindex 5ad934823c..3ad0c50189 100644\n--- a/Products/CMFPlone/browser/login/login_help.py\n+++ b/Products/CMFPlone/browser/login/login_help.py\n@@ -1,5 +1,6 @@\n from email import message_from_string\n from email.header import Header\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ILoginHelpForm\n from plone.base.interfaces import ILoginHelpFormSchema\n from plone.base.interfaces import ISecuritySchema\n@@ -7,7 +8,6 @@\n from plone.base.utils import safe_text\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from smtplib import SMTPException\ndiff --git a/Products/CMFPlone/browser/login/logout.py b/Products/CMFPlone/browser/login/logout.py\nindex 8a986e6136..874dbfb161 100644\n--- a/Products/CMFPlone/browser/login/logout.py\n+++ b/Products/CMFPlone/browser/login/logout.py\n@@ -1,6 +1,6 @@\n+from plone.base import PloneMessageFactory as _\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.utils import transaction_note\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/browser/login/mail_password.py b/Products/CMFPlone/browser/login/mail_password.py\nindex 7281d222ec..ada0ac13e6 100644\n--- a/Products/CMFPlone/browser/login/mail_password.py\n+++ b/Products/CMFPlone/browser/login/mail_password.py\n@@ -1,5 +1,5 @@\n from AccessControl import Unauthorized\n-from Products.CMFPlone import PloneMessageFactory as _\n+from plone.base import PloneMessageFactory as _\n from Products.Five import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n \ndiff --git a/Products/CMFPlone/browser/login/password_reset.py b/Products/CMFPlone/browser/login/password_reset.py\nindex 2728b126ac..6039d58ba7 100644\n--- a/Products/CMFPlone/browser/login/password_reset.py\n+++ b/Products/CMFPlone/browser/login/password_reset.py\n@@ -3,16 +3,16 @@\n from AccessControl.SecurityManagement import newSecurityManager\n from AccessControl.SecurityManagement import setSecurityManager\n from email.header import Header\n+from plone.base import PloneMessageFactory as _\n+from plone.base.interfaces import IInitialLogin\n from plone.base.interfaces import IPasswordResetToolView\n+from plone.base.interfaces import IRedirectAfterLogin\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.base.utils import safe_text\n from plone.base.utils import safeToInt\n from plone.memoize import view\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n-from plone.base.interfaces import IInitialLogin\n-from plone.base.interfaces import IRedirectAfterLogin\n from Products.CMFPlone.PasswordResetTool import ExpiredRequestError\n from Products.CMFPlone.PasswordResetTool import InvalidRequestError\n from Products.CMFPlone.RegistrationTool import get_member_by_login_name\ndiff --git a/Products/CMFPlone/browser/syndication/views.py b/Products/CMFPlone/browser/syndication/views.py\nindex 8e41e7233e..e1e0969cc5 100644\n--- a/Products/CMFPlone/browser/syndication/views.py\n+++ b/Products/CMFPlone/browser/syndication/views.py\n@@ -1,9 +1,9 @@\n from DateTime import DateTime\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.syndication import IFeed\n from plone.base.interfaces.syndication import IFeedSettings\n from plone.base.interfaces.syndication import ISearchFeed\n from plone.z3cform.layout import wrap_form\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five import BrowserView\n from uuid import NAMESPACE_OID\n from uuid import uuid3\ndiff --git a/Products/CMFPlone/controlpanel/browser/actions.py b/Products/CMFPlone/controlpanel/browser/actions.py\nindex f8bd8cd049..ced92e851c 100644\n--- a/Products/CMFPlone/controlpanel/browser/actions.py\n+++ b/Products/CMFPlone/controlpanel/browser/actions.py\n@@ -1,4 +1,5 @@\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IActionSchema\n from plone.base.interfaces import INewActionSchema\n from plone.base.utils import base_hasattr\n@@ -6,7 +7,6 @@\n from Products.CMFCore.interfaces import IAction\n from Products.CMFCore.interfaces import IActionCategory\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five import BrowserView\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from z3c.form import form\ndiff --git a/Products/CMFPlone/controlpanel/browser/dateandtime.py b/Products/CMFPlone/controlpanel/browser/dateandtime.py\nindex a5d1ab3a2f..d9d606e825 100644\n--- a/Products/CMFPlone/controlpanel/browser/dateandtime.py\n+++ b/Products/CMFPlone/controlpanel/browser/dateandtime.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser.controlpanel import ControlPanelFormWrapper\n from plone.app.registry.browser.controlpanel import RegistryEditForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IDateAndTimeSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n class DateAndTimeControlPanelForm(RegistryEditForm):\ndiff --git a/Products/CMFPlone/controlpanel/browser/error_log_form.py b/Products/CMFPlone/controlpanel/browser/error_log_form.py\nindex 2500840461..7bd67ac821 100644\n--- a/Products/CMFPlone/controlpanel/browser/error_log_form.py\n+++ b/Products/CMFPlone/controlpanel/browser/error_log_form.py\n@@ -1,5 +1,5 @@\n from DateTime import DateTime\n-from Products.CMFPlone import PloneMessageFactory as _\n+from plone.base import PloneMessageFactory as _\n from Products.CMFPlone.utils import safe_nativestring\n from Products.Five import BrowserView\n \ndiff --git a/Products/CMFPlone/controlpanel/browser/filter.py b/Products/CMFPlone/controlpanel/browser/filter.py\nindex 9e9955eb5b..09a3e8209f 100644\n--- a/Products/CMFPlone/controlpanel/browser/filter.py\n+++ b/Products/CMFPlone/controlpanel/browser/filter.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IFilterSchema\n from plone.z3cform import layout\n-from Products.CMFPlone import PloneMessageFactory as _  # NOQA\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\ndiff --git a/Products/CMFPlone/controlpanel/browser/imaging.py b/Products/CMFPlone/controlpanel/browser/imaging.py\nindex f1ac6b1461..a5cb3e943c 100644\n--- a/Products/CMFPlone/controlpanel/browser/imaging.py\n+++ b/Products/CMFPlone/controlpanel/browser/imaging.py\n@@ -1,7 +1,7 @@\n from logging import getLogger\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IImagingSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n log = getLogger('Plone')\ndiff --git a/Products/CMFPlone/controlpanel/browser/language.py b/Products/CMFPlone/controlpanel/browser/language.py\nindex 9b4085c63d..327eee58ec 100644\n--- a/Products/CMFPlone/controlpanel/browser/language.py\n+++ b/Products/CMFPlone/controlpanel/browser/language.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.i18n.interfaces import ILanguageSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n \ndiff --git a/Products/CMFPlone/controlpanel/browser/mail.py b/Products/CMFPlone/controlpanel/browser/mail.py\nindex 44714bd389..4bb7c97ff2 100644\n--- a/Products/CMFPlone/controlpanel/browser/mail.py\n+++ b/Products/CMFPlone/controlpanel/browser/mail.py\n@@ -1,9 +1,9 @@\n from logging import getLogger\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.MailHost.MailHost import MailHostError\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\ndiff --git a/Products/CMFPlone/controlpanel/browser/maintenance.py b/Products/CMFPlone/controlpanel/browser/maintenance.py\nindex 6e0d91c356..c9baf3b9d3 100644\n--- a/Products/CMFPlone/controlpanel/browser/maintenance.py\n+++ b/Products/CMFPlone/controlpanel/browser/maintenance.py\n@@ -3,11 +3,11 @@\n from Acquisition import aq_inner\n from App.config import getConfiguration\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IMaintenanceSchema\n from plone.memoize.view import memoize\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from z3c.form import button\n from z3c.form import form\ndiff --git a/Products/CMFPlone/controlpanel/browser/markup.py b/Products/CMFPlone/controlpanel/browser/markup.py\nindex 6c3db1588c..e6e7949401 100644\n--- a/Products/CMFPlone/controlpanel/browser/markup.py\n+++ b/Products/CMFPlone/controlpanel/browser/markup.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IMarkupSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/navigation.py b/Products/CMFPlone/controlpanel/browser/navigation.py\nindex e6a3d8b117..e005fc6771 100644\n--- a/Products/CMFPlone/controlpanel/browser/navigation.py\n+++ b/Products/CMFPlone/controlpanel/browser/navigation.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INavigationSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/quickinstaller.py b/Products/CMFPlone/controlpanel/browser/quickinstaller.py\nindex 9d4533a3d8..6e59ecbe9a 100644\n--- a/Products/CMFPlone/controlpanel/browser/quickinstaller.py\n+++ b/Products/CMFPlone/controlpanel/browser/quickinstaller.py\n@@ -1,7 +1,7 @@\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INonInstallable\n from plone.memoize import view\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.GenericSetup import EXTENSION\n from Products.GenericSetup.tool import UNKNOWN\ndiff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 7f754b993c..e097435ad7 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -1,7 +1,7 @@\n from App.config import getConfiguration\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IBundleRegistry\n from plone.registry.interfaces import IRegistry\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n from zope.component import getUtility\ndiff --git a/Products/CMFPlone/controlpanel/browser/search.py b/Products/CMFPlone/controlpanel/browser/search.py\nindex 8d60d4bc3e..063e893c18 100644\n--- a/Products/CMFPlone/controlpanel/browser/search.py\n+++ b/Products/CMFPlone/controlpanel/browser/search.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISearchSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n from zope.component import queryUtility\n from zope.schema.interfaces import IVocabularyFactory\ndiff --git a/Products/CMFPlone/controlpanel/browser/security.py b/Products/CMFPlone/controlpanel/browser/security.py\nindex 3b45e30195..170457ef2c 100644\n--- a/Products/CMFPlone/controlpanel/browser/security.py\n+++ b/Products/CMFPlone/controlpanel/browser/security.py\n@@ -1,9 +1,9 @@\n from Acquisition import aq_inner\n from collections import defaultdict\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISecuritySchema\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.utils import migrate_from_email_login\n from Products.CMFPlone.controlpanel.utils import migrate_to_email_login\n from Products.Five.browser import BrowserView\ndiff --git a/Products/CMFPlone/controlpanel/browser/site.py b/Products/CMFPlone/controlpanel/browser/site.py\nindex f9412964f0..0d17b21558 100644\n--- a/Products/CMFPlone/controlpanel/browser/site.py\n+++ b/Products/CMFPlone/controlpanel/browser/site.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISiteSchema\n from plone.formwidget.namedfile.widget import NamedImageFieldWidget\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form import interfaces\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/socialmedia.py b/Products/CMFPlone/controlpanel/browser/socialmedia.py\nindex 9704671325..6cdb1ef2ed 100644\n--- a/Products/CMFPlone/controlpanel/browser/socialmedia.py\n+++ b/Products/CMFPlone/controlpanel/browser/socialmedia.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISocialMediaSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n class SocialControlPanelForm(controlpanel.RegistryEditForm):\ndiff --git a/Products/CMFPlone/controlpanel/browser/tinymce.py b/Products/CMFPlone/controlpanel/browser/tinymce.py\nindex c2d30b50c0..b286e71464 100644\n--- a/Products/CMFPlone/controlpanel/browser/tinymce.py\n+++ b/Products/CMFPlone/controlpanel/browser/tinymce.py\n@@ -1,11 +1,11 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ITinyMCEAdvancedSchema\n from plone.base.interfaces import ITinyMCELayoutSchema\n from plone.base.interfaces import ITinyMCEPluginSchema\n from plone.base.interfaces import ITinyMCEResourceTypesSchema\n from plone.base.interfaces import ITinyMCESchema\n from plone.base.interfaces import ITinyMCESpellCheckerSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form import field\n from z3c.form import group\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\ndiff --git a/Products/CMFPlone/controlpanel/browser/types.py b/Products/CMFPlone/controlpanel/browser/types.py\nindex 41a2f62bb0..b98fe6c347 100644\n--- a/Products/CMFPlone/controlpanel/browser/types.py\n+++ b/Products/CMFPlone/controlpanel/browser/types.py\n@@ -2,6 +2,7 @@\n from operator import itemgetter\n from plone.app.workflow.remap import remap_workflow\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ITypesSchema\n from plone.base.utils import safe_text\n@@ -9,7 +10,6 @@\n from plone.memoize.instance import memoize\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.events import ConfigurationChangedEvent\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups.py b/Products/CMFPlone/controlpanel/browser/usergroups.py\nindex fbe30201c8..330194ac64 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups.py\n@@ -2,12 +2,12 @@\n from Acquisition import aq_inner\n from itertools import chain\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISecuritySchema\n from plone.base.interfaces import IUserGroupsSettingsSchema\n from plone.z3cform import layout\n from Products.CMFCore.permissions import ManagePortal\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.utils import normalizeString\n from Products.Five.browser import BrowserView\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\nindex a5cd6c9110..53d6591743 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\n@@ -1,7 +1,7 @@\n from Acquisition import aq_inner\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\nindex 57fdd24402..2cd097703d 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\nindex 2ea0089388..532050ffdd 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\n@@ -1,8 +1,8 @@\n from Acquisition import aq_inner\n from itertools import chain\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\nindex 0089076bdc..71a4e123b1 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\nindex c4e08cdbb6..8c14b9ad82 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\n@@ -1,9 +1,9 @@\n from Acquisition import aq_inner\n from itertools import chain\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.interfaces import ISiteRoot\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/factory.py b/Products/CMFPlone/factory.py\nindex afa1dbb5b6..e8f9ae365c 100644\n--- a/Products/CMFPlone/factory.py\n+++ b/Products/CMFPlone/factory.py\n@@ -1,7 +1,7 @@\n from logging import getLogger\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INonInstallable\n from plone.registry.interfaces import IRegistry\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.events import SiteManagerCreatedEvent\n from Products.CMFPlone.Portal import PloneSite\n from Products.GenericSetup.tool import SetupTool\ndiff --git a/Products/CMFPlone/relationhelper.py b/Products/CMFPlone/relationhelper.py\nindex 14b4c37c9e..b9cbd3e568 100644\n--- a/Products/CMFPlone/relationhelper.py\n+++ b/Products/CMFPlone/relationhelper.py\n@@ -5,10 +5,10 @@\n from plone.app.linkintegrity.utils import referencedRelationship\n from plone.app.relationfield.event import update_behavior_relations\n from plone.app.uuid.utils import uuidToObject\n+from plone.base import PloneMessageFactory as _\n from plone.dexterity.interfaces import IDexterityContent\n from plone.dexterity.utils import iterSchemataForType\n from Products.CMFCore.interfaces import IContentish\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.relationfield import event\n from z3c.relationfield import RelationValue\n from z3c.relationfield.event import updateRelations\ndiff --git a/Products/CMFPlone/tests/testRegistrationTool.py b/Products/CMFPlone/tests/testRegistrationTool.py\nindex a49561a014..f811068627 100644\n--- a/Products/CMFPlone/tests/testRegistrationTool.py\n+++ b/Products/CMFPlone/tests/testRegistrationTool.py\n@@ -1,4 +1,3 @@\n-from re import T\n from AccessControl import Unauthorized\n from plone.app.testing import TEST_USER_PASSWORD\n from plone.base.interfaces.controlpanel import IMailSchema\n@@ -9,6 +8,7 @@\n from Products.CMFPlone.tests import PloneTestCase\n from Products.CMFPlone.tests.utils import MockMailHost\n from Products.MailHost.interfaces import IMailHost\n+from re import T\n from zope.component import getSiteManager\n from zope.component import getUtility\n \ndiff --git a/Products/CMFPlone/tests/test_login_form.py b/Products/CMFPlone/tests/test_login_form.py\nindex 94dfc4683a..3cf0ecde6a 100644\n--- a/Products/CMFPlone/tests/test_login_form.py\n+++ b/Products/CMFPlone/tests/test_login_form.py\n@@ -1,6 +1,6 @@\n from DateTime import DateTime\n-from plone.app.z3cform.interfaces import IPloneFormLayer\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.app.z3cform.interfaces import IPloneFormLayer\n from Products.CMFCore.permissions import SetOwnProperties\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING\ndiff --git a/news/3742.bugfix b/news/3742.bugfix\nnew file mode 100644\nindex 0000000000..e44271fd2d\n--- /dev/null\n+++ b/news/3742.bugfix\n@@ -0,0 +1,2 @@\n+Import PloneMessageFactory from plone.base. Removes deprecation warnings.\n+[jensens]\n"

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2023-03-17T12:07:49+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.gnome@gmail.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/3aa58d325fec024b0a43a588cf9fdbdbe220c18d

Merge pull request #3742 from plone/pmf-from-base

Import PloneMessageFactory from plone.base

Files changed:
A news/3742.bugfix
M Products/CMFPlone/PloneControlPanel.py
M Products/CMFPlone/browser/contact_info.py
M Products/CMFPlone/browser/interfaces.py
M Products/CMFPlone/browser/login/login.py
M Products/CMFPlone/browser/login/login_help.py
M Products/CMFPlone/browser/login/logout.py
M Products/CMFPlone/browser/login/mail_password.py
M Products/CMFPlone/browser/login/password_reset.py
M Products/CMFPlone/browser/syndication/views.py
M Products/CMFPlone/controlpanel/browser/actions.py
M Products/CMFPlone/controlpanel/browser/dateandtime.py
M Products/CMFPlone/controlpanel/browser/error_log_form.py
M Products/CMFPlone/controlpanel/browser/filter.py
M Products/CMFPlone/controlpanel/browser/imaging.py
M Products/CMFPlone/controlpanel/browser/language.py
M Products/CMFPlone/controlpanel/browser/mail.py
M Products/CMFPlone/controlpanel/browser/maintenance.py
M Products/CMFPlone/controlpanel/browser/markup.py
M Products/CMFPlone/controlpanel/browser/navigation.py
M Products/CMFPlone/controlpanel/browser/quickinstaller.py
M Products/CMFPlone/controlpanel/browser/resourceregistry.py
M Products/CMFPlone/controlpanel/browser/search.py
M Products/CMFPlone/controlpanel/browser/security.py
M Products/CMFPlone/controlpanel/browser/site.py
M Products/CMFPlone/controlpanel/browser/socialmedia.py
M Products/CMFPlone/controlpanel/browser/tinymce.py
M Products/CMFPlone/controlpanel/browser/types.py
M Products/CMFPlone/controlpanel/browser/usergroups.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py
M Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py
M Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py
M Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py
M Products/CMFPlone/factory.py
M Products/CMFPlone/relationhelper.py
M Products/CMFPlone/tests/testRegistrationTool.py
M Products/CMFPlone/tests/test_login_form.py

b"diff --git a/Products/CMFPlone/PloneControlPanel.py b/Products/CMFPlone/PloneControlPanel.py\nindex fa04987c11..d3bdd10096 100644\n--- a/Products/CMFPlone/PloneControlPanel.py\n+++ b/Products/CMFPlone/PloneControlPanel.py\n@@ -3,6 +3,7 @@\n from App.special_dtml import DTMLFile\n from OFS.Folder import Folder\n from OFS.PropertyManager import PropertyManager\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IControlPanel\n from Products.CMFCore.ActionInformation import ActionInformation\n from Products.CMFCore.ActionProviderBase import ActionProviderBase\n@@ -14,7 +15,6 @@\n from Products.CMFCore.utils import getToolByName\n from Products.CMFCore.utils import registerToolInterface\n from Products.CMFCore.utils import UniqueObject\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.PloneBaseTool import PloneBaseTool\n from zope.component.hooks import getSite\n from zope.i18n import translate\ndiff --git a/Products/CMFPlone/browser/contact_info.py b/Products/CMFPlone/browser/contact_info.py\nindex 5b113269a3..1b70a775a6 100644\n--- a/Products/CMFPlone/browser/contact_info.py\n+++ b/Products/CMFPlone/browser/contact_info.py\n@@ -1,9 +1,9 @@\n from email.mime.text import MIMEText\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.browser.interfaces import IContactForm\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/browser/interfaces.py b/Products/CMFPlone/browser/interfaces.py\nindex 732f11e05a..2e08f93b5e 100644\n--- a/Products/CMFPlone/browser/interfaces.py\n+++ b/Products/CMFPlone/browser/interfaces.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from plone.schema import Email\n-from Products.CMFPlone import PloneMessageFactory as _\n from zope import schema\n from zope.interface import Attribute\n from zope.interface import Interface\ndiff --git a/Products/CMFPlone/browser/login/login.py b/Products/CMFPlone/browser/login/login.py\nindex 8bc062b1ba..12f920cd65 100644\n--- a/Products/CMFPlone/browser/login/login.py\n+++ b/Products/CMFPlone/browser/login/login.py\n@@ -1,5 +1,6 @@\n from .utils import has_logged_in\n from plone.app.users.browser.passwordpanel import PasswordPanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IForcePasswordChange\n from plone.base.interfaces import IInitialLogin\n from plone.base.interfaces import ILoginForm\n@@ -8,7 +9,6 @@\n from plone.base.interfaces import ISecuritySchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n from urllib import parse\ndiff --git a/Products/CMFPlone/browser/login/login_help.py b/Products/CMFPlone/browser/login/login_help.py\nindex 5ad934823c..3ad0c50189 100644\n--- a/Products/CMFPlone/browser/login/login_help.py\n+++ b/Products/CMFPlone/browser/login/login_help.py\n@@ -1,5 +1,6 @@\n from email import message_from_string\n from email.header import Header\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ILoginHelpForm\n from plone.base.interfaces import ILoginHelpFormSchema\n from plone.base.interfaces import ISecuritySchema\n@@ -7,7 +8,6 @@\n from plone.base.utils import safe_text\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from smtplib import SMTPException\ndiff --git a/Products/CMFPlone/browser/login/logout.py b/Products/CMFPlone/browser/login/logout.py\nindex 8a986e6136..874dbfb161 100644\n--- a/Products/CMFPlone/browser/login/logout.py\n+++ b/Products/CMFPlone/browser/login/logout.py\n@@ -1,6 +1,6 @@\n+from plone.base import PloneMessageFactory as _\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.utils import transaction_note\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/browser/login/mail_password.py b/Products/CMFPlone/browser/login/mail_password.py\nindex 7281d222ec..ada0ac13e6 100644\n--- a/Products/CMFPlone/browser/login/mail_password.py\n+++ b/Products/CMFPlone/browser/login/mail_password.py\n@@ -1,5 +1,5 @@\n from AccessControl import Unauthorized\n-from Products.CMFPlone import PloneMessageFactory as _\n+from plone.base import PloneMessageFactory as _\n from Products.Five import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n \ndiff --git a/Products/CMFPlone/browser/login/password_reset.py b/Products/CMFPlone/browser/login/password_reset.py\nindex 2728b126ac..6039d58ba7 100644\n--- a/Products/CMFPlone/browser/login/password_reset.py\n+++ b/Products/CMFPlone/browser/login/password_reset.py\n@@ -3,16 +3,16 @@\n from AccessControl.SecurityManagement import newSecurityManager\n from AccessControl.SecurityManagement import setSecurityManager\n from email.header import Header\n+from plone.base import PloneMessageFactory as _\n+from plone.base.interfaces import IInitialLogin\n from plone.base.interfaces import IPasswordResetToolView\n+from plone.base.interfaces import IRedirectAfterLogin\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.base.utils import safe_text\n from plone.base.utils import safeToInt\n from plone.memoize import view\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n-from plone.base.interfaces import IInitialLogin\n-from plone.base.interfaces import IRedirectAfterLogin\n from Products.CMFPlone.PasswordResetTool import ExpiredRequestError\n from Products.CMFPlone.PasswordResetTool import InvalidRequestError\n from Products.CMFPlone.RegistrationTool import get_member_by_login_name\ndiff --git a/Products/CMFPlone/browser/syndication/views.py b/Products/CMFPlone/browser/syndication/views.py\nindex 8e41e7233e..e1e0969cc5 100644\n--- a/Products/CMFPlone/browser/syndication/views.py\n+++ b/Products/CMFPlone/browser/syndication/views.py\n@@ -1,9 +1,9 @@\n from DateTime import DateTime\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.syndication import IFeed\n from plone.base.interfaces.syndication import IFeedSettings\n from plone.base.interfaces.syndication import ISearchFeed\n from plone.z3cform.layout import wrap_form\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five import BrowserView\n from uuid import NAMESPACE_OID\n from uuid import uuid3\ndiff --git a/Products/CMFPlone/controlpanel/browser/actions.py b/Products/CMFPlone/controlpanel/browser/actions.py\nindex f8bd8cd049..ced92e851c 100644\n--- a/Products/CMFPlone/controlpanel/browser/actions.py\n+++ b/Products/CMFPlone/controlpanel/browser/actions.py\n@@ -1,4 +1,5 @@\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IActionSchema\n from plone.base.interfaces import INewActionSchema\n from plone.base.utils import base_hasattr\n@@ -6,7 +7,6 @@\n from Products.CMFCore.interfaces import IAction\n from Products.CMFCore.interfaces import IActionCategory\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five import BrowserView\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from z3c.form import form\ndiff --git a/Products/CMFPlone/controlpanel/browser/dateandtime.py b/Products/CMFPlone/controlpanel/browser/dateandtime.py\nindex a5d1ab3a2f..d9d606e825 100644\n--- a/Products/CMFPlone/controlpanel/browser/dateandtime.py\n+++ b/Products/CMFPlone/controlpanel/browser/dateandtime.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser.controlpanel import ControlPanelFormWrapper\n from plone.app.registry.browser.controlpanel import RegistryEditForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IDateAndTimeSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n class DateAndTimeControlPanelForm(RegistryEditForm):\ndiff --git a/Products/CMFPlone/controlpanel/browser/error_log_form.py b/Products/CMFPlone/controlpanel/browser/error_log_form.py\nindex 2500840461..7bd67ac821 100644\n--- a/Products/CMFPlone/controlpanel/browser/error_log_form.py\n+++ b/Products/CMFPlone/controlpanel/browser/error_log_form.py\n@@ -1,5 +1,5 @@\n from DateTime import DateTime\n-from Products.CMFPlone import PloneMessageFactory as _\n+from plone.base import PloneMessageFactory as _\n from Products.CMFPlone.utils import safe_nativestring\n from Products.Five import BrowserView\n \ndiff --git a/Products/CMFPlone/controlpanel/browser/filter.py b/Products/CMFPlone/controlpanel/browser/filter.py\nindex 9e9955eb5b..09a3e8209f 100644\n--- a/Products/CMFPlone/controlpanel/browser/filter.py\n+++ b/Products/CMFPlone/controlpanel/browser/filter.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IFilterSchema\n from plone.z3cform import layout\n-from Products.CMFPlone import PloneMessageFactory as _  # NOQA\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\ndiff --git a/Products/CMFPlone/controlpanel/browser/imaging.py b/Products/CMFPlone/controlpanel/browser/imaging.py\nindex f1ac6b1461..a5cb3e943c 100644\n--- a/Products/CMFPlone/controlpanel/browser/imaging.py\n+++ b/Products/CMFPlone/controlpanel/browser/imaging.py\n@@ -1,7 +1,7 @@\n from logging import getLogger\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IImagingSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n log = getLogger('Plone')\ndiff --git a/Products/CMFPlone/controlpanel/browser/language.py b/Products/CMFPlone/controlpanel/browser/language.py\nindex 9b4085c63d..327eee58ec 100644\n--- a/Products/CMFPlone/controlpanel/browser/language.py\n+++ b/Products/CMFPlone/controlpanel/browser/language.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.i18n.interfaces import ILanguageSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\n \ndiff --git a/Products/CMFPlone/controlpanel/browser/mail.py b/Products/CMFPlone/controlpanel/browser/mail.py\nindex 44714bd389..4bb7c97ff2 100644\n--- a/Products/CMFPlone/controlpanel/browser/mail.py\n+++ b/Products/CMFPlone/controlpanel/browser/mail.py\n@@ -1,9 +1,9 @@\n from logging import getLogger\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces.controlpanel import IMailSchema\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.MailHost.MailHost import MailHostError\n from Products.statusmessages.interfaces import IStatusMessage\n from z3c.form import button\ndiff --git a/Products/CMFPlone/controlpanel/browser/maintenance.py b/Products/CMFPlone/controlpanel/browser/maintenance.py\nindex 6e0d91c356..c9baf3b9d3 100644\n--- a/Products/CMFPlone/controlpanel/browser/maintenance.py\n+++ b/Products/CMFPlone/controlpanel/browser/maintenance.py\n@@ -3,11 +3,11 @@\n from Acquisition import aq_inner\n from App.config import getConfiguration\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IMaintenanceSchema\n from plone.memoize.view import memoize\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from z3c.form import button\n from z3c.form import form\ndiff --git a/Products/CMFPlone/controlpanel/browser/markup.py b/Products/CMFPlone/controlpanel/browser/markup.py\nindex 6c3db1588c..e6e7949401 100644\n--- a/Products/CMFPlone/controlpanel/browser/markup.py\n+++ b/Products/CMFPlone/controlpanel/browser/markup.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IMarkupSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/navigation.py b/Products/CMFPlone/controlpanel/browser/navigation.py\nindex e6a3d8b117..e005fc6771 100644\n--- a/Products/CMFPlone/controlpanel/browser/navigation.py\n+++ b/Products/CMFPlone/controlpanel/browser/navigation.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INavigationSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/quickinstaller.py b/Products/CMFPlone/controlpanel/browser/quickinstaller.py\nindex 9d4533a3d8..6e59ecbe9a 100644\n--- a/Products/CMFPlone/controlpanel/browser/quickinstaller.py\n+++ b/Products/CMFPlone/controlpanel/browser/quickinstaller.py\n@@ -1,7 +1,7 @@\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INonInstallable\n from plone.memoize import view\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.GenericSetup import EXTENSION\n from Products.GenericSetup.tool import UNKNOWN\ndiff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 7f754b993c..e097435ad7 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -1,7 +1,7 @@\n from App.config import getConfiguration\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import IBundleRegistry\n from plone.registry.interfaces import IRegistry\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.Five.browser import BrowserView\n from Products.statusmessages.interfaces import IStatusMessage\n from zope.component import getUtility\ndiff --git a/Products/CMFPlone/controlpanel/browser/search.py b/Products/CMFPlone/controlpanel/browser/search.py\nindex 8d60d4bc3e..063e893c18 100644\n--- a/Products/CMFPlone/controlpanel/browser/search.py\n+++ b/Products/CMFPlone/controlpanel/browser/search.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISearchSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\n from zope.component import queryUtility\n from zope.schema.interfaces import IVocabularyFactory\ndiff --git a/Products/CMFPlone/controlpanel/browser/security.py b/Products/CMFPlone/controlpanel/browser/security.py\nindex 3b45e30195..170457ef2c 100644\n--- a/Products/CMFPlone/controlpanel/browser/security.py\n+++ b/Products/CMFPlone/controlpanel/browser/security.py\n@@ -1,9 +1,9 @@\n from Acquisition import aq_inner\n from collections import defaultdict\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISecuritySchema\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.utils import migrate_from_email_login\n from Products.CMFPlone.controlpanel.utils import migrate_to_email_login\n from Products.Five.browser import BrowserView\ndiff --git a/Products/CMFPlone/controlpanel/browser/site.py b/Products/CMFPlone/controlpanel/browser/site.py\nindex f9412964f0..0d17b21558 100644\n--- a/Products/CMFPlone/controlpanel/browser/site.py\n+++ b/Products/CMFPlone/controlpanel/browser/site.py\n@@ -1,7 +1,7 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISiteSchema\n from plone.formwidget.namedfile.widget import NamedImageFieldWidget\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form import interfaces\n \n \ndiff --git a/Products/CMFPlone/controlpanel/browser/socialmedia.py b/Products/CMFPlone/controlpanel/browser/socialmedia.py\nindex 9704671325..6cdb1ef2ed 100644\n--- a/Products/CMFPlone/controlpanel/browser/socialmedia.py\n+++ b/Products/CMFPlone/controlpanel/browser/socialmedia.py\n@@ -1,6 +1,6 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISocialMediaSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n \n \n class SocialControlPanelForm(controlpanel.RegistryEditForm):\ndiff --git a/Products/CMFPlone/controlpanel/browser/tinymce.py b/Products/CMFPlone/controlpanel/browser/tinymce.py\nindex c2d30b50c0..b286e71464 100644\n--- a/Products/CMFPlone/controlpanel/browser/tinymce.py\n+++ b/Products/CMFPlone/controlpanel/browser/tinymce.py\n@@ -1,11 +1,11 @@\n from plone.app.registry.browser import controlpanel\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ITinyMCEAdvancedSchema\n from plone.base.interfaces import ITinyMCELayoutSchema\n from plone.base.interfaces import ITinyMCEPluginSchema\n from plone.base.interfaces import ITinyMCEResourceTypesSchema\n from plone.base.interfaces import ITinyMCESchema\n from plone.base.interfaces import ITinyMCESpellCheckerSchema\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.form import field\n from z3c.form import group\n from z3c.form.browser.checkbox import CheckBoxFieldWidget\ndiff --git a/Products/CMFPlone/controlpanel/browser/types.py b/Products/CMFPlone/controlpanel/browser/types.py\nindex 41a2f62bb0..b98fe6c347 100644\n--- a/Products/CMFPlone/controlpanel/browser/types.py\n+++ b/Products/CMFPlone/controlpanel/browser/types.py\n@@ -2,6 +2,7 @@\n from operator import itemgetter\n from plone.app.workflow.remap import remap_workflow\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISearchSchema\n from plone.base.interfaces import ITypesSchema\n from plone.base.utils import safe_text\n@@ -9,7 +10,6 @@\n from plone.memoize.instance import memoize\n from plone.registry.interfaces import IRegistry\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.events import ConfigurationChangedEvent\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\n from Products.statusmessages.interfaces import IStatusMessage\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups.py b/Products/CMFPlone/controlpanel/browser/usergroups.py\nindex fbe30201c8..330194ac64 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups.py\n@@ -2,12 +2,12 @@\n from Acquisition import aq_inner\n from itertools import chain\n from plone.autoform.form import AutoExtensibleForm\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import ISecuritySchema\n from plone.base.interfaces import IUserGroupsSettingsSchema\n from plone.z3cform import layout\n from Products.CMFCore.permissions import ManagePortal\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.utils import normalizeString\n from Products.Five.browser import BrowserView\n from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\nindex a5cd6c9110..53d6591743 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupdetails.py\n@@ -1,7 +1,7 @@\n from Acquisition import aq_inner\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\nindex 57fdd24402..2cd097703d 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupmembership.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\nindex 2ea0089388..532050ffdd 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_groupsoverview.py\n@@ -1,8 +1,8 @@\n from Acquisition import aq_inner\n from itertools import chain\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\nindex 0089076bdc..71a4e123b1 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usermembership.py\n@@ -1,5 +1,5 @@\n+from plone.base import PloneMessageFactory as _\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\nindex c4e08cdbb6..8c14b9ad82 100644\n--- a/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\n+++ b/Products/CMFPlone/controlpanel/browser/usergroups_usersoverview.py\n@@ -1,9 +1,9 @@\n from Acquisition import aq_inner\n from itertools import chain\n+from plone.base import PloneMessageFactory as _\n from plone.protect import CheckAuthenticator\n from Products.CMFCore.interfaces import ISiteRoot\n from Products.CMFCore.utils import getToolByName\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.controlpanel.browser.usergroups import (\n     UsersGroupsControlPanelView,\n )\ndiff --git a/Products/CMFPlone/factory.py b/Products/CMFPlone/factory.py\nindex afa1dbb5b6..e8f9ae365c 100644\n--- a/Products/CMFPlone/factory.py\n+++ b/Products/CMFPlone/factory.py\n@@ -1,7 +1,7 @@\n from logging import getLogger\n+from plone.base import PloneMessageFactory as _\n from plone.base.interfaces import INonInstallable\n from plone.registry.interfaces import IRegistry\n-from Products.CMFPlone import PloneMessageFactory as _\n from Products.CMFPlone.events import SiteManagerCreatedEvent\n from Products.CMFPlone.Portal import PloneSite\n from Products.GenericSetup.tool import SetupTool\ndiff --git a/Products/CMFPlone/relationhelper.py b/Products/CMFPlone/relationhelper.py\nindex 14b4c37c9e..b9cbd3e568 100644\n--- a/Products/CMFPlone/relationhelper.py\n+++ b/Products/CMFPlone/relationhelper.py\n@@ -5,10 +5,10 @@\n from plone.app.linkintegrity.utils import referencedRelationship\n from plone.app.relationfield.event import update_behavior_relations\n from plone.app.uuid.utils import uuidToObject\n+from plone.base import PloneMessageFactory as _\n from plone.dexterity.interfaces import IDexterityContent\n from plone.dexterity.utils import iterSchemataForType\n from Products.CMFCore.interfaces import IContentish\n-from Products.CMFPlone import PloneMessageFactory as _\n from z3c.relationfield import event\n from z3c.relationfield import RelationValue\n from z3c.relationfield.event import updateRelations\ndiff --git a/Products/CMFPlone/tests/testRegistrationTool.py b/Products/CMFPlone/tests/testRegistrationTool.py\nindex a49561a014..f811068627 100644\n--- a/Products/CMFPlone/tests/testRegistrationTool.py\n+++ b/Products/CMFPlone/tests/testRegistrationTool.py\n@@ -1,4 +1,3 @@\n-from re import T\n from AccessControl import Unauthorized\n from plone.app.testing import TEST_USER_PASSWORD\n from plone.base.interfaces.controlpanel import IMailSchema\n@@ -9,6 +8,7 @@\n from Products.CMFPlone.tests import PloneTestCase\n from Products.CMFPlone.tests.utils import MockMailHost\n from Products.MailHost.interfaces import IMailHost\n+from re import T\n from zope.component import getSiteManager\n from zope.component import getUtility\n \ndiff --git a/Products/CMFPlone/tests/test_login_form.py b/Products/CMFPlone/tests/test_login_form.py\nindex 94dfc4683a..3cf0ecde6a 100644\n--- a/Products/CMFPlone/tests/test_login_form.py\n+++ b/Products/CMFPlone/tests/test_login_form.py\n@@ -1,6 +1,6 @@\n from DateTime import DateTime\n-from plone.app.z3cform.interfaces import IPloneFormLayer\n from plone.app.testing import TEST_USER_PASSWORD\n+from plone.app.z3cform.interfaces import IPloneFormLayer\n from Products.CMFCore.permissions import SetOwnProperties\n from Products.CMFCore.utils import getToolByName\n from Products.CMFPlone.testing import PRODUCTS_CMFPLONE_FUNCTIONAL_TESTING\ndiff --git a/news/3742.bugfix b/news/3742.bugfix\nnew file mode 100644\nindex 0000000000..e44271fd2d\n--- /dev/null\n+++ b/news/3742.bugfix\n@@ -0,0 +1,2 @@\n+Import PloneMessageFactory from plone.base. Removes deprecation warnings.\n+[jensens]\n"

