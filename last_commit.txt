Repository: plone.app.event


Branch: refs/heads/master
Date: 2022-11-02T10:18:38+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/92383d45e361842cb84353ab7f970fce7eb3179d

Fixed tests to work with future icalendar.

There ``;VALUE=DATE-TIME`` is not included because it is already the default.
See https://github.com/collective/icalendar/pull/450

Files changed:
A news/450.bugfix
M plone/app/event/tests/test_icalendar.py

b'diff --git a/news/450.bugfix b/news/450.bugfix\nnew file mode 100644\nindex 000000000..fb7318468\n--- /dev/null\n+++ b/news/450.bugfix\n@@ -0,0 +1,2 @@\n+Fixed tests to work with future icalendar, where ``;VALUE=DATE-TIME`` is not included because it is already the default.\n+[maurits]\ndiff --git a/plone/app/event/tests/test_icalendar.py b/plone/app/event/tests/test_icalendar.py\nindex 94aa840ff..87269c0c0 100644\n--- a/plone/app/event/tests/test_icalendar.py\n+++ b/plone/app/event/tests/test_icalendar.py\n@@ -31,6 +31,11 @@ def traverser(self, context, request):\n     def checkOrder(self, text, *order):\n         for item in order:\n             position = text.find(item)\n+            if position == -1:\n+                # ;VALUE=DATE-TIME is the default so it is optional.\n+                # icalendar will remove it in a future release.\n+                # See https://github.com/collective/icalendar/pull/450\n+                position = text.find(item.replace(";VALUE=DATE-TIME", ""))\n             self.assertTrue(\n                 position >= 0, \'menu item "%s" missing or out of order\' % item\n             )\n'

Repository: plone.app.event


Branch: refs/heads/master
Date: 2022-11-02T11:09:04+01:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.event/commit/8a69f0dd94fc079bd062aefaaae6668366021502

Merge pull request #361 from plone/maurits-icalendar-tests

Fixed tests to work with future icalendar.

Files changed:
A news/450.bugfix
M plone/app/event/tests/test_icalendar.py

b'diff --git a/news/450.bugfix b/news/450.bugfix\nnew file mode 100644\nindex 000000000..fb7318468\n--- /dev/null\n+++ b/news/450.bugfix\n@@ -0,0 +1,2 @@\n+Fixed tests to work with future icalendar, where ``;VALUE=DATE-TIME`` is not included because it is already the default.\n+[maurits]\ndiff --git a/plone/app/event/tests/test_icalendar.py b/plone/app/event/tests/test_icalendar.py\nindex 94aa840ff..87269c0c0 100644\n--- a/plone/app/event/tests/test_icalendar.py\n+++ b/plone/app/event/tests/test_icalendar.py\n@@ -31,6 +31,11 @@ def traverser(self, context, request):\n     def checkOrder(self, text, *order):\n         for item in order:\n             position = text.find(item)\n+            if position == -1:\n+                # ;VALUE=DATE-TIME is the default so it is optional.\n+                # icalendar will remove it in a future release.\n+                # See https://github.com/collective/icalendar/pull/450\n+                position = text.find(item.replace(";VALUE=DATE-TIME", ""))\n             self.assertTrue(\n                 position >= 0, \'menu item "%s" missing or out of order\' % item\n             )\n'

