Repository: plone.restapi


Branch: refs/heads/master
Date: 2019-09-12T09:33:26+02:00
Author: Timo Stollenwerk (tisto) <tisto@users.noreply.github.com>
Commit: https://github.com/plone/plone.restapi/commit/62d92991a8046854b487e017c8cd358e3bc5e08f

Use Makefile that build py3/p5.2 as default. (#799)

* Use Makefile that build py3/p5.2 as default.

* Re add p 5.2 version pins.

* Re-add specific pins.

* Add changelog for #800.

* six = 1.11.0

* Unpin pillow

Files changed:
A news/800.feature
M Makefile
M plone-5.2.x.cfg

b'diff --git a/Makefile b/Makefile\nindex d09ba80a..bfe35bda 100644\n--- a/Makefile\n+++ b/Makefile\n@@ -3,7 +3,7 @@\n SHELL := /bin/bash\n CURRENT_DIR:=$(shell dirname $(realpath $(lastword $(MAKEFILE_LIST))))\n \n-version = 2.7\n+version = 3.7\n \n # We like colors\n # From: https://coderwall.com/p/izxssa/colored-makefile-for-golang-projects\n@@ -36,22 +36,31 @@ update: ## Update Make and Buildout\n bin/buildout: bin/pip\n \tbin/pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n+\tbin/pip install black || true\n \t@touch -c $@\n \n+bin/python bin/pip:\n+\tpython$(version) -m venv . || virtualenv --clear --python=python$(version) .\n+\n+py2:\n+\tvirtualenv --clear --python=python2 .\n+\tbin/pip install --upgrade pip\n+\tbin/pip install -r requirements.txt\n+\n .PHONY: Build Plone 4.3\n-build-plone-4.3: .installed.cfg ## Build Plone 4.3\n+build-plone-4.3: py2 ## Build Plone 4.3\n \tbin/pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n \tbin/buildout -c plone-4.3.x.cfg\n \n .PHONY: Build Plone 5.0\n-build-plone-5.0: .installed.cfg ## Build Plone 5.0\n+build-plone-5.0: py2 ## Build Plone 5.0\n \tbin/pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n \tbin/buildout -c plone-5.0.x.cfg\n \n .PHONY: Build Plone 5.1\n-build-plone-5.1: .installed.cfg  ## Build Plone 5.1\n+build-plone-5.1: py2  ## Build Plone 5.1\n \tbin/pip install --upgrade pip\n \tbin/pip install -r requirements.txt\n \tbin/buildout -c plone-5.1.x.cfg\n@@ -62,17 +71,6 @@ build-plone-5.2: .installed.cfg  ## Build Plone 5.2\n \tbin/pip install -r requirements.txt\n \tbin/buildout -c plone-5.2.x.cfg\n \n- ## Build Plone 5.2 with Python 3\n-build-py3:  ## Build Plone 5.2 with Python 3\n-\tvirtualenv --python=python3 .\n-\tbin/pip install --upgrade pip\n-\tbin/pip install -r requirements.txt\n-\tbin/pip install black\n-\tbin/buildout -c plone-5.2.x.cfg\n-\n-bin/python bin/pip:\n-\tvirtualenv --clear --python=python$(version) .\n-\n .PHONY: Test\n test:  ## Test\n \tbin/test\ndiff --git a/news/800.feature b/news/800.feature\nnew file mode 100644\nindex 00000000..9d282ac5\n--- /dev/null\n+++ b/news/800.feature\n@@ -0,0 +1 @@\n+Use Plone 5.2 and Python 3 as default to generate documentation. [timo]\ndiff --git a/plone-5.2.x.cfg b/plone-5.2.x.cfg\nindex ec588316..9829d314 100644\n--- a/plone-5.2.x.cfg\n+++ b/plone-5.2.x.cfg\n@@ -10,3 +10,4 @@ versions=versions\n plone.restapi =\n urllib3 = 1.21.1\n idna = 2.5\n+\n'

