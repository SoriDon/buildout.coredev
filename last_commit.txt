Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-08-29T10:33:04+02:00
Author: ale-rt (ale-rt) <alessandro.pisa@gmail.com>
Commit: https://github.com/plone/plone.dexterity/commit/e63e55abe2530aff7eea522aa46a489272dedece

Avoid looking up behaviors with an empty name

Fixes #110

Files changed:
A news/110.bugfix
M plone/dexterity/schema.py

b'diff --git a/news/110.bugfix b/news/110.bugfix\nnew file mode 100644\nindex 0000000..93f6408\n--- /dev/null\n+++ b/news/110.bugfix\n@@ -0,0 +1 @@\n+Avoid looking up behaviors with an empty name [ale-rt]\ndiff --git a/plone/dexterity/schema.py b/plone/dexterity/schema.py\nindex 93565ea..69a4d04 100644\n--- a/plone/dexterity/schema.py\n+++ b/plone/dexterity/schema.py\n@@ -131,7 +131,7 @@ def behavior_registrations(self, fti):\n         if fti is None:\n             return tuple()\n         registrations = []\n-        for behavior_name in fti.behaviors:\n+        for behavior_name in filter(None, fti.behaviors):\n             registration = queryUtility(IBehavior, name=behavior_name)\n             if registration is None:\n                 # BBB - this case should be deprecated in v 3.0\n'

Repository: plone.dexterity


Branch: refs/heads/master
Date: 2019-09-03T13:24:21+02:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plone.dexterity/commit/76bdf0b12b9a84076b3a7ef3cb2bdd333f9ba4fc

Merge pull request #112 from plone/110-do-not-lookup-faux-behaviors

Avoid looking up behaviors with an empty name

Files changed:
A news/110.bugfix
M plone/dexterity/schema.py

b'diff --git a/news/110.bugfix b/news/110.bugfix\nnew file mode 100644\nindex 0000000..93f6408\n--- /dev/null\n+++ b/news/110.bugfix\n@@ -0,0 +1 @@\n+Avoid looking up behaviors with an empty name [ale-rt]\ndiff --git a/plone/dexterity/schema.py b/plone/dexterity/schema.py\nindex 9d0afa8..444f1b7 100644\n--- a/plone/dexterity/schema.py\n+++ b/plone/dexterity/schema.py\n@@ -131,7 +131,7 @@ def behavior_registrations(self, fti):\n         if fti is None:\n             return tuple()\n         registrations = []\n-        for behavior_name in fti.behaviors:\n+        for behavior_name in filter(None, fti.behaviors):\n             registration = queryUtility(IBehavior, name=behavior_name)\n             if registration is None:\n                 # BBB - this case should be deprecated in v 3.0\n'

