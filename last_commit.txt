Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2016-02-22T16:52:44+01:00
Author: Guido A.J. Stevens (gyst) <guido.stevens@cosent.nl>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/0b849a181603c417d468dd9c7a689ac6b8d8ba96

move hero to content
fixes https://github.com/plone/Products.CMFPlone/issues/974
requires https://github.com/plone/Products.CMFPlone/pull/1374

Files changed:
M CHANGES.rst
M plonetheme/barceloneta/theme/index.html
M plonetheme/barceloneta/theme/rules.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 16e8e2f..43a42ac 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,10 @@ New:
 
 Fixes:
 
+- Move hero to content
+  Issue https://github.com/plone/Products.CMFPlone/issues/974
+  [gyst]
+
 - Add ``barceloneta-mixin-font`` to the registerless profile.
   [pcdummy]
 
diff --git a/plonetheme/barceloneta/theme/index.html b/plonetheme/barceloneta/theme/index.html
index 313f387..e5ec563 100644
--- a/plonetheme/barceloneta/theme/index.html
+++ b/plonetheme/barceloneta/theme/index.html
@@ -33,6 +33,12 @@
         <div id="mainnavigation">
         </div>
       </div>
+      <div id="hero" class="principal">
+        <div class="container">
+          <div class="gigantic">
+          </div>
+        </div>
+      </div>
       <div id="above-content-wrapper">
           <div id="above-content">
           </div>
diff --git a/plonetheme/barceloneta/theme/rules.xml b/plonetheme/barceloneta/theme/rules.xml
index fe53605..4eb0c70 100644
--- a/plonetheme/barceloneta/theme/rules.xml
+++ b/plonetheme/barceloneta/theme/rules.xml
@@ -33,8 +33,10 @@
   <!-- move global nav -->
   <replace css:theme-children="#mainnavigation" css:content-children="#portal-mainnavigation" method="raw" />
 
-  <!-- include view @@hero on homepage only -->
-  <after css:theme="#mainnavigation-wrapper" css:content=".principal" href="/@@hero" css:if-content="body.template-document_view.section-front-page" />
+  <!-- move hero to top -->
+  <replace css:theme-children="#hero .gigantic" css:content-children=".hero"/>
+  <drop css:theme="#hero" css:if-not-content=".hero" />
+  <drop css:content=".hero" />
 
   <!-- full-width breadcrumb -->
   <replace css:content="#viewlet-above-content" css:theme="#above-content" />


Repository: plonetheme.barceloneta


Branch: refs/heads/master
Date: 2016-02-22T17:08:21+01:00
Author: Jens W. Klein (jensens) <jk@kleinundpartner.at>
Commit: https://github.com/plone/plonetheme.barceloneta/commit/d3838e12bb5185b3e81837b453195e59032149b3

Merge pull request #83 from plone/hero_in_content

move hero to content, refs https://github.com/plone/Products.CMFPloneâ€¦

Files changed:
M CHANGES.rst
M plonetheme/barceloneta/theme/index.html
M plonetheme/barceloneta/theme/rules.xml

diff --git a/CHANGES.rst b/CHANGES.rst
index 16e8e2f..43a42ac 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -11,6 +11,10 @@ New:
 
 Fixes:
 
+- Move hero to content
+  Issue https://github.com/plone/Products.CMFPlone/issues/974
+  [gyst]
+
 - Add ``barceloneta-mixin-font`` to the registerless profile.
   [pcdummy]
 
diff --git a/plonetheme/barceloneta/theme/index.html b/plonetheme/barceloneta/theme/index.html
index 313f387..e5ec563 100644
--- a/plonetheme/barceloneta/theme/index.html
+++ b/plonetheme/barceloneta/theme/index.html
@@ -33,6 +33,12 @@
         <div id="mainnavigation">
         </div>
       </div>
+      <div id="hero" class="principal">
+        <div class="container">
+          <div class="gigantic">
+          </div>
+        </div>
+      </div>
       <div id="above-content-wrapper">
           <div id="above-content">
           </div>
diff --git a/plonetheme/barceloneta/theme/rules.xml b/plonetheme/barceloneta/theme/rules.xml
index fe53605..4eb0c70 100644
--- a/plonetheme/barceloneta/theme/rules.xml
+++ b/plonetheme/barceloneta/theme/rules.xml
@@ -33,8 +33,10 @@
   <!-- move global nav -->
   <replace css:theme-children="#mainnavigation" css:content-children="#portal-mainnavigation" method="raw" />
 
-  <!-- include view @@hero on homepage only -->
-  <after css:theme="#mainnavigation-wrapper" css:content=".principal" href="/@@hero" css:if-content="body.template-document_view.section-front-page" />
+  <!-- move hero to top -->
+  <replace css:theme-children="#hero .gigantic" css:content-children=".hero"/>
+  <drop css:theme="#hero" css:if-not-content=".hero" />
+  <drop css:content=".hero" />
 
   <!-- full-width breadcrumb -->
   <replace css:content="#viewlet-above-content" css:theme="#above-content" />


