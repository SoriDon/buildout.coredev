Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2017-08-30T16:32:58+02:00
Author: Johannes Raggam (thet) <thetetet@gmail.com>
Commit: https://github.com/plone/plone.app.z3cform/commit/6f31807f862daf29e36b71bfba8e1de3aef93ca2

Test fixes for changes in plone.app.widgets querystring options.

Files changed:
M CHANGES.rst
M plone/app/z3cform/tests/test_widgets.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9cf4569..2c9400d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Test fixes for changes in plone.app.widgets querystring options.
+  [thet]
+  
 
 3.0.1 (2017-07-03)
 ------------------
diff --git a/plone/app/z3cform/tests/test_widgets.py b/plone/app/z3cform/tests/test_widgets.py
index f783c2a..d43b389 100644
--- a/plone/app/z3cform/tests/test_widgets.py
+++ b/plone/app/z3cform/tests/test_widgets.py
@@ -1001,6 +1001,18 @@ def test_converter_empty_value(self):
         self.assertEqual(converter.toFieldValue(u''), None)
         self.assertEqual(converter.toFieldValue(u'[]'), None)
 
+    @mock.patch(
+        'plone.app.widgets.utils.get_ajaxselect_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_date_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_relateditems_options',
+        new=lambda *args, **kwargs: None
+    )
     def test_widget(self):
         from plone.app.z3cform.widget import QueryStringWidget
         widget = QueryStringWidget(self.request)
@@ -1013,7 +1025,10 @@ def test_widget(self):
                     'indexOptionsUrl': '/@@qsOptions',
                     'previewCountURL': '/@@querybuildernumberofresults',
                     'previewURL': '/@@querybuilder_html_results',
-                },
+                    'patternAjaxSelectOptions': None,
+                    'patternDateOptions': None,
+                    'patternRelateditemsOptions': None,
+                 },
             },
             widget._base_args()
         )


Repository: plone.app.z3cform


Branch: refs/heads/master
Date: 2017-09-03T20:01:27-04:00
Author: Eric Steele (esteele) <eric@esteele.net>
Commit: https://github.com/plone/plone.app.z3cform/commit/8bbea3f90b2a8f70d922fb2fb99e3f3c9ec25690

Merge pull request #75 from plone/thet-qsoptions-fixes

Test fixes for changes in plone.app.widgets querystring options.

Files changed:
M CHANGES.rst
M plone/app/z3cform/tests/test_widgets.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 9cf4569..2c9400d 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -14,8 +14,9 @@ New features:
 
 Bug fixes:
 
-- *add item here*
-
+- Test fixes for changes in plone.app.widgets querystring options.
+  [thet]
+  
 
 3.0.1 (2017-07-03)
 ------------------
diff --git a/plone/app/z3cform/tests/test_widgets.py b/plone/app/z3cform/tests/test_widgets.py
index f783c2a..d43b389 100644
--- a/plone/app/z3cform/tests/test_widgets.py
+++ b/plone/app/z3cform/tests/test_widgets.py
@@ -1001,6 +1001,18 @@ def test_converter_empty_value(self):
         self.assertEqual(converter.toFieldValue(u''), None)
         self.assertEqual(converter.toFieldValue(u'[]'), None)
 
+    @mock.patch(
+        'plone.app.widgets.utils.get_ajaxselect_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_date_options',
+        new=lambda *args, **kwargs: None
+    )
+    @mock.patch(
+        'plone.app.widgets.utils.get_relateditems_options',
+        new=lambda *args, **kwargs: None
+    )
     def test_widget(self):
         from plone.app.z3cform.widget import QueryStringWidget
         widget = QueryStringWidget(self.request)
@@ -1013,7 +1025,10 @@ def test_widget(self):
                     'indexOptionsUrl': '/@@qsOptions',
                     'previewCountURL': '/@@querybuildernumberofresults',
                     'previewURL': '/@@querybuilder_html_results',
-                },
+                    'patternAjaxSelectOptions': None,
+                    'patternDateOptions': None,
+                    'patternRelateditemsOptions': None,
+                 },
             },
             widget._base_args()
         )


