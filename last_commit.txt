Repository: plone.app.content


Branch: refs/heads/master
Date: 2022-07-28T14:23:26-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/77d4dd671ebdb308615b85d2054ad6a8c6289b42

Do not modify the original value. fixes gh-244

Files changed:
A news/244.bugfix
M plone/app/content/browser/vocabulary.py

b'diff --git a/news/244.bugfix b/news/244.bugfix\nnew file mode 100644\nindex 00000000..a53bc47f\n--- /dev/null\n+++ b/news/244.bugfix\n@@ -0,0 +1,2 @@\n+Do not modify the original value\n+[frapell]\ndiff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py\nindex 7db38fc7..3052fe97 100644\n--- a/plone/app/content/browser/vocabulary.py\n+++ b/plone/app/content/browser/vocabulary.py\n@@ -237,8 +237,6 @@ def __call__(self):\n                         val = val[len(base_path) :]\n                     if key not in translate_ignored and isinstance(val, str):\n                         val = translate(_(safe_text(val)), context=self.request)\n-                    if isinstance(val, (bytes, str)):\n-                        val = transform.scrub_html(val)\n                     item[key] = val\n                     if key == "getMimeIcon":\n                         item[key] = None\n'

Repository: plone.app.content


Branch: refs/heads/master
Date: 2022-07-28T14:25:12-03:00
Author: Franco Pellegrini (frapell) <frapell@gmail.com>
Commit: https://github.com/plone/plone.app.content/commit/9c99bb68513b762130b922a0ab6ed77e3c1dc94c

Better changelog entry

Files changed:
M news/244.bugfix

b'diff --git a/news/244.bugfix b/news/244.bugfix\nindex a53bc47..066b427 100644\n--- a/news/244.bugfix\n+++ b/news/244.bugfix\n@@ -1,2 +1,2 @@\n-Do not modify the original value\n+Do not modify the original value in a vocabulary\n [frapell]\n'

Repository: plone.app.content


Branch: refs/heads/master
Date: 2022-08-19T01:11:27+02:00
Author: Maurits van Rees (mauritsvanrees) <maurits@vanrees.org>
Commit: https://github.com/plone/plone.app.content/commit/0021e78c8e0a359beec622e27d8bd465d4562a1c

Merge pull request #250 from plone/frapell-special-characters

Vocabulary: Do not modify the original value

Files changed:
A news/244.bugfix
M plone/app/content/browser/vocabulary.py

b'diff --git a/news/244.bugfix b/news/244.bugfix\nnew file mode 100644\nindex 00000000..066b4272\n--- /dev/null\n+++ b/news/244.bugfix\n@@ -0,0 +1,2 @@\n+Do not modify the original value in a vocabulary\n+[frapell]\ndiff --git a/plone/app/content/browser/vocabulary.py b/plone/app/content/browser/vocabulary.py\nindex 7db38fc7..3052fe97 100644\n--- a/plone/app/content/browser/vocabulary.py\n+++ b/plone/app/content/browser/vocabulary.py\n@@ -237,8 +237,6 @@ def __call__(self):\n                         val = val[len(base_path) :]\n                     if key not in translate_ignored and isinstance(val, str):\n                         val = translate(_(safe_text(val)), context=self.request)\n-                    if isinstance(val, (bytes, str)):\n-                        val = transform.scrub_html(val)\n                     item[key] = val\n                     if key == "getMimeIcon":\n                         item[key] = None\n'

