Repository: plone.dexterity


Branch: refs/heads/master
Date: 2017-01-31T13:51:48+01:00
Author: Matthew Wilkes (MatthewWilkes) <git@matthewwilkes.name>
Commit: https://github.com/plone/plone.dexterity/commit/27a64416f8a469d21212e57dfa08749eaaabcafc

Revert "Ensure site_manager is acquisition-unwrapped when unregistering an FTI, to fix caching of component roots in Zope." to make changes in five.localsitemanager.

This reverts commit a5e42fc38840d7d549619968929b5f68b0647050.

Files changed:
M CHANGES.rst
M plone/dexterity/fti.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 2020716..3e73499 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -17,9 +17,7 @@ New features:
 
 Bug fixes:
 
-- When unregistering FTIs, ensure that the component registry does not have
-  an acquisition wrapper, to allow caching of the registry in zope.interface.
-  [MatthewWilkes]
+- *add item here*
 
 
 2.4.5 (2016-11-19)
diff --git a/plone/dexterity/fti.py b/plone/dexterity/fti.py
index 132565a..8f87db2 100644
--- a/plone/dexterity/fti.py
+++ b/plone/dexterity/fti.py
@@ -428,8 +428,6 @@ def unregister(fti, old_name=None):
 
     notify(SchemaInvalidatedEvent(portal_type))
 
-    # remove acquisition wrapper
-    site_manager = aq_base(site_manager)
     site_manager.unregisterUtility(provided=IDexterityFTI, name=portal_type)
     unregister_factory(fti.factory, site_manager)
 


