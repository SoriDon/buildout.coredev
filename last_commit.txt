Repository: plone.outputfilters


Branch: refs/heads/master
Date: 2022-09-21T17:16:58+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.outputfilters/commit/935fc757247dfe907f037ebcf0e701ae486e4e36

do not return prettified soup after filter

Files changed:
M plone/outputfilters/README.rst
M plone/outputfilters/filters/picture_variants.py

b"diff --git a/plone/outputfilters/README.rst b/plone/outputfilters/README.rst\nindex 31342f9..454b166 100644\n--- a/plone/outputfilters/README.rst\n+++ b/plone/outputfilters/README.rst\n@@ -62,7 +62,7 @@ be applied::\n     >>> portal = layer['portal']\n     >>> str(portal.portal_transforms.convertTo('text/x-html-safe',\n     ...     'test--test', mimetype='text/html', context=portal))\n-    'test\xe2\x80\x94test\\n'\n+    'test\xe2\x80\x94test'\n \n \n How it works\ndiff --git a/plone/outputfilters/filters/picture_variants.py b/plone/outputfilters/filters/picture_variants.py\nindex 552f684..8295e0d 100644\n--- a/plone/outputfilters/filters/picture_variants.py\n+++ b/plone/outputfilters/filters/picture_variants.py\n@@ -47,4 +47,4 @@ def __call__(self, data):\n             elem.replace_with(\n                 self.img2picturetag.create_picture_tag(sourceset, elem.attrs)\n             )\n-        return soup.prettify()\n+        return str(soup)\n"

Repository: plone.outputfilters


Branch: refs/heads/master
Date: 2022-09-21T17:19:59+02:00
Author: Peter Mathis (petschki) <peter.mathis@kombinat.at>
Commit: https://github.com/plone/plone.outputfilters/commit/f642fa3a512c45bc89adb61bdd927d9d336ce305

changenote

Files changed:
A news/56.bugfix

b'diff --git a/news/56.bugfix b/news/56.bugfix\nnew file mode 100644\nindex 0000000..c164526\n--- /dev/null\n+++ b/news/56.bugfix\n@@ -0,0 +1,3 @@\n+Do not return prettified soup after picture variants filter.\n+This prevents adding unneeded newlines.\n+[petschki]\n'

Repository: plone.outputfilters


Branch: refs/heads/master
Date: 2022-09-22T00:35:49+02:00
Author: Peter Mathis (petschki) <petschki@users.noreply.github.com>
Commit: https://github.com/plone/plone.outputfilters/commit/976a083cc5c81b5cbbc2ddf9b80939603e3650b4

Merge pull request #56 from plone/petschki-filter-fix

Files changed:
A news/56.bugfix
M plone/outputfilters/README.rst
M plone/outputfilters/filters/picture_variants.py

b"diff --git a/news/56.bugfix b/news/56.bugfix\nnew file mode 100644\nindex 0000000..c164526\n--- /dev/null\n+++ b/news/56.bugfix\n@@ -0,0 +1,3 @@\n+Do not return prettified soup after picture variants filter.\n+This prevents adding unneeded newlines.\n+[petschki]\ndiff --git a/plone/outputfilters/README.rst b/plone/outputfilters/README.rst\nindex 31342f9..454b166 100644\n--- a/plone/outputfilters/README.rst\n+++ b/plone/outputfilters/README.rst\n@@ -62,7 +62,7 @@ be applied::\n     >>> portal = layer['portal']\n     >>> str(portal.portal_transforms.convertTo('text/x-html-safe',\n     ...     'test--test', mimetype='text/html', context=portal))\n-    'test\xe2\x80\x94test\\n'\n+    'test\xe2\x80\x94test'\n \n \n How it works\ndiff --git a/plone/outputfilters/filters/picture_variants.py b/plone/outputfilters/filters/picture_variants.py\nindex 552f684..8295e0d 100644\n--- a/plone/outputfilters/filters/picture_variants.py\n+++ b/plone/outputfilters/filters/picture_variants.py\n@@ -47,4 +47,4 @@ def __call__(self, data):\n             elem.replace_with(\n                 self.img2picturetag.create_picture_tag(sourceset, elem.attrs)\n             )\n-        return soup.prettify()\n+        return str(soup)\n"

