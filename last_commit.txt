Repository: plone.app.querystring


Branch: refs/heads/master
Date: 2017-01-16T15:59:40+01:00
Author: Vincent Fretin (vincentfretin) <vincent.fretin@gmail.com>
Commit: https://github.com/plone/plone.app.querystring/commit/d431848fa4ef8342e37757e923c1004e4f867f30

Import DateTimeError from DateTime.interfaces, class attribute DateTime.DateTimeError was removed in DateTime 3.0

Files changed:
M CHANGES.rst
M plone/app/querystring/queryparser.py

diff --git a/CHANGES.rst b/CHANGES.rst
index 40e82b7..4b9a705 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -4,19 +4,15 @@ Changelog
 1.4.2 (unreleased)
 ------------------
 
-Breaking changes:
-
-- *add item here*
-
-New features:
-
-- *add item here*
-
 Bug fixes:
 
 - Fix a case, where index modifiers with queries containing ``largerThanRelativeDate`` or ``lessThanRelativeDate`` date operators failed with an ``TypeError``.
   [thet]
 
+- Import DateTimeError from DateTime.interfaces, class attribute
+  DateTime.DateTimeError was removed in DateTime 3.0
+  [vincentfretin]
+
 
 1.4.1 (2016-11-18)
 ------------------
@@ -26,6 +22,7 @@ Bug fixes:
 - Add coding header on python files.
   [gforcada]
 
+
 1.4 (2016-08-18)
 ----------------
 
@@ -91,7 +88,6 @@ Fixes:
   the Collection behavior.
   [thet]
 
-
 1.3.11 (2015-10-30)
 -------------------
 
diff --git a/plone/app/querystring/queryparser.py b/plone/app/querystring/queryparser.py
index 4a12c6d..d1f4f18 100644
--- a/plone/app/querystring/queryparser.py
+++ b/plone/app/querystring/queryparser.py
@@ -1,6 +1,7 @@
 # -*- coding: utf-8 -*-
 from Acquisition import aq_parent
 from collections import namedtuple
+from DateTime.interfaces import DateTimeError
 from DateTime import DateTime
 from plone.app.layout.navigation.root import getNavigationRoot
 from plone.registry.interfaces import IRegistry
@@ -210,11 +211,11 @@ def _moreThanRelativeDate(context, row):
 def _betweenDates(context, row):
     try:
         start_date = DateTime(row.values[0])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         start_date = DateTime(0)
     try:
         end_date = DateTime(row.values[1])
-    except DateTime.DateTimeError:
+    except DateTimeError:
         row = Row(index=row.index,
                   operator=row.operator,
                   values=start_date)


