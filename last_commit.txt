Repository: plone.schema


Branch: refs/heads/master
Date: 2015-11-20T13:06:54+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.schema/commit/f358904baa3692b64fe9d2f91e913363cf529ab0

Use plone i18n domain

Files changed:
M buildout.cfg
M plone/schema/__init__.py
M plone/schema/browser/configure.zcml
M plone/schema/configure.zcml
D rebuild_i18n.sh

diff --git a/buildout.cfg b/buildout.cfg
index 36db86c..b9343df 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -6,9 +6,8 @@ extends =
 package-name = plone.schema
 package-extras = [test]
 
-parts += 
-    createzopecoverage 
-    i18ndude
+parts +=
+    createzopecoverage
     omelette
     flake8
 
@@ -17,11 +16,6 @@ recipe = createzopecoverage
 
 [instance]
 eggs += Pillow
-environment-vars = zope_i18n_compile_mo_files true
-
-[i18ndude]
-recipe = zc.recipe.egg
-eggs = i18ndude
 
 [omelette]
 recipe = collective.recipe.omelette
diff --git a/plone/schema/__init__.py b/plone/schema/__init__.py
index 5877a38..20f9636 100644
--- a/plone/schema/__init__.py
+++ b/plone/schema/__init__.py
@@ -1,5 +1,5 @@
 from zope.i18nmessageid import MessageFactory
-_ = MessageFactory('plone.schema')
+_ = MessageFactory('plone')
 
 
 from .email import Email
diff --git a/plone/schema/browser/configure.zcml b/plone/schema/browser/configure.zcml
index 020952c..e0eb35e 100644
--- a/plone/schema/browser/configure.zcml
+++ b/plone/schema/browser/configure.zcml
@@ -2,7 +2,7 @@
     xmlns="http://namespaces.zope.org/zope"
     xmlns:z3c="http://namespaces.zope.org/z3c"
     xmlns:browser="http://namespaces.zope.org/browser"
-    i18n_domain="plone.schema">
+    i18n_domain="plone">
 
     <include package="z3c.form" file="meta.zcml" />
     <include package="z3c.form" />
diff --git a/plone/schema/configure.zcml b/plone/schema/configure.zcml
index 49fd5fd..a865877 100644
--- a/plone/schema/configure.zcml
+++ b/plone/schema/configure.zcml
@@ -3,7 +3,7 @@
     xmlns:five="http://namespaces.zope.org/five"
     xmlns:i18n="http://namespaces.zope.org/i18n"
     xmlns:zcml="http://namespaces.zope.org/zcml"
-    i18n_domain="plone.schema">
+    i18n_domain="plone">
 
     <i18n:registerTranslations directory="locales" />
 
diff --git a/rebuild_i18n.sh b/rebuild_i18n.sh
deleted file mode 100755
index 2301b30..0000000
--- a/rebuild_i18n.sh
+++ /dev/null
@@ -1,25 +0,0 @@
-#! /bin/sh
-
-PATH=bin:$PATH
-I18NDOMAIN="plone.schema"
-BASE_DIRECTORY="plone/schema"
-
-# Synchronise the templates and scripts with the .pot.
-i18ndude rebuild-pot --pot ${BASE_DIRECTORY}/locales/${I18NDOMAIN}.pot \
-    --merge ${BASE_DIRECTORY}/locales/manual.pot \
-    --create ${I18NDOMAIN} \
-    ${BASE_DIRECTORY}
-
-# Synchronise the resulting .pot with all .po files
-for po in ${BASE_DIRECTORY}/locales/*/LC_MESSAGES/${I18NDOMAIN}.po; do
-    i18ndude sync --pot ${BASE_DIRECTORY}/locales/${I18NDOMAIN}.pot $po
-done
-
-# Synchronise the templates and scripts with the .pot.
-i18ndude rebuild-pot --pot ${BASE_DIRECTORY}/locales/plone.pot \
-    --create plone \
-    ${BASE_DIRECTORY}/configure.zcml \
-    ${BASE_DIRECTORY}/profiles/default
-
-# Report of errors and suspect untranslated messages
-i18ndude find-untranslated ${BASE_DIRECTORY}


Repository: plone.schema


Branch: refs/heads/master
Date: 2015-11-20T16:12:14+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.schema/commit/46d1bff537a75ec8a908c303ea8b495c5f82d755

Remove i18n:registerTranslations directive

Files changed:
M CHANGES.rst
M plone/schema/configure.zcml

diff --git a/CHANGES.rst b/CHANGES.rst
index 7b51d1a..f8eaffe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -3,6 +3,9 @@
 
 Fixes:
 
+- Moved translation to plone.app.locales
+  [staeff]
+
 - Fixed install_requires to specify correct dependencies.
   [gforcada]
 
diff --git a/plone/schema/configure.zcml b/plone/schema/configure.zcml
index a865877..38e21d2 100644
--- a/plone/schema/configure.zcml
+++ b/plone/schema/configure.zcml
@@ -5,8 +5,6 @@
     xmlns:zcml="http://namespaces.zope.org/zcml"
     i18n_domain="plone">
 
-    <i18n:registerTranslations directory="locales" />
-
     <!-- Configure widgets if z3c.form is installed -->
     <include zcml:condition="installed z3c.form" package=".browser" />
 


Repository: plone.schema


Branch: refs/heads/master
Date: 2015-11-20T16:20:20+01:00
Author: Stephan Klinger (staeff) <stephan.klinger@freitag.de>
Commit: https://github.com/plone/plone.schema/commit/60467c835b724d05a6f70e5750d79a419fba857a

Moved translations to plone.app.locales

Files changed:
D plone/schema/locales/es/LC_MESSAGES/plone.schema.po
D plone/schema/locales/manual.pot
D plone/schema/locales/plone.pot
D plone/schema/locales/plone.schema.pot

diff --git a/plone/schema/locales/es/LC_MESSAGES/plone.schema.po b/plone/schema/locales/es/LC_MESSAGES/plone.schema.po
deleted file mode 100644
index c29ce49..0000000
--- a/plone/schema/locales/es/LC_MESSAGES/plone.schema.po
+++ /dev/null
@@ -1,28 +0,0 @@
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 22:46+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: es\n"
-"Language-Name: Spanish\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.schema\n"
-
-#: plone/schema/editor.py:26
-msgid "Email Field"
-msgstr "Campo de Email"
-
-#: plone/schema/interfaces.py:13
-msgid "The specified Email is not valid."
-msgstr "El email especificado no es v√°lido."
-
-#: plone/schema/editor.py:25
-msgid "URI Field"
-msgstr "Campo URI"
-
diff --git a/plone/schema/locales/manual.pot b/plone/schema/locales/manual.pot
deleted file mode 100644
index 0a04f28..0000000
--- a/plone/schema/locales/manual.pot
+++ /dev/null
@@ -1,15 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 20:08+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Domain: plone.schema\n"
-
diff --git a/plone/schema/locales/plone.pot b/plone/schema/locales/plone.pot
deleted file mode 100644
index 49d93c2..0000000
--- a/plone/schema/locales/plone.pot
+++ /dev/null
@@ -1,19 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 20:08+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone\n"
-
diff --git a/plone/schema/locales/plone.schema.pot b/plone/schema/locales/plone.schema.pot
deleted file mode 100644
index d4fb963..0000000
--- a/plone/schema/locales/plone.schema.pot
+++ /dev/null
@@ -1,31 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 22:46+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.schema\n"
-
-#: plone/schema/editor.py:26
-msgid "Email Field"
-msgstr ""
-
-#: plone/schema/interfaces.py:13
-msgid "The specified Email is not valid."
-msgstr ""
-
-#: plone/schema/editor.py:25
-msgid "URI Field"
-msgstr ""
-


Repository: plone.schema


Branch: refs/heads/master
Date: 2015-11-25T11:24:19+01:00
Author: Gil Forcada Codinachs (gforcada) <gil.forcada@freitag.de>
Commit: https://github.com/plone/plone.schema/commit/66acf6ffd5d44a3e3ad53065207c6ff251f077bc

Merge pull request #2 from plone/staeff-merge-translations

Remove own i18n domain

Files changed:
M CHANGES.rst
M buildout.cfg
M plone/schema/__init__.py
M plone/schema/browser/configure.zcml
M plone/schema/configure.zcml
D plone/schema/locales/es/LC_MESSAGES/plone.schema.po
D plone/schema/locales/manual.pot
D plone/schema/locales/plone.pot
D plone/schema/locales/plone.schema.pot
D rebuild_i18n.sh

diff --git a/CHANGES.rst b/CHANGES.rst
index 7b51d1a..f8eaffe 100644
--- a/CHANGES.rst
+++ b/CHANGES.rst
@@ -3,6 +3,9 @@
 
 Fixes:
 
+- Moved translation to plone.app.locales
+  [staeff]
+
 - Fixed install_requires to specify correct dependencies.
   [gforcada]
 
diff --git a/buildout.cfg b/buildout.cfg
index 36db86c..b9343df 100644
--- a/buildout.cfg
+++ b/buildout.cfg
@@ -6,9 +6,8 @@ extends =
 package-name = plone.schema
 package-extras = [test]
 
-parts += 
-    createzopecoverage 
-    i18ndude
+parts +=
+    createzopecoverage
     omelette
     flake8
 
@@ -17,11 +16,6 @@ recipe = createzopecoverage
 
 [instance]
 eggs += Pillow
-environment-vars = zope_i18n_compile_mo_files true
-
-[i18ndude]
-recipe = zc.recipe.egg
-eggs = i18ndude
 
 [omelette]
 recipe = collective.recipe.omelette
diff --git a/plone/schema/__init__.py b/plone/schema/__init__.py
index 5877a38..20f9636 100644
--- a/plone/schema/__init__.py
+++ b/plone/schema/__init__.py
@@ -1,5 +1,5 @@
 from zope.i18nmessageid import MessageFactory
-_ = MessageFactory('plone.schema')
+_ = MessageFactory('plone')
 
 
 from .email import Email
diff --git a/plone/schema/browser/configure.zcml b/plone/schema/browser/configure.zcml
index 020952c..e0eb35e 100644
--- a/plone/schema/browser/configure.zcml
+++ b/plone/schema/browser/configure.zcml
@@ -2,7 +2,7 @@
     xmlns="http://namespaces.zope.org/zope"
     xmlns:z3c="http://namespaces.zope.org/z3c"
     xmlns:browser="http://namespaces.zope.org/browser"
-    i18n_domain="plone.schema">
+    i18n_domain="plone">
 
     <include package="z3c.form" file="meta.zcml" />
     <include package="z3c.form" />
diff --git a/plone/schema/configure.zcml b/plone/schema/configure.zcml
index 49fd5fd..38e21d2 100644
--- a/plone/schema/configure.zcml
+++ b/plone/schema/configure.zcml
@@ -3,9 +3,7 @@
     xmlns:five="http://namespaces.zope.org/five"
     xmlns:i18n="http://namespaces.zope.org/i18n"
     xmlns:zcml="http://namespaces.zope.org/zcml"
-    i18n_domain="plone.schema">
-
-    <i18n:registerTranslations directory="locales" />
+    i18n_domain="plone">
 
     <!-- Configure widgets if z3c.form is installed -->
     <include zcml:condition="installed z3c.form" package=".browser" />
diff --git a/plone/schema/locales/es/LC_MESSAGES/plone.schema.po b/plone/schema/locales/es/LC_MESSAGES/plone.schema.po
deleted file mode 100644
index c29ce49..0000000
--- a/plone/schema/locales/es/LC_MESSAGES/plone.schema.po
+++ /dev/null
@@ -1,28 +0,0 @@
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 22:46+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: es\n"
-"Language-Name: Spanish\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.schema\n"
-
-#: plone/schema/editor.py:26
-msgid "Email Field"
-msgstr "Campo de Email"
-
-#: plone/schema/interfaces.py:13
-msgid "The specified Email is not valid."
-msgstr "El email especificado no es v√°lido."
-
-#: plone/schema/editor.py:25
-msgid "URI Field"
-msgstr "Campo URI"
-
diff --git a/plone/schema/locales/manual.pot b/plone/schema/locales/manual.pot
deleted file mode 100644
index 0a04f28..0000000
--- a/plone/schema/locales/manual.pot
+++ /dev/null
@@ -1,15 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 20:08+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Domain: plone.schema\n"
-
diff --git a/plone/schema/locales/plone.pot b/plone/schema/locales/plone.pot
deleted file mode 100644
index 49d93c2..0000000
--- a/plone/schema/locales/plone.pot
+++ /dev/null
@@ -1,19 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 20:08+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone\n"
-
diff --git a/plone/schema/locales/plone.schema.pot b/plone/schema/locales/plone.schema.pot
deleted file mode 100644
index d4fb963..0000000
--- a/plone/schema/locales/plone.schema.pot
+++ /dev/null
@@ -1,31 +0,0 @@
-# --- PLEASE EDIT THE LINES BELOW CORRECTLY ---
-# SOME DESCRIPTIVE TITLE.
-# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
-msgid ""
-msgstr ""
-"Project-Id-Version: PACKAGE VERSION\n"
-"POT-Creation-Date: 2013-02-10 22:46+0000\n"
-"PO-Revision-Date: YEAR-MO-DA HO:MI +ZONE\n"
-"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
-"Language-Team: LANGUAGE <LL@li.org>\n"
-"MIME-Version: 1.0\n"
-"Content-Type: text/plain; charset=utf-8\n"
-"Content-Transfer-Encoding: 8bit\n"
-"Plural-Forms: nplurals=1; plural=0\n"
-"Language-Code: en\n"
-"Language-Name: English\n"
-"Preferred-Encodings: utf-8 latin1\n"
-"Domain: plone.schema\n"
-
-#: plone/schema/editor.py:26
-msgid "Email Field"
-msgstr ""
-
-#: plone/schema/interfaces.py:13
-msgid "The specified Email is not valid."
-msgstr ""
-
-#: plone/schema/editor.py:25
-msgid "URI Field"
-msgstr ""
-
diff --git a/rebuild_i18n.sh b/rebuild_i18n.sh
deleted file mode 100755
index 2301b30..0000000
--- a/rebuild_i18n.sh
+++ /dev/null
@@ -1,25 +0,0 @@
-#! /bin/sh
-
-PATH=bin:$PATH
-I18NDOMAIN="plone.schema"
-BASE_DIRECTORY="plone/schema"
-
-# Synchronise the templates and scripts with the .pot.
-i18ndude rebuild-pot --pot ${BASE_DIRECTORY}/locales/${I18NDOMAIN}.pot \
-    --merge ${BASE_DIRECTORY}/locales/manual.pot \
-    --create ${I18NDOMAIN} \
-    ${BASE_DIRECTORY}
-
-# Synchronise the resulting .pot with all .po files
-for po in ${BASE_DIRECTORY}/locales/*/LC_MESSAGES/${I18NDOMAIN}.po; do
-    i18ndude sync --pot ${BASE_DIRECTORY}/locales/${I18NDOMAIN}.pot $po
-done
-
-# Synchronise the templates and scripts with the .pot.
-i18ndude rebuild-pot --pot ${BASE_DIRECTORY}/locales/plone.pot \
-    --create plone \
-    ${BASE_DIRECTORY}/configure.zcml \
-    ${BASE_DIRECTORY}/profiles/default
-
-# Report of errors and suspect untranslated messages
-i18ndude find-untranslated ${BASE_DIRECTORY}


