Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-06-26T18:49:07+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/a714661067b0074fadb2d647331442f307a3ef12

do not use f-strings in translations, use proper _ calls and parameters

Files changed:
A news/3564.bugfix
M Products/CMFPlone/controlpanel/browser/resourceregistry.py

b'diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 9f1733e2ed..5885e8dc46 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -67,13 +67,13 @@ def _add(self):\n         bundles = self._bundles\n         if name in bundles:\n             IStatusMessage(self.request).addStatusMessage(\n-                _(f"Record {name} already exists."), "error"\n+                _("Record ${name} already exists.", name=name), "error"\n             )\n             return\n         record = bundles.add(name)\n         self._set_data_from_form(record)\n         IStatusMessage(self.request).addStatusMessage(\n-            _(f"Record {name} created."), "info"\n+            _("Record ${name} created.", name=name), "info"\n         )\n \n     def _update(self):\n@@ -93,7 +93,7 @@ def _update(self):\n                 return\n             if new_name in bundles:\n                 IStatusMessage(self.request).addStatusMessage(\n-                    _(f"Record name {new_name} already taken."), "error"\n+                    _("Record name ${new_name} already taken.", new_name=new_name), "error"\n                 )\n                 return\n             record = bundles[original_name]\n@@ -120,7 +120,7 @@ def _delete(self):\n         bundles = self._bundles\n         if name not in bundles:\n             IStatusMessage(self.request).addStatusMessage(\n-                _(f"Expected record {name} missing."), "error"\n+                _("Expected record ${name} missing.", name=name), "error"\n             )\n             return\n         del bundles[name]\ndiff --git a/news/3564.bugfix b/news/3564.bugfix\nnew file mode 100644\nindex 0000000000..41e162cfc3\n--- /dev/null\n+++ b/news/3564.bugfix\n@@ -0,0 +1,2 @@\n+Remove the use of f-strings for translations\n+[erral]\n'

Repository: Products.CMFPlone


Branch: refs/heads/master
Date: 2022-06-26T19:46:40+02:00
Author: Mikel Larreategi (erral) <mlarreategi@codesyntax.com>
Commit: https://github.com/plone/Products.CMFPlone/commit/3b1d08a2881dcd9c77f6324b44dd9eb808bf7fca

Merge pull request #3564 from plone/erral-fix-use-of-f-strings

do not use f-strings in translations, use proper _ calls and parameters

Files changed:
A news/3564.bugfix
M Products/CMFPlone/controlpanel/browser/resourceregistry.py

b'diff --git a/Products/CMFPlone/controlpanel/browser/resourceregistry.py b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\nindex 9f1733e2ed..5885e8dc46 100644\n--- a/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n+++ b/Products/CMFPlone/controlpanel/browser/resourceregistry.py\n@@ -67,13 +67,13 @@ def _add(self):\n         bundles = self._bundles\n         if name in bundles:\n             IStatusMessage(self.request).addStatusMessage(\n-                _(f"Record {name} already exists."), "error"\n+                _("Record ${name} already exists.", name=name), "error"\n             )\n             return\n         record = bundles.add(name)\n         self._set_data_from_form(record)\n         IStatusMessage(self.request).addStatusMessage(\n-            _(f"Record {name} created."), "info"\n+            _("Record ${name} created.", name=name), "info"\n         )\n \n     def _update(self):\n@@ -93,7 +93,7 @@ def _update(self):\n                 return\n             if new_name in bundles:\n                 IStatusMessage(self.request).addStatusMessage(\n-                    _(f"Record name {new_name} already taken."), "error"\n+                    _("Record name ${new_name} already taken.", new_name=new_name), "error"\n                 )\n                 return\n             record = bundles[original_name]\n@@ -120,7 +120,7 @@ def _delete(self):\n         bundles = self._bundles\n         if name not in bundles:\n             IStatusMessage(self.request).addStatusMessage(\n-                _(f"Expected record {name} missing."), "error"\n+                _("Expected record ${name} missing.", name=name), "error"\n             )\n             return\n         del bundles[name]\ndiff --git a/news/3564.bugfix b/news/3564.bugfix\nnew file mode 100644\nindex 0000000000..41e162cfc3\n--- /dev/null\n+++ b/news/3564.bugfix\n@@ -0,0 +1,2 @@\n+Remove the use of f-strings for translations\n+[erral]\n'

